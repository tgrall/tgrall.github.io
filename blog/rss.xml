<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Tug's Site Blog</title>
        <link>https://tgrall.github.io/blog</link>
        <description>Tug's Site Blog</description>
        <lastBuildDate>Tue, 21 Feb 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[GitHub Copilot: How I use it, and Why I love it]]></title>
            <link>https://tgrall.github.io/blog/2023/02/21/copilot-how-i-use-it-why-i-love-it</link>
            <guid>/2023/02/21/copilot-how-i-use-it-why-i-love-it</guid>
            <pubDate>Tue, 21 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Since its launch, GitHub Copilot has been a hot topic in the developer community. Some people love it, some people hate it, and some people are just curious about it.  I am part of the first group, and I have been using it for more than a year now. I will not go into the details of how Copilot works, but I will share with you my experience with it, and how it has changed my life as a developer.]]></description>
            <content:encoded><![CDATA[<p>Since its launch, GitHub Copilot has been a hot topic in the developer community. Some people love it, some people hate it, and some people are just curious about it.  I am part of the first group, and I have been using it for more than a year now. I will not go into the details of how Copilot works, but I will share with you my experience with it, and how it has changed my life as a developer.</p><p>Copilot will help developers differently depending on the way they work and the phase of the project they are in. I will try to cover as many use cases as possible, but I will not be able to cover all of them. Here are the main uses cases I have for Copilot</p><ul><li>Write code faster</li><li>Create new features much faster</li><li>Learn new things in context</li></ul><p>So let me start by explaining what I do as a developer.</p><p>As you probably know, I am a Solutions Engineer at GitHub, so I am doing different things:</p><ul><li>explaining and showing how GitHub works during customers meetings or developer events</li><li>building demonstrations and tutorials around GitHub</li></ul><p>On a more personal level, I am also a developer, and I am working on a Web site for Windsurfers, Kitesurfers and Wingfoilers: <a href="https://windr.org" target="_blank" rel="noopener noreferrer"><strong>https://windr.org</strong></a>. This project has two main goals:</p><ul><li>continue to develop my skills as a developer, and test new things</li><li>build a "real" online service to let riders log session and compete in Virtual GPS Competitions.</li></ul><p>To make it short, WindR mixes many technologies: JavaScript, TypeScript, Java, Python, Vue, React / ReactNative, Node, Spring, MongoDB, Redis, and Containers/Docker all these are managed in GitHub repositories and deployed on various Cloud Services from <a href="https://azure.microsoft.com/" target="_blank" rel="noopener noreferrer">Azure</a> (<a href="https://azure.microsoft.com/en-us/products/container-apps" target="_blank" rel="noopener noreferrer">Container Apps</a>, <a href="https://azure.microsoft.com/en-us/products/functions/" target="_blank" rel="noopener noreferrer">Azure Functions</a>, <a href="https://azure.microsoft.com/en-us/products/storage/blobs/" target="_blank" rel="noopener noreferrer">Storage</a>, Database), GCP (<a href="https://cloud.google.com/storage" target="_blank" rel="noopener noreferrer">Storage</a>, <a href="https://cloud.google.com/run" target="_blank" rel="noopener noreferrer">Cloud Run</a>) and <a href="https://www.clever-cloud.com/" target="_blank" rel="noopener noreferrer">Clever Cloud</a> (Web, Database, Storage). <em>I have not tried AWS yet, but I will soon</em>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-more-tests-faster">Write more tests... faster<a class="hash-link" href="#write-more-tests-faster" title="Direct link to heading">â€‹</a></h3><p>As part of the WindR project, I have to write many file parsers (GPX, OAO) to extract data from files and do some calculations: top 5 500m, 10s, max speed and many more. </p><p>Writing tests for these parsers is tedious, and I have to do it for each new parser I write. I have to create a file with the data I want to test, and then I have to write the test, and most of these tasks are repetitive.</p><p>The following video shows, how I Copilot is using me in IntelliJ to write a test for my <a href="https://www.motion-gps.com/motion/documentation/oao-file-format.html" target="_blank" rel="noopener noreferrer">OAO Parser</a>:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/IRLMLEfcXEI" title="Write test with Copilot" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe><p>Copilot is using the context of your IDE -- current file, opened tabs, project file--, this is why when I work I keep many files opened in my IDE. In this example I only have 2 files opened:</p><ul><li>the list of values used in the tests</li><li>the tests file</li></ul><p>As you can see, the suggestions are made based on the context of the file I am working on. It was very helpful to have the suggestions giving me 20s, 30s, .. then 100m, 250m 500m based on the context and the values located in the different files.</p><p>In the video, I show the Test suggestions in Java, I have also used Copilot in Javascript for the main application and the <a href="https://windr.org/catalog" target="_blank" rel="noopener noreferrer">product catalog</a> and its API, and also some TypeScript for a new service I am creating.</p><p>Copilot helped me to have a good test coverage for my parser:</p><p><img loading="lazy" alt="OAO Parser Test Coverage" src="/assets/images/001-code-coverage-bb46550c2907a852490861eea0b95bb1.png" width="1032" height="179" class="img_ev3q"></p><p><em>As a developer, I have no excuse to not write tests anymore!</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-code-faster">Write code... faster<a class="hash-link" href="#write-code-faster" title="Direct link to heading">â€‹</a></h3><p>You can find many demonstrations of Copilot where developers are creating applications from scratch, it is pretty cool and impressive. This is more or less what I am showing in the next section. However, most of the time when you are working on a project, you are not creating a new application from scratch, you are working on an existing project, and you are adding new features, or fixing bugs.</p><p>In this case, Copilot is helping me a lot, providing me with suggestions in context and using the coding style of the project. </p><p>The following video shows how I use Copilot to add new UI components in an HTML page:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/k0uVz3OmJGw" title="Write code faster" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe><p>Here, I am using Copilot in VS Code, and I am working on a project that uses EJS templates. I have a page that displays the session details, and I need to add new data in different sections of the page. Each section is using the session data differently:</p><ul><li>take the best in the header</li><li>take the top 5 in the detailed view</li></ul><p>By adding new comments in the HTML file, Copilot can suggest the code I need to add to the page, and the context of the page is used to use the proper HTML elements, a single value for the header, and a list for the detailed view. And as you may have noticed, the suggested code is using the coding style of the project, so I do not have to change the way I code.</p><p>When I am using Copilot this way, I am rarely using the Copilot Window (<code>ctrl+enter</code>), I am using the suggestions directly in the editor. So this is why I can say that you do not have to change the way you code when using Copilot, just code as you usually do, and Copilot will help with some portions of the code almost "transparently".</p><p><em>So you can see now why I am saying that Copilot is helping me to write code faster.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-new-features-faster">Create new features... faster<a class="hash-link" href="#create-new-features-faster" title="Direct link to heading">â€‹</a></h3><p>Most of the time when I work with Copilot I am using the suggestion directly in the editor based on the context of the files I am working on, so using some comments, or simply typing some code. Nevertheless, sometimes I want to create a new feature, and I use Copilot to help me with the design of the skeleton of the feature.</p><p>For example on my Windsurfing site, users should be able to create an image of the session and share it on social networks (<a href="https://windr.org/traces/63af1d96b3335105b2b433b6.png" target="_blank" rel="noopener noreferrer">like this one</a>). I opened VS Code, created a new Python file and typed a comment that describes my feature, something like:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># using selenium and chromedriver as headless browser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># go to https://windr.org/traces/63af1d96b3335105b2b433b6/image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># windown size 800x800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># sleep for 3 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># save screenshot as image.png </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then I use the Copilot Window (<code>ctrl+enter</code>) to get some suggestions. I have to say that I am not a big fan of the Copilot Window, I prefer to use the suggestions directly in the editor, but I have to admit that it is very helpful when you want to create a new feature. </p><p>The following video shows how I use Copilot to create a new feature:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/-JBHy5w94Us" title="Build new features in minutes" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe><p><em>You can see why I am saying that Copilot is helping me to create new features faster</em>, few comments and I have a first implementation. As you can guess I am not using the code as it is, but it is a very good starting point that will allow me to go faster to the "meat" of the feature, and allow me to deploy it faster, evaluate it, and iterate on it. (I am right now reworking this feature, see below)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="learn-new-things-faster">Learn new things... faster<a class="hash-link" href="#learn-new-things-faster" title="Direct link to heading">â€‹</a></h3><p>Copilot is quite handy when you want to learn new programming languages and/or new libraries. For example, I have used it to help me to write some Python, Terraform, and TypeScript code.</p><p>There, I am using a mix of inline suggestions and the Copilot Window, to discover new things. </p><p>One thing I am learning is <a href="https://playwright.dev/" target="_blank" rel="noopener noreferrer">Playwright</a>, to write end-to-end tests; and I want to use it to create screenshots in the feature I have described above - and move from Python to TypeScript.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="and-now-chatgpt">And now... ChatGPT<a class="hash-link" href="#and-now-chatgpt" title="Direct link to heading">â€‹</a></h3><p>With the arrival of <a href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer">ChatGPT</a>, I often have questions about how do I compare Copilot and ChatGPT, and I have a short answer:</p><ul><li><em>I do not compare Copilot and ChatGPT, I use both of them depending on the context.</em></li></ul><p>As a developer, I spend most of my time writing code inside an IDE (<em>IntelliJ, VSCode &amp; Codespaces</em>), and I want to stay focused on my IDE, I do not want to switch to a web browser to use ChatGPT. Based on the uses cases I have described above, I do not "need" an additional tool, Copilot is there and helping me a lot already.</p><p>However, I have started to use ChatGPT to help me "design" some features, a little bit like a conversation with a teammate in a meeting room with a whiteboard, for example asking the following questions:</p><ul><li><em>Which logic I should use to extract the best 500 meters speed in a GPX file?</em></li><li><em>What is the best way to save an HTML page as image programmatically using TypeScript?</em></li></ul><p>ChatGPT can answer the question, suggest some ideas, and I can use it to help me to implement the feature. So far I have not used the code generated by ChatGPT, but I have used the ideas to implement the feature, in my IDEs with the help of Copilot.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's next?<a class="hash-link" href="#whats-next" title="Direct link to heading">â€‹</a></h3><p><strong>Copilot Labs extension for VS Code</strong></p><p>In this article, I have not talked about the <a href="https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-labs" target="_blank" rel="noopener noreferrer">Copilot Labs extension for VS Code</a>, which has interesting features: code explanation, code translation, IDE Brushes, test generation. I am showing all these features when I am doing a live demo of Copilot, but I have not used them yet in my "daily developer work". </p><p>Mostly because, as I explained earlier, I am using Copilot to help me with the code I am writing and do not want to move to another tab in the IDE while I am coding. That said, I have already a few use cases that I want to try with the Copilot Labs: generating tests, and code translation to help me to move some code from JavaScript to TypeScript.</p><p><strong>GitHub Next</strong></p><p>Copilot Labs, and previously Copilot itself, are part of the "<a href="https://githubnext.com/" target="_blank" rel="noopener noreferrer">GitHub Next</a>" initative that <a href="https://githubnext.com/" target="_blank" rel="noopener noreferrer">investigates the future of software development</a>. I am inviting you to look at this Web site and see what is coming next for GitHub, and for developers. Some of the features using AI are very interesting, and I am looking forward to seeing them in action for example:</p><ul><li><a href="https://githubnext.com/projects/copilot-cli/" target="_blank" rel="noopener noreferrer">GitHub Copilot CLI</a> will help me to use the shell in a more productive way</li><li><a href="https://githubnext.com/projects/ai-for-pull-requests/" target="_blank" rel="noopener noreferrer">AI for Pull Requests</a> that will help developers to work on their pull requests (refactoring, reviews, tests, ...)</li></ul><p>I will let you discover the others features and do not hesitate to join the various beta &amp; waitlists.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>As described in the various use cases, I wanted to share with you how Copilot is helping me when I am wearing my developer hat. I have heard sometimes people that are saying that Copilot/AI is replacing developers, and I do not agree with this statement. </p><p>Today, Copilot is helping me to write code faster, or to learn new things, or to create new features, but I am still writing the code, and I am still the one that is responsible for what is implemented. </p><p>I won't say that Copilot is making me a better developer, but it helps me to be more productive, and probably that it will help me to be more creative in the future. Copilot is just an additional tool in my toolbox.</p><p><strong>And you what is your experience with Copilot?</strong></p>]]></content:encoded>
            <category>Github</category>
            <category>development</category>
            <category>Copilot</category>
            <category>AI</category>
            <category>IDE</category>
        </item>
        <item>
            <title><![CDATA[GitHub Self-Hosted Runner Autoscaling with Kubernetes]]></title>
            <link>https://tgrall.github.io/blog/2022/10/16/github-self-hosted-runner-autoscaling-with-kubernetes</link>
            <guid>/2022/10/16/github-self-hosted-runner-autoscaling-with-kubernetes</guid>
            <pubDate>Sun, 16 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[GitHub Self-Hosted Runner Autoscaling with Kubernetes]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="GitHub Self-Hosted Runner Autoscaling with Kubernetes" src="/assets/images/title-a2e6b355dc4209ea1b10a871f2144671.png" width="1158" height="504" class="img_ev3q"></p><p>In this article, you will learn how to use Kubernetes to run GitHub Actions self-hosted runners on-demand. This enables you to auto-scale your runners based on the number of queued jobs, and quickly respond to spikes in workflow activity.</p><p>I will focus on GitHub Enterprise Server, but the same concepts apply to GitHub.com, and this post is based on the work of the <a href="https://github.com/actions-runner-controller/actions-runner-controller" target="_blank" rel="noopener noreferrer">Actions Runner Controller</a> team and <a href="https://github.com/some-natalie" target="_blank" rel="noopener noreferrer">Natalie Somersall</a></p><p>GitHub Actions is a great way to run your CI/CD workflows. However, it can be complex to run a large number of self-hosted runners. Using Kubernetes to auto-scale your runners you can simplify the management of your runners. The <a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/docs/detailed-docs.md" target="_blank" rel="noopener noreferrer"><code>actions-runner-controller</code></a> is a Kubernetes controller that manages self-hosted.</p><p>You can find a video of this article on YouTube:</p><ul><li><a href="https://www.youtube.com/watch?v=6Z4p-qjnKCQ" target="_blank" rel="noopener noreferrer">ðŸŽ¥ GitHub Self-Hosted Runner Autoscaling with Kubernetes</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h5><ul><li><a href="https://docs.github.com/en/enterprise-server@latest/admin/overview/about-github-enterprise-server" target="_blank" rel="noopener noreferrer">GitHub Enterprise Server</a> with an existing organization. I am using version 3.6.1, and my organization is called <code>demo</code></li><li>A Kubernetes cluster, I am using a <a href="https://cloud.google.com/kubernetes-engine" target="_blank" rel="noopener noreferrer">Google Kubernetes Engine (GKE)</a> cluster  <em>(v1.22.12-gke.2300 no autopilot)</em>, not a preference, just that the team I am working with is using GKE. </li><li><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a>, I am using v3.10.1</li></ul><p>In the following section you will:</p><ul><li>create a GitHub App to authenticate the <code>actions-runner-controller</code></li><li>deploy and configure the <code>actions-runner-controller</code></li><li>Test the newly created runners</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-enterprise-server-authentication">GitHub Enterprise Server Authentication<a class="hash-link" href="#github-enterprise-server-authentication" title="Direct link to heading">â€‹</a></h3><p>The Actions Runner Controller must authenticate with GitHub Enterprise Server. </p><p>To authenticate the runner controller against GitHub Enterprise Server you have two options:</p><ul><li>PAT (Personal Access Token)</li><li>GitHub Apps</li></ul><p>Note that the runners can be registered at different levels:</p><ul><li><a href="https://docs.github.com/en/enterprise-server@latest/actions/hosting-your-own-runners/adding-self-hosted-runners#adding-a-self-hosted-runner-to-an-enterprise" target="_blank" rel="noopener noreferrer">Enterprise</a></li><li><a href="https://docs.github.com/en/enterprise-server@latest/actions/hosting-your-own-runners/adding-self-hosted-runners#adding-a-self-hosted-runner-to-an-organization" target="_blank" rel="noopener noreferrer">Organization</a></li><li><a href="https://docs.github.com/en/enterprise-server@latest/actions/hosting-your-own-runners/adding-self-hosted-runners#adding-a-self-hosted-runner-to-a-repository" target="_blank" rel="noopener noreferrer">Repository</a></li></ul><p>In the next steps, you will create a GitHub App to authenticate and use it at the organization level.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-github-app">Create a GitHub App<a class="hash-link" href="#create-a-github-app" title="Direct link to heading">â€‹</a></h3><p>To create a GitHub App, you need to be an admin of the GitHub Enterprise Server instance. You can find more information about GitHub Apps <a href="https://docs.github.com/en/enterprise-server@latest/developers/apps/about-apps" target="_blank" rel="noopener noreferrer">here</a>.</p><ol><li><p>Navigate to your Organization settings.</p><p>For this post, you will create a GitHub App owned by an organization, in the upper-right corner of any page, click your profile photo, then click <strong>Your organizations</strong>. </p><p><img loading="lazy" src="/assets/images/gh-apps-001-99b511d3acce8c4ac003c132f1bbdfe7.png" width="220" height="491" class="img_ev3q"></p><p>Then, to the right of the organization, click <strong>Settings</strong>.</p><p><img loading="lazy" src="/assets/images/gh-apps-002-fd4e80bbfae991c656e82981fb08eb6c.png" width="797" height="118" class="img_ev3q"></p></li><li><p>In the left sidebar, click  <strong> &lt; &gt;Developer settings</strong>.  </p></li><li><p>Click <strong>New GitHub App</strong>.</p></li><li><p>In "GitHub App name", type the name of your app.</p><p><img loading="lazy" src="/assets/images/gh-apps-003-f2d3075759a50f9ebbf59ff405363f70.png" width="478" height="151" class="img_ev3q"></p></li><li><p>Optionally, in "Description", type a description of your app that users will see.</p></li><li><p>In "Homepage URL", type the URL where users can learn more about your app, you can point to the Actions Runner Controller GitHub repository.</p></li><li><p>In "Wehbook", uncheck <strong>Active</strong>.</p></li></ol><ol><li><p>Then configure the permissions for your app. For this post, you will need to select the following permissions: (we will use Organization Runners)</p><ul><li>Repository Permissions<ul><li>Actions (read)</li><li>Metadata (read)</li></ul></li><li>Organization Permissions<ul><li>Self-hosted runners (read / write)</li></ul></li></ul><p>If you want to register the runners at the Repository level, you will need different permissions as documented <a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/docs/detailed-docs.md#deploying-using-github-app-authentication" target="_blank" rel="noopener noreferrer">here</a>.</p></li><li><p>Keep the default values for the other options, and click <strong>Create GitHub App</strong>.</p></li></ol><ol><li>In the next screen, Generate a Private key, and download it. You will need it later. (file <code>arc-private-private-key.pem</code> in the following steps)</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-newly-created-github-app">Install the newly created GitHub App<a class="hash-link" href="#install-the-newly-created-github-app" title="Direct link to heading">â€‹</a></h4><p>In the application settings,</p><ol><li><p>Find the <strong>Install App</strong> button. Click on it.</p></li><li><p>Select the organization where you want to install the app. Then click <strong>Install</strong>.</p></li><li><p>Select "All repositories" and click <strong>Install</strong>.</p><p><img loading="lazy" src="/assets/images/gh-apps-004-65fd8916d3637236f5c61d07bb7a634b.png" width="970" height="643" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-github-actions-runner-controller">Deploy GitHub Actions Runner Controller<a class="hash-link" href="#deploy-github-actions-runner-controller" title="Direct link to heading">â€‹</a></h3><p>You are not ready to deploy the Actions Runner Controller and register it to your GitHub Enterprise Server instance, for this we need:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-the-cert-manager-using-helm">1. Install the Cert Manager using Helm<a class="hash-link" href="#1-install-the-cert-manager-using-helm" title="Direct link to heading">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl create namespace cert-manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> jetstack https://charts.jetstack.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cert-manager jetstack/cert-manager --namespace cert-manager --version v1.9.1 --set </span><span class="token assign-left variable" style="color:#36acaa">installCRDs</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-install-the-actions-runner-controller-using-helm">2. Install the Actions Runner Controller using Helm<a class="hash-link" href="#2-install-the-actions-runner-controller-using-helm" title="Direct link to heading">â€‹</a></h3><ul><li>The GitHub Server URL ( <code>$GITHUB_SERVER_URL</code> in the following steps)</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> actions-runner-controller https://actions-runner-controller.github.io/actions-runner-controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl create namespace actions-runner-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -n actions-runner-system actions-runner-controller actions-runner-controller/actions-runner-controller --version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.21</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> deploy actions-runner-controller -c manager </span><span class="token assign-left variable" style="color:#36acaa">GITHUB_ENTERPRISE_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$GITHUB_SERVER_URL</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"> --namespace actions-runner-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-configure-the-github-app-authentication">3. Configure the GitHub App Authentication<a class="hash-link" href="#3-configure-the-github-app-authentication" title="Direct link to heading">â€‹</a></h3><ul><li>The GitHub App data (that you can get from the GitHub App settings page):<ul><li>The App ID ( <code>$GITHUB_APP_ID</code>)</li><li>The App Private Key file ( <code>$GITHUB_APP_PRIVATE_KEY_FILEPATH</code> )</li><li>The APP Installation ID ( <code>$GITHUB_APP_INSTALLATION_ID</code> ). To get the Application Installation ID, go to the Application Settings Page, and click on the <strong>Install App</strong> button. Then click on the <strong>Configure</strong> button. You will find the Installation ID in the URL of the page. (e.g. <code>https://github.tugdualgrall.com/organizations/{ORG}/settings/installations/{INSTALL_ID}</code> )</li></ul></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create secret generic controller-manager </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -n actions-runner-system </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --from-literal</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">github_app_id</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${GITHUB_APP_ID}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --from-literal</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">github_app_installation_id</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${GITHUB_APP_INSTALLATION_ID}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --from-file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">github_app_private_key</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${GITHUB_APP_PRIVATE_KEY_FILEPATH}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-deploy-and-test-your-first-runner">4. Deploy and Test your first Runner<a class="hash-link" href="#4-deploy-and-test-your-first-runner" title="Direct link to heading">â€‹</a></h3><p>You are now ready to register your runners to your organization. For this, you need to create a <code>RunnerDeployment</code> resource.</p><p>I like to put all my runners in a separate namespace, so let's create it with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl create namespace runners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let's create a new file <code>runner-001.yml</code> with the following content:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions.summerwind.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RunnerDeployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> runner</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> runners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">organization</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> arc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> gke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl apply -f runner-001.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will deploy a runner in the <code>runners</code> namespace, and register it to the <code>demo</code> organization. .</p><p>You can check the status of the runner with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl get runner -n runners</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                     ENTERPRISE   ORGANIZATION   REPOSITORY   GROUP     LABELS                       STATUS    MESSAGE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">runner-001-hp7jc-zhs66                demo                        Default   </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"arc"</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">"kubernetes"</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">"gke"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">   Pending             3s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the runner is ready, you can check the organization settings page, and you will see the new runner:</p><p><img loading="lazy" src="/assets/images/org-001-bb4b3caca9a7a450e04cbee3f8819716.png" width="1275" height="450" class="img_ev3q"></p><p>You can now use your runner, for this, create a new workflow file <code>.github/workflows/test.yml</code> in one of your repositories, and add the following content:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> arc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Hello world action step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo Hello world</span><span class="token tag" style="color:#00009f">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you have manually triggered the workflow, you will see the runner active on the organization settings page:</p><p><img loading="lazy" src="/assets/images/org-003-19c7e4d9c83a7732dd23fb06644e0ef7.png" width="788" height="173" class="img_ev3q"></p><p>You can increase the number of runners by updating the <code>replicas</code> value in the <code>RunnerDeployment</code> resource: <code>replicas: 2</code>, once you have updated the resource, you will see the new runner in the organization settings page.</p><p><img loading="lazy" src="/assets/images/org-002-d83203b1f7ab506b015050fa1fa14d1d.png" width="1269" height="444" class="img_ev3q"></p><p>These runners are ephemeral, which means that they are waiting for a Job, and once the Jon is done the Pod used by the runner is deleted and recreated.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5--about-the-runner-images">5- About the Runner Images<a class="hash-link" href="#5--about-the-runner-images" title="Direct link to heading">â€‹</a></h3><p>The Actions Runner Controller provides three Runner container images, available on Docker Hub and <a href="https://github.com/orgs/actions-runner-controller/packages?repo_name=actions-runner-controller" target="_blank" rel="noopener noreferrer">GitHub Container Registry</a>:</p><ul><li><a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/runner/actions-runner.dockerfile" target="_blank" rel="noopener noreferrer">actions-runner</a></li><li><a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/runner/actions-runner-dind.dockerfile" target="_blank" rel="noopener noreferrer">actions-runner-dind</a></li><li><a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/runner/actions-runner-dind-rootless.dockerfile" target="_blank" rel="noopener noreferrer">actions-runner-dind-rootless</a></li></ul><p>The <code>actions-runner</code> image is the default image used by the controller, it is a minimal image with the runner installed. The other images are based on the <code>actions-runner</code> image, and add <code>Docker in Docker</code> capabilities.</p><p>Note: </p><blockquote><p>As you may have seen the runner pods have 2 containers, the <code>runner</code> container, and the <code>dind</code> container. The <code>dind</code> container to use docker.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n runners -o </span><span class="token assign-left variable" style="color:#36acaa">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"{.items[*].spec.containers[*].image}"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">tr</span><span class="token plain"> -s </span><span class="token string" style="color:#e3116c">'[[:space:]]'</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'\n'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">uniq</span><span class="token plain"> -c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Results:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> docker:dind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> summerwind/actions-runner:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p>When using Docker in Docker "DinD, you need privileged access to the host; so if you are running in an environment where it is not possible, you can run a separate VM to have a custom runner dedicated to Docket tasks and actions. You can also test the <a href="https://github.com/actions-runner-controller/actions-runner-controller/pkgs/container/actions-runner-controller%2Factions-runner-dind-rootless" target="_blank" rel="noopener noreferrer"><code>actions-runner-dind-rootless</code> image</a>, see <a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/docs/detailed-docs.md#runner-with-rootless-dind" target="_blank" rel="noopener noreferrer">documentation</a> - I have not tested this image yet.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this blog post, we have seen how to deploy a self-hosted runner on Kubernetes, and how to use it to run GitHub Actions workflows:</p><ul><li>install the Actions Runner Controller</li><li>configure the GitHub App Authentication</li><li>deploy and test your first runner</li></ul><p>The <a href="https://github.com/actions-runner-controller/actions-runner-controller/blob/master/docs/detailed-docs.md" target="_blank" rel="noopener noreferrer">Actions Runner Controller documentation</a> contains additional information about the various resources and options available.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-video">ðŸŽ¥ Video<a class="hash-link" href="#-video" title="Direct link to heading">â€‹</a></h3><p>See the Actions Runner Controller in action in this video:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/y4BKdLjKEvs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
            <category>github</category>
            <category>actions</category>
            <category>automation</category>
            <category>kubernetes</category>
            <category>cicd</category>
            <category>devops</category>
        </item>
        <item>
            <title><![CDATA[Getting Started with GitHub Releases]]></title>
            <link>https://tgrall.github.io/blog/2022/02/08/getting-started-with-github-releases</link>
            <guid>/2022/02/08/getting-started-with-github-releases</guid>
            <pubDate>Tue, 08 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[In the following video, I show how to create a new product release with GitHub. This example shows how to:]]></description>
            <content:encoded><![CDATA[<p>In the following <a href="https://www.youtube.com/embed/Gw2vB18X3sQ" target="_blank" rel="noopener noreferrer">video</a>, I show how to create a new product release with GitHub. This example shows how to:</p><ul><li><a href="https://docs.github.com/en/repositories/releasing-projects-on-github" target="_blank" rel="noopener noreferrer">Create a new release</a>, and generate <a href="https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes" target="_blank" rel="noopener noreferrer">release notes</a> from PRs</li><li>Upload a Maven artifact into GitHub Packages with <a href="https://docs.github.com/en/actions/publishing-packages/publishing-java-packages-with-maven" target="_blank" rel="noopener noreferrer">Actions</a></li><li>Generate new documentation site with <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages" target="_blank" rel="noopener noreferrer">GitHub Pages</a></li><li>Use GitHub <a href="https://docs.github.com/en/discussions" target="_blank" rel="noopener noreferrer">Discussions</a> to involve your community.</li></ul><iframe width="560" height="315" src="https://www.youtube.com/embed/Gw2vB18X3sQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
            <category>github</category>
            <category>actions</category>
            <category>automation</category>
            <category>release</category>
            <category>packages</category>
            <category>documentation</category>
        </item>
        <item>
            <title><![CDATA[Use Private Actions with your Team]]></title>
            <link>https://tgrall.github.io/blog/2022/01/24/share-private-actions-enterprise</link>
            <guid>/2022/01/24/share-private-actions-enterprise</guid>
            <pubDate>Mon, 24 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[A long-awaited feature is now available on GitHub: share actions in your workflows in your enterprise from Internal Repositories ðŸ¤– !]]></description>
            <content:encoded><![CDATA[<p>A long-awaited feature is now available on GitHub: share <strong>actions</strong> in your workflows in your enterprise from Internal Repositories ðŸ¤– !</p><p>When a developer does not find a suitable GitHub Action in the <a href="http://github.com/marketplace" target="_blank" rel="noopener noreferrer">Marketplace</a>, they can create their own, something that I have documented in the "<a href="/blog/2021/10/30/how-to-write-a-github-action">How to Write Custom GitHub Action</a>" post.</p><p>Until today, Actions had to be stored in a public repository, to allow other repositories to use them in workflows <em>(or take a complex approach)</em>. This has changed ðŸŽ‰.</p><p>Now you can put your actions in an <a href="https://docs.github.com/en/enterprise-cloud@latest/repositories/creating-and-managing-repositories/about-repositories#about-internal-repositories" target="_blank" rel="noopener noreferrer">internal</a> repository; repositories visible to your whole enterprise.</p><p>Once your repository visibility is set to "Internal", in the <strong>Settings</strong> pages, click in the <strong>Actions</strong> section and select the proper <strong>Access</strong> configuration:</p><p><img loading="lazy" alt="GitHub Actions Access" src="/assets/images/01-action-access-0963bddec60ab934f92635662808ba03.png" width="761" height="386" class="img_ev3q"></p><p>The following video shows this feature in action:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/IC58NsaiOuI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
            <category>github</category>
            <category>actions</category>
            <category>automation</category>
            <category>javascript</category>
        </item>
        <item>
            <title><![CDATA[Write GitHub Action: Checks and Annotations API (Part 2)]]></title>
            <link>https://tgrall.github.io/blog/2021/11/07/how-to-write-a-github-action-annotation-api</link>
            <guid>/2021/11/07/how-to-write-a-github-action-annotation-api</guid>
            <pubDate>Sun, 07 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In the first blog post of this series, I have explained how to create a custom GitHub Action that is interesting when you do not find the action that you need on the GitHub Marketplace.]]></description>
            <content:encoded><![CDATA[<p>In the <a href="/blog/2021/10/30/how-to-write-a-github-action">first blog post</a> of this series, I have explained how to create a custom GitHub Action that is interesting when you do not find the action that you need on the <a href="https://github.com/marketplace" target="_blank" rel="noopener noreferrer">GitHub Marketplace</a>.</p><p>I will now focus on some interesting API that you can use when building an action: <a href="https://docs.github.com/en/rest/reference/checks#create-a-check-run" target="_blank" rel="noopener noreferrer">Checks</a> &amp; <a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run" target="_blank" rel="noopener noreferrer">Annotations</a>.</p><p>It is import, when a workflow is running to provide visual feedback to the user. This is where the checks and annotation API is handy as it allows you for example indicates to the user that a specific step has failed ( âŒ ) or was successfully ( âœ… ) executed; and using the API it is also possible to create a detailed annotation that points to a specific line of code; this helping the user to understand what is going on in the workflow.</p><p>The following screenshot shows the annotation API in action:</p><p><img loading="lazy" alt="Workflow Annotations" src="/assets/images/004-annotations-fb2a1fce4c69c2a5a0fac8864f5d8adc.png" width="649" height="240" class="img_ev3q"></p><p>ðŸ“— In this second post, you will learn how to:</p><ol><li>Create custom Checks</li><li>Add some detailed annotation with reference to source code (lines) with error</li><li>Deploy the action</li></ol><p>If you prefer the video version of this post go to <a href="https://www.youtube.com/watch?v=NF7kqYowzLA" target="_blank" rel="noopener noreferrer">Github Actions: Create custom Checks and Annotations
</a>.</p><p>It is time now to dive into the example!</p><p>In this new example, you will simply add few lines of code to the action that you have created in the previous post. If you have not yet created the action, please refer to the previous post or take the source from the <a href="https://github.com/tgrall/check-files-action/tree/v1.0.0" target="_blank" rel="noopener noreferrer">v1.0.0 release of the <code>tgrall/check-files-action</code></a>.</p><p>In the first version, the action simply use <code>core.info()</code> to log a message or <code>core.setFailed()</code> to raise an annotation. </p><p>The goal now, is to check if the <code>README.md</code> file starts with a title, and if not, raise create an annotation that point to the first line of the file. <em>(As mentioned in the previous post, I am not trying to create an action that you can reuse directly but use this to discover and learn the API related to Actions &amp; Workflows)</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-if-the-readmemd-file-starts-with-a-title">Check if the <code>README.md</code> file starts with a title<a class="hash-link" href="#check-if-the-readmemd-file-starts-with-a-title" title="Direct link to heading">â€‹</a></h2><p>So we need to add a new function in our action that check if the file starts with a title <em>(a markdown header using the <code>#</code> character)</em>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-function-to-test-the-content-of-the-readmemd-file">Creating a new function to test the content of the <code>README.md</code> file<a class="hash-link" href="#creating-a-new-function-to-test-the-content-of-the-readmemd-file" title="Direct link to heading">â€‹</a></h3><p>I have used GitHub Copilot to create a new function that read the file and chec if it starts with a title, inclusing a small regular expression to remove all empty lines. </p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// create a function that checks if the file starts with a markdown header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkFileStartsWithHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">filePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">promises</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'utf8'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fileContent</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// remove all empty lines ad the beginning of the file</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        fileContent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fileContent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">^\s*\n</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-flags" style="color:#36acaa">gm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileContent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'#'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">File </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">filePath</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> starts with a header</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFailed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">File </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">filePath</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> does not start with a header</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function receive the path to the file, open and read the content, then:</p><ul><li>on line 7, remove all the empty lines of the file using a regular expression generated by <a href="https://copilot.github.com" target="_blank" rel="noopener noreferrer">GitHub Copilot</a>. <em>(See the video to view it in action; also I remove all the empty line for simplicity)</em></li><li>on line 9, the function checks if the string start with a <code>#</code> character. If it does, it returns true, otherwise it returns false.</li></ul><p>I kept the comments in the snippet to let you test <a href="https://copilot.github.com" target="_blank" rel="noopener noreferrer">GitHub Copilot</a> if you have access to technical preview.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calling-the-new-function">Calling the new function<a class="hash-link" href="#calling-the-new-function" title="Direct link to heading">â€‹</a></h3><p>Before testing the new version of the action, you must call this method from the main method of the action.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token method function property-access" style="color:#d73a49">checkFileStartsWithHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"README.md"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-check-with-annotation">Creating a Check with Annotation<a class="hash-link" href="#creating-a-check-with-annotation" title="Direct link to heading">â€‹</a></h2><p>Now that the aciton has been tested, I will create a new check and annotation. </p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkFileStartsWithHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"README.md"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// get token for octokit</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getInput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'repo-token'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> octokit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">github</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">getOctokit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// call octokit to create a check with annotation and details</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> check </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> octokit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">checks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">owner</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">repo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">repo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">repo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Readme Validator'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">head_sha</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sha</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'completed'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">conclusion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'failure'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'README.md must start with a title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">summary</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Please use markdown syntax to create a title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">annotations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'README.md'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">start_line</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">end_line</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">annotation_level</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'failure'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'README.md must start with a header'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">start_column</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">end_column</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>line 3: call the function to check if the file starts with a title, and if not, raise an annotation</li><li>lines 6-7: get the token for octokit, this will allow the action to call the GitHub REST API (see line 11)</li><li>line 11: call the GitHub REST API to create a check with annotation and details.</li></ul><p>This brief call is creating a new Check with an Annotation to point the user to the proper file and lines, as you can see below, the user is informed that the line 1 in <code>README.md</code> should be a title.</p><p><img loading="lazy" alt="Workflow Annotations" src="/assets/images/005-annotations-result-4735a21faa12f44f18caa95529f094e7.png" width="1326" height="187" class="img_ev3q"></p><p>The annotation objects are defined in the <a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run--parameters" target="_blank" rel="noopener noreferrer">GitHub API documentation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="video">Video<a class="hash-link" href="#video" title="Direct link to heading">â€‹</a></h2><iframe width="560" height="315" src="https://www.youtube.com/embed/NF7kqYowzLA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
            <category>github</category>
            <category>actions</category>
            <category>automation</category>
            <category>javascript</category>
        </item>
        <item>
            <title><![CDATA[How to Write Custom GitHub Action (Part 1)]]></title>
            <link>https://tgrall.github.io/blog/2021/10/30/how-to-write-a-github-action</link>
            <guid>/2021/10/30/how-to-write-a-github-action</guid>
            <pubDate>Sat, 30 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Automation is a key element of modern software development and deployment. GitHub with GitHub Actions allows you to automate many tasks, starting with your continuous integration and continuous deployment... but GitHub Actions a lot more than a CI/CD, you can use it for provisioning your environments, automating some project management tasks. However, it is not the purpose of this post, where I want to focus on the development of your own Github Action!]]></description>
            <content:encoded><![CDATA[<p>Automation is a key element of modern software development and deployment. GitHub with GitHub Actions allows you to automate many tasks, starting with your <strong>continuous integration</strong> and <strong>continuous deployment</strong>... but GitHub Actions a lot more than a CI/CD, you can use it for provisioning your environments, automating some project management tasks. However, it is not the purpose of this post, where I want to focus on the development of your own Github Action!</p><p>An "Action" is the reusable component of a workflow, and when you create your automation you will start by searching the <a href="https://github.com/marketplace?type=actions" target="_blank" rel="noopener noreferrer">GitHub Marketplace</a> to look for actions to achieve a specific task. In addition to the thousands of actions available on the marketplace, and available in open source communities, you can create your own actions. </p><p>This blog post will guide you using a concrete example, through the steps to create your actions, and this is just "my version" of the official <a href="https://docs.github.com/en/actions/creating-actions" target="_blank" rel="noopener noreferrer">Creating Actions</a> documentation chapter.</p><p>Let's say for example that you want to enforce the fact that your repositories have always a <code>README.md </code>and a <code>LICENSE</code> file. And when the repository is not compliant with these rules the workflow should fail and provide clear information to the user.</p><p>The following screenshot shows messages and alerts raised by the actions during an integration workflow:</p><p><img loading="lazy" alt="Workflow Checks" src="/assets/images/001-checks-f08ed584e3c2e02bab7997770ecbfbc0.png" width="565" height="299" class="img_ev3q"></p><p>ðŸ“• In this first post, you will learn how to:</p><ol><li>Create an action</li><li>Publish the action</li><li>Use the action in a workflow</li><li>Add some logic to control the workflow's success or failure.</li></ol><p>ðŸ“— In a second post, you will learn how to:</p><ol><li>Create custom Checks</li><li>Add some detailed annotation with reference to source code (lines) with error</li><li>Deploy the action</li></ol><p>If you prefer a video version of it, take a look to "<a href="https://www.youtube.com/embed/kKbIEPsLj88" target="_blank" rel="noopener noreferrer">Build Your Own Action</a>" on YouTube.</p><p>It is time now to dive into the example!</p><blockquote><p><em>Note: the goal is not to create a real action that you can use as it is in your workflows, but to focus on the development an Action and use GitHub APIs.</em></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-javascript-action">Create a Javascript Action<a class="hash-link" href="#create-a-javascript-action" title="Direct link to heading">â€‹</a></h2><p>You can write an action in Javascript/TypeScript, or using a Docker Container. In this example, you will learn how do it in  Javascript.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1--add-a-new-github-repository">1- Add a new Github Repository<a class="hash-link" href="#1--add-a-new-github-repository" title="Direct link to heading">â€‹</a></h3><p>The action will be located in a public repository to be consumed by the workflows, so let's create a new repository.</p><p>I am using the <a href="https://cli.github.com/" target="_blank" rel="noopener noreferrer">https://cli.github.com/</a>, if you do not have it, you can create the repository from GitHub Website and clone the repository locally.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gh repo create &lt;YOUR-ORG&gt;/check-files-action \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --public \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --gitignore "Node" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --license "ISC" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --enable-wiki=false \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --description "My first GitHub Action" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This the <a href="https://cli.github.com/manual/gh_repo_create" target="_blank" rel="noopener noreferrer"><code>gh repo create</code></a> command, with these parameters, creates the repository and clone it in one step.</p><p>You can now open the <code>check-files-action</code> folder with your favorite editor, in my case VSCode</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">code check-files-action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are interested to see the sample code you can look at this repository:</p><ul><li><a href="https://github.com/tgrall/check-files-action" target="_blank" rel="noopener noreferrer">https://github.com/tgrall/check-files-action</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2--initialize-the-node-project--add-dependencies">2- Initialize the Node project &amp; add dependencies<a class="hash-link" href="#2--initialize-the-node-project--add-dependencies" title="Direct link to heading">â€‹</a></h3><p>2.1 - In the project directory, run the <code>npm</code> command to initialize the application</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm init -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.2 - Add Dependencies</p><p>GitHub Actions comes with a toolkit to interact with the GitHub and Workflows APIs:</p><ul><li><a href="https://www.npmjs.com/package/@actions/core" target="_blank" rel="noopener noreferrer"><code>@actions/core</code></a> : Core functions for setting results, logging, registering secrets, and exporting variables across actions</li><li><a href="https://www.npmjs.com/package/@actions/github" target="_blank" rel="noopener noreferrer"><code>@actions/github</code></a> : returns an authenticated Octokit client. See <a href="https://octokit.github.io/rest.js" target="_blank" rel="noopener noreferrer">https://octokit.github.io/rest.js</a> for the API.</li></ul><p>Install these dependencies with the following commands:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install @actions/core @actions/github</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3--update-the-gitignore-file">3- Update the .gitignore file<a class="hash-link" href="#3--update-the-gitignore-file" title="Direct link to heading">â€‹</a></h3><p>The Workflow runners will use your project repository to get the code and execute it directly. So all information needed for the execution of the action must be present.</p><p>This is why you must keep the <code>node_modules</code> and related directories (<code>dist</code>).</p><p>ðŸš¨ We need to be sure that the dependencies are part of the project, so for this, we need to remove the <code>node_modules</code> and <code>dist</code> entries from the <code>.gitignore</code> file.</p><p>So edit the .gitignore file and comment the node_modules line:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Nuxt.js build / generate output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># dist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Dependency directories</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># node_modules/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4--add-the-metadata-and-main-javascript-files">4- Add the metadata and main Javascript files<a class="hash-link" href="#4--add-the-metadata-and-main-javascript-files" title="Direct link to heading">â€‹</a></h3><p>The action is define by an <code>action.yml</code> located in the root directory of your project.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'File Check Action'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'An action that checks if the LICENSE and README.md files exists'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">runs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">using</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'node12'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">main</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'index.js'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the next blog post, I will go into more detail about this configuration file. For now, let's keep it as simple as possible.</p><p>As defined in the <code>action.yml</code>, you need to create an <code>index.js</code> file. This js file is the entry point for the logic of your action.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@actions/core'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> github </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@actions/github'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">notice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Check File Action called!!!'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFailed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This first version of the Action is simply printing a message when called by a workflow.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5--deploy-the-action">5- "Deploy" the action<a class="hash-link" href="#5--deploy-the-action" title="Direct link to heading">â€‹</a></h3><p>As mentioned before, a workflow references Action using the Github repository location. This means that when I talk about deployment, it is simply pushing the code in the repository.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "first action test"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push origin main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-action-in-a-workflow">Use the action in a workflow<a class="hash-link" href="#use-the-action-in-a-workflow" title="Direct link to heading">â€‹</a></h2><p>Even if the action is not that exciting, we can already use it in a workflow and learn more about it.
We could use the same repository, but I like it to be more representative of a real-life use-case, to create a new repository with a simple workflow.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1--create-a-simple-repository">1- Create a simple repository<a class="hash-link" href="#1--create-a-simple-repository" title="Direct link to heading">â€‹</a></h3><p>Same as earlier, let's create a new repository, this time private, and we will not add any license file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gh repo create &lt;YOUR-ORG&gt;/to-test-my-action \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --private \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               --description "To test my actions" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2--create-a-simple-workflow">2- Create a simple workflow<a class="hash-link" href="#2--create-a-simple-workflow" title="Direct link to heading">â€‹</a></h3><p><strong>ðŸ’¡ Tip: An easy way to add a workflow:</strong></p><p>You can open the newly created repository using the GitHub CLI:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gh repo view --web &lt;YOUR-ORG&gt;/to-test-my-action </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.1 - Click on the <strong>Actions</strong> tab, and click on the <strong>Simple workflow</strong> suggestion</p><p>This will generate the following content:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Simple Workflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Controls when the workflow will run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Triggers the workflow on push or pull request events but only for the main branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Allows you to run this workflow manually from the Actions tab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># This workflow contains a single job called "build"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># The type of runner that the job will run on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Steps represent a sequence of tasks that will be executed as part of the job</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Runs a single command using the runners shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Run a one</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">line script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo Hello</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> world</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Runs a set of commands using the runners shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Run a multi</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">line script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          echo Add other actions to build,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          echo test, and deploy your project.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.2 -  <strong>Adding our action to the Workflow</strong></p><p>Before saving the file, add the following entry to add our newly created action to the workflow:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      # Call my powerful action!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Check Files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: &lt;YOUR-ORG&gt;/check-files-action@main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see it is very simple, just add </p><ul><li><code>uses: &lt;YOUR-ORG&gt;/check-files-action@main</code></li></ul><p>To point to the action with the proper tag (in our case for now we are using <code>main</code> branch).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3--call-the-workflow">3- Call the workflow<a class="hash-link" href="#3--call-the-workflow" title="Direct link to heading">â€‹</a></h3><p>To call the workflow, you can simply commit/push the file to the repository. </p><p>The workflow should be automatically executed since it is triggered by any push on the <code>main</code> branch and related pull-request.</p><p>See the top of the workflow file:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4--check-the-execution">4- Check the execution<a class="hash-link" href="#4--check-the-execution" title="Direct link to heading">â€‹</a></h3><p>The workflow has been executed, so you should be able to see the result of it in the <strong>Actions</strong> tab, click on the workflow instance and you will see an annotation, like the following screenshot.</p><p><img loading="lazy" alt="Workflow Checks" src="/assets/images/002-workflow-415032b3c00e0bd10db1cb8fa662873b.png" width="579" height="262" class="img_ev3q"></p><p>ðŸŽ‰ - Congratulations, you have created your first GitHub Action!</p><p>Let's now add some logic to it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-some-logic-to-the-action">Add some logic to the action<a class="hash-link" href="#add-some-logic-to-the-action" title="Direct link to heading">â€‹</a></h2><p>Now that we have the "core" of our action we need to add some logic to checl if the files exists and check the content of the README.file.</p><p>Then if the file are not correct we should create some checks that will be visible to the developer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1--edit-the-indexjs-to-add-some-functions">1- Edit the index.js to add some functions<a class="hash-link" href="#1--edit-the-indexjs-to-add-some-functions" title="Direct link to heading">â€‹</a></h3><p>In the index.js file let's add a function that test is a file is present:</p><ul><li>if presents just log the information</li><li>if not present, the job fails and an annotations is added</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@actions/core'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> github </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@actions/github'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"fs"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> connected </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'process'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkFileExistence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">promises</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">access</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">constants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">F_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">path</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> exists</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFailed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">path</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> does not exist</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">checkFileExistence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"README.md"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">checkFileExistence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"LICENSE"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFailed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The highlighted lines shows how to use the GitHub Action core API to log some information in the console, and more "importantly" how to fail with an error message, that will be visible</p><ul><li>in the console </li><li>as an annotation attached to the workflow execution.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2--test-the-new-code">2- Test the new code<a class="hash-link" href="#2--test-the-new-code" title="Direct link to heading">â€‹</a></h3><p>Once you have modify <code>the index.js</code>, commit and push your action code to main.</p><p>Then go to the workflow that you have used to test, and re-run it, or invoke it manually.</p><p>You will see, depending of your repository that the workflow fails with some messages. In the following image, the <code>README.md</code> is present but not the <code>LICENSE</code> one, so the workflow fails.</p><p><img loading="lazy" alt="Workflow Checks" src="/assets/images/003-workflow-287c372863e51cff8d495c8cbc539fc0.png" width="781" height="379" class="img_ev3q"></p><p>ðŸŽ‰ - Congratulations, your Action is checking the validity of the repository.</p><p>I invite you to do some test, for example add a README.md file, run the workflow, add a LICENSE, ...</p><p>You will see that when the two files are present, the wofklow execution is successul.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this first article you have learned how to:</p><ul><li>Create a Javascript action</li><li>Deploy and use it in a workflow</li><li>Add some user feedback using GitHub Action core API.</li></ul><p>In the next article we will add more logic to check the content of the <code>README.md</code> file and learn how to create detailed checks and annotations.</p><p>If you have questions, commemnts about this article, you can use the following <a href="https://github.com/tgrall/tgrall.github.io/discussions/7" target="_blank" rel="noopener noreferrer">GitHub Discussion</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="video">Video<a class="hash-link" href="#video" title="Direct link to heading">â€‹</a></h2><iframe width="560" height="315" src="https://www.youtube.com/embed/kKbIEPsLj88" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
            <category>github</category>
            <category>actions</category>
            <category>automation</category>
            <category>javascript</category>
        </item>
        <item>
            <title><![CDATA[Simple caching service with Redis]]></title>
            <link>https://tgrall.github.io/blog/2020/05/16/simple-caching-service-with-redis</link>
            <guid>/2020/05/16/simple-caching-service-with-redis</guid>
            <pubDate>Sat, 16 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[One of the most common use cases for Redis is to use it the database as a caching layer for your data, but Redis can do a lot more (I will publish new articles later)!]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/001-ws-caching-17e9d285eeeee51179e053492aa144b9.png" width="1037" height="464" class="img_ev3q"></p><p>One of the most common use cases for Redis is to use it the database as a caching layer for your data, but Redis can do a lot more <em>(I will publish new articles later)</em>!</p><p>In this article, you will learn using a straightforward service, how to cache the result on some REST API calls to accelerate the data access, and also reduce the number of calls to external services.</p><p>For this example, I am using the "Redis Movie Database" application, a microservice-based application that I created to showcase and explain various features of Redis and Redis Enterprise. </p><p>You can see the caching service in action in this video:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/2X6hmXGbLbg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a class="hash-link" href="#architecture-overview" title="Direct link to heading">â€‹</a></h3><p>The application uses a third party API provided by the "<a href="http://www.omdbapi.com/" target="_blank" rel="noopener noreferrer">OMDb API</a>" to retrieve the ratings of the movie using its IMDb identifier. The frontend application call the <code>/caching/rating/</code> service to get the rating information from OMDB.</p><p>This service is doing the following:</p><ol><li>Check if the rating data is already cached retrieve from the cache</li><li>If the information is not cached, the system calls the OMDB API with the proper key and Movie ID</li><li>The result is cached in Redis with a time to live of 120 seconds</li><li>The ratings are returned to the client.</li></ol><p><strong>Prerequisites</strong></p><ul><li>Redis 5.x or later.</li><li>Java 8 or later</li><li>Apache Maven 3.6</li><li>Git</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">â€‹</a></h3><p>In the microservice demonstration project, you can find the caching service in the project below:</p><ul><li><a href="https://github.com/tgrall/redis-microservices-demo/tree/master/caching-service" target="_blank" rel="noopener noreferrer">Caching Service</a></li></ul><p>The Spring Boot application exposes a REST endpoint <a href="https://github.com/tgrall/redis-microservices-demo/blob/master/caching-service/src/main/java/io/redis/demos/services/caching/RestStatusController.java" target="_blank" rel="noopener noreferrer">RestStatusController.java</a> with the following key features:</p><ul><li><code>/api/1.0/caching/configuration/omdb_api</code> : to save the OMDb API key in Redis.</li><li><code>/api/1.0/caching/ratings/{id}</code> : to retrieve the IMDB Rating information.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-structure">Data Structure<a class="hash-link" href="#data-structure" title="Direct link to heading">â€‹</a></h4><p>The Caching Service is pretty simple and using two sets of keys:</p><ul><li><code>ms:config</code>: is a Redis Hash that will be used to store all global configuration; for the caching service, the entry <code>OMDB_API_KEY</code> will contain the OMDb API key.</li><li><code>ms:cache:ws:*</code> : one entry for each movie viewed by a user, where the IMDb movie id replaces the <code>*</code>. The hash contains the ratings, and each of the Movie Rating sites is a key in the hash ("Internet Movie Database",  "Rotten Tomatoes", "Metacritic"), and the value is the rating itself.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="code">Code<a class="hash-link" href="#code" title="Direct link to heading">â€‹</a></h4><p>The implementation of the caching layer is simple and located in the class below:</p><ul><li><a href="https://github.com/tgrall/redis-microservices-demo/blob/master/caching-service/src/main/java/io/redis/demos/services/caching/service/WebServiceCachingService.java" target="_blank" rel="noopener noreferrer"><code>WebServiceCachingService</code></a></li></ul><p><strong>Getting the Redis Connection</strong></p><p>In this project, I have not used Redis/Spring integration <em>by choice</em>, I am only using Spring injection and Spring Boot Web features.</p><ul><li>the <code>afterConstruct()</code> method creates the JedisPool from the Spring Configuration</li><li>then each time a connection is needed, the application calls <code>Jedis jedis = jedisPool.getResource()</code> to get a connection from the pool.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting--getting-the-omdb-api-key">Setting &amp; Getting the OMDb API Key<a class="hash-link" href="#setting--getting-the-omdb-api-key" title="Direct link to heading">â€‹</a></h4><p>As you have seen earlier, the OMDb API Key is stored in a hash associated with the Redis key <code>ms:config</code>.</p><ul><li>The method <code>saveOMDBAPIKey</code> is used to store the configuring with a  <code>hset</code> call.</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    jedis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jedisPool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getResource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">KEY_CONFIG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OMDB_API_KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    omdbAPIKEY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>line 1: get the connection from the pool</li><li>line 2: set the key in the hash *(as you can see the application uses static variables (<code>KEY_CONFIG</code> and <code>OMDB_API_KEY</code>)</li><li>line 3: the key received as a method parameter is set to a class member <code>omdbAPIKEY</code> to avoid calling the hash each time.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="calling-omdb-api-and-caching-or-not-the-result">Calling OMDb API and Caching (or not) the result<a class="hash-link" href="#calling-omdb-api-and-caching-or-not-the-result" title="Direct link to heading">â€‹</a></h4><p>The method <code>getRatings</code> receives two parameters:</p><ul><li><code>imdbId</code> the IMDb id</li><li><code>withCache</code> a boolean value to use or not Redis. The goal here is to show as a demonstration of the benefits of using Redis.</li></ul><p>Let's now look at the code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> restCallKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">KEY_PREFIX</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> imdbId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Jedis</span><span class="token plain"> jedis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jedisPool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getResource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Look in the map to see if the value has been cached</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">withCache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                returnValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hgetAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">restCallKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"imdb_id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> imdbId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">CloseableHttpClient</span><span class="token plain"> httpClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">HttpClientBuilder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">HttpGet</span><span class="token plain"> getRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                getRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"accept"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">ResponseHandler</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> responseHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicResponseHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token class-name">WsCall</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">getRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> responseHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Object</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> map </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jsonMapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WsCall</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> ratings </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Ratings"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> ratingAsMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> it </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ratings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ratingAsMap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">it</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Source"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> it</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Value"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">putAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ratingAsMap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">restCallKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> returnValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">expire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">restCallKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TTL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpResponseException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Small hack to keep it simple</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Metacritic"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"&lt;p style='color:red'&gt;Error: OMDBAPI Key is invalid -- see services page&lt;/p&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            omdbAPIKEY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IOException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Small hack to keep it simple</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Metacritic"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"&lt;p style='color:red'&gt;Error: OMDBAPI Key is not set, please configure it -- see services page&lt;/p&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"elapsedTimeMs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">end </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> start</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> returnValue</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So if you look in the code carefully you see that only a few lines are related to the cache itself:</p><ul><li>Line 1, the key is created from a prefix and the IMDb identifier.</li><li>Line 3, the application retrieves a connection from the Jedis Pool.</li><li>Line 7, if the cache is enabled,  the connection to get the value from Redis <code>returnValue = jedis.hgetAll(restCallKey)</code></li><li>If a value is present in the cache, the value is returned to the caller</li><li>If <code>returnValue</code> is empty,  the OMDB REST service must be called (lines 11 to 25)</li><li>The result of the Web service call is stored in the <code>returnValue</code> variable, and save into Redis with a time to live (TTL) of 120 seconds (Line 27 to 29)</li><li>Finally, the value is returned to the caller (Line 47).</li></ul><p>Quite simple, no?</p><p>It is possible to optimize a little bit the application/code with few additions:</p><ul><li>Make the TTL configurable by adding a new entry in the <code>ms:config</code> cache</li><li>Use <a href="https://redis.io/topics/pipelining" target="_blank" rel="noopener noreferrer">pipelining</a> to reduce the round trip time (RTT)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-application">Running the application<a class="hash-link" href="#running-the-application" title="Direct link to heading">â€‹</a></h3><p>In the project, the service connects to a <code>local</code> instance of Redis on port <code>6379</code>. If you want to use a different instance or configure a password/user, you have to edit the <code>/redis-microservices-demo/caching-service/application.properties</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloning-and-building">Cloning and Building<a class="hash-link" href="#cloning-and-building" title="Direct link to heading">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/tgrall/redis-microservices-demo.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> redis-microservices-demo/caching-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn clean package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-application-1">Running the application<a class="hash-link" href="#running-the-application-1" title="Direct link to heading">â€‹</a></h4><p>The application is a Spring Boot application, run the following command to start it:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn spring-boot:run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you should save your <a href="https://www.patreon.com/join/omdb" target="_blank" rel="noopener noreferrer">OMDB API key</a> in Redis using the following call:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST http://localhost:8084/api/1.0/caching/configuration/omdb_api</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">?key</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">YOUR_KEY</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you can call the service itself to retrieve the ratings of the movie "WarGames"</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET http://localhost:8084/api/1.0/caching/ratings/tt0086567</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Call it multiple times, and you will see that the first call is *slow" (100ms or more). Then subsequent requests will be a lot faster, as the data are coming out of Redis. After tow minutes, the data is removed from the cache automatically (expiration), and the OMDB service will be called again.</p><p>You can also force the service to no use the cache using the following call:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET http://localhost:8084/api/1.0/caching/ratings/tt0086567?cache</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>The pattern used here is called "Cache-Aside"; and usually pretty easy to implement. It is interesting to notice that many libraries such as Spring provide built-in features to implement such caches.</p><p>That said, this is not a silver bullet, you still have to look at the following points when you are implementing such caching service:</p><ul><li>Loading the cache: in the example, the cache is populated when the service is called. This lazy loading approach is excellent since the cache is only filled with data that are used by the application. However, the first call is paying the price of higher latency, so on your application, you may require to load the data at startup to avoid any hit miss.</li><li>Cache Invalidation and Lifetime: When caching data, it is essential to look at the invalidation strategy, when and how I can update the data in the cache, but also how long the data will stay in the cache. In the example above, each data will remain for two minutes. </li></ul><p>So now you are all set to implement a simple cache and have consistent fast access to your application data, independently of the backend.</p>]]></content:encoded>
            <category>nosql</category>
            <category>redis</category>
            <category>microservices</category>
        </item>
        <item>
            <title><![CDATA[How to use SSL/TLS with Redis Enterprise]]></title>
            <link>https://tgrall.github.io/blog/2020/01/02/how-to-use-ssl-slash-tls-with-redis-enterprise</link>
            <guid>/2020/01/02/how-to-use-ssl-slash-tls-with-redis-enterprise</guid>
            <pubDate>Thu, 02 Jan 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[In this article, I will explain how to secure your Redis databases using SSL (Secure Sockets Layer). In production, it is a good practice to use SSL to protect the data that are moving between various computers (client applications and Redis servers). Transport Level Security (TLS) guarantees that only allowed applications/computers are connected to the database, and also that data is not viewed or altered by a middle man process.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/000_header-1e7e2d24525b6d38705cdbca9b008b78.jpeg" width="900" height="600" class="img_ev3q"></p><p>In this article, I will explain how to secure your Redis databases using SSL (Secure Sockets Layer). In production, it is a good practice to use SSL to protect the data that are moving between various computers (client applications and Redis servers). Transport Level Security (TLS) guarantees that only allowed applications/computers are connected to the database, and also that data is not viewed or altered by a middle man process.</p><p>You can secure the connections between your client applications and Redis cluster using:</p><ul><li>One-Way SSL: the client (your application) get the certificate from the server (Redis cluster), validate it, and then all communications are encrypted</li><li>Two-Way SSL: (aka mutual SSL) here both the client and the server authenticate each other and validate that both ends are trusted.</li></ul><p>In this article, I will focus on the Two-Way SSL, and using Redis Enterprise.</p><p>Prerequisites:</p><ul><li>A Redis Enterprise 5.4.x database,&nbsp;(my database is protected by the password&nbsp;<code>secretdb01</code>, and listening on port&nbsp;<code>12000</code>)</li><li><code>redis-cli</code>&nbsp;to run basic commands</li><li>Python, Node, and Java installed if you want to test various languages.</li></ul><p><strong>Simple  Test</strong></p><p>Let's make sure that the database is available:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redis-cli -p 12000 -a secretdb01 INFO SERVER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This should print the Server information.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1--get-the-certificate-from-redis-cluster">1- Get the Certificate from Redis Cluster<a class="hash-link" href="#1--get-the-certificate-from-redis-cluster" title="Direct link to heading">â€‹</a></h4><p>You have access to the Redis Enterprise Cluster, you go to one of the nodes to retrieve the certificate (that is a self-generated one by default).</p><p>The cluster certificate is located at: <code>/etc/opt/redislabs/proxy_cert.pem</code>.</p><p>You have to copy it on each client machine; note that once it is done you can use this certificate to connect using "One-Way SSL", but not the purpose of this article.</p><p>In my demonstration I am using Docker and copy the certificate using this command from my host:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker cp redis-node1:/etc/opt/redislabs/proxy_cert.pem ./certificates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2--generate-a-new-client-certificate">2- Generate a New Client Certificate<a class="hash-link" href="#2--generate-a-new-client-certificate" title="Direct link to heading">â€‹</a></h4><p>Using the Two-Way SSL you need to have a certificate for the client that will be used by Redis database proxy to trust the client.</p><p>In this article I will use a self-signed certificate using OpenSSL, in this example, we are creating a certificate for an application named&nbsp;<code>app_001</code>.</p><p>You can create as many certificates as you want, or reuse this one for all servers/applications.</p><p>Open a terminal and run the following commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -nodes </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -newkey rsa:2048 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -keyout client_key_app_001.pem </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -x509 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -days </span><span class="token number" style="color:#36acaa">36500</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -out client_cert_app_001.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command generate a new client key (<code>client_key_001.pem</code>) and certificate (<code>client_cert_001.pem</code>) with no passphrase.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3--configure-the-redis-database">3- Configure the Redis Database<a class="hash-link" href="#3--configure-the-redis-database" title="Direct link to heading">â€‹</a></h4><p>The next step is to take the certificate and add it to the database you want to protect. </p><p>Let's copy the certificate and paste it into the Redis Enterprise Web Console.</p><p>Copy the certificate in your clipboard:</p><p>Mac:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbcopy </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> client_cert_app_001.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Linux:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> xclip -sel clip </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> client_cert_app_001.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Windows:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clip </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> client_cert_app_001.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Go to the Redis Enterprise Admin Web Console and enable TLS on your database:</p><ol><li>Edit the database configuration</li><li>Check TLS</li><li>Select "Require TLS for All communications"</li><li>Check "Enforce client authentication"</li><li>Paste the certificate in the text area</li><li>Click the Save button to save the certificate</li><li>Click the Update button to save the configuration.</li></ol><p><img loading="lazy" src="/assets/images/001-tls-configuration-503f00085716901e3134c38734c1c920.png" width="1014" height="219" class="img_ev3q"></p><p>The database is now protected, and it is mandatory to use the SSL certificate to connect to it.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redis-cli -p 12000 -a secretdb01 INFO SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(error) ERR unencrypted connection is prohibited</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4--connect-to-the-database-using-the-certificate">4- Connect to the Database using the Certificate<a class="hash-link" href="#4--connect-to-the-database-using-the-certificate" title="Direct link to heading">â€‹</a></h4><p>In all following examples, I am using a "self-signed" certificate, so I do not check the validity of the hostname.
You should adapt the connections/TLS information based on your certificate configuration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="41-using-redis-cli">4.1 Using Redis-CLI<a class="hash-link" href="#41-using-redis-cli" title="Direct link to heading">â€‹</a></h4><p>To connect to a SSL protected database using <code>redis-cli</code> you have to use <a href="https://www.stunnel.org/index.html" target="_blank" rel="noopener noreferrer"><code>stunnel</code></a>.</p><p>Create a <code>stunnel.conf</code> file with the following content:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cert = /path_to/certificates/client_cert_app_001.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key = /path_to/certificates/client_key_app_001.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cafile = /path_to/certificates/proxy_cert.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client = yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[redislabs]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">accept = 127.0.0.1:6380</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connect = 127.0.0.1:12000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start stunnel using the command</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">stunnel ./stunnel.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will start a process that listen to port <code>6380</code> and used as a proxy to the Redis Enterprise database on port <code>12000</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redis-cli -p 6380 -a secretdb01 INFO SERVER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="42-using-python">4.2 Using Python<a class="hash-link" href="#42-using-python" title="Direct link to heading">â€‹</a></h5><p>Using Python, you have to set the SSL connection parameters:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/local/bin/python3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pprint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StrictRedis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'secretdb01'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    decode_responses</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'localhost'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">12000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_keyfile</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'./client_key_app_001.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certfile</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'./client_cert_app_001.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_cert_reqs</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'required'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_ca_certs</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'./proxy_cert.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pprint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pprint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Error connecting to Redis: {}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More information in the documentation "<a href="https://redislabs.com/lp/python-redis/" target="_blank" rel="noopener noreferrer">Using Redis with Python</a>".</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="43-using-nodejs">4.3 Using Node.JS<a class="hash-link" href="#43-using-nodejs" title="Direct link to heading">â€‹</a></h5><p>For <a href="http://redis.js.org/" target="_blank" rel="noopener noreferrer">Node Redis</a>, use the <a href="https://nodejs.org/api/tls.html" target="_blank" rel="noopener noreferrer">TLS</a> library to configure the client connection:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> redis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"redis"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> tls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'tls'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'fs'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> ssl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'../certificates/client_key_app_001.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">encoding</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'ascii'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">cert</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'../certificates/client_cert_app_001.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">encoding</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'ascii'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">ca</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'../certificates/proxy_cert.pem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">encoding</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'ascii'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">checkServerIdentity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">12000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'127.0.0.1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">password</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'secretdb01'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">tls</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SERVER"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reply</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More information in the documentation "<a href="https://redislabs.com/lp/node-js-redis/" target="_blank" rel="noopener noreferrer">Using Redis with Node.js</a>".</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="44-using-java">4.4 Using Java<a class="hash-link" href="#44-using-java" title="Direct link to heading">â€‹</a></h5><p>In Java, to be able to connect using SSL, you have to install all the certificates in the Java environment using the <a href="https://docs.oracle.com/en/java/javase/11/tools/keytool.html" target="_blank" rel="noopener noreferrer">keytool</a> utility.</p><p>Create a <strong>keystore</strong> file that stores the key and certificate you have created earlier:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl pkcs12 -export \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -in ./client_cert_app_001.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -inkey ./client_key_app_001.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -out client-keystore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -name "APP_01_P12"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see the keystore is used to store the credentials associated with you client; it will be used later with the <code>-javax.net.ssl.keyStore</code> system property in the Java application.</p><p>In addition to the keys tore, you also have to create a trust store, that is used to store other credentials for example in our case the redis cluster certificate.</p><p>Create a <strong>trust store</strong> file and add the Redis cluster certificate to it</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -genkey \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -dname "cn=CLIENT_APP_01" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -alias truststorekey \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keyalg RSA \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keystore ./client-truststore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keypass secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storepass secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storetype pkcs12</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -import \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keystore ./client-truststore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -file ./proxy_cert.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -alias redis-cluster-crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The trustore will be used later with the <code>-javax.net.ssl.trustStore</code> system property in the Java application.</p><p>You can now run the Java application with the following environment variables:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -Djavax.net.ssl.keyStore=/path_to/certificates/java/client-keystore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Djavax.net.ssl.keyStorePassword=secret \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Djavax.net.ssl.trustStore=/path_to/certificates/java/client-truststore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Djavax.net.ssl.trustStorePassword=secret \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-jar MyApp.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For this example and simplicity, I will hard code these property in the Java code itself:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">redis</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">clients</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">jedis</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Jedis</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">net</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">URI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SSLTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.keyStore"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/path_to/certificates/client-keystore.p12"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.keyStorePassword"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"secret"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.trustStore"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"/path_to/certificates/client-truststore.p12"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.trustStorePassword"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"secret"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">URI</span><span class="token plain"> uri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"rediss://127.0.0.1:12000"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Jedis</span><span class="token plain"> jedis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Jedis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"secretdb01"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"SERVER"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jedis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>line 8-12, the system environment variables are set to point to the keystore and trust store (this should be externalized)</li><li>line 14, the Redis URL start with <code>rediss</code> with 2 s to indicate that the connection should be encrypted</li><li>line 17, set the database password</li></ul><p>More information in the documentation "<a href="https://redislabs.com/lp/redis-java/" target="_blank" rel="noopener noreferrer">Using Redis with Java</a>".</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article, you have learned how to:</p><ul><li>retrieve the Redis Server certificate</li><li>generate a client certificate</li><li>protect your database to enforce transport level security (TLS) with 2 ways authentication</li><li>connect to the database from <code>redis-cli</code>, Python, Node and Java</li></ul>]]></content:encoded>
            <category>nosql</category>
            <category>redis</category>
            <category>security</category>
            <category>java</category>
            <category>node</category>
            <category>python</category>
            <category>authentication</category>
            <category>ssl</category>
        </item>
        <item>
            <title><![CDATA[Redis Rolling Upgrade on Pivotal Cloud Foundry (PCF)]]></title>
            <link>https://tgrall.github.io/blog/2019/09/19/redis-rolling-upgrade-on-pivotal-cloud-foundry-pcf</link>
            <guid>/2019/09/19/redis-rolling-upgrade-on-pivotal-cloud-foundry-pcf</guid>
            <pubDate>Thu, 19 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>In this article, I will show you how to update Redis Enterprise on PCF and see how Redis Enterprise cluster will guarantee a service continuity using out of the box failover.</p><p>If you need a Cloud Foundry application that calls Redis automatically you can use this <a href="https://github.com/tgrall/simple-redis-spring-demo-pcf" target="_blank" rel="noopener noreferrer">project simple-redis-spring-demo-pcf</a>.</p><p>For this article, I will upgrade <a href="https://docs.pivotal.io/partners/redis-labs-enterprise-pack/index.html" target="_blank" rel="noopener noreferrer">Redis Enterprise for PCF</a> from the version v5.4.2400147 to the latest version, currently v5.4.40700169.</p><p><strong>Prerequisites</strong></p><ul><li>Pivotal Cloud Foundry up &amp; running<ul><li>Administrator access to Ops Manager and Apps Manager</li></ul></li><li>One of more Redis databases running on PCF<ul><li>My environment has2 databases in version v5.4.2400147</li><li>One wit replication (<code>db:4</code>) another one without replication (<code>db:5</code>)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initial-environment">Initial Environment<a class="hash-link" href="#initial-environment" title="Direct link to heading">â€‹</a></h3><p>Let's take a look to the environment before the update; for this you can access the Redis Enterprise Cluster Management Console:</p><ul><li>https://<!-- -->[Cluster Management Console Subdomain]<!-- -->.<!-- -->[System Domain]<!-- --> </li><li>for example <a href="https://console-redis.sys.my-domain.cf-app.com" target="_blank" rel="noopener noreferrer">https://console-redis.sys.my-domain.cf-app.com</a> . </li></ul><blockquote><p>Do not use this to create/delete a database, you must use Cloud Foundry to do it. (<code>cf</code> command or UI)</p></blockquote><p>In the Web console, go to "Cluster" then "Configuration", you can see the version of Redis Labs Enterprise Cluster (5.4.0-24), and Redis (5.0.2) versions.</p><p><img loading="lazy" src="/assets/images/img-001-webui-cluster-version-2fefa97af261f2492e28f4abfebf00b7.png" width="1024" height="620" class="img_ev3q"></p><p>You can also use the <code>rladmin</code> command line to achieve this.</p><p><strong>Checking Redis cluster using the command line</strong></p><p>SSH to your Ops Manager and, <code>bosh ssh</code> to one of the Redis cluster VMs.</p><p>When I run the <code>bosh vms</code> command on my environment I can see the following VMs related to my Redis deployment:</p><p><img loading="lazy" src="/assets/images/img-002-redis-vms-list-4ca495754a5eddd427af57a67d1b3d1b.png" width="1343" height="189" class="img_ev3q"></p><p>The deployment is made of 5 VMs:</p><ul><li>the 3 first VMs are the Redis Nodes</li><li>the 2 others are related to the PCF integration (Registrar and Service Broker)</li></ul><p>We can look in more details into the role of each VMS in the cluster, for this I will <code>bosh ssh</code> into one of the nodes:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bosh -d redis-enterprise-[your-deployment-id] ssh redis-enterprise-node/[your-vm-id]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once connected use the <code>sudo rladmin status</code> to look at the Redis cluster deployed on PCF.</p><p><img loading="lazy" src="/assets/images/img-003-rladmin-view-ab9dbbb6a316ddd777b82dacd9fbf3c4.png" width="1859" height="415" class="img_ev3q"></p><p>In this cluster you see:</p><ul><li>in the <strong><em>Cluster Nodes</em></strong> section that we have 3 nodes in version 5.4.0-24</li><li>in the <strong><em>Databases</em></strong> section that we have 2 database instances, the name is generated by Cloud Foundry. In this environment, the <code>db:4</code> is replicated with shards on <code>node:1</code> (master) and <code>node:2</code> (slave/replica), while <code>db:5</code> is not replicated.</li></ul><p>Let's now see the Redis version of the databases using:</p><ul><li><code>sudo rladmin status databases extra redis_version</code></li></ul><p>As expected the version if 5.0.2, the same value that you have seen in the Web console.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-latest-version-of-redis-enterprise-for-pcf">Installing the latest version of Redis Enterprise for PCF<a class="hash-link" href="#installing-the-latest-version-of-redis-enterprise-for-pcf" title="Direct link to heading">â€‹</a></h2><p>Once the latest release of Redis Enterprise on PCF is imported, the upgrade is easy to do:</p><ol><li><p>Click on "Redis Enterprise on PCF" in the left menu.</p></li><li><p>Click on the "<strong>+</strong>" link.</p><ul><li>The tiles is updated to the new version, you can review the configuration, not needed in this tutorial.</li></ul></li><li><p>Click on "Review Pending Changes" button.
<img loading="lazy" src="/assets/images/img-004-tile-update-dbe23ed702874b0361000bf75c241980.png" width="360" height="283" class="img_ev3q"></p></li><li><p>Unselect all product except Redis</p></li><li><p>Click Apply Changes</p></li></ol><p>Once you have clicked the update process will start, and you can follow the progress using the log information.</p><p>Nevertheless, it is interesting to see what is happening behind the scene using the command line on the VMS.</p><p>The update process using PCF will do the following:</p><ul><li>Update and restart each node one by one (the 5 nodes of the Redis Enterprise deployment)</li><li>during these steps, Redis Cluster will fail over moving the master and endpoint to another node to provide service continuity to the applications.</li></ul><p>Let's look at the following screenshots to see how the rolling upgrade was done by PCF.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="starting-point">Starting Point<a class="hash-link" href="#starting-point" title="Direct link to heading">â€‹</a></h4><p>The cluster is up and running with 3 nodes with the version 5.4.0-24, and the <code>node:1</code> is the master of the cluster</p><p><strong><em>Cluster Nodes:</em></strong></p><p><img loading="lazy" src="/assets/images/001-rladmin-cluster-version-10dcd76ff8ec82779cce60edfabeaf7d.png" width="417" height="92" class="img_ev3q"></p><p><strong><em>Endpoints:</em></strong></p><p><img loading="lazy" src="/assets/images/001-rladmin-cluster-version-endpoint-fe82da9f872f75127bc309b56e29f1b2.png" width="424" height="82" class="img_ev3q"></p><p>The <code>node:1</code> is also the endpoint for the <code>db:4</code></p><p><strong><em>Shards:</em></strong></p><p><img loading="lazy" src="/assets/images/001-rladmin-cluster-db-813e6f7961eb2a772972bc9501dd0e8d.png" width="394" height="91" class="img_ev3q"></p><p>You can see 3 shards in this deployment:</p><ul><li><code>db:4</code> is replicated and has 2 shards the master on <code>node:1</code> and a replica on <code>node:2</code>, the failover will automatically happen with no data loss.</li><li><code>db:5</code> is not replicated and has a single shard, so the database will be recreated fresh on a new node during the update.</li></ul><p>So if you want to have a full service continuity with no data loss it is mandatory to use replication.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pcf-updating-node-1">PCF Updating Node 1<a class="hash-link" href="#pcf-updating-node-1" title="Direct link to heading">â€‹</a></h4><p>PCF has now started the process and stopped the <code>node:1</code>.</p><p><strong><em>Cluster Nodes:</em></strong></p><p><img loading="lazy" src="/assets/images/002-rladmin-cluster-status-c6890ca2941b7647db1c4cdfe76ec40c.png" width="793" height="93" class="img_ev3q"></p><p>All the nodes are still on the "old version", but the cluster master has been moved now to <code>node:2</code>; so applications will continue to work.</p><p>The errors are here to indicate that the <code>node:1</code> is not accessible, and the <code>node:3</code> also raised an error since the replication link is not available.</p><p><strong><em>Endpoints:</em></strong></p><p><img loading="lazy" src="/assets/images/002-rladmin-cluster-version-endpoint-9bbd74d08916ad6439c5d32b6f627d63.png" width="421" height="90" class="img_ev3q"></p><p>Here we see that the <code>db:4</code> endpoint, now on <code>node:2</code>, Redis Enterprises cluster manager has moved the endpoint to this node automatically.</p><p><strong><em>Shards:</em></strong></p><p><img loading="lazy" src="/assets/images/002-rladmin-cluster-db-692342b4603e3b68ecb7920ca5c20c46.png" width="422" height="80" class="img_ev3q"></p><ul><li><code>db:4</code> is up and the master shard has been moved from <code>node:1</code> to <code>node:2</code></li><li><code>db:5</code> is not present anymore, a new master will be created automatically on <code>node:3</code>, but empty.</li></ul><p>The fail over is done transparently with no impact for the application.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pcf-is-restarting-the-updated-node-1">PCF is restarting the updated Node 1<a class="hash-link" href="#pcf-is-restarting-the-updated-node-1" title="Direct link to heading">â€‹</a></h4><p>Once the node:1 VM is restarted with the updated version of Redis Enterprise you can see the new version number and status.</p><p><strong><em>Cluster Nodes:</em></strong></p><p><img loading="lazy" src="/assets/images/003-rladmin-cluster-version-9fa92b5d4ed0793f98cda1d3c97334af.png" width="431" height="92" class="img_ev3q"></p><p>The 3 nodes of the cluster are up and running, and you can see that the <code>node:1</code> has been updated to the new version 5.4.4-7.</p><p>The master is still the <code>node:2</code></p><p>For a short time the cluster will have heterogeneous nodes, this is not an issue.</p><p><strong><em>Shards:</em></strong></p><p><img loading="lazy" src="/assets/images/003-rladmin-cluster-db-8432655615b49d988a4f00450e1db684.png" width="518" height="91" class="img_ev3q"></p><p>You can see that the <code>db:4</code> shards have the status <code>OK, OLD VERSION</code> that indicates that:</p><ul><li>the database is up and running</li><li>but the database itself has not yet been updated to the latest Redis version</li></ul><p>The update of the database is done automatically, so after a while, if you run the command <code>sudo rladmin status databases extra redis_version</code> you will see something like:</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAABKCAYAAABJneNqAAAKv2lDQ1BJQ0MgUHJvZmlsZQAASImVlwdQU+kWgP970xsQQpcSepPeQUrooQjSQVRCEkgoISYEFDsirsBaUBHBBrooouCq1LUiim1RVIp1QRYFZV0siIrKu8Aj7L437715586Z/5tzz3/KP/efORcACpolFKbBcgCkCzJFYX6e9JjYODpuAOCBMpAHKoDKYouFjNDQIIDI7Pp3+dgNoKn1vtlUrH9//1+FyuGK2QBAoQgncsTsdITPIjrCFooyAUAdQuy62ZnCKW5DWEGEFIhw7xQnz/DIFCdOMxpM+0SEeSGsAACezGKJkgEg0xE7PYudjMQheyBsKeDwBQgLEXZj81gchE8hPD89PWOKnyBslPiXOMl/i5kojcliJUt5ppdpwXvzxcI01sr/8zj+t6SnSWZzGCBK5on8w6Z6Rs6sNzUjUMqCxIUhs8znTPtPM0/iHznLbLFX3CxzWN6B0r1pC4NmOYnvy5TGyWRGzDJX7BM+y6KMMGmuJJEXY5ZZorm8ktRIqZ3HZUrj5/Aiomc5ix+1cJbFqeGBcz5eUrtIEiatnyvw85zL6yvtPV38l375TOneTF6Ev7R31lz9XAFjLqY4Rlobh+vtM+cTKfUXZnpKcwnTQqX+3DQ/qV2cFS7dm4l8kHN7Q6VnmMIKCJ1l4A18QBDy0EEksAa2wArYZXJXZE414pUhXCniJ/My6QzkhnHpTAHbfD7d2tLKCYCp+zrzObzvnb6HkBJ+zpbxFgCHDgSuzdkSdgLQ8AZJOz5nM0Dqo3oDcF7IloiyZmzTdwkDiEAWqVAVaAJdYATMkNrsgQvwQKoNACEgAsSCpYANeCAdiEA2WA02gHxQCLaD3aAMHASHwTFwEpwGjeAcuAyugVvgLugCj0EfGASvwSj4CCYgCMJBFIgGqUJakD5kCllDjpAb5AMFQWFQLJQAJUMCSAKthjZChVAxVAZVQNXQz1AzdBm6AXVCD6F+aBh6B32BUTAZVoA1YAPYAnaEGXAgHAEvgZPh5XAOnAdvhUvhSvgE3ABfhm/BXXAf/BoeQwEUCaWE0kaZoRxRXqgQVBwqCSVCrUUVoEpQlahaVAuqHXUf1YcaQX1GY9E0NB1thnZB+6Mj0Wz0cvRadBG6DH0M3YBuQ99H96NH0d8xFIw6xhTjjGFiYjDJmGxMPqYEU4Wpx1zFdGEGMR+xWKwS1hDrgPXHxmJTsKuwRdj92DrsJWwndgA7hsPhVHGmOFdcCI6Fy8Tl4/biTuAu4u7hBnGf8CS8Ft4a74uPwwvwufgS/HH8Bfw9/Ev8BEGOoE9wJoQQOISVhG2EI4QWwh3CIGGCSCUaEl2JEcQU4gZiKbGWeJX4hPieRCLpkJxIi0h80npSKekU6Tqpn/SZLE82IXuR48kS8lbyUfIl8kPyewqFYkDxoMRRMilbKdWUK5RnlE8yNBlzGaYMR2adTLlMg8w9mTeyBFl9WYbsUtkc2RLZM7J3ZEfkCHIGcl5yLLm1cuVyzXI9cmNUGtWKGkJNpxZRj1NvUIfkcfIG8j7yHPk8+cPyV+QHaCiaLs2LxqZtpB2hXaUNKmAVDBWYCikKhQonFToURhXlFW0VoxRXKJYrnlfsU0IpGSgxldKUtimdVupW+qKsocxQ5ipvUa5Vvqc8rjJPxUOFq1KgUqfSpfJFla7qo5qqukO1UfWpGlrNRG2RWrbaAbWraiPzFOa5zGPPK5h3et4jdVjdRD1MfZX6YfXb6mMamhp+GkKNvRpXNEY0lTQ9NFM0d2le0BzWomm5afG1dmld1HpFV6Qz6Gn0UnobfVRbXdtfW6Jdod2hPaFjqBOpk6tTp/NUl6jrqJuku0u3VXdUT0svWG+1Xo3eI32CvqM+T3+Pfrv+uIGhQbTBZoNGgyFDFUOmYY5hjeETI4qRu9Fyo0qjB8ZYY0fjVOP9xndNYBM7E55JuckdU9jU3pRvut+0cz5mvtN8wfzK+T1mZDOGWZZZjVm/uZJ5kHmueaP5Gws9iziLHRbtFt8t7SzTLI9YPraStwqwyrVqsXpnbWLNti63fmBDsfG1WWfTZPPW1tSWa3vAtteOZhdst9mu1e6bvYO9yL7WfthBzyHBYZ9Dj6OCY6hjkeN1J4yTp9M6p3NOn53tnTOdTzv/6WLmkupy3GVogeEC7oIjCwZcdVxZrhWufW50twS3Q2597truLPdK9+ceuh4cjyqPlwxjRgrjBOONp6WnyLPec9zL2WuN1yVvlLefd4F3h4+8T6RPmc8zXx3fZN8a31E/O79Vfpf8Mf6B/jv8e5gaTDazmjka4BCwJqAtkBwYHlgW+DzIJEgU1BIMBwcE7wx+slB/oWBhYwgIYYbsDHkaahi6PPSXRdhFoYvKF70IswpbHdYeTgtfFn48/GOEZ8S2iMeRRpGSyNYo2aj4qOqo8Wjv6OLovhiLmDUxt2LVYvmxTXG4uKi4qrixxT6Ldy8ejLeLz4/vXmK4ZMWSG0vVlqYtPb9Mdhlr2ZkETEJ0wvGEr6wQViVrLJGZuC9xlO3F3sN+zfHg7OIMc125xdyXSa5JxUlDya7JO5OHee68Et4I34tfxn+b4p9yMGU8NST1aOpkWnRaXTo+PSG9WSAvSBW0ZWhmrMjoFJoK84V9y52X714+KgoUVYkh8RJxU6YCMhjdlhhJNkn6s9yyyrM+ZUdln1lBXSFYcXulycotK1/m+Ob8tAq9ir2qdbX26g2r+9cw1lSshdYmrm1dp7sub93ger/1xzYQN6Ru+DXXMrc498PG6I0teRp56/MGNvltqsmXyRfl92x22XzwB/QP/B86tths2bvlewGn4GahZWFJ4dcidtHNH61+LP1xcmvS1o5t9tsObMduF2zv3uG+41gxtTineGBn8M6GXfRdBbs+7F62+0aJbcnBPcQ9kj19pUGlTXv19m7f+7WMV9ZV7llet09935Z94/s5++8d8DhQe1DjYOHBL4f4h3or/CoaKg0qSw5jD2cdfnEk6kj7T44/VVepVRVWfTsqONp3LOxYW7VDdfVx9ePbauAaSc3wifgTd096n2yqNautqFOqKzwFTklOvfo54efu04GnW884nqk9q392Xz2tvqABaljZMNrIa+xrim3qbA5obm1xaan/xfyXo+e0z5WfVzy/7QLxQt6FyYs5F8cuCS+NXE6+PNC6rPXxlZgrD9oWtXVcDbx6/ZrvtSvtjPaL112vn7vhfKP5puPNxlv2txpu292u/9Xu1/oO+46GOw53mu463W3pXNB54Z77vcv3ve9fe8B8cKtrYVdnd2R3b098T18vp3foYdrDt4+yHk08Xv8E86TgqdzTkmfqzyp/M/6trs++73y/d//t5+HPHw+wB17/Lv7962DeC8qLkpdaL6uHrIfODfsO3321+NXga+HriZH8P6h/7Htj9Obsnx5/3h6NGR18K3o7+a7over7ox9sP7SOhY49+5j+cWK84JPqp2OfHT+3f4n+8nIi+yvua+k3428t3wO/P5lMn5wUskSs6VEAhSiclATAu6MAUGIBoN0FgLh4Zp6eFmjmH2CawH/imZl7WuwBqEaWqbEr2AOA/VMzyHoA5BAORTTCA8A2NlL9p4iTbKxnYpEakdGkZHLyPTI74owB+NYzOTnRODn5rQop9hEAlz7OzPFTIncCgEPNVvYO4b1/2FaAf5F/ABd+EZP5FwFoAAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAF5RJREFUeAHtXQl4VEW2Pp09ISGQjS1hiQmrAWEYQBEFBGUTBEFGQPyEx/JkERggLI7I980TBB7IuAxPZJFVPkBAZTfisBPUYVdAEEGQJQECZCF0ut851anK7Zu7dboZCanzfd333qo6tfxV59Z6zrUBgBN/kiQCEoE/GAG/Pzh9mbxEQCJQiIAURtkUJAIPCAJSGB+QipDZkAgEcAgqVqwIAwcOZI8FBQVw6tQp2LhxI/d2u44ZMwYyMjJgyZIlwn3AgAEQFRUlnpU3P/74o1tcWvyBgYEwYsQI8PPzg9zcXDh37hzs378fMjMzlVGxey1+HuiNN96ATp06Qfny5eHMmTMsj9u2bWPeVD4qp5JOnjwJX375pXAy4heB5I1E4D4hQAs4TmyoTjXdvXvX2bZtW+ZPYejXp08fFszhcDgjIyOFn91uV7OL58uXL4twevzNmjUT4fkNxdmjRw/Ba5Q++X3xxReMlfJGP6Ldu3cLfnzJMDfl35UrV4S/GT/HQF5dbUHi4HMcXBFyYdy7dy8TgJUrV7IGjb2UMyIiQjTYb7/9VrTlqVOnCvdWrVo5O3fuzH4kCNnZ2eI5JSVFhNPj58J4+vRpxrdhwwaWDj0rK12Pn14MJGz37t1zNmjQgPHUrVvXmZCQIPjJn/JF7vxXqVIl5m+FX5kPee/zhijqqQxj6y6MmzdvFqDs2bOHCUTfvn2FW05OjhBGHH4KdyWAJIzXr1/X9NPj58J45MgRxle/fn2WztmzZ93i0eOPjo5mLw/qTWvXru3Gw/NGwnjr1i1NPyv8FM8TTzzhzM/Pd96+fduJQ2vNuHh68ioF1pM2YLiAc/DgQYwLoHnz5uyKDRFCQ0Ph2LFjgA0bkpOTwd/fn/lZ+bPCHxQUBC1btoSdO3eyKJctWyaiNuKnueWlS5dYfo4fPw6pqamCT3lD8Xfs2FH8sNdn3lb527VrBzS/LVeuHKDQK6OW9xIBrxFgb3c+TFX2jLiYwXqnLVu2sDCrV69mz5MnT3aeOHGC3Q8aNKhY76DXMxrx856RRVr4d/PmTbe4jfgRBScNOXFhSUTx888/uw2xqWdU0/Tp00UaZvyUBgqh8/PPP3fOnz9f8JG7/EkMfNAG9Iep1FCJli5dyhob9h5sKEhzyClTpjA/XPEs1hD1hNGInwsjDf/S09OdNFcl2rVrl4jfiF8JxEcffcTmj8T/66+/Cn4SRhpi0lyX/xITE4U/j0OPn/vLqxS8+9QG9IWRry6OHDnSWb16dbFCefHiRee1a9eorTtpxVWdMS1hNOPnwsjnjDSHI8EhAcKhsEfpU36effZZJ80fKS98Dklx6c0Z1WXQ4leHkc9SKH3ZBnTnjDhkY/t1KG+Aw1QYP3482Gw2QOGD8PBwoLkXNm527dChA+bJmDzlxyEqS4/SDAsL8zh92lvEXpHFgau5xpnT8DXip3ljSeLUSEY6SQTcEGA9G58zUs9BPR/1IkRpaWnMn4Z71Ms0atRI9IQrVqxgYTZt2iTcMGYWTr2aasbPe0ZK/+uvv2ZbEBQ5zQEpTjN+6smIl/YVcfHGuWDBApYPKgfN8ygOuqffvn37xI/KQH5W+CncK6+8wspMWMTGxrqVm/zlT2LgRRtwgUfbF5yoodEQj4aMuHrKGhg937lzx62xcQFSbpxTRqjB0zBWmSkzftqLpHSJ6EpD1AsXLoghphk/CRPn5+WgfCj3QikONdEclfJphZ/CDR48mEVBaSn3MJVllfdSIEvSBmyFTHgp/URH3Xr27Mm2X+i43tatWzWP0+mV1Co/Hm4A7IUBF5f0opLuEgGPEXiohNHj0ksGicADhIDuAs4DlEeZFYlAmUBACmOZqGZZyNKAgBTG0lBLMo9lAgEpjGWimmUhSwMCUhhLQy3JPJYJBCxr+nuiia+FnJJf6Y+HA2DhwoVMAx8PHjAv3B80tDSg5C9L93QqCg8dsCLjPieztoD6nXD+/HkBA2GoZ82A3I0wNqsjnkhJrSGgUgGgviksXryYR8WuQ4cOBVRAh/Xr17P86eXfSvkpQr38eVK+bt26AarrwaJFi2Dt2rUsn6gDC126dIFVq1YB7oEzN9Lc6dq1K6DiAGRlZTE3b/7Ypjc/gaPcFFdq+vMNfqU/baKrNfExI26b/fy5adOmSlZxT3FQGLP0eTxl+YrmRgRu/IYOHygPNtBBBzXxQxlmGJvVEWHPzytTuvQjUlpTMKofUvwmHuXJJVIEJzc69UW8Rvm3Un6j/Fkp344dO1iZePnoyjV7UJ2P+R06dEi0cexImBudzDIqu0U/l/DwitLT9OfCaKaJb5QoHdgmDXsqIB1do3s6QE48ZukbxVtW/HhjpCOKpOQ8e/ZshiWdVuIYUGPWs2ZgBWOjOvLWGsLhw4dZw50xY4bI76effsrcsAdibkb5Nyu/lfwZle/5559neJLqHqnToV4tsxxBecLe2smFkdpvmzZtWH7vqzAq9RmVmv5cGLlWhZ4mPjUSahxGmvBUGPXZVd5Q9NLnja0sX3ljXLNmjWjMeXl5rMFwXKjh0IuOPyuvnmCsVUdWrSEo01Tejxs3jgme0nrD1atXmQBQe6KwRvk3K78n+dMqH51ZJho7dqzAj85dE82aNUsIIz3TWWnKry+F0XABR63pj4kzLQ09TXzy96UmvFb6lIYkFwIff/wxBAcHA1nfU5KeNQNlGH7vCcZWrSHwuNXXDz74AFAIoEaNGuzIYrVq1SAmJgbwxQ2orC6CW82/uvze5q9KlSosD6i/K/Kyfft2dk9zQ07Y2QCeSxbzd+7uiyuTcK23plLTn/eM9FbgpNbEx8xY0oTXeiuZpU9xl/Uf7xlons1tAdGQNCkpSWBDPYua+JzHE4y16ojwp+GbkTUFszr65ZdfWPZIs2bu3LnsHk2CWsq/lfJbzZ9W+Wi0Ru7KMvTq1YvlkZTo+TD1ww8/ZOEovC97RrGaihkoRvxNgRoYwg81N9ibmPT5cIzODkujZTjhj40DcFFHPHtzo5W+N/E9LLy0IhkQ4Ko6VDcDNC/iVjTynzZtmnDDeZm4V994ijEuBrHeDK0hwJAhQ+CRRx5hNpGot7NC69atg9GjR0O/fv2YbVvief/9991YzfJvVH5v8ke6uqQ/S3aeyHYvEV/ZpXbPiVawaVUV1zugffv23Nnrq+EwFcfxLAE+lKEHfLMB9pIQHx/PlqnJSJQnRqk8ybFW+p7wP6xhybj0a6+9BvjKZo1COYSiMuM8EtAsivjhHE0XipJi/PrrrzOjXtgTsyGbOg96Cc6cOZPlm9KloR4N+Uh5XUlm+TcrP8VVkvzRNhsRTcM4NWzYkN3+9ttv3Ildhw8fzspBcuAr0hVG2tMhy9xU4WqwKHG1Jr4yQ77QhDdLX5leWbxfvnw5kBU8ssCONmZLBIG3GBtZQ9DL0O+//872Rynf1AvhNoFeUEN3K+X3NH+808EFHJF29+7d2b3auj5ZocdFHBGOyuILYmNkPp+glTgtTX8+ZyR/LU18zAiLR08TnoxY4Wapkyy80bgchxrsft68eZbS5/GX5SufM/HV1Jo1a7LVR8Kzf//+DEeaM9JPy5qBWR2b1ZFVawhmdYSCxOZh9Icb/izfnMco/2blN8ufWflwyM7aJuFJWy2oD8vySfNyyh+fM9I8kp7R3AwLT4E4/rwcJby6hMhM099ME58nrqcJr+RnJSz8I6EkXrP0efxl+Tps2DCGGjcVQlhQoyHin1AwsmZghrFZHZlZQ3jrrbeclDetn3JTvHHjxqwRk+CRsTFlnRrl36z8ZvkzKx/lg7ZfSBg5Ufvkn7jgizW0H8nzjN9zYUG5gHL3klzvi3Kx1ITHqnhIiRY09Kwp0EIf7vVplhwPk8CTTz6p6edLR6P8WU2H4qAFGnxZAI7k2NqIVV5vwt0XYfQmQ5JXIlBWEdBdwCmrgMhySwT+KATEPiMOfP+oPHidLq1kaeVfa4XrQQ2nlS+vgZERlCoE5DC1VFWXzOzDjIAcpj7MtSvLVqoQkMJYqqpLZvZhRkDMGbUK6dekCQS3aQu5H7wPtrhKENq7N+SuWA5O/A6it2RLqA6Ag2SnQkvd2zjLAr8Nz4LiwVT3ouLxN9TpcXczeLIlJYF/AzzqWOAA+3ffAarZG4TW95J1qI9NSXxUteoeRQCaGYjs3gNyP/kEbFWrQPkXukNe2tdeC6OtTl2IQ/Uf+6XfIfPl3u6JyidDBOIWLgKbv3u12fHwdsaLrmNbhszoGdjzRYge9Vdw5t/Fl6EfKRBCRup4cHyPQukByTr0ACyLQd1r1SKTV8FCQqDilLeLNSiv4ixjzLe3bYUcHKEIupsvbo1ubFWrQvTI0ZCzfx/cmjgBRztxUGnVaoh6803I6NUTwG43Yi/yk3VYhIUP74oJo3+79hDaujWE1K0HfhUqFE8qNAzCJkyEcniyveBmFtyY+S7gF3KKwkXHQPQ/54EdT2NkDX8dx6HuWyZhw0dAYOXKkE+fa8PDwpI8R6AgIxOcKrUpK7EE06f7EPPbaGQJj5VA0PNdGFtAbBz4NWsOjr17rEQDocNkHVoCysNAbtLg/9xzEPv2VAjGYWT2vr1w79dzxaKL/Z93IKJjJ7BfvQpBtWpB9JSpbnMYv+oJEIhv4JBHHwX88L0bvx8KMA11byz4GOO2Psdxi0Q+QIU+fSD2i68g8r25EPBUa8uI+Fd2abI7fzwBNG+s8HJfyP33D4zfv3IlS/FQHUaiJoOsQ0tweRSoSBjRfEPM+FQmZJmvvQq5/zsLsnF+WIxwg/3q0MFwY+AAyN69CwJQ1cqG5hM4OQ4fhox3p0HGW28CKBQyISoKoidMgjxU+8lf+RkPLq8eInB782bIxnOeBfgVrNCmf4aYd96BwL/8xVIs/hWjwFFYJ5GpE8B++QrcQlMYRH5YP6Yk69AUIm8CCGG0JdcGW3AIZO/8l7sQqWK/MX8eOAttruSfPuXyRY1/QWjjxI66XgX/wngUFDF2HPjjAdzstO3gh43IPzYG/LDnpOGRrVaiIqS8NUIgZ/o0uD1+LFzv1weujhrJFmKiBg1mw08jPvJz5GSDLTAAAnF+GFKvPtx4bw7YoioyNgfaCDUjWYdmCHnnL+aM/slJLKb8H1zDFnrwi4ktFrv9RJHxo6A69Zi/89y5YuHUDkFJycwpeuQoN6+42XPgzo4dcOdvk93c5YM5Ag7clshOS4NwnDbQ6AS/LmvIZM/MZC/c6BGjIHvPbnDgVIT3qg6ch5qRrEMzhLzzF8JIE3oiv7hYKMCrrUEDiHzxReam+ReGCzlNm8I92nPEIZMb4SIO5KENEbSHwynzv4diQwjij1A+dSIEosmCzBHDAD+JLNzljWcIBCCGqKkNTpzDu5FGHdz7yfUiRVuacGfueyx4cP0G7OpQWZgDDX5Zh24I+/xBCGPBKdeQM7JvP8iuFg8RHTpqbj8EtXgc7GjSLqJnL7AFBcHN//unW6ZsaJgobskycNzKgms9cO+rUMghM4NpMfPADhRUahS+OEDA43zYrzbCfcxYyN6+FZyZ1yEMV0dDUhriHBJXQdGYEie9OqCpgwPNItKhARuuaPv/qQmEt30G8o4ewV71PGcHPX5ZhwKi+3IjhNGJwnhj4ScQiStskb1egpwD+yHvyGGIGjQEJxvYV+LmMFEFFFaifByaZs6dAwU4THIj3IOy+fuDLSQU0FJVkTC6BcIdD4yPfpI8QCAgEEIaN4awxx8XTDnp6XD77Snimd3o1QEKbMbEVIiZMQvi/uFauLmHNmluTn3bGr97KFmHKjy8fbRhBO4bgRERaKk4GOgtqEk4PGV7h4Wm7LTC2GrWZG9qJ1b0f4q0VJBKkwqVZZzIkBMOTW24sumg7aEbNzRZDesARzTsWB29EGm/Ehfd1GTIrw4sn32CQHFh9Em0MhKJgETAUwTE1oanjDK8REAi4FsEpDD6Fk8Zm0SgxAhIYSwxdJJRIuBbBKQw+hZPGZtEoMQISGEsMXSSUSLgWwTEPqNWtH9CvcPar/SHDU+3gkrNW0CLmbNg94jhcGHTRq3gpm4Nhg0Df9wDU9JdXJo/uXCh0kneGyDgCwwffWMkxD/TnlnUO4VfqPrlc9c36w2SFV4VUOE8ZfQYqFCnDtviurxzFxyc8jfhL29KjoDh1kanrdug2jPtYH2LZlCz2wvw2MRJcBDPkB5SfG7MatJ+gYEwMLfolAjnQ1vq8EmQ4TuBBy3zV19g2CXtG6jydGvXXnEhoodnzoD0SRNN8Q3F86/9zp1n4ajemD4qavFkfP89rGv+Z1N+GcAYgf+4FOTgWdb0SRNEru5mqc61Ch95o4eAC8NU4X03y9rZ3updukKVp56G/Js34bM6yRCP9o3afrYKGqJGzSEUyHydAwQ8ofyMDDiKZ1qPo02k23gCKxpPA/VI/45deRh5LTkCxYSxFWrpV+/cBUJiY8FPbfgI0wnBA8S9fzoFEYmJ4MBzp+mTJ8Kx91yHjikblfB7jV3SdkABHr1aEhvNwiizl3c9E04vW6Z0kvceIuDCcLmHXACNJ+BLEHuyf09/B+6iBsdjk12aMtTDNcFRz/7x4wzjpDrdP/avIky5agnsPj8rS7jJm5Ij4LaA02bJUqiLunGhqDCcc/EiFOBBbjWljBoN5dFCGZ0r9UeF5BbvzoQghT5jVTx4TMOpQNRVjFR8B53HE/VoCvxXvh36X8uEJ+agEGPjkOQZAiXFMAwPmhPRPLHOgAFA8TgK61irroxyRUPWdqtWsSA//H2qUVDpZxEBIYzl8JPISS/3AZoLrG3yGKxMSoTLqMlfjNCmDfWGC0KDgRZf6FB4AtlWKaSjc2bDufXr4KeFC+AGavVzcqCxo2w0y0hDJEojGBWNG4wYCZ23bedB5NUEAW8xDCxfns0V76HKWks8KE71QGsARCFoB8cqBeCLttcPh9jL+Cwu/hyb+w+rrDKcAQJCGB/p1Yv1Urfw4LBSiNS8V9Dkw+EZM5jzrTNn2LUcfg6akx1Vo7ajOcBdQ1D7XEkoxCsSa8KnMVFMkI/MmskaRtXWbdx6ViWLvFch4CWGjkI1q06bNrNV7RMffQghhQrk9mxr804aybx09DgE46ffrh44AGm9X1JlUj6WFAEhjFWebMXiuPhNmogrnAwNq+j8lk3ChYarRJdQU98jwkZ1YEIqZONQmCo3vv2zHrFrBSatDfWvNIbTyrOmmwrDBAsY5tE36xHvyq2eYqOavaNHQQwaqia6o/pmvWaa6Njhy6+ARlE3UBl5Q8siVS698NLdOgJCGO1olZqofK1a7NooNRUik5PZvdZfxfr1IRhNOTIjuLi0rSTaDolKSVE6FbuneWUIfVgTG9VlNP/gLZG6lPqnFac6jJaaFfH9UeG08qznpsTwkgpDqoNoVR1c++6gKyrE/JtX+7P76IaN2PW3TUUvWXLQ4o+oWRMSnusABdhWaLtLkm8REKup1CMmolJxNXzDvvzzWQhHjX16i6opqU8/iEODUglod4X8Ty5e5BYkuV8/aL14CROypVUrQx7aTyWKR8sB7dAq3IWtW9jcMalPX/APDYW7+LamxSJJ5ggYYZirwDC5X1+sg6XF6iB98iR2iINSim/TBlLwEAatmtvRGNWZNatFBvT4Ezq56pzWCTpvLZrr04hk6wtd2QqtiETeeIyAEMaf5s/HinoVKqEWeTi+AUlIbuJQhLYqaEnbXjjfqFivHlTEUxi00np+41fF5oYkYJyUp20C0D0wPBwS0VwHJ1oAWtvUNUzibvKqj4BVDP3R0DQnP8WJp1xU9j6Amv7Np73LTtFQGFoU2tqtKw/Ornr8PBD1yHEtWvBHJvThaCuXtksklRwB6vrcNP0j0bhtIG5V0KkKLQrF5XEnViDv8bTCJHTqDPdu34LLu9xXY+mNSj1v+Zo14PKePXD96FEtdulmgIASwyuIYaYOhvFYB3aNOqCog3Alu0bnTjjFcMDZNWuK7QVTGCN+8pfkewSKCaPvk5AxSgQkAlYQEAs4VgLLMBIBicD9Q0AK4/3DVsYsEfAIASmMHsElA0sE7h8C/w+7PKyfpmSflwAAAABJRU5ErkJggg==" width="227" height="74" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="updating-all-the-nodes">Updating all the nodes<a class="hash-link" href="#updating-all-the-nodes" title="Direct link to heading">â€‹</a></h4><p>The PCF update will continue and upgrade:</p><ul><li><code>node:2</code>, Redis Cluster will move the masters (cluster, shard, endpoint) to another node, in our case <code>node:1</code> for the replicated database (<code>db:4</code>)</li><li>once the <code>node:2</code> is done the same work will be done on node 3.</li></ul><p><strong><em>Cluster Nodes:</em></strong></p><p>All the nodes of the clusters are now updated to the latest version of Redis Enterprise (5.4.4-7) supported on PCF.</p><p><img loading="lazy" src="/assets/images/004-rladmin-cluster-version-dd27e6412baad13cfb46a3cec6b63f5b.png" width="493" height="92" class="img_ev3q"></p><p><strong><em>Shards:</em></strong></p><p><img loading="lazy" src="/assets/images/004-rladmin-cluster-db-b44fd193b8d24e267f1ccf68c0387d97.png" width="547" height="92" class="img_ev3q"></p><p>The update of the database is done automatically, so after a while if your run the command <code>sudo rladmin status databases extra redis_version</code> you will see something like:</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAABKCAYAAABJneNqAAAKv2lDQ1BJQ0MgUHJvZmlsZQAASImVlwdQU+kWgP970xsQQpcSepPeQUrooQjSQVRCEkgoISYEFDsirsBaUBHBBrooouCq1LUiim1RVIp1QRYFZV0siIrKu8Aj7L437715586Z/5tzz3/KP/efORcACpolFKbBcgCkCzJFYX6e9JjYODpuAOCBMpAHKoDKYouFjNDQIIDI7Pp3+dgNoKn1vtlUrH9//1+FyuGK2QBAoQgncsTsdITPIjrCFooyAUAdQuy62ZnCKW5DWEGEFIhw7xQnz/DIFCdOMxpM+0SEeSGsAACezGKJkgEg0xE7PYudjMQheyBsKeDwBQgLEXZj81gchE8hPD89PWOKnyBslPiXOMl/i5kojcliJUt5ppdpwXvzxcI01sr/8zj+t6SnSWZzGCBK5on8w6Z6Rs6sNzUjUMqCxIUhs8znTPtPM0/iHznLbLFX3CxzWN6B0r1pC4NmOYnvy5TGyWRGzDJX7BM+y6KMMGmuJJEXY5ZZorm8ktRIqZ3HZUrj5/Aiomc5ix+1cJbFqeGBcz5eUrtIEiatnyvw85zL6yvtPV38l375TOneTF6Ev7R31lz9XAFjLqY4Rlobh+vtM+cTKfUXZnpKcwnTQqX+3DQ/qV2cFS7dm4l8kHN7Q6VnmMIKCJ1l4A18QBDy0EEksAa2wArYZXJXZE414pUhXCniJ/My6QzkhnHpTAHbfD7d2tLKCYCp+zrzObzvnb6HkBJ+zpbxFgCHDgSuzdkSdgLQ8AZJOz5nM0Dqo3oDcF7IloiyZmzTdwkDiEAWqVAVaAJdYATMkNrsgQvwQKoNACEgAsSCpYANeCAdiEA2WA02gHxQCLaD3aAMHASHwTFwEpwGjeAcuAyugVvgLugCj0EfGASvwSj4CCYgCMJBFIgGqUJakD5kCllDjpAb5AMFQWFQLJQAJUMCSAKthjZChVAxVAZVQNXQz1AzdBm6AXVCD6F+aBh6B32BUTAZVoA1YAPYAnaEGXAgHAEvgZPh5XAOnAdvhUvhSvgE3ABfhm/BXXAf/BoeQwEUCaWE0kaZoRxRXqgQVBwqCSVCrUUVoEpQlahaVAuqHXUf1YcaQX1GY9E0NB1thnZB+6Mj0Wz0cvRadBG6DH0M3YBuQ99H96NH0d8xFIw6xhTjjGFiYjDJmGxMPqYEU4Wpx1zFdGEGMR+xWKwS1hDrgPXHxmJTsKuwRdj92DrsJWwndgA7hsPhVHGmOFdcCI6Fy8Tl4/biTuAu4u7hBnGf8CS8Ft4a74uPwwvwufgS/HH8Bfw9/Ev8BEGOoE9wJoQQOISVhG2EI4QWwh3CIGGCSCUaEl2JEcQU4gZiKbGWeJX4hPieRCLpkJxIi0h80npSKekU6Tqpn/SZLE82IXuR48kS8lbyUfIl8kPyewqFYkDxoMRRMilbKdWUK5RnlE8yNBlzGaYMR2adTLlMg8w9mTeyBFl9WYbsUtkc2RLZM7J3ZEfkCHIGcl5yLLm1cuVyzXI9cmNUGtWKGkJNpxZRj1NvUIfkcfIG8j7yHPk8+cPyV+QHaCiaLs2LxqZtpB2hXaUNKmAVDBWYCikKhQonFToURhXlFW0VoxRXKJYrnlfsU0IpGSgxldKUtimdVupW+qKsocxQ5ipvUa5Vvqc8rjJPxUOFq1KgUqfSpfJFla7qo5qqukO1UfWpGlrNRG2RWrbaAbWraiPzFOa5zGPPK5h3et4jdVjdRD1MfZX6YfXb6mMamhp+GkKNvRpXNEY0lTQ9NFM0d2le0BzWomm5afG1dmld1HpFV6Qz6Gn0UnobfVRbXdtfW6Jdod2hPaFjqBOpk6tTp/NUl6jrqJuku0u3VXdUT0svWG+1Xo3eI32CvqM+T3+Pfrv+uIGhQbTBZoNGgyFDFUOmYY5hjeETI4qRu9Fyo0qjB8ZYY0fjVOP9xndNYBM7E55JuckdU9jU3pRvut+0cz5mvtN8wfzK+T1mZDOGWZZZjVm/uZJ5kHmueaP5Gws9iziLHRbtFt8t7SzTLI9YPraStwqwyrVqsXpnbWLNti63fmBDsfG1WWfTZPPW1tSWa3vAtteOZhdst9mu1e6bvYO9yL7WfthBzyHBYZ9Dj6OCY6hjkeN1J4yTp9M6p3NOn53tnTOdTzv/6WLmkupy3GVogeEC7oIjCwZcdVxZrhWufW50twS3Q2597truLPdK9+ceuh4cjyqPlwxjRgrjBOONp6WnyLPec9zL2WuN1yVvlLefd4F3h4+8T6RPmc8zXx3fZN8a31E/O79Vfpf8Mf6B/jv8e5gaTDazmjka4BCwJqAtkBwYHlgW+DzIJEgU1BIMBwcE7wx+slB/oWBhYwgIYYbsDHkaahi6PPSXRdhFoYvKF70IswpbHdYeTgtfFn48/GOEZ8S2iMeRRpGSyNYo2aj4qOqo8Wjv6OLovhiLmDUxt2LVYvmxTXG4uKi4qrixxT6Ldy8ejLeLz4/vXmK4ZMWSG0vVlqYtPb9Mdhlr2ZkETEJ0wvGEr6wQViVrLJGZuC9xlO3F3sN+zfHg7OIMc125xdyXSa5JxUlDya7JO5OHee68Et4I34tfxn+b4p9yMGU8NST1aOpkWnRaXTo+PSG9WSAvSBW0ZWhmrMjoFJoK84V9y52X714+KgoUVYkh8RJxU6YCMhjdlhhJNkn6s9yyyrM+ZUdln1lBXSFYcXulycotK1/m+Ob8tAq9ir2qdbX26g2r+9cw1lSshdYmrm1dp7sub93ger/1xzYQN6Ru+DXXMrc498PG6I0teRp56/MGNvltqsmXyRfl92x22XzwB/QP/B86tths2bvlewGn4GahZWFJ4dcidtHNH61+LP1xcmvS1o5t9tsObMduF2zv3uG+41gxtTineGBn8M6GXfRdBbs+7F62+0aJbcnBPcQ9kj19pUGlTXv19m7f+7WMV9ZV7llet09935Z94/s5++8d8DhQe1DjYOHBL4f4h3or/CoaKg0qSw5jD2cdfnEk6kj7T44/VVepVRVWfTsqONp3LOxYW7VDdfVx9ePbauAaSc3wifgTd096n2yqNautqFOqKzwFTklOvfo54efu04GnW884nqk9q392Xz2tvqABaljZMNrIa+xrim3qbA5obm1xaan/xfyXo+e0z5WfVzy/7QLxQt6FyYs5F8cuCS+NXE6+PNC6rPXxlZgrD9oWtXVcDbx6/ZrvtSvtjPaL112vn7vhfKP5puPNxlv2txpu292u/9Xu1/oO+46GOw53mu463W3pXNB54Z77vcv3ve9fe8B8cKtrYVdnd2R3b098T18vp3foYdrDt4+yHk08Xv8E86TgqdzTkmfqzyp/M/6trs++73y/d//t5+HPHw+wB17/Lv7962DeC8qLkpdaL6uHrIfODfsO3321+NXga+HriZH8P6h/7Htj9Obsnx5/3h6NGR18K3o7+a7over7ox9sP7SOhY49+5j+cWK84JPqp2OfHT+3f4n+8nIi+yvua+k3428t3wO/P5lMn5wUskSs6VEAhSiclATAu6MAUGIBoN0FgLh4Zp6eFmjmH2CawH/imZl7WuwBqEaWqbEr2AOA/VMzyHoA5BAORTTCA8A2NlL9p4iTbKxnYpEakdGkZHLyPTI74owB+NYzOTnRODn5rQop9hEAlz7OzPFTIncCgEPNVvYO4b1/2FaAf5F/ABd+EZP5FwFoAAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAF3xJREFUeAHtXQl4VUWWPi97gBDJwr6JCSIIiE0LLiggqCziqDC2gPiJozCyCA4SEEfkmxlRYFDGpR0RVMBtxL1lERFbFhG0W1BRQRRRkCVhz0J4eW/OX0kV997c7eW90ECqvu+9e29VnapTf9W5tZ5zA0QU5p92GgGNwD8Ygbh/cP46e42ARqACAS2MuiloBE4TBLQwniYVodnQCCRICOrVq0d33nmneCwrK6OtW7fSBx98IINN1/vuu4/y8/NpwYIFyn/48OGUkZGhno033333nSktO/rExEQaM2YMxcXFUXFxMe3YsYPWr19PBQUFxqTEvR29jHTvvfdS3759qW7durR9+3bB44cffiiCUT6U0+h++OEHev/995WXG72KpG80AtWEABZwwtxQw1Z3/PjxcM+ePUU44uA3ePBgES0UCoXT09NVWDAYtJKr5z179qh4TvSXXHKJii9vkOZNN92kaN3yR9h7770nSMEbfnBr1qxR9PySEX7Gv71796pwL3qJgb6WtwWNQ8xxKE9QCuO6deuEALz66quiQXMvFU5LS1MN9pNPPlFtedq0acq/W7du4X79+okfBKGwsFA9t2/fXsVzopfCuG3bNkH37rvvinzwbKx0J3q8GCBsJ06cCLdr107QtGnTJtysWTNFj3DwBX/5a9CggQj3Q2/kQ9/HvCGqeqrB2JqFcenSpQqUtWvXCoEYMmSI8isqKlLCyMNP5W8EEMJ44MAB2zAneimMmzdvFnRt27YV+fz000+mdJzoMzMzxcsDvWnr1q1NNJI3COORI0dsw/zQI53LLrssXFpaGj569GiYh9a2acn89FULbCRtwHUBZ+PGjZwWUZcuXcSVGyKlpqbSN998Q9ywKTc3l+Lj40WYnz8/9ElJSXT55ZfTp59+KpJctGiRStqNHnPL3bt3C36+/fZbysvLU3TGG6Tfp08f9eNeXwT7pe/Vqxdhflu7dm1ioTcmre81AlEjIN7ucphq7Bl5MUP0TsuWLRNx3njjDfE8ZcqU8JYtW8T9XXfdVal3cOoZ3ehlzygSrfg7dOiQKW03ekYhjCEnLyypJH788UfTEBs9o9U9+uijKg8veuTBQhh+6623wnPnzlV08Nc/jUEM2oDzMBUNFW7hwoWisXHvIYaCmENOnTpVhPGKZ6WG6CSMbvRSGDH827BhQxhzVbjVq1er9N3ojUA888wzYv4I+l9++UXRQxgxxMRcV/5atWqlwmUaTvQyXF+14FVTG3AWRrm6OHbs2HDz5s3VCuWuXbvC+/fvR1sPY8XVypidMHrRS2GUc0bM4SA4ECAeCkeUP/i55pprwpg/ghc5h0RaTnNGaxns6K1x9LMWyli2Acc5Iw/ZxH4dyxvxMJUmTpxIgUCAWPioTp06hLkXN25xve6665gndxcpPQ9RRX7Is1atWhHnj71F7hVFGrya686cTagbPeaNVUnTJhvtpREwISB6NjlnRM+Bng+9CNzKlStFOIZ76GU6duyoesJXXnlFxFmyZIny45RFPOtqqhe97BmR/0cffSS2IJA45oBI04sePRlosa/IizfhefPmCT5QDszzkAbu8fvss8/UD2VAmB96xLvttttEmYFFdna2qdwI1z+NQRRtoBw8bF9Ih4aGIR6GjLx6KhoYno8dO2ZqbFKAjBvnYAQNHsNYI1Ne9NiLRL5wuGKI+uuvv6ohphc9hEnSy3KAD+NeKNKwOsxRwacfesS7++67RRLIy7iHaSyrvtcCWZU2EKgg4suZ73DUbeDAgWL7Bcf1li9fbnuczqmkfun5cANxL0y8uOSUlPbXCESMwFkljBGXXhNoBE4jBBwXcE4jHjUrGoEagYAWxhpRzbqQZwICWhjPhFrSPNYIBLQw1ohq1oU8ExDQwngm1JLmsUYg4FvTPxJNfDvkjPTGcD4cQPPnzxca+HzwQATx/qCrpQEj/dl+j5NQfNBAFJP3NoWFBdbppJ07d6qiAzcnCwbwd8PVq15kJlW1gMCKBMQ6pvTiiy/KpMR15MiRxErn9M477wj+nPj3U34k6MRfJOW74YYbiFX06IUXXqA333xT8Ml6r9S/f396/fXXife9hR+0dQYMGECsLECHDx8WfrH6E5ve8gSOcVPcqOkvN/iN4dhEt2riM1OmzX753LlzZyOpukcaiOOVv0ynpl3ZxIjCSt7gwIHxMAMON1idPIjhhatXvQBveUYZ+eIHZ7Sg4FYnUPYGjfG0EpS/4YeTXqB1499P+d3481O+VatWiTLJ8uEqtXlYhU+EffXVV6pdc+ch/HAay63sVQgrFx5ZaU6a/lIYvTTx3RjAgW1o2KOwOLqGexwgB41X/m7pns1hsjHiWCIUm2fPni3wwwklWW40ZicLBn5wdauXaC0gbNq0STTcGTNmKH5feukl4cc9kPBz49+r/H74cyvf9ddfL/CEuh5U6FiXVliLAE/cW4elMKLN9ujRQ/B7yoTRqM9o1PSXwii1Kpw08dFg0FDcNOFRMOvZVdlonPKXDa+mXWVjXLx4sWrMJSUlosFILNBw8HKTz8ZrJLja1YtfCwjGPI33999/vxA8o8WGffv2CQFAG0JcN/69yh8Jf3blwzlluAkTJij8cNYabtasWUoY8Yzz0eC3uoTRdQHHqunPjAgtDSdNfITHUhPeLn/kUZPdc889R8nJyQSLe0bnZMHAGEfeR4KrXwsIMm3r9amnniIWAmrRooU4ptikSRPKysoiflkTK6ir6H75t5Y/Wv4aNWokeGCdXcXLihUrxD3mhtJxB0N8FlnN36V/rK9C2u3eoEZNf9kz4g0hnVUTnxnzpQlv94byyh9p18Sf7Bkwt5b2fzAkzcnJUXigZ7E6OeeJBFe7egHmGL65WVDwqpeff/5ZsAdtmjlz5oh7NgPqi38/5ffLn135MEKDv7EMgwYNEjxCcV4OU59++mkRD/Grq2dUq6nMTCUn3xqsgaHCWHNDvJWhz8fjdXFYmi3DqXBuKMSLOuo5mhu7/KNJ70ymxYpkQkJ5dbGKGbFJEVNxED59+nTlx/MydW+9iRRXXgwSvRlbQKARI0bQeeedJ+wgobfz495++20aP348DR06VNizBc2TTz5pIvXi36380fAH/VzozMK2E+z1wsmVXbR16bCCjVVVXuOg3r17S++YXl2HqTymF5nJYQ0e+C1H3EtS06ZNxZI1jERFYpQqEu7t8o+E/myKC4PSd9xxB/ErWzQK4xAK5eR5JLEpFPXjOZpj8auK6z333CMMeXFPLIZsVh6cMpw5c6bgG/liqIchHxTWjc6Lf6/yI62q8IetNThMvaTr0KGDuP3tt9+kl7iOHj1alANtvzqcozBifweWuVH5VuDAiFUT38hcLDThvfI35ldT7l9++WWC5TtYXWe7slUqdrS4ullAcGLo999/F/uj4Bu9EG8TOEV19fdT/kj5kx0NL+CovG+88UZxb7WoD8vzvIij4qEssXZivCznFliVs9P0l3NGhNtp4jNTIh0nTXgYseKN0zAsvGGMzsMOcf/ss8/6yl+mX9Oucs4kV1NbtmwpVh+B4bBhwwR2mDPiZ2fBwKteverFrwUEr3phQRLzMPzxhr/gW9K48e9Vfi/+vMrHQ3bRHoEntlpYB1bwiXk5+JNzRswj8cwmZkR8RJL4y3LE4FouRF6a/l6a+JIRJ014I70obcUfhBK0XvnL9GvaddSoUQIpaR4E5UejgZOfTXCzYOCFq1e9eFlAeOihh8Lgze5n3BTv1KmTaMQQPBgYM9ajG/9e5ffiz6t84APbLxBG6dAm5Wct5GIN9iMlz/wNFxFVCqj0j/ZaLcrFWhOeq+UscljQcLKggMU93uuzLS0fIKErrrjCNiyWnm78+c0HaWCBhl8WxKM3sR7ilzZW8apFGGPFnE5HI1CTEHBcwKlJIOiyagROBwTUPiMPgk8HfqrEA1a17Pi3W+06XePZ8VUlMDTRKUXA2saiqUc9TD2lVacz0wg4I6CHqc7Y6BCNwClFQAvjKYVbZ6YRcEZAzRntosRdfDEl9+hJxU89SYH6DSj1lluo+JWXKczfQYzWBZo1J+JBctigsR5tmmcrfYDPgvLBVHPx+Pgb6/SY/VyeAjk5FN+OjzeWhSj4xRfEavYusZ2DdL05YxNtiKWGzcklsMmB9BtvouLnn6dA40ZU959upJKVH0UtjIHz21B9VgUK7v6dCm69xZypfqqEQP35L1Ag3lxVQT68nX9z+bGtSgQWj8SBN1PmuH+jcOlxfgHGQYGQ8vMmUuhLFsoInK63CMCqQlRzDVchgYhJUlKo3tSHKzWuiNOpYQRHP1xORTwqUe54qbp1uwk0bkyZY8dT0frP6MjkSTzCqU8NXn+DMh58kPIHDSQKBt3IT4bpejuJRTXdVRLG+F69KbV7d0ppcwHFnXNO5WxTa1GtSZOpNp9yLzt0mA7OfIz4Czkn42VmUeafn6Ugn8w4PPoeHoeat0xqjR5DiQ0bUik+18YHh7Xzh0BZfgGFLWpTfiiT8bk+xvkoG1niYyWUdH1/QZaQXZ/iLulCoXVr/SRDqaN0vfkCKopIJmmIv/Zayn54GiXzMLLws3V04pcdlZLO/q9HKK1PXwru20dJ555LmVOnmeYzcc2bUSK/jVMuvJD4w/cm+jgWYAx1D857jtP2P98xJVJDH84ZPJiy3/sLpT8xhxKu7O4bhfiG5Zrs4e+2EOaN59w6hIr//jdBH9+wga90UG/prMmg680XXFWOdFIY2ZRD1sQ8IWQFd9xOxf89iwp5fljJ8Qb7vpF308E7h1PhmtWUwKpWATalIF1o0ybKf2w65T/0IJFBOZMyMihz0gNUwipApa++JqPrqw8Eji5dSoV8zrOMv3yV2vmPlPXII5T4pz/5oCSKr5dBoYp6SM+bRME9e+kIm8KAi+M68XS63jwhilUEJYyB3NYUSE6hwk//ahYiS04H5z5L4Qr7K6XbtpaHssa/cmzvJMh6X2V/5XQMLm3C/dww6rGAr6A4blDx2VkUxz0nhkqBc1sZYupbKwJFj06noxMn0IGhg2nfuLFiISbjrrvF8NMa1/ocKiqkQGICJfL8MOWCtnTwiccpkFFPRAuxjVAvp+vNC6HYhas5Y3xujki19G/lQxg8xGVlV8opuOWkIaSk8y8Q4eEdOyrFs3ok5eQKr8yx40xB9Wc/TsdWraJj/z7F5K8f7BEI8bZE4cqVVIenChiR8Bdl7SNW+AYLCsRLNnPMOCpcu4ZCPP2QvWqI56FeTtebF0KxC1fCiMk9XFz9bCrja6BdO0q/+WbhZ/tXixdyOnemE9hz5OGTyfEiDpWwPRG2hyNdwb+O5EaRJB+pbt5kSmTzBQVjRhF/Eln56xtvBBIYN9bOpjDP203OBvcT35e/PNl+Jh2b84SInty2nbiGLBbmyIZe15sJ4Wp9UMJYtrV8yJk+ZCgVNmlKadf1sd1+SOp6KQXZvF3awEEUSEqiQ//7ZxODATZSVH/BIgodOUz7b+J9sAohp4J8ocUsI4dYUNFAYnGAQKZ5Nl4DwPq+CVS4YjmFCw5QLV4dTWnfgeeQvArKxpSkc8Id04UQm0XEoYEAr2LH/+FiqtPzair5ejP3qjslOTnR63pTEFX7jRLGMAvjwfnPUzqvtqUP+mcq+nw9lWzeRBl3jSAKcV/JG8Vw57CwwpXy0LRgzuNUxkMmk+P9qEB8PAVSUnn1IP6kMJoi8Y4Hp4efdh4IJCRSSqdOVOvSS1XEog0b6OjDU9WzuHHCnQU2f3IeZc2YRfX/p3zh5gTbpDk07WF/9OZYut4seMTyMcCJmTcC09LYUnEy4Y1o63h4KvYOK8za2cUJtGwp3tphrvRT5exUV6zqLeDldI9nixcMOfHQNMArmyFsCR08aBvNFXcexYhjdXgJYr+SF9qszpXeGlk/xxyBysIY8yx0ghoBjYAfBNTWhp/IOo5GQCNQfQhoYaw+bHXKGoGIENDCGBFcOrJGoPoQ0MJYfdjqlDUCESGghTEiuHRkjUD1IaD2Ge2y+APrHba+bRi9e1U3atClK3WdOYvWjBlNvy75wC66p1+7UaMonvfDjO44L9P/MH++0UvfWxCIBW4X3juWml7dW2ztbOUvVP38Vvk36y1ZeT62vv12CvO+87aFizzj6giRIeAqjA34C1N1eM+wNp8CyeKN5zp8uiazY4cqCWNcYiJdNsf8GTCwynbVtTC61FkscOu/8mNqdFX38v1hzqt53360aeYM2vDAZJecKwe158+6deXDAyHeq9TCWBmfaH1chTHaxO3oi/gs64YHJqmg44ct51pViL4xIlCOW57yOn7Y33ne5v0HUKMrr6LSQ4fotfNzqSnbNOr52uvUgbVovmKBLHU4QKAyqrhJ45fyJdMf40PL2JrWrjoQqCSM3VhLv3m//pSSnU1xViNIzEEKHya+5futlNaqFYX43OmGKZPpmyfKDyCDQfSm/VeuojI+hrUgO1PEMTJecqCAti3SQxwjJn7uy3F72U9UU5xOk/jFxwL090cfoeOswXHRlHLtGFhZuHjyA7R+4v2m+E4P13/8CcXx8UaMZLSrHgRMCzg9FiykNqwnl8oKw0W7dlEZH+S2uvbjxlNdtlaGc6XxrJDc9bGZlGTQZ2zMh5AxtEpkXcV0wzfRZToZF7anfykN0rD9BXTZ4yzE+k0roXG9VhW3WjzFgMM88fzhwwnphCrq1a5+7Ji4/KmnqTZ/sXcPH06HQGtXPQgoYQTYObcOFm++Ny++iF7NaUV7WJO/kmObNugN56UmExZfcCi8GeysVLivH59NO955m76fP48Osla/dCE2fFTIZhkxXMLbNZkVjduNGUv9Plwho+irDQLR4pZYt66YK55gNbXL+aA4sN9YoTuawnZwvBxGOm1HjKQyNg25tG8fr+g6PAoElDCeN2iQ6KWO8CFioxBZ097L5h82zZghvI9s3y6utfnT0NIFWTVqBZsGXD2CNdGNjoX4lVYt6aWsDCHIm2fNFI2kcfcepp7VSKLvGYEocQtVqFn1XbJUrGRveeZpSqlQGg8Wes87r337XdEu9m/cQJ3YEFkiKxJguPrH//hPfnnfqqsohggoYWx0RTeR7K6PV6rk68DQsMXtXLZE+WC4CrebNfUjctzAPp+UR4U8FMYwtWnvayIit4sMbQzr70yMZ8ez8rPg1swHbiX4Zj1j3LDblWIks278OMpi49RwxyzfrFf5GG6SKiwEgv4inmOKrSlOD/ddZ802xNS30SKgFnCCPAyBq8sW3+A65uVRem6uuLf7q9e2LSVzRQmDuF9+aYrS5OpeVLxvLx34+muTv/EB88oUfGSTG9geNgURrbNTl7JL83SPZ8ez0c+I224LbsC9hHEvMOC+/4uNhLoCzh/fPkwkldmho7j+tuTkixUedvTv8R6zFEjE6fXa/1ECq9EtG9BfTDvgp11sEFDCiB6xFSsVN+G37a0//iT2FO0WV3IGD6X6bFCqGdtgQfgPL7I9ToPLHTqUur+4QFT+wsYNqYTtp8I1ZcsBvdgq3K/Ll4lKzBk8hOJTU+k4v7mxWKSdPQJuuBUbcMsdOoRxX1gJ9w1THhAHN5B60x49qD0fvMBKeZCNUW1f/IbK1Il+3/r1Kg5uyliPFb3jb8uWmfz1Q/QIKGH8fu5crrTbqQFrlGOjH0JyiG2kYAKPbYpgxdyj3gUXUD02+4+V1p0f/KXS3BACJp3xtE0C+yfWqUOt2FyHdFgAerNz+ZBJ+umrGQG/uMWzcWnp4gynnIpZwftz1vTvwnuE7cffJ6JgUWj5DQNkdHF1ojdF4gdhnUFvb1hhickzdnBNmv7pbOg2kbcq8i1DT5lbKi+Vh7kyZY8n/Y3XZnzC48TRI7RntXk1Fiuv6HnrtmxBe9audR3GGtOr6fdG3PYybsZhqBGbpox70AZ3xEni1esW/fqyMIXop8WLK+3/Io4bPcK1q14EKglj9WanU9cIaAScEFCrqU4RtL9GQCNwahDQwnhqcNa5aAQ8EdDC6AmRjqARODUI/D8ZS6wNsQEroAAAAABJRU5ErkJggg==" width="227" height="74" class="img_ev3q"></p><blockquote><p>In this example I am doing a â€œminor upgradeâ€, from Redis Cluster 5.4.0/Redis 5.0.2 to Redis Cluster 5.4.4/Redis 5.0.4, and everything is done automatically.</p><p>If you are doing a major upgrade for example from 4.x to 5.x, the cluster will automatically be updated to the proper release, but you will have to manually update the existing databases as documented here.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="updating-redis-on-pcf-services">Updating Redis on PCF Services<a class="hash-link" href="#updating-redis-on-pcf-services" title="Direct link to heading">â€‹</a></h4><p>During the update, you will see other VMs stopped and started in the process. These VMs are used for:</p><ul><li>Redis Registrar</li><li>ResisLabs Service Broker</li></ul><p>These services and nodes are not part of the "Redis Enterprise" per se, but are part of the integration with PCF.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>The update of the Redis Cluster is now complete:</p><ul><li>All the nodes are on 5.4.4-7 (from 5.4.0-024)</li><li>All the databases have been updated to the new Redis 5.0.4 (from 5.0.2)</li></ul><p>The upgrade has been done automatically without any interruptions of service:</p><ul><li>PCF scripts have been responsible for upgrading, stoping and starting each part of the installation in the correct order</li><li>while Redis Enterprise Cluster has been responsible for keeping the databases available for the applications, during the process.</li></ul>]]></content:encoded>
            <category>redis</category>
            <category>nosql</category>
            <category>cloud</category>
            <category>cf</category>
            <category>pivotal</category>
            <category>java</category>
            <category>cluster</category>
            <category>failover</category>
            <category>ha</category>
        </item>
        <item>
            <title><![CDATA[Multi-Nodes Redis Cluster with Docker]]></title>
            <link>https://tgrall.github.io/blog/2019/09/04/multi-nodes-redis-cluster-with-docker</link>
            <guid>/2019/09/04/multi-nodes-redis-cluster-with-docker</guid>
            <pubDate>Wed, 04 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[As part of my on-boarding/training at RedisLabs I continue to play with the product, and I have decided today to install a local 3 nodes cluster of Redis Enterprise Software (RS); and show how easy is to move from a single node/shard database to a multi nodes highly available one.]]></description>
            <content:encoded><![CDATA[<p>As part of my on-boarding/training at RedisLabs I continue to play with the product, and I have decided today to install a local 3 nodes cluster of Redis Enterprise Software (RS); and show how easy is to move from a single node/shard database to a multi nodes highly available one.</p><p>Once your cluster is up &amp; running, you will kill some containers to see how the system automatically fail-over to guarantee service continuity.</p><p>The deployment will look more or less like the schema below, (<em><a href="https://docs.redislabs.com/latest/rs/getting-started/docker/" target="_blank" rel="noopener noreferrer">coming from RedisLabs documentation</a></em>)</p><p><img loading="lazy" src="/assets/images/docker-deployment-05a51fa9caeb5a4cfa634e53d3563ebb.png" width="777" height="380" class="img_ev3q"></p><p>This is a perfect environment for learning, developing and testing your applications, but it is not supported in production; for production, you can use:</p><ul><li><a href="https://redislabs.com/redis-enterprise/pro/" target="_blank" rel="noopener noreferrer">Redis Cloud</a></li><li><a href="https://docs.redislabs.com/latest/platforms/openshift/" target="_blank" rel="noopener noreferrer">Redis Enterprise Software with Kubernetes and Red Hat OpenShift</a></li><li><a href="https://docs.redislabs.com/latest/platforms/pks/" target="_blank" rel="noopener noreferrer">Redis Enterprise Software with Kubernetes Operator on PKS (Pivotal Container Service)</a></li><li><a href="https://docs.redislabs.com/latest/platforms/pcf/" target="_blank" rel="noopener noreferrer">Redis Enterprise for Pivotal Cloud Foundry (PCF)</a>.</li></ul><p><strong>Prerequisites:</strong></p><ul><li>Docker Desktop (<em>I am running Docker on Mac</em>)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-and-running-your-first-redis-node">Installing and Running your First Redis Node<a class="hash-link" href="#installing-and-running-your-first-redis-node" title="Direct link to heading">â€‹</a></h3><p>As usual, installing a new product with Docker is very simple just run the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d --cap-add sys_resource </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name  redis-node1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">8443</span><span class="token plain">:8443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">9443</span><span class="token plain">:9443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">12000</span><span class="token plain">:12000 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redislabs/redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let's look at the parameters used here:</p><ul><li><code>-d</code>: run the container in the background</li><li><code>--cap-add sys_resource</code>: add Linux  <code>sys_resource</code>capabilities to set proper privileges</li><li><code>--name  redis-node1</code>: naming the container</li><li><code>-p 8443:8443</code>: to access the management web UI (HTTPS)</li><li><code>-p 9443:9443</code>: to access the REST API (HTTPS)</li><li><code>-p 12000:12000</code>: the TCP port that we will use for the database endpoint on this node</li><li><code>redislabs/redis</code>: use the RedisLabs image (the enterprise version of Redis)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-cluster">Creating a new Cluster<a class="hash-link" href="#creating-a-new-cluster" title="Direct link to heading">â€‹</a></h4><p>Once the container is started you can configure the "cluster".</p><ol><li>Go top https://localhost:8443/ (accept the connect using the temporary certificate)</li><li>Click "Setup"</li><li>Change the Cluster Name to "my-redis-cluster.tug-demo.com"</li><li>Click "Next"</li><li>On the "cluster authentication" click "Next"  <em>(we will be using the free version)</em></li><li>Enter the user admin credentials and click "Next".</li></ol><p>Once it is configured, connect to the console to the console using the credentials you have created.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-database">Adding a new database<a class="hash-link" href="#adding-a-new-database" title="Direct link to heading">â€‹</a></h4><p>Now you have to create a new database.</p><ol><li>Select "Redis Database" and "Single Region"</li><li>Enter the name "test-db-001", and "0.5" for the memory limit</li><li>Click "Show Advanced Options"</li><li>Enter 12000 in the "Endpoint port number" field</li><li>Click "Activate".</li></ol><p>After  fewseconds, the database is created and available.</p><p>Note: we have not set anything special around clustering and replication; we will do that later.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-single-node-database">Using the Single Node Database<a class="hash-link" href="#using-the-single-node-database" title="Direct link to heading">â€‹</a></h4><p>You can now connect to the database. You can use  <code>redis-cli</code>from your host, or you can connect to the container and do it from there:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain">  exec-it redis-node1 /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redislabs@0a174e819a6b:/opt$ redis-cli -p </span><span class="token number" style="color:#36acaa">12000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:1200</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> SET foo bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:1200</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> GET foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:1200</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  </span><span class="token builtin class-name">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><em>Checkpoint</em></strong></p><p>So far you have:</p><ol><li>Install a single node cluster of Redis Enterprise using Docker</li><li>Create a new cluster</li><li>Created a database that listens on port 12000.</li></ol><p>In the container, run the  <code>rladminstatus</code>command, to get information about your deployment.</p><p><img loading="lazy" src="/assets/images/rladmin-status-16379dccf81bf3c9aa0f0167d2b17a66.png" width="875" height="274" class="img_ev3q"></p><p>In the cluster node section, you can see the address of the node, 172.17.0.2 in my case. This is the IP address of the container, that will be used to create the multi-node cluster.</p><p>It is time to add new nodes to the cluster and enable replication and sharding</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-nodes">Adding new nodes<a class="hash-link" href="#adding-new-nodes" title="Direct link to heading">â€‹</a></h3><p>To add new nodes to the cluster, you start new containers. Since the 3 containers will be running on the same host, it is necessary, to avoid conflicts, to use different mapping to the Web UI, REST API, and database endpoint ports.</p><p><strong>Start node 2:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d --cap-add sys_resource </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name redis-node2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">8444</span><span class="token plain">:8443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">9444</span><span class="token plain">:9443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">12001</span><span class="token plain">:12000 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redislabs/redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Start node 3:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d --cap-add sys_resource </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name redis-node3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">8445</span><span class="token plain">:8443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">9445</span><span class="token plain">:9443 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p </span><span class="token number" style="color:#36acaa">12002</span><span class="token plain">:12000 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redislabs/redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So to configure each node you need to use the URLs:</p><ul><li>node 2: https://localhost:8444/</li><li>node 3: https://localhost:8445/</li></ul><p>I have just increase the port number of the Web UI (8443: node 1, 8444: node 2, 8445 node 3).</p><p>For these 2 new nodes, do the following steps to add them to the cluster:</p><ol><li>Click "Setup"</li><li>In  clusterconfiguration, select "Join Cluster",<ul><li>Enter the IP address of the first node, 172.17.0.2 in my environment</li><li>Enter the credentials you have used during the installation of the first node.</li></ul></li><li>Click "Next"</li></ol><p>After a few seconds, you will be redirected to the home page and see the list of nodes of your cluster.</p><p>Repeat the same steps for the third node.</p><p>Your environment should look like this after the installation and configuration of the 3 nodes.</p><p><img loading="lazy" src="/assets/images/cluster-view-3-nodes-6befd66b9328c4d6f767fd4adc0f326f.png" width="1039" height="457" class="img_ev3q"></p><p>You can also reuse the  <code>rladminstatus</code>command on one of the containers and see the new configuration.</p><p>If you look carefully, you can see that you have only 1 shard in your cluster. Let's now add a new shard to the database.</p><p><strong>Enabling Clustering and Replication to the DB</strong></p><p>In the Redis Enterprise Admin Web UI, (<em>you can use any of the nodes</em>):</p><ol><li>Click on the "databases" tab</li><li>Click on "test-db-001" database</li><li>Click on the "configuration"</li><li>Go to the bottom of the page and click "Edit"</li><li>Check the "Replication" checkbox, to create new shard that will be a replica, to provide high availability</li><li>Check "Database Clustering" and increase the number of shards to 2. This will  <em>distribute</em>the data in your database into 2 shards, this for better scalability.
<em>You can see that the UI indicated that you have  </em>4 shards with replication*. Yes because you have a database that you have "divided in 2", and each of the portions of the database is replicated.
(Also with the free version of Redis Enterprise you are limited to 4 shards, so do not be surprised if you can not increase the number of shards to more than 4)</li><li>Click "Update" at the bottom of the page.</li></ol><p>Go back to the "nodes" tab, and you will see that you have now 4 shards distributed on your 3 nodes.</p><p><strong>Discovering the cluster topology</strong></p><p>Run  <code>rladminstatus</code>to inspect your cluster and see how the various components are installed:</p><p><img loading="lazy" src="/assets/images/rladmin-status-with-db-33f34506e1169431e210c48062116db0.png" width="1206" height="404" class="img_ev3q"></p><p>For example, you can see, that in my environment:</p><p><em>in the "CLUSTER NODES" section that the "node:1" is the master of the cluster
</em>in the "DATABASES" section that replication is enabled, and the database uses a "<a href="https://docs.redislabs.com/latest/rs/concepts/rebalancing-shard-placement/#dense-shard-placement-policy" target="_blank" rel="noopener noreferrer">dense placement</a>"
<em>in the "SHARDS" section you can see the various shards and their placement (</em>node:1|2|3<em>), their role (</em>master|slave*) and their slots.</p><p>Using Redis Enterprise Enterprise Software (RS), all the clustering is managed transparently for you, and your applications. This means that you just have to connect your application to RS Cluster.</p><p><strong>Clustering in Action</strong></p><p>First of all, you have already seen a lot, just using the Web UI (and you could have done it using CLI and REST API), you have moved an existing database from a single instance to a distributed and highly available instance.</p><p>So now if something happens to the system, for example, if one of the masters disappears RS will automatically get another  oneelected.</p><p>Let me kill for example the node 3 that contains the 2 masters for my database.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain">  killredis-node3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After a few seconds, you should see that the master shards are now on another node, in my case node:1.</p><p><img loading="lazy" src="/assets/images/rladmin-status-with-db-002-a1597c1c3fa0c1f1931c9708b14ece85.png" width="1208" height="519" class="img_ev3q"></p><p>So if an application, is using this cluster it would be almost transparent as the election of the new master is happening in the  backgroud.</p><p>If you restart the node 3 it will rejoin the cluster, and the replicas will be updated on node 3 with any changes that happened to the masters.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> start  redis-node3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The same automatic fail-over will happen if you kill a node with the cluster  manager,or the endpoint.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h4><p>In this small article you have learned how to:</p><ul><li>deploy a 3 nodes Redis Enterprise Server (RS) on Docker (on a single host)</li><li>create a database, and make it highly available and distributed easily using the Admin UI</li><li>look at the deployment using  <code>rladminstatus</code>command.</li></ul><p>You have also seen, by killing some nodes, how the cluster fail-over will various master services (shards, endpoint, master cluster node) to another node automatically. This to ensure a continuity of service for your application.</p><p>In another  postI will show what is the exact behavior of client applications during the fail-over.</p>]]></content:encoded>
            <category>redis</category>
            <category>nosql</category>
            <category>cluster</category>
            <category>docker</category>
            <category>container</category>
            <category>cloud</category>
        </item>
        <item>
            <title><![CDATA[Getting Started with Redis Streams and Java]]></title>
            <link>https://tgrall.github.io/blog/2019/09/02/getting-with-redis-streams-and-java</link>
            <guid>/2019/09/02/getting-with-redis-streams-and-java</guid>
            <pubDate>Mon, 02 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[As you may have seen, I have joined Redis Labs a month ago; one of the first task as a new hire is to learn more about Redis. So I learned, and I am still learning.]]></description>
            <content:encoded><![CDATA[<p>As you may have seen, I have joined <a href="https://www.redislabs.com" target="_blank" rel="noopener noreferrer">Redis Labs</a> a month ago; one of the first task as a new hire is to learn more about Redis. So I learned, and I am still learning.</p><p>This is when I discovered <a href="https://redis.io/topics/streams-intro" target="_blank" rel="noopener noreferrer">Redis Streams</a>. I am a big fan of streaming-based applications so it is natural that I start with a small blog post explaining how to use Redis Streams and Java.</p><p><strong><em>What is Redis Streams?</em></strong></p><p>Redis Streams is a Redis Data Type, that represents a log so you can add new information/message in an append-only mode <em>(this is not 100% accurate since you can remove messages from the log)</em>. Using Redis Streams you can build "Kafka Like" applications, what I mean by that you can:</p><ul><li>create applications that publish and consume messages (nothing extraordinary here, you could already do that with Redis Pub/Sub)</li><li>consume messages that are published even when your client application (consumer) is not running. This is a big difference with Redis Pub/Sub</li><li>consume messages starting a specific offset, for example, read the whole history, or only new messages</li></ul><p>In addition to this, Redis Streams has the concept of <strong>Consumer Groups</strong>. Redis Streams Consumer Groups, like Apache Kafka ones, allows the client applications to consume messages in a distributed fashion (multiple clients), providing an easy way to scale and create highly available systems.</p><p><img loading="lazy" src="/assets/images/redis-streams-101-img-1-2968c7ae8874c27aa176d161aa05a1d1.png" width="1012" height="321" class="img_ev3q"></p><p>Enroll in the <a href="https://university.redislabs.com/courses/course-v1:redislabs+RU202+2019_03/about" target="_blank" rel="noopener noreferrer">Redis University: Redis Streams</a> to learn more and get certified.</p><p><strong><em>Sample Application</em></strong></p><p>The <a href="https://github.com/tgrall/redis-streams-101-java" target="_blank" rel="noopener noreferrer">redis-streams-101-java GitHub Repository</a> contains sample code that shows how to</p><ul><li>post messages to a streams</li><li>consume messages using a consumer group</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h4><ul><li>Redis 5.x, you have here multiple options:<ul><li><a href="https://redis.io" target="_blank" rel="noopener noreferrer">Download</a> and install Redis Community</li><li>Install and Run a Docker image: <a href="https://hub.docker.com/_/redis" target="_blank" rel="noopener noreferrer">Community</a> or <a href="https://hub.docker.com/r/redislabs/redis" target="_blank" rel="noopener noreferrer">Redis Enterprise</a> </li><li>Create a online instance on <a href="https://redislabs.com/redis-enterprise/essentials/" target="_blank" rel="noopener noreferrer">Redis Labs Cloud</a> (30mb for free)</li></ul></li><li>Java 8 or later</li><li>Apache Maven 3.5.x</li><li>Git</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="java--redis-streams">Java &amp; Redis Streams<a class="hash-link" href="#java--redis-streams" title="Direct link to heading">â€‹</a></h3><p>Redis has many Java clients developed by the community, as you can see on the <a href="https://redis.io/clients#java" target="_blank" rel="noopener noreferrer">Redis.io site</a>.</p><p>It looks, based on my short experience with Redis so far, that the most complete one around Redis Streams support is <a href="https://lettuce.io" target="_blank" rel="noopener noreferrer">Lettuce</a>, this is the one I will be using in the following code.</p><p>####1- Adding Lettuce to Your Maven Project</p><p>Add the following dependency to your project file:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.lettuce</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">lettuce-core</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">5.1.8.RELEASE</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>####2- Connecting to Redis</p><p>Import the following classes</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">lettuce</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">core</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">lettuce</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">core</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">api</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">StatefulRedisConnection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">lettuce</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">core</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">api</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sync</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RedisCommands</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then connect with:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">RedisClient</span><span class="token plain"> redisClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">RedisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"redis://password@host:port"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// change to reflect your environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">StatefulRedisConnection</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">RedisCommands</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> syncCommands </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When your application is done with the connection you should disconnect with the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>####3- Sending Message to Streams</p><p>Once you have a connection you can send a message. In this example, I will let Redis generate the message ID, which is time-based, and the body will be built using a Map representing IoT data, for example, a weather data capturing Wind speed and direction in real-time.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">RedisClient</span><span class="token plain"> redisClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">RedisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"redis://localhost:6379"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// change to reflect your environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">StatefulRedisConnection</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">RedisCommands</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> syncCommands </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> messageBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"speed"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"15"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"direction"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"270"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sensor_ts"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> messageId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> syncCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">xadd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"weather_sensor:wind"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                messageBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Message %s : %s posted"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> messageId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> messageBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        redisClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let me explain the code:</p><ul><li>Lines 3-5 are used to connect to Redis</li><li>Lines 7-10 are used to create the message body, using a Map, since Redis Streams messages are string key/values.</li><li>Lines 12-14 call the <code>syncCommands.xadd()</code> method using the streams key "weather_sensor:wind" and the message body itself<ul><li>this method returns the message ID.</li></ul></li><li>line 16 just print the message ID and content</li><li>the lines 18-19 close the connection and client.</li></ul><p>The complete producer code is available <a href="https://github.com/tgrall/redis-streams-101-java/blob/master/src/main/java/com/kanibl/redis/streams/simple/RedisStreams101Producer.java" target="_blank" rel="noopener noreferrer">here</a>.</p><p>####4- Consuming Messages</p><p>Redis Streams offers various way to consume/read messages using the commands: <a href="https://redis.io/commands/xrange" target="_blank" rel="noopener noreferrer">XRANGE</a>, <a href="https://redis.io/commands/xrevrange" target="_blank" rel="noopener noreferrer">XREVRANGE</a>, <a href="https://redis.io/commands/xread" target="_blank" rel="noopener noreferrer">XREAD</a>, <a href="https://redis.io/commands/xreadgroup" target="_blank" rel="noopener noreferrer">XREADGROUP</a>.</p><p>I want to keep the article short and close to the way you would build an application with Apache Kafka, this is why I will use the <a href="https://redis.io/commands/xreadgroup" target="_blank" rel="noopener noreferrer">XREADGROUP</a> command from Lettuce.</p><p>The Consumer Groups allow developers to create a group of clients that will cooperate to consume messages from the streams (for scale and high availability); it is also a way to associate the client to specific applications roles; for example:</p><ul><li>a consumer group called "data warehouse" will consume messages and send them to a data warehouse</li><li>another consumer group called "aggregator" will consume the messages and aggregate the data and send them to another sink (another stream or storage)</li></ul><p>Each of this group will act independently, and each of this group could have multiple "consumers" (client).</p><p>Let's see how you use this in Java.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// WARNING: Streams must exist before creating the group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//          This will not be necessary in Lettuce 5.2, see https://github.com/lettuce-io/lettuce-core/issues/898</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            syncCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">xgroupCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">XReadArgs</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">StreamOffset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"weather_sensor:wind"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0-0"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application_1"</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RedisBusyException</span><span class="token plain"> redisBusyException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\t Group '%s already' exists"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"application_1"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Waiting for new messages"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">StreamMessage</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> messages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> syncCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">xreadgroup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">Consumer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"application_1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"consumer_1"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">XReadArgs</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">StreamOffset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lastConsumed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"weather_sensor:wind"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">messages</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">StreamMessage</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> message </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> messages</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// Confirm that the message has been processed using XACK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    syncCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">xack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">STREAMS_KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application_1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code is a subset of the <code>main()</code> method I have removed the connection management part, to add readability. Let's take a look to the code:</p><ul><li>line 3 to 10, using the method <code>xgroupCreate()</code>, that matches the <a href="https://redis.io/commands/xgroup" target="_blank" rel="noopener noreferrer">XGROUP CREATE</a> command,<ul><li>is used to create a new group called <code>application_1</code>,</li><li>consume messages from the stream <code>weather_sensor:wind</code> </li><li>starting at the first message in the stream, this is indicated using the message ID <code>0-0</code>. <em>Note that it is also possible to indicate to the group to start to read at a specific message ID, or only the new messages that arrive after the creating of the consumer group using <code>$</code> special ID (or the helper method <code>XReadArgs.StreamOffset.latest()</code></em>.</li></ul></li><li>line 15 to 30, in this example we use an infinite loop (<code>while(true)</code>) to wait for any new messages published to the streams</li><li>line 17 to 20, the method <code>xreadgroup()</code> returns the messages based on the group configuration<ul><li>line 18 define the consumer named <code>consumer_1</code> that is associated with the group <code>application_1</code>: you can create new group do distribute the read to multiple clients</li><li>line 19 indicates where to start, in this case, <code>StreamOffset.lastConsumed("weather_sensor:wind")</code> the consumer will consume messages that have not been read already. With the current configuration of the group (offset <code>0-0</code>), when the consumer will start for the first time, it will read all the existing messages.</li></ul></li><li>line 22 to 28, the application iterates on each messages, and:<ul><li>line 24, process the message, a simple print in this case</li><li>line 26, sends a acknowledgment using <code>xack()</code> command. You have to use the ack command to confirm that a message has been read and processed. The <a href="https://redis.io/commands/xack" target="_blank" rel="noopener noreferrer"><code>XACK</code></a> command removes the message from the pending list of the consumer group.</li></ul></li></ul><p>The complete consumer code is available <a href="https://github.com/tgrall/redis-streams-101-java/blob/master/src/main/java/com/kanibl/redis/streams/simple/RedisStreams101Consumer.java" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build--run-the-simple-java-application">Build &amp; Run the Simple Java Application<a class="hash-link" href="#build--run-the-simple-java-application" title="Direct link to heading">â€‹</a></h3><p>Now that you have a better understanding of the code, let's run the producer and consumer. You can run this from your IDE, or using Maven.</p><p>Let's do it using Maven CLI, for this open 2 terminals:</p><ul><li>one to produce messages</li><li>one to consume them</li></ul><p><em>1- Clone and Build the project</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/tgrall/redis-streams-101-java.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> redis-streams-101-java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn clean verify</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>2- Post a new message</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn exec:java -Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"com.kanibl.redis.streams.simple.RedisStreams101Producer"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>3- Consume messages</em></p><p>Open a new terminal and run the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn exec:java -Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"com.kanibl.redis.streams.simple.RedisStreams101Consumer"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The consumer will start and consume the message you just posted, and wait for any new messages.</p><p><em>4- In the first terminal post 100 new messages</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn exec:java -Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"com.kanibl.redis.streams.simple.RedisStreams101Producer"</span><span class="token plain"> -Dexec.args</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"100"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The consumer will receive and print all the messages.</p><p><em>5- Kill the consumer and post more messages</em></p><p>Let's now do another test, stop the consumer using a simple <code>ctrl+C</code>.</p><p>Then post 5 new messages.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn exec:java -Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"com.kanibl.redis.streams.simple.RedisStreams101Producer"</span><span class="token plain"> -Dexec.args</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"5"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The messages are not yet consumed by any application, but still store in Redis Streams.</p><p>So when you start the consumer, it will consumes these new messages.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mvn exec:java -Dexec.mainClass</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"com.kanibl.redis.streams.simple.RedisStreams101Consumer"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is a one of the differences between <a href="https://redis.io/topics/streams-intro" target="_blank" rel="noopener noreferrer">Redis Streams</a> and <a href="https://redis.io/topics/pubsub" target="_blank" rel="noopener noreferrer">Redis PubSub</a>. The producer application has publish many messages while the consumer application was not running. Since the consumer is ran with <code>StreamOffset.lastConsumed()</code>, when the consumer is starting, it looks to the last consumed ID, and start to read the streams from there. This method generate a XGROUPREAD command with the group</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this small project, you have learned, how to use Lettuce, a Java client for Redis to:</p><ul><li>publish messages to a stream</li><li>create a consumer group</li><li>consume messages using the consumer group.</li></ul><p>This is a very basic example, and in a next post I will show you how to work with multiple consumers, and to configure the Consumer Group and Consumers to control which messages you want to read</p><p>More to come!</p>]]></content:encoded>
            <category>redis</category>
            <category>nosql</category>
            <category>stream</category>
            <category>streaming</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[Getting Started With MapR-DB JSON REST API]]></title>
            <link>https://tgrall.github.io/blog/2018/05/23/getting-started-with-mapr-db-json-rest-api</link>
            <guid>/2018/05/23/getting-started-with-mapr-db-json-rest-api</guid>
            <pubDate>Wed, 23 May 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p>In this project you will learn how to use the MapR-DB JSON REST API to:</p><p>Create and Delete tables
Create, Read, Update and Delete documents (CRUD)
MapR Extension Package 5.0 (MEP) introduced the MapR-DB JSON REST API that allow application to use REST to interact with MapR-DB JSON.</p><p>You can find information about the MapR-DB JSON REST API in the documentation: <a href="https://maprdocs.mapr.com/home/MapR-DB/JSON_DB/UsingMapRDBJSONRESTAPI.html" target="_blank" rel="noopener noreferrer">Using the MapR-DB JSON REST API</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><p>You system should have the following components:</p><ul><li>A running MapR 6.0.1 &amp; MEP 5.0 cluster with the MapR-DB REST API service installed</li><li><code>curl</code> or equivalent tool</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="discover-the-mapr-db-json-rest-api">Discover the MapR-DB JSON REST API<a class="hash-link" href="#discover-the-mapr-db-json-rest-api" title="Direct link to heading">â€‹</a></h2><p>The easiest way to discover it, is to use curl command (or equivalent).</p><p><strong>1 - Create a table</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X PUT \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this command:</p><ul><li>the MapR-DB REST Service (MapR Data Access Gateway) is running on the mapr-node host with the default port <code>8243</code> using HTTPS</li><li>the HTTP verb <code>PUT</code> on <code>/api/v2/table/</code> endoint creates a new table</li><li>the protocol is HTTP since HTTPS is not enabled on this cluster</li><li>the new table will be created wit the path <code>/apps/emp</code> that is encoded to <code>%2Fapps%2Femp</code></li><li>the user <code>root</code> with the password <code>mapr</code> is used for authentication, using basic authentication</li><li>the <code>-k</code> parameter is used to indicate to turn off curlâ€™s verification of the certificate.</li></ul><p>In this example, you use the basic authentication, it is also possible to use <a href="https://jwt.io/introduction/" target="_blank" rel="noopener noreferrer">JSON Web Token</a>. You will learn more about this when you will write an application in Go.</p><p><strong>2 - Insert Documents</strong></p><p>Insert one document</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H 'Content-Type: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d '{"_id":"user001","first_name":"John","last_name":"Doe", "age" : 28}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this command:</p><ul><li>the <code>/api/v2/table/{path}</code> with the verb <code>GET</code> is used with a <code>condition</code> query parameter</li><li>the OJAI JSON syntax is used to express the condition: <code>{"$eq":{"last_name":"Doe"}}</code></li></ul><p><strong>3 - Update a document</strong></p><p>The following example will increment the age by 1 and update the last name.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp%2F/document/user001' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H 'Content-Type: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d '{"$set" : {"last_name" : "New Doe"}, "$increment" : {"age":1}}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this comamnd:</p><ul><li>the URL points to the document <code>_id</code> to update</li><li>the HTTP verb <code>POST</code> is used to modify the resource</li><li>the request body <code>-d</code> is the OJAI JSON Mutation that update the last name and increment the age.</li></ul><p>You can check that the document has been updated using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp%2F/document/user001' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4 - Delete a document</strong></p><p>Delete the document with the <code>_id</code> user001.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp%2F/document/user001' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this command:</p><ul><li>the URI <code>/api/v2/table/{path}/document/{id}</code> with the HTTP verb <code>DELETE</code> is used to delete the document</li></ul><p><strong>5 - Delete the MapR-DB JSON table</strong></p><p>The last step of this tutorial is to delete the table using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'https://mapr-node:8243/api/v2/table/%2Fapps%2Femp' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u root:mapr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this tutorial you have learned how to use the MapR-DB JSON REST API to:</p><ul><li>Create a table</li><li>Insert and query documents</li><li>Update and delete documents</li><li>Drop table</li></ul><p>You can now use the API to create MapR-DB JSON Application using your favorite language.</p>]]></content:encoded>
            <category>api</category>
            <category>maprdb</category>
            <category>nosql</category>
            <category>rest</category>
        </item>
        <item>
            <title><![CDATA[Getting started with MapR-DB Table Replication]]></title>
            <link>https://tgrall.github.io/blog/2017/08/08/getting-started-with-mapr-db-table-replication</link>
            <guid>/2017/08/08/getting-started-with-mapr-db-table-replication</guid>
            <pubDate>Tue, 08 Aug 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p>MapR-DB Table Replication allows data to be replicated to another table that could be on on the same cluster or in another cluster. This is different from the automatic and intra-cluster replication that copies the data into different physical nodes for high availability and prevent data loss.</p><p>This tutorial focuses on the MapR-DB Table Replication that replicates data between tables on different clusters.</p><p>Replicating data between different clusters allows you to:</p><ul><li>provide another level of disaster recovery that protects your data and applications against global data center failure,</li><li>push data close to the applications and users, </li><li>aggregate the data from mutliple datacenters.</li></ul><p><strong>Replication Topologies</strong></p><p>MapR-DB Table Replication provides various topologies to adapt the replication to the business and technical requirements:</p><ul><li><em>Master-slave replication</em> : in this topology, you replicate one way from source tables to replicas. The replicas can be in a remote cluster or in the cluster where the source tables are located.</li><li><em>Multi-Master replication</em> : in this replication topology, there are two master-slave relationships, with each table playing both the role of a master and a slave. Client applications update both tables and each table replicates updates to the other.</li></ul><p>In this example you will learn how to setup multi-master replication.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h3><ul><li>2 MapR Clusters 5.x with Enterprise Edition license<ul><li>in this demonstration they are called <code>cluster1</code> and <code>cluster2</code></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-replication">Setting Up Replication<a class="hash-link" href="#setting-up-replication" title="Direct link to heading">â€‹</a></h2><p>In the next steps you will configure your clusters to enable mutip-master replication as follow:</p><p><img loading="lazy" src="http://tgrall.github.io/images/posts/maprdb-replication/replication.png" alt="Architecture" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-clusters">Configuring the clusters<a class="hash-link" href="#configuring-the-clusters" title="Direct link to heading">â€‹</a></h3><p>Each node of the source cluster must communicate with the destination cluster's CLDB nodes. On each node of your source cluster edit the <code>mapr-clusters.conf</code> file and add the destination cluster information.</p><p><em>Cluster 1 Configuration</em></p><p>In all the nodes of <code>cluster1</code>, edit the  <code>/opt/mapr/conf/mapr-clusters.conf</code> file and add the <code>cluster2</code> configuration. The file should look like the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster1 secure=false cluster1-node1:7222 cluster1-node2:7222 cluster1-node2:7222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cluster2 secure=false cluster2-node1:7222 cluster2-node2:7222 cluster2-node3:7222</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Cluster 2 Configuration</em></p><p>In all the nodes of <code>cluster2</code>, edit the  <code>/opt/mapr/conf/mapr-clusters.conf</code> file and add the <code>cluster1</code> configuration. The file should look like the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster2 secure=false cluster2-node1:7222 cluster2-node2:7222 cluster2-node3:7222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cluster1 secure=false cluster1-node1:7222 cluster1-node2:7222 cluster1-node2:7222</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find information about the <code>mapr-clusters.conf</code> format in <a href="http://maprdocs.mapr.com/home/ReferenceGuide/mapr-clusters.conf.html" target="_blank" rel="noopener noreferrer">the documentation</a>.</p><p>Open a terminal window on one of the <code>cluster1</code> node using <code>mapr</code> user, and do the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls /mapr/cluster1/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps   hbase  installer  opt  tmp  user  var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls /mapr/cluster2/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps   hbase  installer  opt  tmp  user  var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-and-configuring-the-mapr-gateway">Installing and Configuring the MapR Gateway<a class="hash-link" href="#installing-and-configuring-the-mapr-gateway" title="Direct link to heading">â€‹</a></h3><p>A MapR gateway mediates one-way communication between a source MapR cluster and a destination MapR cluster. In this example you will use mult-master replication, this means that data will be replicated from <code>cluster1</code> to <code>cluster2</code> and from <code>cluster2</code> to <code>cluster1</code>.</p><p>The good practice is to install the MapR-Gateway to the destination cluster, so in our case let's install one gateway on one of the <code>cluster1</code> node, and one gateway on one of the <code>cluster2</code> node. Note that this configuration will not be highly available, and usually you will deploy more than 1 gateway by cluster.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-mapr-gateway">Installing the MapR-Gateway<a class="hash-link" href="#installing-the-mapr-gateway" title="Direct link to heading">â€‹</a></h4><p>As root on one node of the <code>cluster1</code>, adapt the command to your linux environment, for example on the node <code>cluster1-node2</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yum install mapr-gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Update MapR configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ /opt/mapr/server/configure.sh -N cluster1 -C cluster1-node1:7222,cluster1-node2:7222,cluster1-node3:7222 -R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Do the same on <code>cluster2</code>, for example on the node <code>cluster2-node2</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yum install mapr-gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Update MapR configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ /opt/mapr/server/configure.sh -N cluster1 -C cluster2-node1:7222,cluster2-node2:7222,cluster2-node3:7222 -R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="registering-the-gateway-to-the-clusters">Registering the Gateway to the Clusters<a class="hash-link" href="#registering-the-gateway-to-the-clusters" title="Direct link to heading">â€‹</a></h4><p>Now that we have a gateway running on each cluster, you have to <strong><em>register the gateway</em></strong> in each cluster.</p><p>On <code>cluster1</code> run the following command to register the <code>cluster2</code> gateway as destination:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli cluster gateway set -dstcluster cluster2 -gateways cluster2-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check the configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli cluster gateway list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On <code>cluster2</code> run the following command to register the <code>cluster1</code> gateway as destination:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli cluster gateway set -dstcluster cluster1 -gateways cluster1-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check the configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli cluster gateway list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-table-with-replication">Creating Table with Replication<a class="hash-link" href="#creating-table-with-replication" title="Direct link to heading">â€‹</a></h3><p>In a terminal window, as <code>mapr</code> user on <code>cluster1</code>, create a table and insert documents:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli table create -path /apps/user_profiles  -tabletype json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This create a new JSON table; it is also possible to use <code>/mapr/cluster1/apps/user_profiles</code>.</p><p>Let's now add documents using MapR-DB Shell:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mapr dbshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; insert /apps/user_profiles --value '{"_id":"user001" , "first_name":"John", "last_name":"Doe"}'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; find /apps/user_profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-table-replication">Adding Table Replication<a class="hash-link" href="#adding-table-replication" title="Direct link to heading">â€‹</a></h4><p>Let's now enable replication between <code>user_profiles</code> on <code>cluster1</code> to a <code>user_profiles</code> table in <code>cluster2</code>.</p><p>In <code>cluster1</code>, on a terminal window as <code>mapr</code> run the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli table replica autosetup -path /apps/user_profiles -replica /mapr/cluster2/apps/user_profiles -multimaster yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can get information about the replication configuration for the table using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli table replica list -path /apps/user_profiles -json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-replication">Testing Replication<a class="hash-link" href="#testing-replication" title="Direct link to heading">â€‹</a></h4><p>Open another terminal in <code>cluster2</code> and use MapR-DB Shell to look at the replicated data:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mapr dbshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; find /apps/user_profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{"_id":"user001","first_name":"John","last_name":"Doe"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 document(s) found.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also use the full path <code>/mapr/cluster2/apps/user_profiles</code></p><p>In <code>cluster1</code> add a new document using MapR-DB Shell:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mapr dbshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; insert /apps/user_profiles --value '{"_id":"user002" , "first_name":"Simon", "last_name":"Dupont"}'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; find /apps/user_profiles</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Do a find in <code>cluster2</code> table, and you will see that the data have been replicated.</p><p>You can insert or delete a document in <code>cluster2</code> and do a find in <code>cluster1</code>, you will see that the new document is also replicated in the other direction.</p><p>Note, for this demonstration, we use 2 terminals connected to each cluster you can do some test using the Global Namespace in a single MapR-DB Shell. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this tutorial you have learned how to setup the MapR-DB Multi-Master replication to have data automatically replicated between 2 clusters.</p><p>MapR-DB Table Replication provides many options, not only in term of topology (master-slave/mult-master), but also some options and commands to:</p><ul><li>replicate some columns/attributes or column family</li><li>configure replication in a secured cluster</li><li>pause replication.</li></ul><p>You can find more information about the MapR-DB Table Replication, and MapR-Gateway in the documentation:</p><ul><li><a href="http://maprdocs.mapr.com/home/MapR-DB/ReplicatingMapR-DBTables.html" target="_blank" rel="noopener noreferrer">Table Replication</a> </li><li><a href="http://maprdocs.mapr.com/home/MapR-DB/ConfiguringMapRClustersForTR.html" target="_blank" rel="noopener noreferrer">Setting up Table Replication</a></li><li><a href="http://maprdocs.mapr.com/home/Gateways/MapRGateways.html" target="_blank" rel="noopener noreferrer">Configuring and Managing MapR Gateways</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting Started with Kafka REST Proxy for MapR Streams]]></title>
            <link>https://tgrall.github.io/blog/2017/01/20/getting-started-with-kafka-rest-proxy-for-mapr-streams</link>
            <guid>/2017/01/20/getting-started-with-kafka-rest-proxy-for-mapr-streams</guid>
            <pubDate>Fri, 20 Jan 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p>MapR Ecosystem Package 2.0 (MEP) is coming with some new features related to MapR Streams:</p><ul><li><a href="http://maprdocs.mapr.com/home/Kafka/kafkaREST.html" target="_blank" rel="noopener noreferrer">Kafka REST Proxy for MapR Streams</a> provides a RESTful interface to MapR Streams and Kafka clusters to consume and product messages and to perform administrative operations.</li><li><a href="http://maprdocs.mapr.com/home/Kafka/kafkaConnect.html" target="_blank" rel="noopener noreferrer">Kafka Connect for MapR Streams</a> is a utility for streaming data between MapR Streams and Apache Kafka and other storage systems.</li></ul><p>MapR Ecosystem Packs (MEPs) are a way to deliver ecosystem upgrades decoupled from core upgrades - allowing you to upgrade your tooling independently of your Converged Data Platform. You can lean more about MEP 2.0 in <a href="https://www.mapr.com/blog/announcing-mapr-ecosystem-pack-mep-20" target="_blank" rel="noopener noreferrer">this article</a>.</p><p>In this blog we describe how to use the REST Proxy to publish and consume messages to/from MapR Streams. The REST Proxy is a great addition to the MapR Converged Data Platform allowing any programming language to use MapR Streams.</p><p>The Kafka REST Proxy provided with the MapR Streams tools, can be used with MapR Streams (default), but also used in a hybrid mode with Apache Kafka. In this article we will focus on MapR Streams.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><ul><li>MapR Converged Data Platform 5.2 with MEP 2.0<ul><li>with MapR Streams Tools</li></ul></li><li>curl, wget or any HTTP/REST Client tool</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-mapr-streams-and-topic">Create the MapR Streams and Topic<a class="hash-link" href="#create-the-mapr-streams-and-topic" title="Direct link to heading">â€‹</a></h2><p>A stream is a collection of topics that you can manage as a group by:</p><ol><li>Setting security policies that apply to all topics in that stream</li><li>Setting a default number of partitions for each new topic that is created in the stream</li><li>Set a time-to-live for messages in every topic in the stream</li></ol><p>You can find more information about MapR Streams concepts in the <a href="http://maprdocs.mapr.com/home/MapR_Streams/mapr_streams.html" target="_blank" rel="noopener noreferrer">documentation</a>.</p><p>On your Mapr Cluster or Sandbox, run the following commands:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli stream create -path /apps/iot-stream -produceperm p -consumeperm p -topicperm p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli stream topic create -path /apps/iot-stream -topic sensor-json -partitions 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli stream topic create -path /apps/iot-stream -topic sensor-binary -partitions 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="start-kafka-console-producers-and-consumers">Start Kafka Console Producers and Consumers<a class="hash-link" href="#start-kafka-console-producers-and-consumers" title="Direct link to heading">â€‹</a></h2><p>Open two terminal windows and run the consumer Kafka utilities using the following commands:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consumer">Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">â€‹</a></h4><ul><li>Topic sensor-json</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /opt/mapr/kafka/kafka-0.9.0/bin/kafka-console-consumer.sh --new-consumer --bootstrap-server this.will.be.ignored:9092 --topic /apps/iot-stream:sensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Topic sensor-binary</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /opt/mapr/kafka/kafka-0.9.0/bin/kafka-console-consumer.sh --new-consumer --bootstrap-server this.will.be.ignored:9092 --topic /apps/iot-stream:sensor-binary</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This two terminal windows will allow you to see the messages posted on the different topics</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-kafka-rest-proxy">Using Kafka REST Proxy<a class="hash-link" href="#using-kafka-rest-proxy" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inspect-topic-metadata">Inspect Topic Metadata<a class="hash-link" href="#inspect-topic-metadata" title="Direct link to heading">â€‹</a></h3><p>The endpoint <code>/topics/[topic_name]</code> allows you to get some informations about the topic. In MapR Streams, topics are part of a <em>stream</em> identified by a path;
to use the topic using the REST API you have to use the full path, and encode it in the URL; for example:</p><ul><li><code>/apps/iot-stream:sensor-json</code> will be encoded with <code>%2Fapps%2Fiot-stream%3Asensor-json</code></li></ul><p>Run the following command, to get information about the <code>sensor-json</code> topic</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -X GET  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: For simplicity reason I am running the command from the node where the Kafka REST proxy is running, so it is possible to use <code>localhost</code>.</p><p>You can print JSON in a pretty way, by adding a Python command such as :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -X GET  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-json | python -m json.tool</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Default Stream</strong></p><p>As mentioned above, the Stream path is part of the topic name you have to use in the command;
however it is possible to configure the MapR Kafka REST Proxy to use a default stream.
For this you should add the following property in the <code>/opt/mapr/kafka-rest/kafka-rest-2.0.1/config/kafka-rest.properties</code> file:</p><ul><li><p><code>streams.default.stream=/apps/iot-stream</code></p><p>When you change the Kafka REST proxy configuration, you must restart the service using maprcli or MCS.</p><p>The main reason to use the <code>streams.default.stream</code> properties is to simplify the URLs used by the application for example</p></li><li><p>with <code>streams.default.stream</code> you can use <code>curl -X GET  http://localhost:8082/topics/</code></p></li><li><p>without this configuration, or if you want to use a specific stream you must specify it in the URL <code>http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-json</code></p><p>In this article, all the URLs contains the encoded stream name, like that you can start using the Kafka REST proxy without changind the configuration and also use it with different streams.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-messages">Publishing Messages<a class="hash-link" href="#publishing-messages" title="Direct link to heading">â€‹</a></h3><p>The Kafka REST Proxy for MapR Streams allows application to publish messages to MapR Streams. Messages could be send as JSON or Binary content (base64 encoding).</p><p>####To send a JSON Message:</p><ul><li>the query should be a HTTP <code>POST</code></li><li>the Content-Type should be : <code>application/vnd.kafka.json.v1+json</code></li><li>the Body:</li></ul><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "records":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "value":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "temp" : 10 ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "speed" : 40 ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "direction" : "NW"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The complete request is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.json.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data '{"records":[{"value": {"temp" : 10 , "speed" : 40 , "direction" : "NW"}  }]}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the message printed in the terminal window where the <code>/apps/iot-stream:sensor-json</code> consumer is running.</p><p>####To send a binary Message:</p><ul><li>the query should be a HTTP <code>POST</code></li><li>the Content-Type should be : <code>application/vnd.kafka.binary.v1+json</code></li><li>the Body:</li></ul><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "records":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "value":"SGVsbG8gV29ybGQ="</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that <code>SGVsbG8gV29ybGQ=</code> is the string "Hello World" encoded in Base64.</p><p>The complete request is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.binary.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data '{"records":[{"value":"SGVsbG8gV29ybGQ="}]}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-binary</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the message printed in the terminal window where the <code>/apps/iot-stream:sensor-binary</code> consumer is running.</p><p>####Sending multiple messages</p><p>The <code>records</code> field of the HTTP Body allows you to send multiple messages for example you can send:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.json.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data '{"records":[{"value": {"temp" : 12 , "speed" : 42 , "direction" : "NW"}  }, {"value": {"temp" : 10 , "speed" : 37 , "direction" : "N"}  } ]}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will send 2 messages, and increment the offset by 2. You can do the same
with binary content, just add new element in the JSON array; for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.binary.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data '{"records":[{"value":"SGVsbG8gV29ybGQ="}, {"value":"Qm9uam91cg=="}]}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://localhost:8082/topics/%2Fapps%2Fiot-stream%3Asensor-binary</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you probably know, it is possible to set a key to a message to be sure that all the messages
with the same key will arrive in the same partition. For this, add the <code>key</code> attribute to the message as follow:</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "records":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "key": "K001",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "value":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "temp" : 10 ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "speed" : 40 ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "direction" : "NW"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that you know how to post messages to MapR Stream topics usinf the REST Proxy, let's see how to consume the messages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-messages">Consuming Messages<a class="hash-link" href="#consuming-messages" title="Direct link to heading">â€‹</a></h3><p>The REST proxy can also be used to consume messages from topics; for this you need to:</p><ol><li>Create a consumer instance.</li><li>Use this URL returned by the first call to read message.</li><li>Delete the consumer instanced if needed.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-consumer-instance">Creating the consumer instance<a class="hash-link" href="#creating-the-consumer-instance" title="Direct link to heading">â€‹</a></h4><p>The following request creates the consumer instance:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --data '{"name": "iot_json_consumer", "format": "json", "auto.offset.reset": "earliest"}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The response from the server looks like:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"instance_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"iot_json_consumer"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"base_uri"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-json/instances/iot_json_consumer"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that we have used the <code>/consumers/[topic_name]</code> to create the consumer.</p><p>The <code>base_uri</code> will be used by the subsequent requests to get the messages from the topic. Like any MapR Streams/Kafka consumer the <code>auto.offset.reset</code> defines its behavior. In this example the value is set to <code>earliest</code>, this means that the consumer will read the messages from the beginning. You can find more information about the consumer configuration in the <a href="http://maprdocs.mapr.com/home/MapR_Streams/configuration_parameters_for_consumers.html" target="_blank" rel="noopener noreferrer">MapR Streams documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-the-messages">Consuming the messages<a class="hash-link" href="#consuming-the-messages" title="Direct link to heading">â€‹</a></h4><p>To consume the messages, just add the Mapr Streams topic to the URL of the consumer isntance.</p><p>The following request consumes the messages from the topic:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET -H "Accept: application/vnd.kafka.json.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-json/instances/iot_json_consumer/topics/%2Fapps%2Fiot-stream%3Asensor-json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This call returns the messages in a JSON document:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"temp"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"speed"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"direction"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"NW"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"/apps/iot-stream:sensor-json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"partition"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"temp"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"speed"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"direction"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"NW"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"/apps/iot-stream:sensor-json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"partition"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"temp"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"speed"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">37</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"direction"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"N"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"/apps/iot-stream:sensor-json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"partition"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each call to the API returns the new messages published, based on the offset of the last call.</p><p>Note that the Consumer will be destroyed:</p><ul><li>after some idle time set by the <code>consumer.instance.timeout.ms</code> (default value set to 300000ms / 5 minutes)</li><li>where it is destroyed using a REST API call (see below).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-binary-format-messages">Consuming binary format messages<a class="hash-link" href="#consuming-binary-format-messages" title="Direct link to heading">â€‹</a></h3><p>The approach is the same if you need to consume binary messages, you need to change the format and accept header.</p><p>Call this URL to create a consumer instance for the binary topic:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST -H "Content-Type: application/vnd.kafka.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --data '{"name": "iot_binary_consumer", "format": "binary", "auto.offset.reset": "earliest"}' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-binary</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then consume messages, the accept header is set to <code>application/vnd.kafka.binary.v1+json</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET -H "Accept: application/vnd.kafka.binary.v1+json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-binary/instances/iot_binary_consumer/topics/%2Fapps%2Fiot-stream%3Asensor-binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This call returns the messages in a JSON document, and the value is encoded in Base64</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"SGVsbG8gV29ybGQ="</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"/apps/iot-stream:sensor-binary"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"partition"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Qm9uam91cg=="</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"/apps/iot-stream:sensor-binary"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"partition"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"offset"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-consumer-instances">Delete consumer instances<a class="hash-link" href="#delete-consumer-instances" title="Direct link to heading">â€‹</a></h3><p>As mentioned before the consumer will be destroyed automatically based on the <code>consumer.instance.timeout.ms</code> configuration of the REST Proxy;
it is also possible to destroyed the instance using the consumer instance URI and an HTTP DELETE call, as follow:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X DELETE http://localhost:8082/consumers/%2Fapps%2Fiot-stream%3Asensor-binary/instances/iot_binary_consumer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article you have learned how to use the Kafka REST Proxy for MapR Streams that allow any application to
use messages published in the MapR Converged Data Platform.</p><p>You can find more information about the Kafka REST Proxy in the <a href="http://maprdocs.mapr.com/home/Kafka/REST-proxy.html" target="_blank" rel="noopener noreferrer">MapR documentation</a> and the following resources:</p><ul><li><a href="https://www.mapr.com/blog/getting-started-sample-programs-mapr-streams" target="_blank" rel="noopener noreferrer">Getting Started with MapR Streams</a></li><li><a href="https://www.mapr.com/streaming-architecture-using-apache-kafka-mapr-streams" target="_blank" rel="noopener noreferrer">"Streaming Architecture: New Designs Using Apache Kafka and MapR Streams" ebook by Ted Dunning and Ellen Friedman</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting Started with MQTT and Java]]></title>
            <link>https://tgrall.github.io/blog/2017/01/02/getting-started-with-mqtt</link>
            <guid>/2017/01/02/getting-started-with-mqtt</guid>
            <pubDate>Mon, 02 Jan 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[MQTT (MQ Telemetry Transport) is a lightweight publish/subscribe messaging protocol.]]></description>
            <content:encoded><![CDATA[<p>MQTT (MQ Telemetry Transport) is a lightweight publish/subscribe messaging protocol.
MQTT is used a lot in the Internet of Things applications, since it has been designed to
run on remote locations with system with small footprint.</p><p>The MQTT 3.1 is an OASIS standard, and you can find all the information at <a href="http://mqtt.org/" target="_blank" rel="noopener noreferrer">http://mqtt.org/</a></p><p>This article will guide you into the various steps to run your first MQTT application:</p><ol><li>Install and Start a MQTT Broker</li><li>Write an application that publishes messages</li><li>Write an application that consumes messages</li></ol><p>The source code of the sample application is available on <a href="https://github.com/tgrall/mqtt-sample-java" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h4><ul><li>Apache Maven 3.x</li><li>Git</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-start-a-mqtt-broker">Install and Start a MQTT Broker<a class="hash-link" href="#install-and-start-a-mqtt-broker" title="Direct link to heading">â€‹</a></h3><p>You can find many MQTT Brokers, for this example I will use one of the most common broker <a href="https://mosquitto.org" target="_blank" rel="noopener noreferrer">Mosquitto</a>.</p><p>You can download and install from the <a href="https://mosquitto.org/download/" target="_blank" rel="noopener noreferrer">binary package</a>. I have used <a href="http://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a> to install it on my Mac:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install mosquitto</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start the MQTT Broker with the default configuration</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /usr/local/sbin/mosquitto</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="publish-and-consume-messages">Publish and Consume messages<a class="hash-link" href="#publish-and-consume-messages" title="Direct link to heading">â€‹</a></h3><p>Open two terminal windows and run the following commands :</p><p>Consume</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mosquitto_sub -h 127.0.0.1 -t iot_data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Publish</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mosquitto_pub -h 127.0.0.1 -t iot_data -m "Hello world"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the message <code>Hello world</code> in the consumer/subscriber window.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-your-first-mqtt-application">Write your first MQTT Application<a class="hash-link" href="#write-your-first-mqtt-application" title="Direct link to heading">â€‹</a></h3><p>For this example I will write a small Java application, since it is the language
that I am using in my global project.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="maven-dependencies">Maven Dependencies<a class="hash-link" href="#maven-dependencies" title="Direct link to heading">â€‹</a></h4><p>Add the <a href="https://eclipse.org/paho/" target="_blank" rel="noopener noreferrer">Eclipse Paho</a> dependency to your Maven project</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.eclipse.paho</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.eclipse.paho.client.mqttv3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-a-message">Publishing a Message<a class="hash-link" href="#publishing-a-message" title="Direct link to heading">â€‹</a></h4><p>Publishing a message is quite easy, create a MqttClient and use it to post on a topic.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">MqttClient</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MqttClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"tcp://localhost:1883"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MqttClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">generateClientId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">MqttMessage</span><span class="token plain"> message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MqttMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setPayload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello world from Java"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"iot_data"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disconnect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You have many other options, configurations that you can use when posting a message
such as security, quality of service (QoS), and more; but in this post I want to simply
show how easy is to publish and consume MQTT messages.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-messages">Consuming messages<a class="hash-link" href="#consuming-messages" title="Direct link to heading">â€‹</a></h4><p>To consume messages you need to implement a <code>org.eclipse.paho.client.mqttv3.MqttCallback</code> that will receive the message and used this Callback class in the MqttClient of the Subscriber application.</p><p>The Callback class:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleMqttCallBack</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">MqttCallback</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">connectionLost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Throwable</span><span class="token plain"> throwable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Connection to MQTT broker lost!"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">messageArrived</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MqttMessage</span><span class="token plain"> mqttMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Message received:\n\t"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mqttMessage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPayload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deliveryComplete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IMqttDeliveryToken</span><span class="token plain"> iMqttDeliveryToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// not used in this example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This Callback class is used in the Subscriber application as follow:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">MqttClient</span><span class="token plain"> client</span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MqttClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"tcp://localhost:1883"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MqttClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">generateClientId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SimpleMqttCallBack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Like for the publisher, I am using the broker and client without any option (QoS, security).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run-the-application">Build and Run the Application<a class="hash-link" href="#build-and-run-the-application" title="Direct link to heading">â€‹</a></h2><p><strong>1- Get the Sample Code</strong></p><p>Clone the project from GitHub</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git clone https://github.com/tgrall/mqtt-sample-java.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>2- Build the project with Apache Maven:</strong></p><p>This project is a simple Java application that runs a publisher and subscriber using the <a href="https://eclipse.org/paho/" target="_blank" rel="noopener noreferrer">Eclipse Paho library</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn clean package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For convenience, the example programs project is set up so that the maven package target produces a single executable,
<code>/mqtt-sample </code>, that includes all of the example programs and dependencies.</p><p><strong>3- Run the Subscriber</strong></p><p>The subscriber will receive and print all messages published on the <code>iot_data</code> topic.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./target/mqtt-sample subscriber</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4- Run the Publisher</strong></p><p>Run the publisher with the following command, the second parameter is the message to publish</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./target/mqtt-sample publisher "My first MQTT message..."</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article you have learned how to:</p><ul><li>Install and start a MQTT Broker, Mosquitto</li><li>Create a publisher and subscriber developed in Java</li></ul><p>This article is very simple by choice, to quickly run your first MQTT Application. I wrote this article as part of a global IoT project I am working on that will capture devices data, publish them into MapR Converged Data Platform using MQTT and MapR Streams; this is why I used Java for the application. You can use any MQTT client library to build the publishers and subscribers.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting started with Apache Flink and Mapr Streams]]></title>
            <link>https://tgrall.github.io/blog/2016/10/17/getting-started-with-apache-flink-and-mapr-streams</link>
            <guid>/2016/10/17/getting-started-with-apache-flink-and-mapr-streams</guid>
            <pubDate>Mon, 17 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p><a href="https://flink.apache.org/" target="_blank" rel="noopener noreferrer">Apache Flink</a> is an open source platform for distributed stream and batch data processing. Flink is a streaming data flow engine with several APIs to create data streams oriented application.</p><p>It is very common for Flink applications to use <a href="http://kafka.apache.org/" target="_blank" rel="noopener noreferrer">Apache Kafka</a> for data input and output.</p><p>This article will guide you into  the steps to use Apache Flink with <a href="https://www.mapr.com/products/mapr-streams" target="_blank" rel="noopener noreferrer">MapR Streams</a>. MapR Streams is a distributed messaging system for streaming event data at scale, and itâ€™s integrated into the <a href="https://www.mapr.com/products/mapr-converged-data-platform" target="_blank" rel="noopener noreferrer">MapR Converged Data Platform</a>, based on the Apache Kafka API (0.9.0),
this article use the same code and approach than the <a href="http://tgrall.github.io/blog/2016/10/12/getting-started-with-apache-flink-and-kafka/" target="_blank" rel="noopener noreferrer">Flink and Kafka Getting Started</a>.</p><p><img loading="lazy" src="http://tgrall.github.io/images/posts/flink-kafka/flink-mapr-streams.png" alt="MapR Streams and Flink" class="img_ev3q">.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h3><ul><li>MapR 5.2<ul><li>You can use <a href="https://www.mapr.com/products/mapr-sandbox-hadoop" target="_blank" rel="noopener noreferrer">MapR Converged Data Platform Sandbox</a></li></ul></li><li>MapR Client installed on your development host<ul><li><a href="http://maprdocs.mapr.com/home/AdvancedInstallation/SettingUptheClient-install-mapr-client.html" target="_blank" rel="noopener noreferrer">Installation and Configuration steps</a></li></ul></li><li>Git</li><li>Maven 3.x or later</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-flink-streaming-project">Create your Flink Streaming Project<a class="hash-link" href="#create-your-flink-streaming-project" title="Direct link to heading">â€‹</a></h2><p>The first step is to create an Java application, the easiest is to use the flink-quickstart-java archetype, that contains the core dependencies and packaging tasks. This article is similar with the <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.1/quickstart/run_example_quickstart.html" target="_blank" rel="noopener noreferrer">Apache Flink Quick Start Example</a>, with a clear focus on data input and output with MapR Streams. </p><p>In this application we will create two jobs:</p><ul><li><code>WriteToKafka</code> : that generates random string and post them to a MapR Streams Topic using the Kafka Flink Connector and its Producer API.</li><li><code>ReadFromKafka</code> : that reads the same topic and print the messages in the standard output using the Kafka Flink Connector and its Consumer. API.</li></ul><p>The full project is available on GitHub:</p><ul><li><a href="https://github.com/mapr-demos/mapr-streams-flink-demo" target="_blank" rel="noopener noreferrer">MapR Streams Flink Demo</a></li></ul><p>Letâ€™s create the project using Apache Maven:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn archetype:generate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeGroupId=org.apache.flink\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeArtifactId=flink-quickstart-java \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeVersion=1.1.2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DgroupId=com.mapr.demos \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DartifactId=mapr-streams-flink-demo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -Dversion=1.0-SNAPSHOT \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DinteractiveMode=false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Maven will create the following structure:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree mapr-streams-flink-demo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mapr-streams-flink-demo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ pom.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚   â””â”€â”€ com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚       â””â”€â”€ mapr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚           â””â”€â”€ demos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚               â”œâ”€â”€ BatchJob.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚               â”œâ”€â”€ SocketTextStreamWordCount.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚               â”œâ”€â”€ StreamingJob.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚               â””â”€â”€ WordCount.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â””â”€â”€ log4j.properties</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This project is configured to create a Jar file that contains your flink project code and also includes all dependencies needed to run it.</p><p>The project contains some other sample jobs, we do not need them for this article, you can either keep them to educational purposes or simply remove them from the project.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-kafka--mapr-streams-dependencies">Add Kafka &amp; MapR Streams Dependencies<a class="hash-link" href="#add-kafka--mapr-streams-dependencies" title="Direct link to heading">â€‹</a></h2><p>Open the <code>pom.xml</code> and add the following dependencies to your project:</p><p><strong>1- Add MapR Maven Repository</strong></p><p>In the <code>&lt;repositories&gt;</code> element add :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;repository&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;id&gt;mapr-releases&lt;/id&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;url&gt;http://repository.mapr.com/maven/&lt;/url&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;snapshots&gt;&lt;enabled&gt;false&lt;/enabled&gt;&lt;/snapshots&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;/repository&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>2- Add MapR Streams libraries</strong></p><p>In the <code>&lt;dependencies&gt;</code> element:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;groupId&gt;com.mapr.streams&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;artifactId&gt;mapr-streams&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;version&gt;5.2.0-mapr&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;version&gt;0.9.0.0-mapr-1602&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>3- Add Flink Kafka Connector libraries</strong></p><p>As a first step, we have to add the Flink Kafka connector as a dependency so that we can use the Kafka sink. Add this to the pom.xml file in the dependencies section:</p><p>You must add now the Flink Kafka Connector dependency to use the Kafka sink. Add the following entry in the <code>&lt;dependencies&gt;</code> element:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;artifactId&gt;flink-connector-kafka-0.9_2.10&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;version&gt;${flink.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4- Exclude Kafka Client to allow use of MapR Streams Client</strong></p><p>As you may know, MapR Streams uses the Kafka 0.9.0 API to produce and consume messages. So we need now to remove (exclude) tha Apache Kafka Client API to be sure that Flink use MapR Streams.</p><p>In the Flink Kafka Connector dependency add the following exclusion:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;flink-connector-kafka-0.9_2.10&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${flink.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;exclusions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;artifactId&gt;kafka_2.10&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/exclusions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Flink project is now ready to use the DataStream using the Kafka Connector so you can send and receive messages from MapR Streams.</p><p>Letâ€™s now create a Stream in MapR and write some simple Flink code to use it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-mapr-streams-and-topic">Create the MapR Streams and Topic<a class="hash-link" href="#create-the-mapr-streams-and-topic" title="Direct link to heading">â€‹</a></h2><p>A stream is a collection of topics that you can manage as a group by:</p><ol><li>Setting security policies that apply to all topics in that stream</li><li>Setting a default number of partitions for each new topic that is created in the stream</li><li>Set a time-to-live for messages in every topic in the stream</li></ol><p>You can find more information about MapR Streams concepts in the <a href="http://maprdocs.mapr.com/51/MapR_Streams/concepts.html" target="_blank" rel="noopener noreferrer">documentation</a>.</p><p>On your Mapr Cluster or Sandbox run the following commands: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli stream create -path /apps/application-stream -produceperm p -consumeperm p -topicperm p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli stream topic create -path /apps/application-stream -topic flink-demo </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-use-mapr-kafka-utilities">Install and use MapR Kafka utilities<a class="hash-link" href="#install-and-use-mapr-kafka-utilities" title="Direct link to heading">â€‹</a></h3><p>Install <code>the mapr-kafka</code> package on your cluster :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install mapr-kafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Open two terminal windows and run the producer and consumer kafka utilities using the following commands:</p><p>Producer</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/kafka/kafka-0.9.0/bin/kafka-console-producer.sh --broker-list this.will.be.ignored:9092 --topic /apps/application-stream:flink-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consumer</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/kafka/kafka-0.9.0/bin/kafka-console-consumer.sh --new-consumer --bootstrap-server this.will.be.ignored:9092 --topic /apps/application-stream:flink-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the producer window, you can post some messages and see them in the consumer windows. We will use these tools to follow the interactions between MapR Streams and Flink.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="write-your-flink-application">Write your Flink application<a class="hash-link" href="#write-your-flink-application" title="Direct link to heading">â€‹</a></h2><p>Letâ€™s now use the Flink Kafka Connector to send messages to MapR Streams and consume them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer">Producer<a class="hash-link" href="#producer" title="Direct link to heading">â€‹</a></h3><p>The producer generates messages using the <code>SimpleStringGenerator()</code> class and send the string to the <code>/apps/application-stream:flink-demo</code> topic.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // properties.setProperty("bootstrap.servers", "&lt;kafka-broker&gt;:9092"); // not used by MapR Streams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    properties.setProperty("streams.buffer.max.time.ms", "200");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataStream&lt;String&gt; stream = env.addSource(new SimpleStringGenerator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stream.addSink(new FlinkKafkaProducer09&lt;&gt;("/apps/application-stream:flink-demo", new SimpleStringSchema(), properties));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>SimpleStringGenerator()</code> method code is available <a href="https://github.com/mapr-demos/mapr-streams-flink-demo/blob/master/src/main/java/com/mapr/demos/WriteToKafka.java#L46-L61" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The main steps are:</p><ul><li>create a new <code>StreamExecutionEnvironment</code> the basis of any Flink application</li><li>create a new <code>DataStream</code> in the application environment, the <code>SimpleStringGenerator</code> class implements the <code>[SourceFunction](https://ci.apache.org/projects/flink/flink-docs-release-1.1/api/java/)</code> the base interface for all streams data sources in Flink.</li><li>add the <code>FlinkKafkaProducer09</code> sink to the streams; since MapR Streams is based on Kafka API 0.9, it is possible to use the FlinkKafkaProducer09 class; with 2 small differences:<ul><li>the broker list (first parameter) is not used since MapR Streams use the cluster location defined in the <code>/opt/mapr/conf/mapr-clusters.conf</code> class.</li><li>the topic name include the path and name of the MapR Stream stream in which the topic is located for example <code>/apps/application-stream:flink-demo</code></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer">Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">â€‹</a></h3><p>The consumer simply reads the messages from the <code>/apps/application-stream:flink-demo</code> topic, and print them into the console.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // create execution environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // properties.setProperty("bootstrap.servers", "&lt;kafka-broker&gt;:9092"); // not used by MapR Streams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    properties.setProperty("group.id", "flink_consumer");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataStream&lt;String&gt; stream = env.addSource(new FlinkKafkaConsumer09&lt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "/apps/application-stream:flink-demo", new SimpleStringSchema(), properties) );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stream.map(new MapFunction&lt;String, String&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      private static final long serialVersionUID = -6867736771747690202L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      public String map(String value) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return "Stream Value: " + value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }).print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The main steps are:</p><ul><li>create a new <code>StreamExecutionEnvironment</code> the basis of any Flink application</li><li>create a set of properties with the consumer information, in this application we can only set the consumer <code>group.id</code>. Note that the <code>bootstrap.servers</code> property is not used by MapR Streams, so no need to set it.</li><li>use the <code>FlinkKafkaConsumer09</code> to get the message from the MapR Streams topic <code>/apps/application-stream:flink-demo</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run-the-application">Build and Run the application<a class="hash-link" href="#build-and-run-the-application" title="Direct link to heading">â€‹</a></h2><p>Letâ€™s run the application directly from Maven (or from your favorite IDE).</p><p>1- Build the project:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn clean package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2- Run the Flink Producer Job</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn exec:java -Dexec.mainClass=com.mapr.demos.WriteToKafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3- Run the Flink Consumer Job</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn exec:java -Dexec.mainClass=com.mapr.demos.ReadFromKafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the terminal, you should see the messages generated from the producer</p><p>You can now deploy and execute this job on your Flink cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article you have learned how to use Flink with MapR Streams to write and read data streams. The key element is the configuration of the Maven Dependencies to configure the project to use MapR Streams libraries instead of Kafka ones.</p><p>This was originally published on the <a href="https://www.mapr.com/blog/getting-started-apache-flink-and-mapr-streams" target="_blank" rel="noopener noreferrer">MapR blog here</a>.</p><p>Learn about what Apache Flink can do and how it maintains consistency and provides flexibility in the "<a href="https://www.mapr.com/introduction-to-apache-flink" target="_blank" rel="noopener noreferrer">Introduction to Apache Flink</a>" ebook.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting started with Apache Flink and Kafka]]></title>
            <link>https://tgrall.github.io/blog/2016/10/12/getting-started-with-apache-flink-and-kafka</link>
            <guid>/2016/10/12/getting-started-with-apache-flink-and-kafka</guid>
            <pubDate>Wed, 12 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p><a href="https://flink.apache.org/" target="_blank" rel="noopener noreferrer">Apache Flink</a> is an open source platform for distributed stream and batch data processing. Flink is a streaming data flow engine with several APIs to create data streams oriented application.</p><p>It is very common for Flink applications to use <a href="http://kafka.apache.org/" target="_blank" rel="noopener noreferrer">Apache Kafka</a> for data input and output. This article will guide you into  the steps to use Apache Flink with Kafka.</p><p>![]( center /images/posts/flink-kafka/flink-kafka.png Flink-Kafka )</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h3><ul><li>Apache Kafka 0.9.x</li><li>Git</li><li>Maven 3.x or later</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-flink-streaming-project">Create your Flink Streaming Project<a class="hash-link" href="#create-your-flink-streaming-project" title="Direct link to heading">â€‹</a></h2><p>The first step is to create an Java application, the easiest is to use the flink-quickstart-java archetype, that contains the core dependencies and packaging tasks. This article is similar with the <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.1/quickstart/run_example_quickstart.html" target="_blank" rel="noopener noreferrer">Apache Flink Quick Start Example</a>, with a clear focus on data input and output with MapR Streams. </p><p>In this application we will create two jobs:</p><ul><li><code>WriteToKafka</code> : that generates random string and post them to a MapR Streams Topic using the Kafka Flink Connector and its Producer API.</li><li><code>ReadFromKafka</code> : that reads the same topic and print the messages in the standard output using the Kafka Flink Connector and its Consumer. API.</li></ul><p>The full project is available on GitHub:</p><ul><li><a href="https://github.com/tgrall/kafka-flink-101" target="_blank" rel="noopener noreferrer">Flink and Kakfa Application</a></li></ul><p>Letâ€™s create the project using Apache Maven:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn archetype:generate </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeGroupId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">org.apache.flink</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeArtifactId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">flink-quickstart-java </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DarchetypeVersion</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain">.2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DgroupId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">com.grallandco.demos </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DartifactId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kafka-flink-101 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -Dversion</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">-SNAPSHOT </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -DinteractiveMode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Maven will create the following structure:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tree kafka-flink-101/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kafka-flink-101/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ pom.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp; â””â”€â”€ com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;     â””â”€â”€ grallandco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;         â””â”€â”€ demos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;             â”œâ”€â”€ BatchJob.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;             â”œâ”€â”€ SocketTextStreamWordCount.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;             â”œâ”€â”€ StreamingJob.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚&nbsp;&nbsp;             â””â”€â”€ WordCount.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â””â”€â”€ log4j.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This project is configured to create a Jar file that contains your flink project code and also includes all dependencies needed to run it.</p><p>The project contains some other sample jobs, we do not need them for this article, you can either keep them to educational purposes or simply remove them from the project.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-kafka-connector">Add Kafka Connector<a class="hash-link" href="#add-kafka-connector" title="Direct link to heading">â€‹</a></h2><p>Open the <code>pom.xml</code> and add the following dependencies to your project:</p><p>As a first step, we have to add the Flink Kafka connector as a dependency so that we can use the Kafka sink. Add this to the pom.xml file in the dependencies section:</p><p>You must add now the Flink Kafka Connector dependency to use the Kafka sink. Add the following entry in the <code>&lt;dependencies&gt;</code> element:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;artifactId&gt;flink-connector-kafka-0.9_2.10&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;version&gt;${flink.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Flink project is now ready to use the DataStream using the Kafka Connector so you can send and receive messages from Apache Kafka.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-start-kafka">Install and Start Kafka<a class="hash-link" href="#install-and-start-kafka" title="Direct link to heading">â€‹</a></h2><p>Download Kafka, enter the following commands in your terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -O http://www.us.apache.org/dist/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -xzf kafka_2.11-0.9.0.0.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> kafka_2.11-0.9.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Kafka uses ZooKeeper, if you do not have Zookeeper running, you can start it using the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/zookeeper-server-start.sh config/zookeeper.properties</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start a Kafka broker by running the following command in a new terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/kafka-server-start.sh config/server.properties</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In another terminal, run the following command to create a Kafka topic called <code>flink-demo</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> --partitions </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> --topic flink-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the Kafka tools to post and consume messages to the <code>flink-demo</code> topic.</p><p>Producer</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic flink-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consumer</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic flink-demo --from-beginning</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the producer window, you can post some messages and see them in the consumer windows. We will use these tools to follow the interactions between Kafka and Flink.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="write-your-flink-application">Write your Flink application<a class="hash-link" href="#write-your-flink-application" title="Direct link to heading">â€‹</a></h2><p>Letâ€™s now use the Flink Kafka Connector to send messages to Kafka and consume them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer">Producer<a class="hash-link" href="#producer" title="Direct link to heading">â€‹</a></h3><p>The producer generates messages using the <code>SimpleStringGenerator()</code> class and send the string to the <code>flink-demo</code> topic.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    properties.setProperty("bootstrap.servers", â€œlocalhost:9092"); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataStream&lt;String&gt; stream = env.addSource(new SimpleStringGenerator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stream.addSink(new FlinkKafkaProducer09&lt;&gt;("flink-demo", new SimpleStringSchema(), properties));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>SimpleStringGenerator()</code> method code is available <a href="https://github.com/tgrall/kafka-flink-101/blob/master/src/main/java/com/grallandco/demos/WriteToKafka.java#L45-L60" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The main steps are:</p><ul><li>create a new <code>StreamExecutionEnvironment</code> the basis of any Flink application</li><li>create a new <code>DataStream</code> in the application environment, the <code>SimpleStringGenerator</code> class implements the <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.1/api/java/" target="_blank" rel="noopener noreferrer">SourceFunction</a> the base interface for all streams data sources in Flink.</li><li>add the <code>FlinkKafkaProducer09</code> sink to the topic. </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer">Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">â€‹</a></h3><p>The consumer simply reads the messages from the <code>flink-demo</code> topic, and print them into the console.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // create execution environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    properties.setProperty("bootstrap.servers", â€œlocalhost:9092");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    properties.setProperty("group.id", "flink_consumer");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataStream&lt;String&gt; stream = env.addSource(new FlinkKafkaConsumer09&lt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "flink-demo", new SimpleStringSchema(), properties) );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stream.map(new MapFunction&lt;String, String&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      private static final long serialVersionUID = -6867736771747690202L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      public String map(String value) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return "Stream Value: " + value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }).print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The main steps are:</p><ul><li>create a new <code>StreamExecutionEnvironment</code> the basis of any Flink application</li><li>create a set of properties with the consumer information, in this application we can only set the consumer <code>group.id</code>. </li><li>use the <code>FlinkKafkaConsumer09</code> to get the message from the topic <code>flink-demo</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run-the-application">Build and Run the application<a class="hash-link" href="#build-and-run-the-application" title="Direct link to heading">â€‹</a></h2><p>Letâ€™s run the application directly from Maven (or from your favorite IDE).</p><p>1- Build the project:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn clean package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2- Run the Flink Producer Job</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn exec:java -Dexec.mainClass=com.mapr.demos.WriteToKafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3- Run the Flink Consumer Job</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn exec:java -Dexec.mainClass=com.mapr.demos.ReadFromKafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the terminal, you should see the messages generated from the producer</p><p>You can now deploy and execute this job on your Flink cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article you have learned how to use Flink with kafka to write and read data streams.</p><p>Learn about what Apache Flink can do and how it maintains consistency and provides flexibility in the "<a href="https://www.mapr.com/introduction-to-apache-flink" target="_blank" rel="noopener noreferrer">Introduction to Apache Flink</a>" ebook.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Streaming Analytics in a Digitally Industrialized World]]></title>
            <link>https://tgrall.github.io/blog/2016/09/26/streaming-analytics-in-a-digitally-industrialized-world</link>
            <guid>/2016/09/26/streaming-analytics-in-a-digitally-industrialized-world</guid>
            <pubDate>Mon, 26 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Get an introduction to streaming analytics, which allows you real-time insight from captured events and big data. There are applications across industries, from finance to wine making, though there are two primary challenges to be addressed.]]></description>
            <content:encoded><![CDATA[<p>Get an introduction to streaming analytics, which allows you real-time insight from captured events and big data. There are applications across industries, from finance to wine making, though there are two primary challenges to be addressed.</p><p>Did you know that a plane flying from Texas to London can generate 30 million data points per flight? As Jim Daily of GE Aviation notes, that equals <a href="https://www.ge.com/digital/blog/industrial-iot-improving-airline-economics" target="_blank" rel="noopener noreferrer">10 billion data points</a> in one year. And weâ€™re talking about one plane alone. So you can understand why <a href="http://cloudblog.ericsson.com/cloud-scalability-combined-with-speed-inside-ges-cloud-transformation" target="_blank" rel="noopener noreferrer">another top GE executive recently told Ericsson Business Review</a> that "Cloud is the future of IT," with a focus on supporting challenging applications in industries such as aviation and energy.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-benefits-of-big-data">The benefits of big data<a class="hash-link" href="#the-benefits-of-big-data" title="Direct link to heading">â€‹</a></h3><p>Today, thanks to modern big data platforms, many companies are able to take advantage of the same methods as industry giant GE to store, process, and analyze massive amounts of data. This means that you can also capture core business data, such as that coming from a CRM system, or traffic sensors, or say jet engines, and associate it to other data such as social, application, blog or industrial data. Ultimately, this will result in greater data insights and can enable things like better customer segmentation and prediction.</p><p>Sounds great, right? Thereâ€™s a catch. The challenge is that these data are processed in batch mode, meaning that you have to wait a few hours or even days to access relevant KPIâ€™s and insights. Not only is there a delay, but analysis is based on data thatâ€™s out of date â€“ even if only by a few hours.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-of-big-event-streams">Analysis of big event streams<a class="hash-link" href="#analysis-of-big-event-streams" title="Direct link to heading">â€‹</a></h3><p>Thatâ€™s where streaming analytics comes in. Streaming analytics is the <a href="http://searchcloudapplications.techtarget.com/opinion/Streaming-analytics-lets-you-view-the-past-to-see-the-future?utm_medium=EM&amp;asrc=EM_NLN_58517129&amp;utm_campaign=20160606_Seeing%20the%20future...with%20the%20past?_fchurchville&amp;utm_source=NLN&amp;track=NL-1839&amp;ad=908120&amp;src=908120" target="_blank" rel="noopener noreferrer">analysis of large event streams</a>, which is data that is in constant movement. These streams can include actions that can be incredibly small, say one click, yet result in an explosion of data. The benefit is that you can capture events and data as they happen, delivering value to the enterprise in near real time.</p><p>What does streaming analytics look like regarding the previously mentioned CRM system? It means that an enterprise can get immediate feedback on something like a specific marketing campaign, website update, or product alteration. When a user clicks within one of these realms and an order is immediately processed, that information is pushed out in real time to various tools, allowing the enterprise to adjust its customer interaction.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-analytics-in-practice">Streaming analytics in practice<a class="hash-link" href="#streaming-analytics-in-practice" title="Direct link to heading">â€‹</a></h3><p>Where else is streaming analytics applicable? Think about the benefits of fraud detection in the financial sector, or the growth of sensors in manufacturing, or collection of data from large scale machines. One example is where Ericsson has collaborated with <a href="http://cloudblog.ericsson.com/can-the-networked-society-and-iot-make-better-wine" target="_blank" rel="noopener noreferrer">vintners in Germany, using IoT to improve traditional harvesting methods</a> through greater precision and speed of response to outside factors. In these streaming analytics scenarios, the key is â€œ<a href="https://www.mapr.com/blog/lets-get-real-acting-data-real-time" target="_blank" rel="noopener noreferrer">High-Frequency Decisioning,</a>â€ where you move from knowing to doing in real-time synergy. Time to action is compressed, resulting in dramatic results like achieving greater user satisfaction, higher revenue, or reduced risk.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="two-primary-challenges-with-streaming-analytics">Two primary challenges with streaming analytics<a class="hash-link" href="#two-primary-challenges-with-streaming-analytics" title="Direct link to heading">â€‹</a></h3><p>Streaming analytics is not without challenges. Systems must capture events in near real time, at scale, and in a distributed fashion. And of course, events must be stored and processed in real time. Since big data is generated one event at a time, you need to have an incredibly powerful storage and processing layer, which can provide deep analytics and rich features like machine learning systems.</p><p>To take on the first challenge, new messaging systems like <a href="http://kafka.apache.org" target="_blank" rel="noopener noreferrer">Apache Kafka</a> and <a href="https://www.mapr.com/products/mapr-streams" target="_blank" rel="noopener noreferrer">MapR Streams</a> provide a common API for developers to publish and subscribe to any event. And to process and store data in real-time, one of the most efficient methods would be to use a <a href="https://www.mapr.com/products/mapr-fs" target="_blank" rel="noopener noreferrer">distributed file system</a> and <a href="https://www.mapr.com/products/mapr-db-in-hadoop-nosql" target="_blank" rel="noopener noreferrer">NoSQL databases</a>. This provides horizontal scalability and flexibility. A storage system must also process and do analytics calculations in real time in a distributed manner.</p><p>Tools such as <a href="https://www.mapr.com/products/apache-spark" target="_blank" rel="noopener noreferrer">Apache Spark</a> and <a href="http://flink.apache.org" target="_blank" rel="noopener noreferrer">Flink</a> come to mind, which provide rich analytical functions that can be integrated with any tool, including real time alerting systems. It is also interesting to mention that all the events, data, that are now stored in real time continue to be accessible with traditional analytics tools; thanks to the distributed, and scalable distributed SQL Engines provided in modern big data platforms.</p><p>This was originally published on the <a href="http://cloudblog.ericsson.com/streaming-analytics-of-big-data-in-real-time" target="_blank" rel="noopener noreferrer">Ericsson Cloud blog here</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Setting up Spark Dynamic Allocation on MapR]]></title>
            <link>https://tgrall.github.io/blog/2016/09/01/setting-up-spark-dynamic-allocation-on-mapr</link>
            <guid>/2016/09/01/setting-up-spark-dynamic-allocation-on-mapr</guid>
            <pubDate>Thu, 01 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Spark can use various cluster manager to execute application (Stand Alone, YARN, Apache Mesos). When you install Apache Spark on MapR you can submit application in a Stand Alone mode or using YARN.]]></description>
            <content:encoded><![CDATA[<p>Apache Spark can use various cluster manager to execute application (Stand Alone, YARN, Apache Mesos). When you install Apache Spark on MapR you can submit application in a Stand Alone mode or using YARN.</p><p>This article focuses on YARN and Dynamic Allocation, a feature that lets Spark add or remove executors dynamically based on the workload. You can find more information about this feature in this presentation from Databricks:</p><ul><li><a href="http://www.slideshare.net/databricks/dynamic-allocation-in-spark" target="_blank" rel="noopener noreferrer">Dynamic Allocation in Spark</a></li></ul><p>Letâ€™s see how to configure Spark and YARN to use dynamic allocation (that is disabled by default).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h4><ul><li>MapR Converged Data Platform Cluster</li><li>Apache Spark for MapR installed</li></ul><p>This example has been described for MapR 5.2 with Apache Spark 1.6.1, you just need to adapt the version to your environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-dynamic-allocation-in-apache-spark">Enabling Dynamic Allocation in Apache Spark<a class="hash-link" href="#enabling-dynamic-allocation-in-apache-spark" title="Direct link to heading">â€‹</a></h3><p>The first thing to do is to enable Dynamic Allocation in Spark, for this you need to edit the spark configuration file on each Spark node.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/spark/spark-1.6.1/conf/spark-defaults.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and add the following entries:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spark.dynamicAllocation.enabled = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark.shuffle.service.enabled = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark.dynamicAllocation.minExecutors = 5 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark.executor.instances = 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find additional configuration options in the <a href="http://spark.apache.org/docs/1.6.1/configuration.html#dynamic-allocation" target="_blank" rel="noopener noreferrer">Apache Spark Documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-spark-external-shuffle-for-yarn">Enabling Spark External Shuffle for YARN<a class="hash-link" href="#enabling-spark-external-shuffle-for-yarn" title="Direct link to heading">â€‹</a></h3><p>You have now to edit YARN configuration to add information about Spark Shuffle Service, edit the following file, on each YARN node:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/hadoop/hadoop-2.7.0/etc/hadoop/yarn-site.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>add these properties: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;mapreduce_shuffle,mapr_direct_shuffle,spark_shuffle&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;yarn.nodemanager.aux-services.spark_shuffle.class&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;org.apache.spark.network.yarn.YarnShuffleService&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/property&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-spark-shuffle-to-yarn-classpath">Add Spark Shuffle to YARN classpath<a class="hash-link" href="#add-spark-shuffle-to-yarn-classpath" title="Direct link to heading">â€‹</a></h4><p>Spark Shuffle service must be added to the YARN classpath. The jar is located in the spark distribution:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/spark/spark-1.6.1/lib/spark-1.6.1-mapr-1605-yarn-shuffle.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To achieve this add the jar in the following folder on each node:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/hadoop/hadoop-2.7.0/share/hadoop/yarn/lib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can either copyy the file or create a symlink:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ln -s /opt/mapr/spark/spark-1.6.1/lib/spark-1.6.1-mapr-1605-yarn-shuffle.jar /opt/mapr/hadoop/hadoop-2.7.0/share/hadoop/yarn/lib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="restart-yarn">Restart YARN<a class="hash-link" href="#restart-yarn" title="Direct link to heading">â€‹</a></h4><p>Since you have changed the YARN configuration <em>you must restart your node managers</em> using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ maprcli node services -name nodemanager -action restart -nodes [list of nodes]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="submitting-a-spark-job">Submitting a Spark Job<a class="hash-link" href="#submitting-a-spark-job" title="Direct link to heading">â€‹</a></h3><p>Your MapR Cluster is not ready to use Spark dynamic allocation, this means that when you submit a job you do not need to specify any resource configuration, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/spark/spark-1.6.1/bin/spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --class com.mapr.demo.WordCountSorted \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --master yarn \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~/spark-examples-1.0-SNAPSHOT.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /mapr/my.cluster.com/input/4gb_txt_file.txt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /mapr/my.cluster.com/user/mapr/output/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>note that you can still specify the resources, but in this case the dynamic allocation will not be used for this specific job, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/mapr/spark/spark-1.6.1/bin/spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --class com.mapr.demo.WordCountSorted \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --master yarn \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --num-executors 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --executor-memory 1G \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~/spark-examples-1.0-SNAPSHOT.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /mapr/my.cluster.com/input/4gb_txt_file.txt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /mapr/my.cluster.com/user/mapr/output/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Save MapR Streams messages into MapR DB JSON]]></title>
            <link>https://tgrall.github.io/blog/2016/03/30/save-mapr-streams-messages-into-mapr-db-json</link>
            <guid>/2016/03/30/save-mapr-streams-messages-into-mapr-db-json</guid>
            <pubDate>Wed, 30 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[In this article you will learn how to create a MapR Streams Consumer that saves all the messages into a MapR-DB JSON Table.]]></description>
            <content:encoded><![CDATA[<p>In this article you will learn how to create a MapR Streams Consumer that saves all the messages into a <a href="http://maprdocs.mapr.com/51/#MapR-DB/JSON_DB/mapr_db_json_top.html" target="_blank" rel="noopener noreferrer">MapR-DB JSON Table</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-run-the-sample-mapr-streams-application">Install and Run the sample MapR Streams application<a class="hash-link" href="#install-and-run-the-sample-mapr-streams-application" title="Direct link to heading">â€‹</a></h3><p>The steps to install and run the applications are the same as the one defined in the following article:</p><ul><li><a href="https://www.mapr.com/blog/getting-started-sample-programs-mapr-streams" target="_blank" rel="noopener noreferrer">MapR Streams application</a></li></ul><p>Once you have the default producer and consumer running in your environment using the commands:</p><p>Producer:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ java -cp $(mapr classpath):./mapr-streams-examples-1.0-SNAPSHOT-jar-with-dependencies.jar com.mapr.examples.Run producer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consumer:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ java -cp $(mapr classpath):./mapr-streams-examples-1.0-SNAPSHOT-jar-with-dependencies.jar com.mapr.examples.Run consumer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="save-messages-into-mapr-db-json">Save messages into MapR-DB JSON<a class="hash-link" href="#save-messages-into-mapr-db-json" title="Direct link to heading">â€‹</a></h3><p>The <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/DBConsumer.java" target="_blank" rel="noopener noreferrer">DBConsumer</a> class is a copy of the <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/Consumer.java" target="_blank" rel="noopener noreferrer">Consumer</a> class with small changes to save the messages coming from the <code>/sample-stream:fast-messages</code> topic into a MapR-DB table named <code>/apps/fast-messages</code>. </p><p><strong>1- Add MapR-DB Maven dependency to your project</strong></p><p>Edit the <code>pom.xml</code> file and add the following entry in the <code>dependencies</code> tag:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.mapr.db</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maprdb</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">5.1.0-mapr</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This add support for:</p><ul><li><a href="http://ojai.io/" target="_blank" rel="noopener noreferrer">OJAI</a> Open JSON Application Interface</li><li><a href="http://maprdocs.mapr.com/51/#MapR-DB/JSON_DB/crud_with_maprdb_ojai_java_api.html" target="_blank" rel="noopener noreferrer">MapR-DB JSON API</a> </li></ul><p><strong>2- Create and Get a JSON Table</strong></p><p>To save the messages, the application must access a JSON Table, for this just call the <code>MapRDB.getTable(TABLE_PATH)</code> method. If the table does not exist, create it with the <code>MapRDB.createTable(TABLE_PATH)</code>.</p><p>This is what the <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/DBConsumer.java#L113-L119" target="_blank" rel="noopener noreferrer"><code>DBConsumer.getTable(TABLE_PATH)</code></a> method is doing.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Table</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> tablePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token class-name">MapRDB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tableExists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tablePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">MapRDB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tablePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">MapRDB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tablePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When the DBConsumer starts the <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/DBConsumer.java#L41" target="_blank" rel="noopener noreferrer"><code>getTable("/apps/fast-messages")</code></a> method is called.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Table fastMessagesTable = getTable("/apps/fast-messages");</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The table <code>fastMessagesTable</code> is not available to the consumer.</p><p><strong>3- Save messages into the JSON Table</strong></p><p>Messages can be saved into the table using the <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/DBConsumer.java#L78-L81" target="_blank" rel="noopener noreferrer">MapR-DB JSON Java API</a>.</p><p>The producer sends the message as JSON String that is converted into a JSON object names <code>msg</code>. This object can be used to create an OJAI Document:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Document messageDocument = MapRDB.newDocument(msg);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To be saved into MapR-DB, a document must have a <code>_id</code> field. In this example letâ€™s use the message number generated by the producer <em>(JSON field <code>k</code>)</em>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  messageDocument.setId( Integer.toString(messageDocument.getInt("k")));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Letâ€™s now save the document into the table:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  fastMessagesTable.insertOrReplace( messageDocument );       </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each time the producer will be executed, the message number counter will be initialized to 0. So the document _id will be the same, and the document into the table must be replaced; this is why the <code>insertOrReplace</code> method is used.</p><p>Letâ€™s run the new consumer.</p><p><strong>4- Run the DBConsumer</strong></p><p>To run the DBConsumer just pass the parameter <code>dbconsumer</code> as follow:</p><p>Consumer:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ java -cp $(mapr classpath):./mapr-streams-examples-1.0-SNAPSHOT-jar-with-dependencies.jar com.mapr.examples.Run dbconsumer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that a new <a href="https://github.com/mapr-demos/mapr-streams-sample-programs/blob/master/src/main/java/com/mapr/examples/DBConsumer.java#L48-L54" target="_blank" rel="noopener noreferrer">group is created</a> to be sure that messages are read by the two different consumers (Consumer and DBConsumer).</p><p><strong>5- Query the messages saved into MapR-DB</strong></p><p>Messages are saved into the <code>/apps/fast-messages</code> table, letâ€™s used the MapR DBShell to query the data. On your cluster run the following commands, as <code>mapr</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mapr dbshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maprdb mapr:&gt; find /apps/fast-messages --id 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{"_id":"100","type":"test","t":64986.787,"k":{"$numberLong":100}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this very simple example, the DBConsumer takes each message and saved it as a simple JSON Document into MapR-DB JSON. The table can be used to create any type of application, or using Apache Drill <em>(1.6 or later)</em> to do some analytics.</p><p>In a real application the messages will probably be modified, enriched and/or aggregated and then the result be saved into MapR-DB Table. The goal of this sample is just to show that it is easy to integrate MapR Streams and MapR-DB.</p><p>You have also other alternative to achieve the same thing using for example:</p><ul><li>Spark Streaming</li><li>3rd Party ETL and Tools</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting Started with MapR Streams]]></title>
            <link>https://tgrall.github.io/blog/2016/03/10/getting-started-with-mapr-streams</link>
            <guid>/2016/03/10/getting-started-with-mapr-streams</guid>
            <pubDate>Thu, 10 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[You can find a new tutorial that explains how to deploy an Apache Kafka application to MapR Streams, the tutorial is available here:]]></description>
            <content:encoded><![CDATA[<p>You can find a new tutorial that explains how to deploy an Apache Kafka application to MapR Streams, the tutorial is available here:</p><ul><li><a href="https://www.mapr.com/blog/getting-started-sample-programs-mapr-streams" target="_blank" rel="noopener noreferrer">Getting Started with MapR Streams</a></li></ul><p>MapR Streams is a new distributed messaging system for streaming event data at scale, and itâ€™s integrated into the MapR converged platform.
MapR Streams uses the Apache Kafka API, so if youâ€™re already familiar with Kafka, youâ€™ll find it particularly easy to get started with MapR Streams.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Getting Started with Sample Programs for Apache Kafka 0.9]]></title>
            <link>https://tgrall.github.io/blog/2016/02/10/getting-started-with-sample-programs-for-apache-kafka-0-dot-9</link>
            <guid>/2016/02/10/getting-started-with-sample-programs-for-apache-kafka-0-dot-9</guid>
            <pubDate>Wed, 10 Feb 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Ted Dunning and I have worked on a tutorial that explains how to write your first Kafka application. In this tutorial you will learn how to:]]></description>
            <content:encoded><![CDATA[<p>Ted Dunning and I have worked on a tutorial that explains how to write your first Kafka application. In this tutorial you will learn how to:</p><ul><li>Install and start Kafka</li><li>Create and Run a producer and a consumer</li></ul><p>You can find the tutorial on the MapR blog:</p><ul><li><a href="https://goo.gl/cWmbmY" target="_blank" rel="noopener noreferrer">Getting Started with Sample Programs for Apache Kafka 0.9</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Using Apache Drill REST API to build ASCII Dashboard with node]]></title>
            <link>https://tgrall.github.io/blog/2015/12/10/using-apache-drill-rest-api-to-build-ascii-dashboard-with-node</link>
            <guid>/2015/12/10/using-apache-drill-rest-api-to-build-ascii-dashboard-with-node</guid>
            <pubDate>Thu, 10 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Drill has a hidden gem: an easy to use REST interface. This API can be used to Query, Profile and Configure Drill engine.]]></description>
            <content:encoded><![CDATA[<p><a href="http://drill.apache.org" target="_blank" rel="noopener noreferrer">Apache Drill</a> has a hidden gem: an easy to use REST interface. This API can be used to Query, Profile and Configure Drill engine.</p><p>In this blog post I will explain how to use Drill REST API to create ascii dashboards using <a href="https://www.npmjs.com/package/blessed-contrib" target="_blank" rel="noopener noreferrer">Blessed Contrib</a>.</p><p>The ASCII Dashboard looks like</p><p><img loading="lazy" alt="Dashboard" src="/assets/images/dashboard_demo-b5ddedf89587391e12ef9f1c7b473a1b.gif" width="1041" height="578" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h4><ul><li>Node.js</li><li>Apache Drill 1.2</li><li>For this post, you will use the SFO Passengers CSV file available <a href="http://www.flysfo.com/media/facts-statistics/air-traffic-statistics" target="_blank" rel="noopener noreferrer">here</a>. <ul><li>Download this locally, unzip the files and put the CSV into a folder that will be access uzing the following path in Drill : <code>dfs.data.`/airport/*.csv` </code></li></ul></li></ul><p><em>Note: I am still using Apache 1.2 to allow this example to be executed in context of a MapR cluster.</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-query-and-view">The Query and View<a class="hash-link" href="#the-query-and-view" title="Direct link to heading">â€‹</a></h2><p>In Drill 1.2, CSV headers are not automatically parsed. (This is one of the new features of 1.3: look for <code>extractHeader</code> in the <a href="https://drill.apache.org/docs/text-files-csv-tsv-psv/" target="_blank" rel="noopener noreferrer">documentation</a>). </p><p>For simplicity, remove the first line of the CSV.</p><p>The basic query will look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(SUBSTR(columns[0],1,4) AS INT)  `YEAR`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(SUBSTR(columns[0],5,2) AS INT) `MONTH`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[1] as `AIRLINE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[2] as `IATA_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[3] as `AIRLINE_2`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[4] as `IATA_CODE_2`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[5] as `GEO_SUMMARY`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[6] as `GEO_REGION`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[7] as `ACTIVITY_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[8] as `PRICE_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[9] as `TERMINAL`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[10] as `BOARDING_AREA`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(columns[11] AS DOUBLE) as `PASSENGER_COUNT`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM dfs.data.`/airport/*.csv`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIMIT 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let's now create a view with these columns: <em>(do not put any limit !)</em></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE OR REPLACE VIEW dfs.tmp.`airport_data_view` AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(SUBSTR(columns[0],1,4) AS INT)  `YEAR`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(SUBSTR(columns[0],5,2) AS INT) `MONTH`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[1] as `AIRLINE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[2] as `IATA_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[3] as `AIRLINE_2`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[4] as `IATA_CODE_2`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[5] as `GEO_SUMMARY`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[6] as `GEO_REGION`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[7] as `ACTIVITY_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[8] as `PRICE_CODE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[9] as `TERMINAL`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[10] as `BOARDING_AREA`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(columns[11] AS DOUBLE) as `PASSENGER_COUNT`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM dfs.data.`/airport/*.csv`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So you can now use the view in your query:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select * from dfs.tmp.`airport_data_view` limit 5;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-rest-api">Use the REST API<a class="hash-link" href="#use-the-rest-api" title="Direct link to heading">â€‹</a></h2><p>Now that you have the query you can use the REST API to retrieve the data as JSON document over HTTP. Open a terminal and run this curl command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header "Content-type: application/json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data '{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "queryType" : "SQL",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "query" : "select * from dfs.tmp.`airport_data_view` limit 5 " }' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://localhost:8047/query.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The returned JSON document looks like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "columns" : [ "YEAR", "MONTH", ... , "PASSENGER_COUNT" ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "rows" : [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GEO_REGION" : "US",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "IATA_CODE_2" : "TZ",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "AIRLINE" : "ATA Airlines",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "MONTH" : "7",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "ACTIVITY_CODE" : "Deplaned"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GEO_REGION" : "US",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "IATA_CODE_2" : "TZ",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GEO_SUMMARY" : "Domestic",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see it is quite simple:</p><ul><li>a first JSON attribute that list the columns</li><li>the list of rows, as JSON documents in an array.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-graph-using-nodejs--blessed-contrib">Create a Graph using Node.js &amp; Blessed Contrib<a class="hash-link" href="#create-a-graph-using-nodejs--blessed-contrib" title="Direct link to heading">â€‹</a></h2><p>Let's create a node application. </p><p>First you have to include:</p><ul><li><code>request</code> : to call the REST API</li><li><code>blessed</code> : to get a rich Terminal API</li><li><code>blessed-contrib</code> : for the dashboard</li></ul><p>and then create a <code>screen</code> and a <code>bar</code> chard from Contrib.</p><p>So the <em>header</em> of your Javascript file looks like:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> blessed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'blessed'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> contrib </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'blessed-contrib'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'request'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> screen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> blessed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">screen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contrib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Bar Chart'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">barWidth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">barSpacing</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">maxHeight</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"100%"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"100%"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So here we have defined a bar char, that will be populated with the columns and rows. For this we need a query, let's use the number of passengers per year, as follow:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT `YEAR`, SUM(`PASSENGER_COUNT`) FROM dfs.tmp.`airport_data_view` GROUP BY `YEAR`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The complete Bar Chat application looks like:</p><iframe width="100%" frameborder="0" id="gist-00c5d83b85f59d80ad95-app001.js"></iframe><ul><li>The lines 15-17 contain the query object used by the Drill REST API</li><li>The lines 26-38 contain the callback from the HTTP call, and the results values are store in the data object (lines 33-34), and then set in the bar chart (line 36)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-dashboard">Run the "Dashboard"<a class="hash-link" href="#run-the-dashboard" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install request blessed blessed-contrib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node app001.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This application shows a simple bar chart, in your terminal. Let's now create a richer dashboard.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-dashboard">Complete Dashboard<a class="hash-link" href="#complete-dashboard" title="Direct link to heading">â€‹</a></h2><p>The Bless-Contrib node package allows developer to create rich dashboards that aggregate multiple graphs and could be refresh automatically, as seen in the screencast at the top of this post.</p><p>You can find a simple dashboard in this <a href="https://github.com/tgrall/drill-node-dashboard.git" target="_blank" rel="noopener noreferrer">Github repository</a>, once you have cloned it, you just need to run: (be sure that your view is called 'dfs.tmp.<code>airport_data_view</code>'</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/tgrall/drill-node-dashboard.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd drill-node-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node dashboard.js http://localhost:8047</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can even change the CSV file, for example adding new months, and the line chart on the right will be refreshed automatically.</p><p><em>Note: this dashboard sample is very basic and just a quick example explaning how to use Drill REST API in a node.js application</em></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Convert a CSV File to Apache Parquet with Drill]]></title>
            <link>https://tgrall.github.io/blog/2015/08/17/convert-csv-file-to-apache-parquet-dot-dot-dot-with-drill</link>
            <guid>/2015/08/17/convert-csv-file-to-apache-parquet-dot-dot-dot-with-drill</guid>
            <pubDate>Mon, 17 Aug 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[A very common use case when working with Hadoop is to store and query simple files (CSV, TSV, ...); then to get better performance and efficient storage convert these files into more efficient format, for example Apache Parquet.]]></description>
            <content:encoded><![CDATA[<p>A very common use case when working with Hadoop is to store and query simple files (CSV, TSV, ...); then to get better performance and efficient storage convert these files into more efficient format, for example <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Apache Parquet</a>.</p><p><a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Apache Parquet</a> is a <a href="https://en.wikipedia.org/wiki/Column-oriented_DBMS" target="_blank" rel="noopener noreferrer">columnar storage format</a> available to any project in the Hadoop ecosystem. Apache Parquet has the following characteristics:</p><ul><li>Self-describing</li><li>Columnar format</li><li>Language-independent</li></ul><p>Let's take a concrete example, you can find many interesting Open Data sources that distribute data as CSV files- or equivalent format-. So you can store them into your distributed file system and use them in your applications/jobs/analytics queries. This is not the most efficient way especially when we know that these data won't move that often. So instead of simply storing the CSV let's copy this information into Parquet.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-convert-csv-files-into-parquet-files">How to convert CSV files into Parquet files?<a class="hash-link" href="#how-to-convert-csv-files-into-parquet-files" title="Direct link to heading">â€‹</a></h3><p>You can use code to achieve this, as you can see in the <a href="https://github.com/Parquet/parquet-compatibility/blob/master/parquet-compat/src/test/java/parquet/compat/test/ConvertUtils.java" target="_blank" rel="noopener noreferrer">ConvertUtils</a> sample/test class. You can use a simpler way with Apache Drill. Drill allows you save the result of a query as Parquet files.</p><p>The following steps will show you how to do convert a simple CSV into a Parquet file using Drill.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h4><ul><li>Apache Drill : Standalone <a href="https://drill.apache.org/" target="_blank" rel="noopener noreferrer">Apache Drill</a> or using <a href="https://www.mapr.com/products/mapr-sandbox-hadoop/download-sandbox-drill" target="_blank" rel="noopener noreferrer">Apache Drill Sandbox from MapR</a></li><li>Some CSV Files: for example <a href="http://www.flysfo.com/media/facts-statistics/air-traffic-statistics" target="_blank" rel="noopener noreferrer">Passenger Dataset from SFO Air Traffic Statistics</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="querying-the-csv-file">Querying the CSV file<a class="hash-link" href="#querying-the-csv-file" title="Direct link to heading">â€‹</a></h4><p>Let's execute a basic query:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">/opendata/Passenger/SFO_Passenger_Data/MonthlyPassengerData_200507_to_201503.csv</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"200507"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"ATA Airlines"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"TZ"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"ATA Airlines"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"TZ"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"Domestic"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"US"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"Deplaned"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"Low Fare"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"Terminal 1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"27271\r"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see, by default Drill processes each line as an array of columns, all values being simple String. So if you need to do some operations with these values (projection or where clause) you must use the column index, and cast the value to the proper type. You can see a simple example below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[0] as `DATE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">columns[1] as `AIRLINE`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST(columns[11] AS DOUBLE) as `PASSENGER_COUNT`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM dfs.`/opendata/Passenger/SFO_Passenger_Data/*.csv`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE CAST(columns[11] AS DOUBLE) &lt; 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------+-----------------------------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  DATE   |              AIRLINE              | PASSENGER_COUNT  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------+-----------------------------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 200610  | United Airlines - Pre 07/01/2013  | 2.0              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are now ready to create our Parquet files using the "Create Table As Select" (aka <a href="http://drill.apache.org/docs/create-table-as-ctas-command/" target="_blank" rel="noopener noreferrer">CTAS</a>)</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">session</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">store.format</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'parquet'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> dfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tmp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">/stats/airport_data/</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SUBSTR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">YEAR</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SUBSTR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">MONTH</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">AIRLINE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">IATA_CODE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">AIRLINE_2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">IATA_CODE_2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">GEO_SUMMARY</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">GEO_REGION</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">ACTIVITY_CODE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">PRICE_CODE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">TERMINAL</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">BOARDING_AREA</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">columns</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DOUBLE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">PASSENGER_COUNT</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">/opendata/Passenger/SFO_Passenger_Data/*.csv</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That's it! You have now a Parquet file, a single file in our case since our dataset is really small. Apache Drill will create multiples files for the tables depending of the size and configuration your environment.</p><p>I invite you to read this Chapter in the Apache Drill documentation to learn more about <a href="https://drill.apache.org/docs/parquet-format/" target="_blank" rel="noopener noreferrer">Drill and Parquet</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-parquet-files">Query Parquet Files<a class="hash-link" href="#query-parquet-files" title="Direct link to heading">â€‹</a></h3><p>Now that you have created your Parquet files you can use them in any of your Hadoop processes, but you can also use them in Drill, as follow:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM dfs.tmp.`/stats/airport_data/*`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this article you have learned how to convert a CSV file using an Apache Drill query.</p><p>You can do that with any source supported by Drill, for example from JSON to Parquet, or even a complex join query between multiple data sources. You can also chose a different output format for example JSON, or a CSV.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Apache Drill : How to create a new function?]]></title>
            <link>https://tgrall.github.io/blog/2015/07/21/apache-drill-how-to-create-a-new-function</link>
            <guid>/2015/07/21/apache-drill-how-to-create-a-new-function</guid>
            <pubDate>Tue, 21 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Drill allows users to explore any type of data using ANSI SQL. This is great, but Drill goes even further than that and allows you to create custom functions to extend the query engine. These custom functions have all the performance of any of the Drill primitive operations, but allowing that performance makes writing these functions a little trickier than you might expect.]]></description>
            <content:encoded><![CDATA[<p><a href="https://drill.apache.org/" target="_blank" rel="noopener noreferrer">Apache Drill</a> allows users to explore <em>any type of</em> data using ANSI SQL. This is great, but Drill goes even further than that and allows you to create custom functions to extend the query engine. These custom functions have all the performance of any of the Drill primitive operations, but allowing that performance makes writing these functions a little trickier than you might expect.</p><p>In this article, I'll explain step by step how to create and deploy a new function using a very basic example. Note that you can find lot of information about <a href="https://drill.apache.org/docs/develop-custom-functions-introduction/" target="_blank" rel="noopener noreferrer">Drill Custom Functions in the documentation</a>.</p><p>Let's create a new function that allows you to mask some characters in a string, and let's make it very simple. The new function will allow user to hide <em>x</em> number of characters from the start and replace then by any characters of their choice. This will look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MASK( 'PASSWORD' , '#' , 4 ) =&gt; ####WORD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find the full project in the following <a href="https://github.com/tgrall/drill-simple-mask-function" target="_blank" rel="noopener noreferrer">Github Repository</a>.</p><p>As mentioned before, we could imagine many advanced features to this, but my goal is to focus on the steps to write a custom function, not
so much on what the function does.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><p>For this you will need:</p><ul><li>Java Developer Kit 7 or later</li><li>Apache Drill 1.1 or later</li><li>Maven 3.0 or later</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">â€‹</a></h2><p>The following Drill dependency should be added to your maven project</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.drill.exec</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">drill-java-exec</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="source">Source<a class="hash-link" href="#source" title="Direct link to heading">â€‹</a></h2><p>The <code>Mask</code> function is an implementation of the <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/DrillSimpleFunc.java" target="_blank" rel="noopener noreferrer"><code>DrillSimpleFunc</code></a>.</p><p>Developers can create 2 types of custom functions:</p><ul><li>Simple Functions: these functions have a single row as input and produce a single value as output</li><li>Aggregation Functions: that will accept multiple rows as input and produce one value as output</li></ul><p>Simple functions are often referred to as UDF's which stands for user defined function.  Aggregation functions are referred to as UDAF which
stands for user defined aggregation function.</p><p>In this example, we just need to transform the value of a column on each row, so a simple function is enough.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-function">Create the function<a class="hash-link" href="#create-the-function" title="Direct link to heading">â€‹</a></h4><p>The first step is to implement the <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/DrillSimpleFunc.java" target="_blank" rel="noopener noreferrer"><code>DrillSimpleFunc</code></a> interface.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">org</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">apache</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">drill</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">contrib</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">function</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">DrillSimpleFunc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotations</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">FunctionTemplate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@FunctionTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"mask"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scope</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FunctionTemplate</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">FunctionScope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SIMPLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nulls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FunctionTemplate</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">NullHandling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NULL_IF_NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleMaskFunc</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">DrillSimpleFunc</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">eval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The behavior of the function is driven by annotations (line 6-10)</p><ul><li><em>Name</em> of the function</li><li><em>Scope</em> of the function, in our case Simple</li><li>What to do when the value is NULL, in this case Reverse will just returns NULL</li></ul><p>Now we need to implement the logic of the function using <code>setup()</code> and <code>eval()</code> methods.</p><ul><li><code>setup</code> is self-explanatory, and in our case we do not need to setup anything.</li><li><code>eval</code> that is the core of the function. As you can see this method does not have any parameter, and return void. So how does it work?</li></ul><p>In fact the function will be generated dynamically (see <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/fn/DrillSimpleFuncHolder.java#L42" target="_blank" rel="noopener noreferrer">DrillSimpleFuncHolder</a>), and the input parameters and output holders are defined using holders by annotations. Let's look into this.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">netty</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">buffer</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">DrillBuf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">DrillSimpleFunc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotations</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">FunctionTemplate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotations</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Output</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotations</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Param</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">holders</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">IntHolder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">holders</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">NullableVarCharHolder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">apache</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">drill</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">expr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">holders</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">VarCharHolder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">inject</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Inject</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@FunctionTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mask"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scope </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FunctionTemplate</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">FunctionScope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SIMPLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nulls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FunctionTemplate</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">NullHandling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NULL_IF_NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleMaskFunc</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">DrillSimpleFunc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Param</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">NullableVarCharHolder</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">constant </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">VarCharHolder</span><span class="token plain"> mask</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">constant </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">IntHolder</span><span class="token plain"> toReplace</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">VarCharHolder</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Inject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">DrillBuf</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">eval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We need to define the parameters of the function. In this case we have 3 parameters, each defined using the <code>@Param</code> annotation.  In addition, we also have to define the returned value using the <code>@Output</code> annotation.</p><p>The parameters of our mask function are:</p><ul><li>A nullable string</li><li>The mask char or string</li><li>The number of characters to replace starting from the first</li></ul><p>The function returns :</p><ul><li>A string</li></ul><p>For each of these parameters you have to use an holder class. For the <code>String</code>, this is managed by a <code>VarCharHolder</code> or <code>NullableVarCharHolder</code> -lines 21, 24,30- that provides a buffer to manage larger objects in a efficient way. Since we are manipulating a <code>VarChar</code> you also have to inject another buffer that will be used for the output -line 33-. Note that Drill doesn't actually use the Java heap for data being processed in a query but instead keeps this data off the heap and manages the life-cycle for us without using the Java
garbage collector.</p><p>We are almost done since we have the proper class, the input/output object, we just need to implement the <code>eval()</code> method itself, and use these objects.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">eval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// get the value and replace with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> maskValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">org</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">apache</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">drill</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">exec</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">expr</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">fn</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">impl</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">StringFunctionHelpers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getStringFromVarCharHolder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> stringValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">org</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">apache</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">drill</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">exec</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">expr</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">fn</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">impl</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">StringFunctionHelpers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toStringFromUTF8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> numberOfCharToReplace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">toReplace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stringValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// build the mask substring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> maskSubString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">com</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">google</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">common</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">base</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Strings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">repeat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maskValue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> numberOfCharToReplace</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> outputValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">StringBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maskSubString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stringValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">substring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">numberOfCharToReplace</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// put the output value in the out buffer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> outputValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> outputValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code is quite simple:</p><ul><li>Get the mask itself - line 4</li><li>Get the value - line 5</li><li>Get the number of character to replace - line 7</li><li>Generate a new string with masked values - lines 10/11</li><li>Create and populate the output buffer - lines 14 to 17</li></ul><p>This code does, however, look a bit strange to somebody used to reading Java code. This strangeness arises because the final code that is executed in a query will actually be generated on the fly. This allows Drill to leverage Java's just-in-time (JIT) compiler for maximum speed. To make this work, you have to respect some basic rules:</p><ul><li><strong>Do not use imports, but instead use the fully qualified class name</strong>, this is what is done on line 10 with the <code>Strings</code> class. (coming from the Google Guava API packaged in Apache Drill)</li><li>The <code>ValueHolders</code> classes, in our case <code>VarCharHolder</code> and <code>IntHolder</code> should be manipulated like structs, so you must call helper methods, for example <code>getStringFromVarCharHolder</code> and <code>toStringFromUTF8</code>. Calling methods like <code>toString</code> will result in very bad problems.</li></ul><p>Starting in Apache Drill 1.3.x, it is mandatory to specify the package name of your function in the <code>./resources/drill-module.conf</code> file as follow:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">drill {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  classpath.scanning {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    packages : ${?drill.classpath.scanning.packages} [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      org.apache.drill.contrib.function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are now ready to deploy and test this new function.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package">Package<a class="hash-link" href="#package" title="Direct link to heading">â€‹</a></h3><p>Once again since, Drill will generate source, <em><strong>you must prepare your package in a way that classes and sources of the function are present in the classpath</strong></em>. This is different from the way that Java code is normally packaged but is necessary for Drill to be able to do the necessary code generation. Drill uses the compiled code to access the annotations and uses the source code to do code generation.</p><p>An easy way to do that is to use maven to build your project, and, in particular, use the <a href="https://maven.apache.org/plugins/maven-source-plugin/" target="_blank" rel="noopener noreferrer">maven-source-plugin</a> like this in your <code>pom.xml</code> file:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-source-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.4</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">attach-sources</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">package</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">jar-no-fork</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, when you build using <code>mvn package</code>, Maven will generate 2 jars:</p><ul><li>The default jar with the classes and resources (<em>drill-simple-mask-1.0.jar</em>)</li><li>A second jar with the sources (<em>drill-simple-mask-1.0-sources.jar</em>)</li></ul><p>Finally you must add a <code>drill-module.conf</code> file in the resources folder of your project, to tell Drill that your jar contains a custom function. If you have no specific configuration to set for your function you can keep this file empty.</p><p>We are all set, you can now package and deploy the new function, just package and copy the Jars into the Drill 3rd party folder; $DRILL_HOME/jars/3rdparty , where $DRILL_HOME being your Drill installation folder.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp target/*.jar  $DRILL_HOME/jars/3rdparty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Restart drill.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-">Run !<a class="hash-link" href="#run-" title="Direct link to heading">â€‹</a></h3><p>You should now be able to use your function in your queries:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT MASK(first_name, '*' , 3) FIRST , MASK(last_name, '#', 7) LAST  FROM cp.`employee.json` LIMIT 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  FIRST   |    LAST    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***ri    | ######     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***rick  | #######    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***hael  | ######     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***a     | #######ez  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***erta  | #######    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this simple project you have learned how to write, deploy and use a custom Apache Drill Function. You can now extend this to create your own function.</p><p>One important thing to remember when extending Apache Drill (using a custom function, storage plugin or format), is that Drill runtime is generating dynamically lot of code. This means you may have to use a very specific pattern when writing and deploying your extensions. With our basic function this meant we had to:</p><ul><li>deploy <strong>classes AND sources</strong></li><li>use <strong>fully Qualified Class Names</strong></li><li>use value holder classes and helper methods to manipulate parameters</li><li></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[MongoDB : Playing with Arrays]]></title>
            <link>https://tgrall.github.io/blog/2015/04/21/mongodb-playing-with-arrays</link>
            <guid>/2015/04/21/mongodb-playing-with-arrays</guid>
            <pubDate>Tue, 21 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[As you know,  you have many differences between relational and document databases. The biggest, for the developer, is probably the data model: Row versus Document. This is particularly true when we talk about "relations" versus "embedded documents (or values)". Let's look at some examples, then see what are the various operations provided by MongoDB to help you to deal with this.]]></description>
            <content:encoded><![CDATA[<p>As you know,  you have many differences between relational and document databases. The biggest, for the developer, is probably the data model: Row versus Document. This is particularly true when we talk about "relations" versus "embedded documents <em>(or values)</em>". Let's look at some examples, then see what are the various operations provided by MongoDB to help you to deal with this.</p><p>I won't use this post to go in all the details about "document design", but I just want to focus on the operations you can to with these arrays/list (so useful operations once you have chosen to embed documents).</p><p>Let's use a very simple example based on e-commerce platform, with two document types : <strong><em>user</em></strong> and <strong><em>orders</em></strong>.</p><p>The first thing you have, is a simple list of values into a JSON array. Let's look at a user profile where user have a list of interests  (field <code>interested_by</code>) :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"first_name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"last_name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"interested_by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"electronics"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sports"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"music"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"address"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John Doe"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"company"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Resultri"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"street"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1015 Mapple Street"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"city"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Francisco"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"state"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CA"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"zip_code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">94105</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Another thing you do with array, is to represent "one-to-many" relations. These relations in your RDBMS are based on multiple tables and foreign keys.
In document databases, like MongoDB, these relations are, most of the time, represented using an <em>array of documents</em>, something like (look at the <code>items</code> field):</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45218468309</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"date"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ISODate(</span><span class="token string" style="color:#e3116c">"2015-01-28T09:40:50.615Z"</span><span class="token plain">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"customer"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John Doe"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"ship_to"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John Doe"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"company"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Resultri"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"street"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1015 Mapple Street"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"city"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Francisco"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"state"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CA"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"zip_code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">94105</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"items"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"WA34R"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Wireless Qwerty Keyboard"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"quantity"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"unit_price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">41.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">41.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"vat"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MW003"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MiWatch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"quantity"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"unit_price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">245</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">490</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"vat"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Documents above are not necessary complete, I just want to focus on the various operations you can do on these arrays.</p><p><em>Note: you can add these documents into your MongoDB instance, I will use the collections <code>customers</code> and <code>orders</code>.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-interest-to-the-user">Adding new interest to the user<a class="hash-link" href="#adding-new-interest-to-the-user" title="Direct link to heading">â€‹</a></h3><p>To achieve this you have 2 operators that you can use in your update: <a href="http://docs.mongodb.org/manual/reference/operator/update/push/" target="_blank" rel="noopener noreferrer"><code>$push</code></a> and <a href="http://docs.mongodb.org/manual/reference/operator/update/addToSet/" target="_blank" rel="noopener noreferrer"><code>$addToSet</code></a>. Since these one a very simple I won't go into too much details.</p><p>The <code>$push</code> will add the value at the end of the list, if the value already exits it will be added (many copies), this is why it makes sense to use the <code>$addToSet</code> operator, that only add the value if the value does not already exist in the array.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"$addToSet"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"interested_by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">"sports"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This update command above <strong>will not change</strong> the document since the "sports" value is already in the list.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"$addToSet"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"interested_by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">"books"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This <strong>will add</strong> the "books" value at the end of the list.</p><p>If the attribute <code>interested_by</code> does not exist in the document, it will be added with one single entry (here the <code>$push</code> is working the same way ).</p><p>If the attribute is not an array, the database will not do anything and return the error <a href="https://github.com/mongodb/mongo/blob/master/docs/errors.md" target="_blank" rel="noopener noreferrer">#16837</a> <em>"The field 'first_name' must be an array but is of type String in document"</em>.</p><p>Here we use <em>interest</em>, but you can imagine doing the same thing for tagging, or any other business use case with a list of values.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-item-into-an-order">Adding a new item into an order<a class="hash-link" href="#adding-a-new-item-into-an-order" title="Direct link to heading">â€‹</a></h3><p>The previous case, is very simple since it is a scalar value. Now I need to add a new order line, it is not harder than before:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">orders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45218468309</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"$push"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"items"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MO001"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bluetooth mouse"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"quantity"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"unit_price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20.00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20.00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"vat"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So you can see now that the value is added at the end of the list.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-an-item-in-the-order">Updating an item in the order<a class="hash-link" href="#updating-an-item-in-the-order" title="Direct link to heading">â€‹</a></h3><p>Let's look at another requirement. Now I need to update for example the quantity of one of the line. In your relational application it is <em>easy</em> in the sense that you have one single record to update(in reality it is a different story since application are using complex data layer).</p><p>You can do the same, meaning you can only update the <em>items</em> directly in the array -- (no need to replace the full document or list like I see too often).</p><p>For this, you  just need to use the <code>update</code> and <code>$set</code> and specify the positional operation <code>$</code>.</p><p>The <code>$</code> operator is a placeholder for the first entry in the array that match the filter (query document) sent to the update/findAndModify command.</p><p>In our example, to update a specific line in the order</p><p>The proper way is simply to use the an update and <code>$set</code>,
but you have to select the exact entry in the array in your filter. For example in our case we want to update the number of mouses and the price, this will look like:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">orders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45218468309</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"items.sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MO001"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"$set"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"items.$"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MO001"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bluetooth mouse"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"quantity"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"unit_price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20.00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"price"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"vat"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see, the <code>$</code> operator is telling MongoDB to update one specific entry in the array.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remove-an-item-from-the-array">Remove an item from the Array<a class="hash-link" href="#remove-an-item-from-the-array" title="Direct link to heading">â€‹</a></h2><p>You have learned so far that you can easily query and add values into an array; using the same appraoch you can also remove entry in an array. This is done using 3 operators : <code>$pop</code>, <code>$pull</code> and <code>$pullAll</code></p><ul><li>The <code>$pop</code> operator removes one element from the end of the array</li><li>The <code>$pull</code> operator removes <em>all</em> elements in the array that match a specified value.</li><li>The <code>$pullAll</code> operator removes <em>all</em> elements in the array that match any of the specified values.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-some-interests-from-a-customer">Remove some interests from a customer<a class="hash-link" href="#remove-some-interests-from-a-customer" title="Direct link to heading">â€‹</a></h4><p>For example, let's remove the "electronics" interest from the customer id 654321.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"$pull"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"interested_by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">"electronics"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to remove sports and music interest from the customer you can use the <code>$pullAll</code> operator as follow:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">654321</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"$pullAll"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"interested_by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"sports"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"music"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we use <em>interest</em>, but you can imagine doing the same thing for tagging, or any other business use case with a list of values.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-item-into-an-order">Remove item into an order<a class="hash-link" href="#remove-item-into-an-order" title="Direct link to heading">â€‹</a></h4><p>Using the same operator you can also remove a line order (item) from an order document, for example let's remove the line with the item MO001 (Bluetooth mouse). For this we can use the <code>$pull</code> operator with the proper sku.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">orders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45218468309</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"$pull"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"items"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"sku"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MO001"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this article you have learn how to create/edit arrays in JSON documents.</p><p>In addition to all the update operators, MongoDB provides many operators for querying arrays such as  <a href="http://docs.mongodb.org/manual/reference/operator/query/size/" target="_blank" rel="noopener noreferrer">$size</a> or <a href="http://docs.mongodb.org/manual/reference/operator/query/elemMatch/" target="_blank" rel="noopener noreferrer"><code>$elemMatch</code></a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Introduction to MongoDB Security]]></title>
            <link>https://tgrall.github.io/blog/2015/02/04/introduction-to-mongodb-security</link>
            <guid>/2015/02/04/introduction-to-mongodb-security</guid>
            <pubDate>Wed, 04 Feb 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Last week at the Paris MUG, I had a quick chat about security and MongoDB, and I have decided to create this post that explains how to configure out of the box security available in MongoDB.]]></description>
            <content:encoded><![CDATA[<p>Last week at the Paris MUG, I had a quick chat about security and MongoDB, and I have decided to create this post that explains how to configure out of the box security available in MongoDB.</p><p>You can find all information about MongoDB Security in following documentation chapter:</p><ul><li><a href="http://docs.mongodb.org/manual/security/" target="_blank" rel="noopener noreferrer">http://docs.mongodb.org/manual/security/</a></li></ul><p><img loading="lazy" src="/assets/images/password-fc053174fc2f9406cb0b83d9f368c094.jpg" width="400" height="400" class="img_ev3q"></p><p>In this post, <em>I won't go</em> into the detail about how to deploy your database in a secured environment (DMZ/Network/IP/Location/...)</p><p>I will focus on <strong>Authentication</strong> and <strong>Authorization</strong>, and provide you the steps to secure the access to your database and data.</p><p>I have to mention that by default, when you install and start MongoDB, security is not enabled. Just to make it easier to work with.</p><p>The first part of the security is the <strong>Authentication</strong>, you have multiple choices documented <a href="http://docs.mongodb.org/manual/core/authentication/" target="_blank" rel="noopener noreferrer">here</a>. Let's focus on "MONGODB-CR" mechanism.</p><p>The second part is <strong>Authorization</strong> to select what a user can do or not once he is connected to the database. The documentation about authorization is available <a href="http://docs.mongodb.org/manual/core/authorization/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Let's now document how-to:</p><ol><li>Create an Administrator User</li><li>Create Application Users</li></ol><p>For each type of users I will show how to grant specific permissions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-start-mongodb">1. Start MongoDB<a class="hash-link" href="#1-start-mongodb" title="Direct link to heading">â€‹</a></h2><p>As I said before, by default security is not enabled when you start MongoDB; so the first think to do is to enable it using the <code>--auth</code> parameter.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mkdir /data/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongod --auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2015-02-04T06:56:37.875+0100 [conn1] note: no users configured in admin.system.users, allowing localhost access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>MongoDB is starting, and until you have created a user you can connect from localhost to create some users (especially the administrator one). This is what is called the <em>localhost exception</em>.</p><p>Note: I am here documenting security in simple configuration, I invite you to look to the documentation when deploying a <a href="http://docs.mongodb.org/v2.2/administration/sharded-clusters/#sharded-cluster-security-considerations" target="_blank" rel="noopener noreferrer">Sharded cluster</a>.</p><p>Now that we have started MongoDB, we can create users.</p><p>##2. Create Admin User</p><p>The first thing is to create an admin user, that can also create users, So we have to:</p><ol><li>go to the mongo shell</li><li>connect to the `admin' database</li><li>create a user and assign him the role <a href="http://docs.mongodb.org/manual/reference/built-in-roles/#userAdminAnyDatabase" target="_blank" rel="noopener noreferrer"><strong>userAdminAnyDatabase</strong></a></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var user = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "user" : "admin",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "pwd" : "manager",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    roles : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "role" : "userAdminAnyDatabase",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "db" : "admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.createUser(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that you have created a user, in a MongoDB running with <code>--auth</code>, anonymous connections won't be able to do do anything with the database.</p><p>You can test for example to execute <code>show dbs</code> or <code>db.coll.insert({'x':0})</code> commands, you'll see authorization errors.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-with-the-admnistrator-user">Connect with the Admnistrator user<a class="hash-link" href="#connect-with-the-admnistrator-user" title="Direct link to heading">â€‹</a></h3><p>Now that we have an admin user you can connect to the database with this user:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo admin -u admin -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Our admin user, has the role <strong>userAdminAnyDatabase</strong>. With this role you can manage user; but this role cannot read/write data from application datatabases/collections.</p><p>So we need now to create a new user for our "eCommerce" application.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-application-user">3. Create Application User<a class="hash-link" href="#3-create-application-user" title="Direct link to heading">â€‹</a></h2><p>Now we will create a new user <em>website</em> that is responsible of the ecommerce database.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo admin -u admin -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var user = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "user" : "website",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "pwd" : "abc123",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    roles : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "role" : "readWrite",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "db" : "ecommerce"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.createUser(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This user will be able to read/write on the <em>ecommerce</em> database</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-with-the-application-user">Connect with the application user<a class="hash-link" href="#connect-with-the-application-user" title="Direct link to heading">â€‹</a></h3><p>Using the mongo shell you can now connect and create/query data</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo ecommerce -u website -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.products.insert({ "title" : "MongoDB in Action"  });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.products.findOne();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.products.update({}, {"$set" : { "type" : "book" } })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see this user has the perfect profile for your application.</p><p>Note, that if you try to query or modify another database with this user you will receive authorization exceptions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-reporting-user-read-only">Create a reporting user (Read Only)<a class="hash-link" href="#create-a-reporting-user-read-only" title="Direct link to heading">â€‹</a></h2><p>You may need in your application, user that can only read data, let's say in all databases. For this you just need to assign the role <strong>readAnyDatabase</strong>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo admin -u admin -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var user = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "user" : "reporting",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "pwd" : "abc123",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    roles : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "role" : "readAnyDatabase",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "db" : "admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.createUser(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This user will be able to query all the databases and collections, including <code>show dbs</code> command.</p><p>Let's connect with the reporting user:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo admin -u reporting -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">show dbs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.products.find();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you try to inser/update/delete document you will receive an exception.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-new-role-to-a-user">Add new role to a user<a class="hash-link" href="#add-new-role-to-a-user" title="Direct link to heading">â€‹</a></h2><p>Let's now see how to add a new role to a user. For example I want to let the admin the power of read and write any database. For this I just need to add the role <strong>readWriteAnyDatabase</strong> to the admin user.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; mongo admin -u admin -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.grantRolesToUser(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "admin",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [{ "role" : "readWriteAnyDatabase", "db" : "admin" }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.getUser("admin");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using the <code>db.grantRolesToUser</code> command I have added the role to the admin user, and using the <code>db.getUser</code> I can look at the user profile.</p><p>Now, admin user should be able to create new databases, collections and documents, let's try:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use hr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.employees.insert({ "name":"John Doe", "hire_date" : new Date() });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.organization.insert({ "name" : "Development" });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.employees.findOne();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-use-custom-roles">Create and use custom roles<a class="hash-link" href="#create-and-use-custom-roles" title="Direct link to heading">â€‹</a></h2><p>Another feature that is used a lot around security is related to the roles. In some case you want to provide multiple roles to a user, for example:</p><ul><li>all permission on database <em>ecommerce</em></li><li>read the collection <em>employees</em> in database <em>hr</em></li></ul><p>For this you can create a role that provide all the permissions and assign it to users. Let's do that using admin user.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var role = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "role"  : "webSiteManagerRole",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    privileges : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "resource": {"db" : "hr", "collection" : "employees"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "actions": ["find"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "roles" : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "role" : "readWrite",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "db" : "ecommerce"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.createRole( role );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var user = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "user" : "master",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "pwd" : "abc123",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    roles : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "role" : "webSiteManagerRole",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "db" : "admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.createUser(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you connect now with the user "master", you will see that, the user:</p><ul><li>can do anything you want in the ecommerce database</li><li>can read the "hr.employees" collection, on only this</li><li>cannot do anything else.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="roles-and-privileges">Roles and Privileges<a class="hash-link" href="#roles-and-privileges" title="Direct link to heading">â€‹</a></h2><p>As you have seen in the previous section, you can create roles, and assign privileges to these roles. This is very powerful and you can really control each action on the database.</p><p>I am inviting you to look in detail to the built-in roles and privileges, this will help you a lot to select the proper ones for your application:</p><ul><li><a href="http://docs.mongodb.org/manual/reference/built-in-roles/" target="_blank" rel="noopener noreferrer">Built-in Roles</a></li><li><a href="http://docs.mongodb.org/manual/reference/privilege-actions/" target="_blank" rel="noopener noreferrer">Privileges</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>In this blog post I quickly explained, how to:</p><ul><li>Use MongoDB Authentication</li><li>Create Users</li><li>Assign Roles and Privileges for Users.</li></ul><p>It is interesting to know that everything that I have showed you in the shell could be done from a user interface in <a href="http://mms.mongodb.com" target="_blank" rel="noopener noreferrer">MMS</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Moving my beers from Couchbase to MongoDB]]></title>
            <link>https://tgrall.github.io/blog/2015/02/01/moving-my-beers-from-couchbase-to-mongodb</link>
            <guid>/2015/02/01/moving-my-beers-from-couchbase-to-mongodb</guid>
            <pubDate>Sun, 01 Feb 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Few days ago I have posted a joke on Twitter]]></description>
            <content:encoded><![CDATA[<p>Few days ago I have posted a <em>joke</em> on Twitter</p><blockquote class="twitter-tweet" lang="en"><p>Moving my Java from Couchbase to MongoDB <a href="http://t.co/Wnn3pXfMGi" target="_blank" rel="noopener noreferrer">pic.twitter.com/Wnn3pXfMGi</a></p>â€” Tugdual Grall (@tgrall) <a href="https://twitter.com/tgrall/status/559664540041117696" target="_blank" rel="noopener noreferrer">January 26, 2015</a></blockquote><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>So I decided to move it from a simple picture to a <em>real</em> project. Let's look at the two phases of this so called project:</p><ul><li>Moving the data from Couchbase to MongoDB</li><li>Updating the application code to use MongoDB</li></ul><p>Look at this screencast to see it in action:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/Fpl74Z0HbC0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="moving-the-data">Moving the data<a class="hash-link" href="#moving-the-data" title="Direct link to heading">â€‹</a></h2><p>I have created a replication server, that uses the Couchbase XDCR protocol to get the document out and insert them into MongoDB. This server use the Couchbase CAPI Server project available <a href="https://github.com/couchbaselabs/couchbase-capi-server" target="_blank" rel="noopener noreferrer">here</a>.</p><p>This server will receive all the mutations made in the Couchbase:</p><ul><li>When a document is inserted or updated the full document is sent</li><li>When a document is deleted, only the medata are sent</li><li>The <code>replication server</code>, save the data into MongoDB (inserts and/or updates - no delete), and then return the list to Couchbase as part of the XDCR Protocol.</li></ul><p>One of the challenges is the fact Couchbase does not have the notion of "types" or "collections". You put everything in a <em>bucket</em> and the application code knows how to deal with the data. Not necessary a problem, just a choice of implementation, but make it sometime harder than expected when you want to write tools. So here the logic that I apply in my replication server, to organize the data in multiple collections when it makes sense <em>(and when it is possible)</em>:</p><ul><li>If the JSON document does not contains a <em>type field</em>, all the documents will be saved in a single collection</li><li>If the JSON document contains a <em>type field</em> then a collection will be created for each type and documents will be inserted/updated in these collections</li><li>MongoDB does not allow attributes key to have . and $ signs, so it is necessary to change the name with alternative characters. This is done automatically during the copy of the data.</li></ul><p>All this, and more is configurable in the tool.</p><p>As you can see in the screencast this is straightforward.<em>(note that I have only tested very simple use cases and deployment)</em></p><p>You can download the tool and the source code here:</p><ul><li><a href="https://github.com/tgrall/mongodb-cb-replicator" target="_blank" rel="noopener noreferrer">https://github.com/tgrall/mongodb-cb-replicator</a></li><li>Download the <a href="http://goo.gl/WkuHBk" target="_blank" rel="noopener noreferrer">MongoCBReplicator.jar</a> file.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-application-code">Updating the application code<a class="hash-link" href="#updating-the-application-code" title="Direct link to heading">â€‹</a></h2><p>The next step is to use these data in an application. For this I simply use the Beer Sample Java application available on <a href="https://github.com/couchbaselabs/beersample-java" target="_blank" rel="noopener noreferrer">Couchbase repository</a>.</p><p>I just recreated the project and modified few things, to get the application up and running:</p><ul><li>Change the connection string</li><li>Remove the code that generate views</li><li>Replace set/get by MongoDB operations</li><li>Replace call to the views by simple queries</li></ul><p>The code of the MongoDBeer application is available here:</p><ul><li>[https://github.com/tgrall/mongodbeer]</li></ul><p>I did not change any business logic, or added features, or even replaced the way navigation and page rendition is made. I just focused on the database access, for example :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Couchbase Query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">View</span><span class="token plain"> view </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setIncludeDocs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ViewResponse</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> beers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ViewRow</span><span class="token plain"> row </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> parsedDoc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fromJson</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> beer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parsedDoc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"brewery"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parsedDoc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"brewery_id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      beers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"beers"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> beers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MongoDB Query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DBCursor</span><span class="token plain"> cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCollection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">BasicDBObjectBuilder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> beers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token class-name">DBObject</span><span class="token plain"> row </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> beer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"_id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         beer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"brewery"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"brewery_id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         beers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Couchbase update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beerId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toJson</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MongoDB update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCollection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicDBObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I did not attend to optimize the MongoDB code,  but just to replace as few lines of code as possible.</p><p>Note: I have not created any index during the process. Obviously if your application have more and more data and you do intense work with it you must analyze your application/queries to see which indexes must be created.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-features">Adding new features<a class="hash-link" href="#adding-new-features" title="Direct link to heading">â€‹</a></h2><p>Once you have the data into MongoDB you can do a lot more without anything more than MongoDB:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="full-text-search">Full Text Search<a class="hash-link" href="#full-text-search" title="Direct link to heading">â€‹</a></h4><p>You can create a Text index on various fields in the collection to provide advanced search capabilities to your users.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.brewery.ensureIndex(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"weights"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"description"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TextIndex"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you can query the database using the <code>$text</code> operation, for example all breweries with <em>Belgium</em> and without <em>Ale</em></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.brewery.find( </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$text"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$search"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"belgium -ale"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"daas"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Daas"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"chimay_abbaye_notre_dame_de_scourmont"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Chimay (Abbaye Notre Dame de Scourmont)"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"brasserie_de_cazeau"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Brasserie de Cazeau"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"inbev"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"InBev"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"new_belgium_brewing"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"New Belgium Brewing"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"palm_breweries"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Palm Breweries"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="some-analytics">Some analytics<a class="hash-link" href="#some-analytics" title="Direct link to heading">â€‹</a></h4><p>Not sure these queries really make sense, but it is just to show that now you can leverage your documents without the need of any 3rd party tool.</p><p>Number of beer by category, from the most common to the less one:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.beer.aggregate(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"$group"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$category"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"$sum"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"$sort"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"$project"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">   </span><span class="token property" style="color:#36acaa">"category"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$_id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1996</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"category"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"North American Ale"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1468</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"category"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">564</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"category"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"North American Lager"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">441</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"category"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"German Lager"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Number of beer of a specific ABV by brewery, for example: top 3 breweries with the most beer with an abv greather or equals to a value, let's say 5:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.beer.aggregate(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$match"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"abv"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$gte"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$group"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$brewery_id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$sum"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$sort"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$limit"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"midnight_sun_brewing_co"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">53</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"troegs_brewing"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"rogue_ales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"count"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="geospatial-queries">Geospatial queries<a class="hash-link" href="#geospatial-queries" title="Direct link to heading">â€‹</a></h4><p>The first thing to do with the data is to change the data structure to save the various data into a GeoJSON format, for this we can simply use a script into the MongoDB Shell:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;mongo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use beers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.brewery.find().forEach(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function( doc ) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var loc = </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> type </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Point"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (doc.geo &amp;&amp; doc.geo.lat &amp;&amp; doc.geo.lon) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      loc.coordinates = </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> doc.geo.lon </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> doc.geo.lat  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      db.brewery.update( </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> _id </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> doc._id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">$set </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> loc </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> loc </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.brewery.ensureIndex( </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"loc"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2dsphere"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This call take all the breweries and add a new attribute, name <code>loc</code> as a GeoJSON point. I could also chose to remove the old geo information using a '$unset', but I did not; let's imagine that some API/applications are using it. This is a good example of flexible schema.</p><p>Now I can search for all the brewery that are at less than 30km from the Golden Gate in San Francisco: <!-- -->[-122.478255,37.819929]</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.brewery.find(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"loc"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$near"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"$geometry"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Point"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"coordinates"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-122.478255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">37.819929</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"$maxDistance"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also use Geospatial indexes and operators in the aggregation queries used above</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>As as said in the introduction, this week end project started as a joke on Twitter, and finished with a small blog post and Gitub repositories.</p><p>My goal here is not to compare the two solutions -I made my choice few months back-  but simply show how you can move from one to the other with almost no effort, not only the data but also the application code.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Everybody says â€œHackathonâ€!]]></title>
            <link>https://tgrall.github.io/blog/2015/01/23/everybody-says-hackathon</link>
            <guid>/2015/01/23/everybody-says-hackathon</guid>
            <pubDate>Fri, 23 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[TLTR:]]></description>
            <content:encoded><![CDATA[<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tltr">TLTR:<a class="hash-link" href="#tltr" title="Direct link to heading">â€‹</a></h4><ul><li>MongoDB &amp; Sage organized an internal Hackathon</li><li>We use the new X3 Platform based on MongoDB, Node.js and HTML to add cool features  to the ERP</li><li>This shows that â€œanyâ€ enterprise can (should) do it to:<ul><li>look differently at software development</li><li>build strong team spirit</li><li>have fun!</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>I have like many of you participated to multiple Hackathons where developers, designer and entrepreneurs are working together to build applications in few hours/days. As you probably know more and more companies are running such events internally, it is the case for example at Facebook, Google, but also ING (bank), AXA (Insurance), and many more.</p><p>Last week, I have participated to the first Sage Hackathon!</p><p>In case you do not know Sage is a 30+ years old ERP vendor. I have to say that I could not imagine that coming from such companyâ€¦ Let me tell me more about it.</p><p><img loading="lazy" src="/assets/images/00-logo-cac143707f7febaf1bcfdc2dae3b55a3.png" width="240" height="320" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sage-hackathon">Sage Hackathon<a class="hash-link" href="#sage-hackathon" title="Direct link to heading">â€‹</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="how-did-it-start">How did it start?<a class="hash-link" href="#how-did-it-start" title="Direct link to heading">â€‹</a></h5><p>I have met the development team few months back when I learned that Sage was using MongoDB. We discussed about use cases, architecture,... And this is when I was the most surprised! The new version of Sage ERP X3 is a mix of legacy components (RDBMS, C++ based proprietary middleware), and brand new layer based on Node.js, MongoDB and HTML/CSS/JS (AngularJS like). The Sage team has open sourced some of the JS libraries, see <a href="https://github.com/sage" target="_blank" rel="noopener noreferrer">https://github.com/sage</a> Pretty cool isnâ€™t?</p><p>I was really excited to see how MongoDB and Node.js are used by Sage modernize the ERP. So I asked more and more questions about the product, looked at some demonstrations. This leads to a broader discussion to see how we can use this new architecture to develop more features using it.</p><p>This is how we started to talk about an internal hackathon. Everybody, developers, marketing and managers were very excited about the idea.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="hackathon-preparation">Hackathon Preparation<a class="hash-link" href="#hackathon-preparation" title="Direct link to heading">â€‹</a></h5><p>Sage and MongoDB teams worked together to organize the event, with the following constraints:</p><ul><li>The hackathon will be a 24h (noon to noon) event, to allow Sage management to have corporate meetings before and after the event,</li><li>40 persons limit - 6 teams max - with a mix of developers, designer, product owner, quality engineer, â€¦ (coming from various countries),</li><li>The event will occur offsite to <em>daily duty noise</em></li></ul><p>Also since the hackathon will be short, 24h!, we decided to propose in advance many subjects and teams. This to be able to focus on the implementation on D-Day and avoid "team and project" selection.</p><p>So we define a list of 6 ideas that would extend the ERP in a cool way, for example: notification platform, collaboration feature such as business discussion, caching layer with query capabilities, office tool integration, plug social network like LinkedIn and Twitter to ERP business objects,...</p><p>Once we had a good vision of the event, Sage marketing and product management organized an internal presentation to announce the event, and ask for more ideas. We were all surprised to see so many ideas coming out of this presentation!</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="lets-code">Let's code!<a class="hash-link" href="#lets-code" title="Direct link to heading">â€‹</a></h5><p>So we all met at the location, a very nice conference center, <a href="http://www.les-fontaines.com/" target="_blank" rel="noopener noreferrer">Les Fontaines</a>, where fresh coffee was waiting for us!</p><p>The event started with a very short presentation of the teams, projects, and jury.</p><p><img loading="lazy" alt="Presentation" src="/assets/images/01-sage-hack-intro-47f9204c913378bfa1b1208a37f0c49c.png" width="320" height="240" class="img_ev3q"></p><p>Quickly the teams started to draw things on whiteboard, discuss architecture, and design... The organizers, included myself, were
very happy to see that everybody was diving into it.</p><p><img loading="lazy" alt="Team Work" src="/assets/images/02-team-work-48873164a53f799664b67196413ad035.png" width="320" height="240" class="img_ev3q"> </p><p><img loading="lazy" src="/assets/images/03-motto-0d17ac48def39be85df9a166cbca2a18.png" width="320" height="240" class="img_ev3q"></p><p>MongoDB (<a href="http://twitter.com/alainhelaili" target="_blank" rel="noopener noreferrer">Alain</a> and I), and Sage architects were here to help; so we did. I pushed hard to be sure all the teams start to develop, design
as early as possible. I also gave many advices around document design and other things around MongoDB and node.</p><p>In the evening we stopped for a nice dinner, this is the big difference between a startup event, and a corporate one, good wine, soup, duck confit, wine, and fantastic desserts. Yummy!</p><p>Let's go back to the code thing, so all the teams were working like crazy on their project. I had lot of interesting discussions with all of them.</p><p><img loading="lazy" src="/assets/images/04-night-coding-d935053dbf31c93dae18e564d262ea29.png" width="320" height="240" class="img_ev3q">  <img loading="lazy" alt="Night Coding" src="/assets/images/05-night-coding-b542beb3bcfea6a7f94172b5ea297d86.png" width="320" height="240" class="img_ev3q"></p><p>I went to bed at 11:30pm, <em>yeah, I am a loser!</em>, while everybody was still working.</p><p><img loading="lazy" alt="Night Coding" src="/assets/images/06-night-coding-a62946e0770d2eb0243e9622b2d4a6f2.png" width="320" height="240" class="img_ev3q"> <img loading="lazy" alt="Night Coding" src="/assets/images/07-night-coding-8e4b235f69cb68c322707c124540cd99.png" width="240" height="320" class="img_ev3q"></p><p>I as back in the <em>war room</em> around 6:00am, and helped some team to finish their project.</p><p>All the teams used the morning to polish the feature and prepare the demonstration.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="lets-vote">Let's vote!<a class="hash-link" href="#lets-vote" title="Direct link to heading">â€‹</a></h5><p>At noon each team started to demonstrate their feature in 5mn. All the teams did a live demonstration, with the feature well integrated to the Sage X3 screens.
It was really cool. A team even created a small video clip to explain the feature and vision.</p><p><img loading="lazy" src="/assets/images/08-demonstration-be50111a167d73cb068fac3c98cb2302.png" width="320" height="240" class="img_ev3q">  <img loading="lazy" src="/assets/images/10-demonstration-1c82b17486dd70080216e50d4e7cb550.png" width="320" height="240" class="img_ev3q">
<img loading="lazy" src="/assets/images/11-demonstration-8a6670fe100aa5e7d199cda536dcd556.png" width="320" height="240" class="img_ev3q"> <img loading="lazy" src="/assets/images/12-demonstration-7b6396c7f4804a72b169de6b067dfdfa.png" width="320" height="240" class="img_ev3q">
<img loading="lazy" src="/assets/images/13-demonstration-5ca567951b32959f43cea9f991f2bf84.png" width="320" height="240" class="img_ev3q"> <img loading="lazy" src="/assets/images/14-demonstration-b66799e5210d422bdf5d1a37f24b2322.png" width="320" height="240" class="img_ev3q">
<img loading="lazy" src="/assets/images/15-demonstration-6a3c3f658ec18c07dca96082f7dcefa2.png" width="320" height="240" class="img_ev3q"> <img loading="lazy" src="/assets/images/09-demonstration-1acaef214219ad6e18a3faa6c4e646ef.png" width="320" height="240" class="img_ev3q"></p><p>It was very hard to chose a winner, but we agreed on a very rich and promising notification platform.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's next?<a class="hash-link" href="#whats-next" title="Direct link to heading">â€‹</a></h5><p>It was really nice for me to see the excitement of all the teams, and the pride of being able to develop something that fast!</p><p>I cannot talk for Sage, but I think they all realize something: they can do stuff a lot faster, and this should try to push this into the product now!
It is also a good opportunity to see how to developer and deliver new addons for X3.</p><p>On my side, I am very happy of the result, and see that MongoDB and new technologies can really change the way we work with our data. And I hope to be able to do that again
with other companies.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-you">What about you?<a class="hash-link" href="#what-about-you" title="Direct link to heading">â€‹</a></h3><p>I believe that any organization that has an IT/Development team should organize such event, for example every year.</p><p>Honestly, we can "stop" working on our daily duties for 1,2 or 3 days and do this. If you look at your agenda, I am sure that you have wasted
more time on none productive meetings; remember :</p><blockquote><p>If a picture is worth 1000 words</p><p>A prototype is worth 1000 meetings!</p></blockquote><p>by @ideo</p><p>You will be surprised to see what can be done when you let the passionate people do what they love, but also it will be a good opportunity to motivate your team.</p><p>I will be pleased to discuss that you will, so feel free to drop me a comment.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Nantes MUG : Event #2]]></title>
            <link>https://tgrall.github.io/blog/2015/01/21/nantes-mug-event-number-2</link>
            <guid>/2015/01/21/nantes-mug-event-number-2</guid>
            <pubDate>Wed, 21 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Last night the Nantes MUG (MongoDB Users Group) had its second event. More than 45 people signed up and joined us at the Epitech school (thanks for this!). &nbsp;We were lucky to have 2 talks from local community members:]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.meetup.com/Nantes-MongoDB-User-Group/events/218926859/" target="_blank" rel="noopener noreferrer">Last night</a> the Nantes MUG (<a href="http://www.mongodb.org/user-groups" target="_blank" rel="noopener noreferrer">MongoDB Users Group</a>) had its second event. More than 45 people signed up and joined us at the <a href="http://www.epitech.eu/nantes/ecole-informatique-nantes.aspx" target="_blank" rel="noopener noreferrer">Epitech schoo</a>l (thanks for this!). <!-- -->&nbsp;<!-- -->We were lucky to have 2 talks from local community members:</p><ul><li>How â€œMyScript Cloudâ€ uses MongoDB by <a href="https://twitter.com/mathieuruellan" target="_blank" rel="noopener noreferrer">Mathieu Ruellan</a></li><li>Aggregation Framework by <a href="https://twitter.com/sebprunier" target="_blank" rel="noopener noreferrer">Sebastien Prunier</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-myscript-cloud-uses-mongodb">How â€œMyScript Cloudâ€ uses MongoDB<a class="hash-link" href="#how-myscript-cloud-uses-mongodb" title="Direct link to heading">â€‹</a></h3><p>First of all, if you do not know <a href="http://myscript.com/" target="_blank" rel="noopener noreferrer">MyScript</a>&nbsp;<!-- -->I invite you to play with the <a href="http://webdemo.myscript.com/#/home" target="_blank" rel="noopener noreferrer">online demonstration</a>.<!-- -->&nbsp;<!-- -->I am pretty sure that you are already using this technology without noticing it, since it is embedded in many devices/applications including: your car look at the <a href="http://vimeo.com/49013364" target="_blank" rel="noopener noreferrer">Audi Touchpad</a>!</p><p>That said Mathieu was not here to talk about the cool features and applications of MyScript but to explain how MongoDB is used to run their cloud product.<!-- -->&nbsp;<!-- -->
Mathieu explained how you can use <a href="https://dev.myscript.com/dev-kits/cloud-development-kit/" target="_blank" rel="noopener noreferrer">MyScript SDK</a> online. You just need to call a REST API to add Handwriting Recognition to your application. Let's make the long story short, and see how MongoDB was chosen and how it is used today:</p><ul><li>The prototype was done with a single RDBMS instance</li><li>With the success of the project MyScript Cloud the team had to move to a more flexible solution:<ul><li>Flexible schema to support heterogeneous structures,</li><li>Highly available solution with automatic failover,</li><li>Multi datacenter supports with localized read,</li></ul></li><li>This is when Mathieu looked at different solution and selected MongoDB and deployed it on AWS.</li></ul><p>Mathieu highlighted the following points:</p><ul><li>Deploy and Manage a Replica Set is really easy, and it is done on multiple AWS data centers,</li><li>Use the proper <a href="http://docs.mongodb.org/manual/core/read-preference/" target="_blank" rel="noopener noreferrer">read preference</a>&nbsp;<!-- --> (nearest in this case) to deliver the data as fast as possible,</li><li>Develop with JSON Documents provides lot of flexibility to the developers, that can add new features faster.</li></ul><p><img loading="lazy" src="http://4.bp.blogspot.com/-AWHn75hAyBY/VL9EMpRrFVI/AAAAAAAAAwA/CrDMkKL5A1Y/s1600/IMG_3743.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation-framework">Aggregation Framework<a class="hash-link" href="#aggregation-framework" title="Direct link to heading">â€‹</a></h3><p>Sebastien "Seb" is software engineering at SERLI and working with MongoDB for more than 2 years now. Seb introduced the reasons why aggregations are needed in applications and the various ways of doing it with <a href="http://docs.mongodb.org/manual/aggregation/" target="_blank" rel="noopener noreferrer">MongoDB</a>: simple queries, map reduce, and aggregation pipeline; with a focus on a Aggregation Pipeline.</p><p>Using cool demonstrations, Seb explained in a step by step approach the key features and capabilities of MongoDB <a href="http://docs.mongodb.org/manual/core/aggregation-pipeline/" target="_blank" rel="noopener noreferrer">Aggregation Pipeline</a>:</p><ul><li>$match, $group, ...</li><li>$unwind arrays</li><li>$sort and $limit</li><li>$geonear</li></ul><p>To close his presentation, Seb talked about aggregation best practices, and behavior<!-- -->&nbsp;<a href="http://docs.mongodb.org/manual/core/aggregation-pipeline-sharded-collections/#aggregation-pipeline-sharded-collection" target="_blank" rel="noopener noreferrer">in a sharded cluster</a>.</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-1fK-Q5SmL4s/VL9EQiaUIvI/AAAAAAAAAwI/AMVYrmQDPVg/s1600/IMG_3745.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="and">And...<a class="hash-link" href="#and" title="Direct link to heading">â€‹</a></h3><p>As usual the event ended with some drinks and a late dinner!</p><p>This event was really great and I am very happy to see what people are doing with MongoDB, including storing <em>ink</em> like MyScript, thanks again to the speakers!</p><p>This brings me to the last point : MUGs are driven by the community. You are using MongoDB and want to talk about what you, do not hesitate to reach out the organizers they will be more than happy to have you.</p><p>You can find a MUG near you, <a href="http://www.mongodb.org/user-groups" target="_blank" rel="noopener noreferrer">look here</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to create a pub/sub application with MongoDB ? Introduction]]></title>
            <link>https://tgrall.github.io/blog/2015/01/12/how-to-create-a-pub-slash-sub-application-with-mongodb-introduction</link>
            <guid>/2015/01/12/how-to-create-a-pub-slash-sub-application-with-mongodb-introduction</guid>
            <pubDate>Mon, 12 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[In this article we will see how to create a pub/sub application (messaging, chat, notification), and this fully based on MongoDB (without any message broker like RabbitMQ, JMS, ... ).]]></description>
            <content:encoded><![CDATA[<p>In this article we will see how to create a pub/sub application (messaging, chat, notification), and this fully based on MongoDB (without any message broker like RabbitMQ, JMS, ... ).</p><p>So, what needs to be done to achieve such thing:</p><ul><li>an application "publish" a message. In our case, we simply save a document into MongoDB</li><li>another application, or thread, subscribe to these events and will received message automatically. In our case this means that the application should automatically receive newly created document out of MongoDB</li></ul><p>All this is possible with some very cool MongoDB features: <a href="http://docs.mongodb.org/manual/core/capped-collections/" target="_blank" rel="noopener noreferrer">capped collections</a> and <a href="http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/" target="_blank" rel="noopener noreferrer">tailable cursors</a>,</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="collections-and-tailable-cursors">Collections and Tailable Cursors<a class="hash-link" href="#collections-and-tailable-cursors" title="Direct link to heading">â€‹</a></h2><p>As you can see in the documentation, Capped Collections are fixed sized collections, that work in a way similar to circular buffers: once a collection fills its allocated space, it makes room for new documents by overwriting the oldest documents.</p><p>MongoDB Capped Collections can be queried using Tailable Cursors, that are similar to the unix <code>tail -f</code> command. Your application continue to retrieve documents as they are inserted into the collection. I also like to call this a "continuous query".</p><p>Now that we have seen the basics, let's implement it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-very-basic-application">Building a very basic application<a class="hash-link" href="#building-a-very-basic-application" title="Direct link to heading">â€‹</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-collection">Create the collection<a class="hash-link" href="#create-the-collection" title="Direct link to heading">â€‹</a></h4><p>The first thing to do is to create a new capped collection:</p><iframe width="100%" frameborder="0" id="gist-f16b1d3b5bcc12a4270a-capped-collection"></iframe><p>For simplicity, I am using the MongoDB Shell to create the <code>messages</code> collection in the <code>chat</code> database.</p><p>You can see on line #7 how to create a capped collection, with 2 options:</p><ul><li><code>capped : true</code> : this one is obvious</li><li><code>size : 10000</code> : this is a mandatory option when you create a capped collection. This is the maximum size in bytes. (will be raised to a multiple of 256)</li></ul><p>Finally, on line #9, I insert a dummy document, this is also mandatory to be able to get the tailable cursor to work.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-an-application">Write an application<a class="hash-link" href="#write-an-application" title="Direct link to heading">â€‹</a></h4><p>Now that we have the collection, let's write some code. First in <em>node.js</em>:</p><iframe width="100%" frameborder="0" id="gist-f16b1d3b5bcc12a4270a-app.js"></iframe><p>From lines #1 to 5 I just connect to my local mongoDB instance.</p><p>Then on line #7, I get the <code>messages</code> collection.</p><p>And on line #10, I execute a find, using a tailable cursor, using specific options:</p><ul><li><code>{}</code> : no filter, so all documents will be returned</li><li><code>tailable : true</code> : this one is clear, to say that we want to create a tailable cursor</li><li><code>awaitdata : true</code> : to say that we wait for data before returning no data to the client</li><li><code>numberOfRetries : -1</code> : The number of times to retry on time out, -1 is infinite, so the application will keep trying</li></ul><p>Line #11 just force the sort to the natural order.</p><p>Then on line #12, the cursor returns the data, and the document is printed in the console each time it is inserted.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-application">Test the Application<a class="hash-link" href="#test-the-application" title="Direct link to heading">â€‹</a></h4><p>Start the application</p><p><code>node app.js</code></p><p>Insert documents in the messages collection, from the shell or any other tool.</p><p>You can find below a screencast showing this very basic application working:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/uSuiYvssKuo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><p>The source code of this sample application in this Github repository, take the step-01 branch; clone this branch using:</p><p><code>git clone -b step-01 https://github.com/tgrall/mongodb-realtime-pubsub.git</code></p><p>I have also created a gist showing the same behavior in <em>Java</em>:</p><iframe width="100%" frameborder="0" id="gist-f16b1d3b5bcc12a4270a-MyApp.java"></iframe><p>Mathieu Ancelin has written it in <em>Scala</em>:</p><iframe width="100%" frameborder="0" id="gist-f16b1d3b5bcc12a4270a-App.scala"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-some-user-interface">Add some user interface<a class="hash-link" href="#add-some-user-interface" title="Direct link to heading">â€‹</a></h3><p>We have the basics of a publish subscribe based application:</p><ul><li>publish by inserting document into MongoDB</li><li>subscribe by reading document using a tailable cursor</li></ul><p>Let's now push the messages to a user using for example socket.io. For this we need to:</p><ul><li>add socket.io dependency to our node project</li><li>add HTML page to show messages</li></ul><p>The following gists shows the updated version of the app.js and index.html, let's take a look:</p><iframe width="100%" frameborder="0" id="gist-d8c2acfdc416abcc5d18-app.js"></iframe><p>The node application has been updated with the following features:</p><ul><li>lines #4-7: import of http, file system and socket.io</li><li>lines #10-21: configure and start the http server. You can see that I have created a simple handler to serve static html file</li><li>lines #28-39: I have added support to Web socket using socket.io where I open the tailable cursor, and push/emit the messages on the socket.</li></ul><p>As you can see, the code that I have added is simple. I do not use any advanced framework, nor manage exceptions, this for simplicity and readability.</p><p>Let's now look at the client (html page).</p><iframe width="100%" frameborder="0" id="gist-d8c2acfdc416abcc5d18-index.html"></iframe><p>Same as the server, it is really simple and does not use any advanced libraries except socket.io client (line #18) and JQuery (line #19), and used:</p><ul><li>on line #22 to received messages ans print them in the page using JQuery on line #23</li></ul><p>I have created a screencast of this version of the application:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/N9fDxuohdy8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><p>You can find the source code in this Github repository, take the step-02 branch; clone this branch using:</p><p><code>git clone -b step-02 https://github.com/tgrall/mongodb-realtime-pubsub.git</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this first post, we have:</p><ul><li>learned about tailable cursor and capped collection</li><li>see how it can be used to develop a pub/sub application</li><li>expose this into a basic web socket based application</li></ul><p>In the next article we will continue to develop a bigger application using these features.</p>]]></content:encoded>
            <category>code</category>
            <category>mongodb</category>
            <category>node.js</category>
            <category>scala</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[Big Data... Is Hadoop the good way to start?]]></title>
            <link>https://tgrall.github.io/blog/2014/11/25/big-data-dot-dot-dot-is-hadoop-the-good-way-to-start</link>
            <guid>/2014/11/25/big-data-dot-dot-dot-is-hadoop-the-good-way-to-start</guid>
            <pubDate>Tue, 25 Nov 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[In the past 2 years, I have met many developers, architects that are working on â€œbig dataâ€ projects. This sounds amazing, but quite often the truth is not that amazing.]]></description>
            <content:encoded><![CDATA[<p>In the past 2 years, I have met many developers, architects that are working on â€œbig dataâ€ projects. This sounds amazing, but quite often the truth is not that amazing.</p><p>####TL;TR
You believe that you have a big data project?</p><ul><li>Do not start with the installation of an Hadoop Cluster -- the "<em>how</em>"</li><li>Start to talk to business people to understand their problem -- the "<em>why</em>"</li><li>Understand the data you must process</li><li>Look at the volume -- very often it is not "that" big</li><li>Then implement it, and take a simple approach, for example start with MongoDB + Apache Spark</li></ul><p><img loading="lazy" src="http://cdn.meme.am/instances/500x/47510205.jpg" alt="'Big Data'" class="img_ev3q"></p><p>##The infamous "big data project"</p><p>A typical discussion would look like:</p><p>Me: <em>â€œCan you tell me more about this project, what do you do with your data?â€</em></p><p>Mr. Big Bytes: <em>â€œSure, we have a 40 nodes Hadoop cluster..."</em></p><p>Me: <em>â€œThis is cool but which type of data do you store, and what is the use case, business value?"</em></p><p>Mr. Big Bytes: <em>â€œWe store, all the logs of our applications, we have hundreds of gigabitsâ€¦"</em></p><p>After a long blank: <em>â€œWe have not yet started to analyze these data. For now it is jut  'us, the IT team,' we store the data, like that soon we will be able to do interesting things with them"</em></p><p>You can meet the same person few months later; the cluster is still sitting here, with no activity on it. I even met some consultants telling me they received calls from their customer asking the following:</p><p><em>â€œHmmm, we have an Hadoop cluster installed, can you help us to find what to do with it?"</em></p><p><em>Wrong! That is wrong!!!!!</em> This means that the IT Team has spent lot of time for nothing, at least for the business; and I am not even sure the team has learned something technically.</p><p>###Start with the "Why" not with the "How"!</p><p>The solution to this, could be obvious, start your â€œbig data projectâ€ answering the â€œwhy/whatâ€ questions first! The â€œhowâ€, the implementation, will come later.</p><p>I am sure that most of the enterprises will benefit of a so called â€œbig data projectâ€, but it is really important to understand the problems first. <em>And these problems are not technicalâ€¦</em> at least at the beginning. So you must spend time with the business persons to understand what could help them. Let's take some examples.</p><p>You are working in a bank or insurance, business people will be more than happy to predict when/why customer will be leaving the company by doing some <em>churn analysis</em>; or it will be nice to be able to see when it makes lot of sense <em>to sell new contracts</em>, service to existing customers.</p><p>You are working in retail/commerce, your business will be happy to see if they can <u>adjust the price</u> to the market, or <u>provide precise recommendations</u> to a user from an analysis of other customer behavior.</p><p>We can find many other examples. But as you can see we are not talking about technology, just business and possible benefits. In fact nothing new, compare with the applications you are building, you need first to have some requirements/ideas to build a product. Here we just need to have some "data input" to see <u>how we can enrich the data</u> with some business value.</p><p>Once you have started to ask all these questions you will start to see some input, and possible processing around them:</p><ul><li>You are an insurance, you customers has no contact with your representative, or the customer satisfaction is medium/bad; you start to see some customer name in quotes coming from price comparison websiteâ€¦. hmm you can guess that they are looking for a new insurance.</li><li>Still in the insurance, when your customer are close to the requirement age, or has teenagers learning how to drive, moving to college, you know that you have some opportunity to sell new contract, or adapt existing ones to the new needs</li><li>In retail, you may want to look to all customers and what they have ordered, and based on this be able to recommend some products to a customer that "looks" the same.</li><li>Another very common use case these days, you want to do some sentiment analysis of social networks to see how your brand is perceived by your community</li></ul><p>As you can see now, we can start to think about the data we have to use and the type of processing we have to do on them.</p><p>###Let's now talk about the "How"</p><p>Now that you have a better idea about what you want to do, it does not mean that you should dive into a large cluster installation.</p><p>Before that, you should continue to analyze the data:</p><ul><li>What is the structure of the data that I have to analyze?</li><li>How big is my dataset?</li><li>How much data I have to ingest on a period of time (minute, hour, day, ...)</li></ul><p>All these questions will help you to understand better your application. This is where it is often interesting too, and we realize that for most of us the "big data" is not that big!</p><p>I was working the other day with a Telco company in Belgium, and I was talking about possible new project. I simply said:</p><ul><li>Belgium is what, 11+ millions of people</li><li>If you store a 50kb object for each person this represent:</li><li>Your full dataset will be 524Gb, yes not even a Terabyte!</li></ul><p>Do you need a large Hadoop cluster to store and process this? You can use it, but you do not need to! You can find something smaller, and easier to start with.</p><p>Any database will do the job, starting with MongoDB. I think it is really interesting to start this project with a MongoDB cluster, not only because it will allow you to scale out as much as you need, but also because you will leverage the flexibility of the document model. This will allow you to store any type of data, and easily adapt the structure to the new data, or requirements.</p><p>Storing the data is only one part of the equation. The other part is how you achieve the data processing. Lately I am playing a lot with <a href="https://spark.apache.org/" target="_blank" rel="noopener noreferrer">Apache Spark</a>. Spark provides a very powerful engine for large scale data processing, and it is a lot simpler than Map Reduce jobs. In addition to this, you can run Spark without Hadoop! This means you can connect you Spark to your MongoDB, with the <a href="http://docs.mongodb.org/ecosystem/tools/hadoop/" target="_blank" rel="noopener noreferrer">MongoDB Hadoop Connector</a> and other data sources and directly execute job on your main database.</p><p>What I like also about this approach, you can when you dataset starts to grow, and it become harder to process all the data on your operational database, you can easily add Hadoop; and keep most of your data processing layer intact, and only change the data sources information. In this case you will connect MongoDB and Hadoop to get/push the data into HDFS, once again using the MongoDB Hadoop Connector.</p><p>###Conclusion</p><p>Too many times, projects are driven by technology instead of focusing on the business value. This is particularly true around big data projects. So be sure you start by understanding the business problem, and find the data that could help to solve it.</p><p>Once you have the business problem and the data, select the good technology, that could be very simple, simple files and python scripts, or more often a database like MongoDB with a data processing layer like Spark. And start to move to Hadoop when it is really mandatory... a very, very, very, large dataset.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Introduction to MongoDB Geospatial feature]]></title>
            <link>https://tgrall.github.io/blog/2014/08/21/introduction-to-mongodb-geospatial-feature</link>
            <guid>/2014/08/21/introduction-to-mongodb-geospatial-feature</guid>
            <pubDate>Thu, 21 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[This post is a quick and simple introduction to Geospatial feature of MongoDB 2.6 using simple dataset and queries.]]></description>
            <content:encoded><![CDATA[<p>This post is a quick and simple introduction to Geospatial feature of MongoDB 2.6 using simple dataset and queries.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storing-geospatial-informations">Storing Geospatial Informations<a class="hash-link" href="#storing-geospatial-informations" title="Direct link to heading">â€‹</a></h3><p>As you know you can store any type of data, but if you want to query them you need to use some coordinates, and create index on them. MongoDB supports three types of indexes for GeoSpatial queries:</p><ul><li><a href="http://docs.mongodb.org/manual/core/2d/" target="_blank" rel="noopener noreferrer">2d Index</a> : uses simple coordinate (longitude, latitude). As stated in the documentation: <em>The 2d index is intended for legacy coordinate pairs used in MongoDB 2.2 and earlier</em>. For this reason, I won't detail anything about this in this post. Just for the record 2d Index are used to query data stored as points on a two-dimensional plane</li><li><a href="http://docs.mongodb.org/manual/core/2dsphere/" target="_blank" rel="noopener noreferrer">2d Sphere Index</a> : support queries of any geometries on an-earth-like sphere, the data can be stored as GeoJSON and legacy coordinate pairs (longitude, latitude). For the rest of the article I will use this type of index and focusing on GeoJSON.</li><li><a href="http://docs.mongodb.org/manual/core/geohaystack/" target="_blank" rel="noopener noreferrer">Geo Haystack</a> : that are used to query on very small area. It is today less used by applications and I will not describe it in this post.
So this article will focus now on the 2d Sphere index with GeoJSON format to store and query documents.</li></ul><p><em>So what is GeoJSON?</em></p><p>You can look at the <a href="http://geojson.org/" target="_blank" rel="noopener noreferrer">http://geojson.org/</a> site, let's do a very short explanation. GeoJSON is a format for encoding, in JSON, a variety of geographic data structures, and support the following types:  Point , LineString , Polygon , MultiPoint , MultiLineString , MultiPolygon and Geometry.</p><p>The GeoJSON format  is quite straightforward based, for the simple geometries, on two attributes: type and coordinates. Let's take some examples:</p><p>The city where I spend all my childhood, Pleneuf Val-AndrÃ©, France, has the following coordinates (from Wikipedia)</p><p><code>48Â° 35â€² 30.12â€³ N, 2Â° 32â€² 48.84â€³ W</code></p><p>This notation is a point, based on a latitude <!-- -->&amp;<!-- --> longitude using the <a href="http://en.wikipedia.org/wiki/World_Geodetic_System" target="_blank" rel="noopener noreferrer">WGS 84</a> (Degrees, Minutes, Seconds) system. Not very easy to use by application/code, this is why it is also possible to represent the exact same point using the following values for latitude <!-- -->&amp;<!-- --> longitude:</p><p><code>48.5917, -2.5469</code></p><p>This one uses the <a href="http://en.wikipedia.org/wiki/World_Geodetic_System" target="_blank" rel="noopener noreferrer">WGS 84</a> (Decimal Degrees) system. This is the coordinates you see use in most of the application/API you are using as developer (eg: Google Maps/Earth for example)</p><p>By default GeoJSON, and MongoDB use these values but <strong>the coordinates must be stored in the longitude, latitude order</strong>, so this point in GeoJSON will look like:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Point"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"coordinates"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">-2.5469</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">48.5917</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="http://2.bp.blogspot.com/-0GfvAvSgLM8/U_NwAR_BCpI/AAAAAAAAArI/INweKtutfDQ/s1600/01-geojson-point.png" class="img_ev3q"></p><p>This is a simple "Point", let's now for example look at a line, a very nice walk on the beach :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LineString"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"coordinates"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-2.551082</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">48.5955632</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-2.551229</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">48.594312</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-2.551550</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">48.593312</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-2.552400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">48.592312</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-2.553677</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">48.590898</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="http://1.bp.blogspot.com/-dg_myaJAG-c/U_Nv80jrncI/AAAAAAAAArA/utmCcBlQeqY/s1600/02-geojson-linestring.png" target="_blank" rel="noopener noreferrer">http://1.bp.blogspot.com/-dg_myaJAG-c/U_Nv80jrncI/AAAAAAAAArA/utmCcBlQeqY/s1600/02-geojson-linestring.png</a> )</p><p>So using the same approach you will be able to create MultiPoint, MultiLineString, Polygon, MultiPolygon. It is also possible to mix all these in a single document using a GeometryCollection. The following example is a Geometry Collection of MultiLineString and Polygon over Central Park:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GeometryCollection"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"geometries"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Polygon"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"coordinates"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.9580</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.8003</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.9498</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.7968</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.9737</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.7648</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.9814</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.7681</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.9580</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.8003</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MultiLineString"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"coordinates"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.96943</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.78519</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.96082</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.78095</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.96415</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.79229</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.95544</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.78854</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.97162</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.78205</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.96374</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.77715</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.97880</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.77247</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-73.97036</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.76811</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="http://3.bp.blogspot.com/-tIxoUIeSMWw/U_SUsEJ_EDI/AAAAAAAAArY/2qelBrB1xRY/s1600/03-gejson-collection.png" class="img_ev3q"></p><p>Note: You can if you want test/visualize these JSON documents using the <a href="http://geojsonlint.com/" target="_blank" rel="noopener noreferrer">http://geojsonlint.com/</a> service.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="now-what-lets-store-data">Now what? Let's store data!<a class="hash-link" href="#now-what-lets-store-data" title="Direct link to heading">â€‹</a></h5><p>Once you have a GeoJSON document you just need to store it into your document. For example if you want to store a document about JFK Airport with its location you can run the following command:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">airports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John F Kennedy Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"JFK"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"loc"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Point"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"coordinates"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">73.778889</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.639722</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Yes this is that simple! You just save the GeoJSON as one of the attribute of the document, <code>loc</code> in this example)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="querying-geospatial-informations">Querying Geospatial Informations<a class="hash-link" href="#querying-geospatial-informations" title="Direct link to heading">â€‹</a></h3><p>Now that we have the data stored in MongoDB, it is now possible to use the geospatial information to do some interesting queries.</p><p>For this we need a sample dataset. I have created one using some open data found in various places. This dataset contains the following informations:</p><ul><li>airports collection with the list of US airport (Point)</li><li>states collection with the list of US states (MultiPolygon)</li></ul><p>I have created this dataset from various OpenData sources ( <a href="http://geocommons.com/" target="_blank" rel="noopener noreferrer">http://geocommons.com/</a> , <a href="http://catalog.data.gov/dataset" target="_blank" rel="noopener noreferrer">http://catalog.data.gov/dataset</a> ) and use <a href="https://github.com/mapbox/togeojson" target="_blank" rel="noopener noreferrer">toGeoJSON</a> to convert them into the proper format.</p><p>Let's install the dataset:</p><ol><li>Download it from <a href="https://www.dropbox.com/s/yui7shcud2xbxt7/geo.zip" target="_blank" rel="noopener noreferrer">here</a></li><li>Unzip geo.zip file</li><li>Restore the data into your mongoDB instance, using the following command</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongorestore geo.zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>MongoDB allows applications to do the following types of query on geospatial data:</p><ul><li>inclusion</li><li>intersection</li><li>proximity</li></ul><p>Obviously, you will be able to use all the other operator in addition to the geospatial ones. Let's now look at some concrete examples.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="inclusion">Inclusion<a class="hash-link" href="#inclusion" title="Direct link to heading">â€‹</a></h4><p>Find all the airports in California. For this you need to get the California location (Polygon) and use the command $geoWithin in the query. From the shell it will look like :</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use geo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> cal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">states</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CA"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">airports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geoWithin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geometry</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> cal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Modesto City - County"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MOD"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Francisco Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SFO"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Jose International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SJC"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So the query is using the "California MultiPolygon" and looks in the airports collection to find all the airports that are in these polygons. This looks like the following image on a map:</p><p><img loading="lazy" src="http://1.bp.blogspot.com/-AO6C6fgsrYQ/U_Wyr2RHPWI/AAAAAAAAAro/hVn6YFJQtNI/s1600/04-geojson-cal-airport.png" class="img_ev3q"></p><p>You can use any other query features or criteria, for example you can limit the query to international airport only sorted by name :</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">airports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geoWithin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geometry</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> cal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Los Angeles Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LAX"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Metropolitan Oakland Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"OAK"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Ontario Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ONT"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Diego Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SAN"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Francisco Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SFO"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Jose International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SJC"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Southern California International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"VCV"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I do not know if you have looked in detail, but we are querying these documents with no index. You can run a query with the <code>explain()</code> to see what's going on. The <code>$geoWithin</code> operator does not need index but your queries will be more efficient with one so let's create the index:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">airports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ensureIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"loc"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2dsphere"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run the explain and you will se the difference.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="intersection">Intersection<a class="hash-link" href="#intersection" title="Direct link to heading">â€‹</a></h4><p>Suppose you want to know what are all the adjacent states to California, for this we just need to search for all the states that have coordinates that "intersects" with California. This is done with the following query:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> cal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">states</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CA"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">states</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geoIntersects</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$geometry</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> cal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loc</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">$ne</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CA"</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Oregon"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"OR"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Nevada"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NV"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Arizona"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"AZ"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="http://3.bp.blogspot.com/--Kh1AzmsaSU/U_XreY-tRlI/AAAAAAAAAr4/cS1pgjgF2Pc/s1600/05-geojson-intersect.png" class="img_ev3q"></p><p>Same as before <code>$geoIntersect</code> operator does not need an index to work, but it will be more efficient with the following index:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">states</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ensureIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2dsphere"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="proximity">Proximity<a class="hash-link" href="#proximity" title="Direct link to heading">â€‹</a></h4><p>The last feature that I want to highlight in this post is related to query with proximity criteria. Let's find all the international airports that are located at less than 20km from the reservoir in NYC Central Park. For this you will be using the <code>$near</code> operator.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">airports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">$near</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">$geometry</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Point"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">coordinates</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">73.965355</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">40.782865</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">$maxDistance</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"International"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Results:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"La Guardia"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LGA"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Newark Intl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"code"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"EWR"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So this query returns 2 airports, the closest being La Guardia, since the <code>$near</code> operator sorts the results by distance. Also it is important to raise here that the <code>$near</code> operator requires an index.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this first post about geospatial feature you have learned:</p><ul><li>the basic of GeoJSON</li><li>how to query documents with inclusion, intersection and proximity criteria.</li></ul><p>You can now play more with this for example integrate this into an application that expose data into some UI, or see how you can use the geospatial operators into a aggregation pipeline.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[db.person.find( { 'role' : 'DBA' } )]]></title>
            <link>https://tgrall.github.io/blog/2014/03/28/dbpersonfind-role-dba</link>
            <guid>/2014/03/28/dbpersonfind-role-dba</guid>
            <pubDate>Fri, 28 Mar 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Wow! it has been a while since I posted something on my blog post. I have been very busy, moving to MongoDB, learning, learning, learningâ€¦finally I can breath a little and answer some questions.]]></description>
            <content:encoded><![CDATA[<p>Wow! it has been a while since I posted something on my blog post. I have been very busy, moving to MongoDB, learning, learning, learningâ€¦finally I can breath a little and answer some questions.</p><p>Last week I have been helping my colleague Norberto to deliver a MongoDB Essentials Training in Paris. This was a very nice experience, and I am impatient to deliver it on my own. I was happy to see that the audience was well balanced between developers and operations, mostly DBA.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-still-need-dba">What! I still need DBA?<a class="hash-link" href="#what-i-still-need-dba" title="Direct link to heading">â€‹</a></h3><p><img loading="lazy" src="http://ct.fra.bz/ol/fz/sw/i53/5/6/8/frabz-what-if-i-told-you-you-dont-need-to-know-sql-to-be-a-dba-85380e.jpg" class="img_ev3q"></p><p>This is a good opportunity to raise a point, or comment a wrong idea: the fact that you are using MongoDB, or any other NoSQL datastore does not mean that you do not need a DBAâ€¦ Like any project, an administrator is not mandatory, but if you have one it is better. So even when MongoDB is pushed by development team it is very important to understand the way the database works, and how to administer, monitor it.</p><p>If you are lucky enough to have real operations teams, with good system and database administrators use them! They are very important for your application.</p><p>Most DBA/System Administrators have been maintaining systems in production for many years. They know how to keep your application up and running. They also most of the time experienced many â€œdisastersâ€, and then recover (I hope).</p><p>Who knows, you may encounter big issues with your application and you will be happy to have them on your side at this moment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="great-but-the-dba-is-slowing-down-my-development">"Great, but the DBA is slowing down my development!"<a class="hash-link" href="#great-but-the-dba-is-slowing-down-my-development" title="Direct link to heading">â€‹</a></h3><p>I hear this, sometimes, and I had this feeling in the past to as developer in large organization. Is it true?</p><p>Developers and DBA are today, not living in the same worlds:</p><ul><li>Developers want to integrate new technologies as soon as possible, not only because it is fun and they can brag about it during meetups/conferences; but because these technologies, most of the time, are making them more productive, and offer better service/experience to the consumer</li><li>DBA, are here to keep the applications up and running! So every time they do not feel confident about a technology they will push back. I think this is natural and I would be probably the same in their position. Like all geeks, they would love to adopt new technologies but they need to understand and trust it before.</li></ul><p>System administrators, DBAS look at the technology with a different angle than developers.</p><p>Based on this assumption, it is important to bring the operation team as early as possible when  the development team wants to integrate MongoDB or any new data store. Having the operation team in the loop early will ease the global adoption of MongoDB in the company.</p><p>Personally, and this will show my age, I have seen a big change in the way developers and DBAs are working together.</p><p>Back in the 90's, when the main architecture was based on client/server architecture  developers and DBAs where working pretty well togethers; probably because they were speaking the same language: SQL was everywhere.  I had regular meetings wit</p><p>Then, since mid 2000, mots of applications have moved to a web based architecture , with for example Java middleware, and the developers stopped working with DBAs. Probably because the abstraction data layer provided by the ORM exposed the database as a "commodity" service that is supposed to work: "Hey Mr DBA, my application has been written with the best middleware technology on the market, so now deal with the performance and scalability! I am done!"</p><p>Yes it is a clichÃ©, but I am sure that some of you will recognize that.</p><p>Nevertheless each time I can, I have been pushing developers to talk more to administrators and look closely to their database!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-new-era-for-operations-and-development-teams">A new era for operations and development teams<a class="hash-link" href="#a-new-era-for-operations-and-development-teams" title="Direct link to heading">â€‹</a></h3><p>The fast adoption of MongoDB by developers, is a great opportunity to fix what we have broken 10 years ago in large information systems:</p><ul><li>Let's talk again!</li></ul><p>MongoDB has been built first for developers. The document oriented approach gives lot of flexibility to quickly adapt to change. So anytime your business users need a new feature you can implement it, even if this change impact the data structure. Your data model is now driven and controlled by the application, not the database engine.</p><p>However, the applications still need to be available 24x7, and performs well. These topics are managed - and shared- by administrator and developers! This has been always the case but, as I described it earlier, it looks like some of us have forgotten that.</p><p>Schemas design, change velocity, are driven by the application, so the business and development teams, but all this impacts the database, for example:</p><ul><li>How storage will grow ?</li><li>Which indexes must be created to speed up my application?</li><li>How to organize my cluster to leverage the infrastructure properly:<ul><li>Replica-Set organization (and related write concerns, managed by developer)</li><li>Sharding options</li></ul></li><li>And the most important of them : backup/recovery strategies</li></ul><p>So many things that could be managed by the project team, but if you have an operation team with you, it will be better to do that as a single team.</p><p>You, the developer, are convinced that MongoDB is the best database for your projects! Now it is time to work with the ops team and convince them too.  So you should for sure explain why MongoDB is good for you as developer, but also you should highlight all the benefits for the operations, starting with built-in high-availability with replica sets, and easy scalability with sharding. MongoDB is also here to make the life of the administrator easier! I have shared in the next paragraph a lit of resources that are interesting for operations people.</p><p>Letâ€™s repeat it another time, try to involve the operation team as soon as possible, and use that as an opportunity to build/rebuild the relationship between developers and system administrators!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">â€‹</a></h3><p>You can find many good resources on the Site to helps operations or learn about this:</p><ul><li>Documentation : <a href="http://docs.mongodb.org/manual/administration/" target="_blank" rel="noopener noreferrer">Operations</a></li><li>Online Training :<ul><li><a href="https://education.mongodb.com/courses/10gen/M102/2014_May/about" target="_blank" rel="noopener noreferrer">M102: MongoDB for DBAs</a></li><li><a href="https://education.mongodb.com/courses/10gen/M202/2014_April/about" target="_blank" rel="noopener noreferrer">M202: MongoDB Advanced Deployment and Operations</a></li></ul></li><li>And many others such as White Papers and <a href="http://www.mongodb.com/webinars" target="_blank" rel="noopener noreferrer">Webinars</a>.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Pagination with Couchbase]]></title>
            <link>https://tgrall.github.io/blog/2013/10/01/pagination-with-couchbase</link>
            <guid>/2013/10/01/pagination-with-couchbase</guid>
            <pubDate>Tue, 01 Oct 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[If you have to deal with a large number of documents when doing queries against a Couchbase cluster it is important to use pagination to get rows by page. You can find some information in the documentation in the chapter "Pagination", but I want to go in more details and sample code in this article.]]></description>
            <content:encoded><![CDATA[<p>If you have to deal with a large number of documents when doing queries against a Couchbase cluster it is important to use pagination to get rows by page. You can find some information in the documentation in the chapter "<a href="http://docs.couchbase.com/couchbase-manual-2.2/#pagination" target="_blank" rel="noopener noreferrer">Pagination</a>", but I want to go in more details and sample code in this article.</p><p>For this example I will start by creating a simple view based on the <code>beer-sample</code> dataset, the view is used to find brewery by country:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> meta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"brewery"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">country</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">country</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This view list all the breweries by country, the index looks like:</p><table><tbody><tr><th>Doc id</th><th>Key</th><th>Value</th></tr><tr><td>bersaglier</td><td>Argentina</td><td>null</td></tr><tr><td>cervecera_jerome</td><td>Argentina</td><td>null</td></tr><tr><td>brouwerij_nacional_balashi</td><td>Aruba</td><td>null</td></tr><tr><td>australian_brewing_corporation</td><td>Australia</td><td>null</td></tr><tr><td>carlton_and_united_breweries</td><td>Australia</td><td>null</td></tr><tr><td>coopers_brewery</td><td>Australia</td><td>null</td></tr><tr><td>foster_s_australia_ltd</td><td>Australia</td><td>null</td></tr><tr><td>gold_coast_brewery</td><td>Australia</td><td>null</td></tr><tr><td>lion_nathan_australia_hunter_street</td><td>Australia</td><td>null</td></tr><tr><td>little_creatures_brewery</td><td>Australia</td><td>null</td></tr><tr><td>malt_shovel_brewery</td><td>Australia</td><td>null</td></tr><tr><td>matilda_bay_brewing</td><td>Australia</td><td>null</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>yellowstone_valley_brewing</td><td>United States</td><td>null</td></tr><tr><td>yuengling_son_brewing</td><td>United States</td><td>null</td></tr><tr><td>zea_rotisserie_and_brewery</td><td>United States</td><td>null</td></tr><tr><td>fosters_tien_gang</td><td>Viet Nam</td><td>null</td></tr><tr><td>hue_brewery</td><td>Viet Nam</td><td>null</td></tr></tbody></table><p>So now you want to navigate in this index with a page size of 5 rows.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-skip--limit-parameters">Using skip / limit Parameters<a class="hash-link" href="#using-skip--limit-parameters" title="Direct link to heading">â€‹</a></h3><p>The most simplistic approach is to use <code>limit</code> and <code>skip</code> parameters for example:</p><p>Page 1 : <code>?limit=5&amp;amp;skip0</code><br>
<!-- -->Page 2 : <code>?limit=5&amp;amp;skip=5</code>
...
Page x : <code>?limit=5&amp;amp;skip(limit*(page-1))</code></p><p>You can obviously use any other parameters you need to do range or key queries (<code>startkey/endkey, key, keys</code>) and sort option (<code>descending</code>).</p><p>This is simple but not the most efficient way, since the query engine has to read all the rows that match the query, until the skip value is reached.</p><p>Some code sample in python that paginate using this view :</p><iframe width="100%" frameborder="0" id="gist-6174762"></iframe><p>This application loops on all the pages until the end of the index.</p><p>As I said before this is not the best approach since the system must read all the values until the skip is reached. The following example shows a better way to deal with this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-startkey--startkey_docid-parameters">Using startkey / startkey_docid parameters<a class="hash-link" href="#using-startkey--startkey_docid-parameters" title="Direct link to heading">â€‹</a></h3><p>To make this pagination more efficient it is possible to take another approach. This approach uses the  <code>startkey</code> and <code>startkey_docid</code>  to select the proper documents.</p><ul><li><code>The startkey</code> parameter will be the value of the key where the query should start to read (based on the last key of the "previous page"</li><li>Since for a key for example "Germany" you may have one or more ids (documents) it is necessary to say to Couchbase query engine where to start, for this you need to use the <code>startkey_docid</code> parameter, and ignore this id since it is the last one of the previous page.</li></ul><p>So if we look at the index, and add a row number to explain the pagination</p><table><tbody><tr><th>Row num</th><th>Doc id</th><th>Key</th><th>Value</th></tr><tr><td colspan="4"><br>Query for page 1<br>`?limit=5`</td></tr><tr><td>1</td><td></td><td>bersaglier</td><td>Argentina</td><td>null</td></tr><tr><td>2</td><td></td><td>cervecera_jerome</td><td>Argentina</td><td>null</td></tr><tr><td>3</td><td></td><td>brouwerij_nacional_balashi</td><td>Aruba</td><td>null</td></tr><tr><td>4</td><td></td><td>australian_brewing_corporation</td><td>Australia</td><td>null</td></tr><tr><td>5</td><td></td><td>carlton_and_united_breweries</td><td>Australia</td><td>null</td></tr><tr><td colspan="4">Query for page 2<br>`?limit=5&amp;startkey="Australia"&amp;startkey_docid=carlton_and_united_breweries&amp;skip=1`</td></tr><tr><td>6</td><td></td><td>coopers_brewery</td><td>Australia</td><td>null</td></tr><tr><td>7</td><td></td><td>foster_s_australia_ltd</td><td>Australia</td><td>null</td></tr><tr><td>8</td><td></td><td>gold_coast_brewery</td><td>Australia</td><td>null</td></tr><tr><td>9</td><td></td><td>lion_nathan_australia_hunter_street</td><td>Australia</td><td>null</td></tr><tr><td>10</td><td></td><td>little_creatures_brewery</td><td>Australia</td><td>null</td></tr><tr><td colspan="4"><br>Query for page 3<br>`?limit=5&amp;startkey="Australia"&amp;startkey_docid=little_creatures_brewery``&amp;skip=1`</td></tr><tr><td>11</td><td></td><td>malt_shovel_brewery</td><td>Australia</td><td>null</td></tr><tr><td>12</td><td></td><td>matilda_bay_brewing</td><td>Australia</td><td>null</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>...</td><td></td><td>yellowstone_valley_brewing</td><td>United States</td><td>null</td></tr><tr><td>...</td><td></td><td>yuengling_son_brewing</td><td>United States</td><td>null</td></tr><tr><td>...</td><td></td><td>zea_rotisserie_and_brewery</td><td>United States</td><td>null</td></tr><tr><td>...</td><td></td><td>fosters_tien_gang</td><td>Viet Nam</td><td>null</td></tr><tr><td>...</td><td></td><td>hue_brewery</td><td>Viet Nam</td><td>null</td></tr></tbody></table><p>So as you can see in the examples above, the query uses the startkey, a document id, and just passes it using skip=1.</p><p>Let's now look at the application code, once again in Python</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> couchbase </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Couchbase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Couchbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'beer-sample'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hasRow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rowPerPage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">currentStartkey</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">startDocId</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> hasRow </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hasRow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> page </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> page </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"-- Page %s --"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rows </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"test"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_country"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limit</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">rowPerPage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> skip</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">skip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> startkey</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">currentStartkey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> startkey_docid</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">startDocId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hasRow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country: \"%s\" \t Id: '%s'"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">docid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentStartkey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        startDocId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">docid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">" -- -- -- -- \n"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This application loops on all the pages until the end of the index</p><p>Using this approach, the application start to read the index at a specific key (<code>startkey</code> parameter), and only loop on the necessary entry in the index. This is more efficient than using the simple skip approach.  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="views-with-reduce-function">Views with Reduce function<a class="hash-link" href="#views-with-reduce-function" title="Direct link to heading">â€‹</a></h4><p>When your view is using a reduce function, if you want to paginate on the various keys only (with the reduce function) you need to use the <code>skip</code> and <code>limit</code> parameters.</p><p>When you are using the  paramater <code>startkey_docid</code> with a reduce function it will calculate the reduce only to the subset of document ids that are part of your query.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="couchbase-java-sdk-paginator">Couchbase Java SDK Paginator<a class="hash-link" href="#couchbase-java-sdk-paginator" title="Direct link to heading">â€‹</a></h3><p>In the previous examples, I have showed how to do pagination using the various query parameters. The Java SDK provides a Paginator object to help developers to deal with pagination. The following example is using the same view with the Paginator API.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">couchbase</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">devday</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">CouchbaseClient</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">net</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">URI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">HashMap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">LinkedList</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">List</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Properties</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">concurrent</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ConsoleHandler</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Handler</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Level</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Logger</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">JavaPaginatorSample</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">configure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"--------------------------------------------------------------------------"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\tCouchbase - Paginator"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"--------------------------------------------------------------------------"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">URI</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> uris </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LinkedList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">URI</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uris</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://127.0.0.1:8091/pools"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">CouchbaseClient</span><span class="token plain"> cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CouchbaseClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"beer-sample"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"--------------------------------------------------------------------------"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Breweries (by_name) with docs &amp; JSON parsing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">View</span><span class="token plain"> view </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"test"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_country"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> docsPerPage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Paginator</span><span class="token plain"> paginatedQuery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">paginatedQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> docsPerPage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> pageCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">paginatedQuery</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pageCount</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" -- Page "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> pageCount </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">" -- "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ViewResponse</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> paginatedQuery</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ViewRow</span><span class="token plain"> row </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">" : "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" -- -- -- "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\n\n"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SECONDS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Error connecting to Couchbase: "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">configure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Handler</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"com.couchbase.client"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getParent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHandlers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">ConsoleHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLevel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Level</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Properties</span><span class="token plain"> systemProperties </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemProperties</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"net.spy.log.LoggerImpl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"net.spy.memcached.compat.log.SunLogger"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemProperties</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"com.couchbase.client"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLevel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Level</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Handler</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getParent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHandlers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">ConsoleHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLevel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Level</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So as you can see you can easily paginate on the results of a Query using the Java Paginator.</p><ul><li>At the line #37, the Paginator is created from using the view and query objects and a page size is specified</li><li>Then you just need to use the hasNext() and next() methods to navigate in the results.</li></ul><p>The Java Paginator  is aware of the fact that they query is using a reduce or not, so you can use it with all type of queries - Internally it will switch between the skip/limit approach and the doc_id approaches. You can <a href="https://github.com/couchbase/couchbase-java-client/blob/1.1.9/src/main/java/com/couchbase/client/protocol/views/Paginator.java#L176-L195" target="_blank" rel="noopener noreferrer">see how it is done in the Paginator class</a>.</p><p>Note that if you want to do that in a Web application between HTTP request you must keep the Paginator object in the user session since the current API keeps the current page in its state.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this blog post you have  learned how to deal with pagination in Couchbase views; to summarize</p><ul><li>The pagination is based on some specific parameters that you send when executing a query.</li><li>Java developers can use the <a href="http://www.couchbase.com/autodocs/couchbase-java-client-1.2.0/com/couchbase/client/protocol/views/Paginator.html" target="_blank" rel="noopener noreferrer">Paginator</a> class that simplifies pagination.</li></ul><p>I am inviting you to look at the new Couchbase Query Language N1QL, still under development, that will provide more options to developers including pagination, using LIMIT <!-- -->&amp;<!-- --> OFFSET parameters, for example:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> fname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> age </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">OFFSET</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to learn more about N1QL:</p><ul><li><a href="http://query.couchbase.com/" target="_blank" rel="noopener noreferrer">N1QL on Couchbase Community Portal</a></li><li><a href="http://query.pub.couchbase.com/tutorial/" target="_blank" rel="noopener noreferrer">N1QL Online Tutorial</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to implement Document Versioning with Couchbase]]></title>
            <link>https://tgrall.github.io/blog/2013/07/18/how-to-implement-document-versioning-with-couchbase</link>
            <guid>/2013/07/18/how-to-implement-document-versioning-with-couchbase</guid>
            <pubDate>Thu, 18 Jul 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>Developers are often asking me how to "version" documents with Couchbase 2.0. The short answer is: the clients and server do not expose such feature, but it is quite easy to implement.</p><p>In this article I will use a basic approach, and you will be able to extend it depending of your business requirements.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a class="hash-link" href="#design" title="Direct link to heading">â€‹</a></h3><p>The first thing to do is to select how to "store/organize" the versions of your document, and for this you have different designs:</p><ul><li>copy the versions the document into new documents</li><li>copy the versions of the document into a list of embedded documents</li><li>store the list of attributes that have been changed into a embedded element (or new documents)</li><li>store the "delta"</li><li>â€¦</li></ul><p>You will have to chose the design based on your application requirements (business logic, size of the dataset, ...).  For this article, let's use one of the most simplistic approach: create new document for each version with the following rules for the keys:</p><ol><li>The current version is is a simple Key/Document, no change to the key.</li><li>The version is a copy of the document, and the version number is added to the key.</li></ol><p>This looks like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Current Version   mykey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version 1         mykey::v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version 2         mykey::v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...               ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this approach, existing applications will always use the current version of the document, since the key is not changed. But this approach creates new documents that will be indexed by existing views.</p><p>For example, in the Beer Sample application, the following view is used to list the beer by name:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> meta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is quite simple to "support" versioning without impacting the existing code, except the view itself. The new view needs to emit keys,value only for the current version of the document. This is the new view code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function (doc, meta) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if(doc.type &amp;amp;&amp;amp; doc.type == "beer" &amp;amp;&amp;amp; (meta.id).indexOf("::v") == -1   ) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit(doc.name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this change the existing applications that are using this view will continue to work with the same behavior.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-the-versioning">Implementing the versioning<a class="hash-link" href="#implementing-the-versioning" title="Direct link to heading">â€‹</a></h3><p>Based on this design, when the application needs to version the document, the following logic should happen:</p><ol><li>Get the current version of the document</li><li>Increment the version number (for example using another key that maintains the version number for each document)</li><li>Create the version with the new key  "mykey::v1"</li><li>Save the document current version</li></ol><p>Let's look at the code in Java</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Object</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// get the next version, create or use the key: mykey_version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">incr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_version"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> keyForVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"::v"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> version</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// mykey::v1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyForVersion</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">severe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Cannot save version "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">" for key "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">" - Error:"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Quite simple isn't?</p><p>The application can access the document using the key, but also get one version or the list of all versions, this is one of the reasons why it is interesting to create a key (<code>mykey_version</code>), and use it also to delete documents and related versions.</p><p>Based on the previous comment, the delete operation looks like:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Object</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// need to delete all the version first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Object</span><span class="token plain"> vObject </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_version"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vObject </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> biggerVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parseLong</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> vObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// delete all the versions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> biggerVersion</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">String</span><span class="token plain"> versionKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"::v"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">versionKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// delete the counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_version"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ExecutionException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-versioning">Use versioning<a class="hash-link" href="#use-versioning" title="Direct link to heading">â€‹</a></h4><p>As an example, I have created a small library available on GitHub <a href="https://github.com/tgrall/couchbase-how-to-versioning" target="_blank" rel="noopener noreferrer">https://github.com/tgrall/couchbase-how-to-versioning</a>, this library extends the Couchbase Client and overrides some of the operations : set, replace and delete. (the basic one: no TLL, no durability) As I said before this is just an example.</p><p><em>Build and Install</em></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/tgrall/couchbase-how-to-versioning.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd how-to-versioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then add this library to your project in addition to Couchbase Java Client, for example in your pom.xml</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.couchbase.howtos</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase-how-to-versioning</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0-SNAPSHOT</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase-client</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Code your application</em></p><p>Create a document and version it:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">uri</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> uris </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LinkedList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">uri</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://127.0.0.1:8091/pools"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">CouchbaseClientWithVersioning</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CouchbaseClientWithVersioning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"key-001"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"This is the original version"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Original '%s' .\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"This is a new version"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// create a new version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Current Version '%s' .\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Version 1 '%s' .\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"This is another version"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// create a new version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All versions %s .\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAllVersions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">deleteVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// create a new version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All versions %s (after delete 1 version).\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAllVersions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// create a new version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All versions %s (after delete the main key).\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAllVersions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client </span><span class="token operator" style="color:#393A34">!=</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Quick explanation:</p><ul><li>Line 5: instead of using the <code>CouchbaseClient</code>, the application uses the extended <code>CouchbaseClientWithVersioning</code> class.</li><li>Line 7: create a new entry</li><li>Line 9: create a new version, the boolean value to "true" force the versioning of the document</li><li>The application use other methods such as get a specific version (line 11), get all versions (line 13), delete a specific version (line 14), and finally delete the key and all versions (line 16).</li></ul><p>So using this approach the developer controls explicitly when to create a version, since he has to add the boolean parameter in the set operation. In this small sample library it is also possible to do auto versioning, in this case all set and replace calls will create a version, to achieve that the developer just needs to call the setAutoVersioning(true) method. Something like:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CouchbaseClientWithVersioning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAutomaticVersionning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this approach you can provide versioning to your application with minimal code change. You can test it in the Beer Sample application, just do not forget to change the views as documenter above to only return <em>current</em> version of the documents.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>As you can see doing versioning in Couchbase is not that complicated, but it is something that must be done by your application based on its requirements and constraints. You have many different solution and none of these options is perfect for all use cases.</p><p>In this specific sample code, I am working with a simple design where I create a copy of the documents for each version. With this approach also, it is interesting to mention that you can version "anything", not only JSON document but also any values.  As I said before, this is one possible approach, and like any design, it has some impact on the application or database, in this case most the database:</p><ul><li>Increase the number of keys and documents</li><li>Double - or more- the number of operations, for example when updating a document, the application needs to get the current value, create a version, save the current version.</li><li>Consistency management when adding new version and incrementing the version number (need to deal with errors when creating a new version, deleting the versions and counter....)</li></ul><p>Many features could be added to this easily, for example:</p><ul><li>Limit to a specific number of version,</li><li>Enable the versioning only of replace() operation</li><li>Add specific attribute about versions in JSON document (for example date of the version)</li><li>....</li></ul><p>If you are using versioning in your Couchbase application feel free to comment or write a small article that describes the way your are doing it.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Deploy your Node/Couchbase application to the cloud with Clever Cloud]]></title>
            <link>https://tgrall.github.io/blog/2013/07/11/deploy-your-node-slash-couchbase-application-to-the-cloud-with-clever-cloud</link>
            <guid>/2013/07/11/deploy-your-node-slash-couchbase-application-to-the-cloud-with-clever-cloud</guid>
            <pubDate>Thu, 11 Jul 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p><a href="http://www.clever-cloud.com/en/" target="_blank" rel="noopener noreferrer">Clever Cloud</a> is the first PaaS to provide Couchbase as a service allowing developers to run applications in a fully managed environment. This article shows how to deploy an existing application to Clever Cloud.</p><p><img loading="lazy" src="http://f.cl.ly/items/2L2M2k2O000e3g2N1z3z/couchbase_gradient_clever.png" class="img_ev3q"></p><p>I am using a very simple Node application that I have documented in a previous article: â€œ<a href="http://tugdualgrall.blogspot.fr/2013/03/easy-application-development-with.html" target="_blank" rel="noopener noreferrer">Easy application development with Couchbase, Angular and Node</a>â€.</p><p>Clever Cloud provides support for various databases MySQL, PostgreSQL, but also and this is most important for me <a href="http://www.clever-cloud.com/en/services/couchbase.html" target="_blank" rel="noopener noreferrer">Couchbase</a>. No only Clever Cloud allows you to use database services but also you can deploy and host your application that could be developed in the language/technology of your choice : Java, Node, Scala, Python, PHP, â€¦ and all this in a secure, scalable and managed environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-clever-cloud-environment">Setting up your Clever Cloud environment<a class="hash-link" href="#setting-up-your-clever-cloud-environment" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-account">Create your account<a class="hash-link" href="#create-your-account" title="Direct link to heading">â€‹</a></h4><ol><li>Go to the Clever Cloud site :<a href="http://www.clever-cloud.com/" target="_blank" rel="noopener noreferrer"> http://www.clever-cloud.com/</a></li><li>Click on â€œLoginâ€ link and follow the steps to create your account.</li><li>After few seconds you will received an email and be redirected to the Clever Cloud Console.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-couchbase-instance">Create a Couchbase instance<a class="hash-link" href="#create-a-couchbase-instance" title="Direct link to heading">â€‹</a></h4><p>The <a href="https://console.clever-cloud.com/" target="_blank" rel="noopener noreferrer">Clever Cloud Console</a> allows you to create your Couchbase Bucket in few clicks:</p><p>1-  Cick on â€œServicesâ€ in the left menu</p><p>2-  Click on â€œAdd a Serviceâ€ in the left menu </p><p><img loading="lazy" src="http://4.bp.blogspot.com/-He8scPOrH5I/Uac5B_O2k3I/AAAAAAAAAcE/OZyn8jW-bV8/s320/clever-cloud-add-couchbase.png" class="img_ev3q"></p><p>3- Click on â€œCouchbaseâ€ button.</p><ol start="4"><li>Select the size of the RAM quota for your bucket</li></ol><p><img loading="lazy" src="http://4.bp.blogspot.com/-V_GMolXLClI/Uac5CMdKQoI/AAAAAAAAAcM/vvGKJUXW-xQ/s320/Screen+Shot+2013-05-30+at+9.19.59+AM.png" class="img_ev3q"></p><p>The size of the RAM Quota for your bucket will have an impact on performance but also on the pricing.</p><p>5- Click â€œAdd this Serviceâ€</p><p>You are done, you should receive an email with all the information to access your newly created bucket.</p><p>The mail from Clever Cloud contains the following information:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db_host = xxxxxxxx.couchbase.clvrcld.net    Location of the database, this is where the endpoint is located.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db_name = yyyyyyyy  Name of the Couchbase bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db_username = xxxxxxxx  Not used in Couchbase context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db_password = zzzzzzzz  Password to connect to the Couchbase Bucket</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So you are now ready to use your bucket.</p><p>Note: In the current version of the Clever Cloud Couchbase Service you do not have access to a management console. If you want to get some information about the database or create views you need to do it from you application code.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="connect-your-application-to-couchbaseclever-cloud">Connect your Application to Couchbase@Clever-Cloud<a class="hash-link" href="#connect-your-application-to-couchbaseclever-cloud" title="Direct link to heading">â€‹</a></h4><p>The first step is to get some code, so letâ€™s clone the â€œCouchbase Ideas Sample Applicationâ€, and install the dependencies, using the following commands:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone -b 03-vote-with-value https://github.com/tgrall/couchbase-node-ideas.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd couchbase-node-ideas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git branch mybranch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git checkout mybranch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Open the app.js and edit the connection info to point your application to the Couchbase instance and modify the HTTP port of your application to 8080 - this is a mandatory step documented <a href="http://doc.clever-cloud.com/nodejs/nodejs/#requirements" target="_blank" rel="noopener noreferrer">here</a> :</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dbConfiguration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"hosts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"xxxxxxxxxxx.couchbase.clvrcld.net:8091"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"bucket"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxxxxxxxxx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"user"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxxxxxxxx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"password"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"yyyyyyyyyyyyyyyyyyyyyyyyy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">appServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Express server listening on port %d in %s mode"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Launch your application using</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node app.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Go to http://localhost:8080</p><p>Your application is now using Couchbase on the cloud powered by Clever Cloud. Letâ€™s now deploy the application itself on Clever Cloud</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-your-application-on-clever-cloud">Deploy your application on Clever Cloud<a class="hash-link" href="#deploy-your-application-on-clever-cloud" title="Direct link to heading">â€‹</a></h3><p>The easiest way to deploy an application to Clever Cloud is using git. The first thing to do is to add your SSH public key into Clever Cloud Console. If you do not have any SSH yet, follow the steps described on Github : â€œ<a href="https://help.github.com/articles/generating-ssh-keys" target="_blank" rel="noopener noreferrer">Generating SSH Keys</a>â€.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-your-ssh-key">Add your SSH key<a class="hash-link" href="#add-your-ssh-key" title="Direct link to heading">â€‹</a></h4><p>Note: As you can guess this should be done only once</p><p>Open the id_rsa.pub file with a text editor. This is your SSH key. Select all and copy to your clipboard.</p><ol><li>Go to the Clever Cloud Console</li><li>Click on â€œProfileâ€ entry in the left menu</li><li>Click on â€œSSH Keysâ€</li><li>Click on â€œAdd a SSH Keyâ€</li><li>Enter a name (anything you want) and paste your key</li><li>Click â€œAddâ€ button</li></ol><p>You are now ready to deploy applications to Clever Cloud. The next thing to do, is to create a new node application in Clever Cloud.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-application">Create your Application<a class="hash-link" href="#create-your-application" title="Direct link to heading">â€‹</a></h4><ol><li>Click â€œAdd an appâ€ in the Application menu in the top menu.</li><li>Give a name and description to this application</li><li>Select the Instance type, in this case â€œNode.jsâ€</li><li>Configure your instances, you can keep the default values for now, click â€œNextâ€</li><li>Check the configuration, and click â€œCreateâ€</li></ol><p>Your application is created, you are redirected to the generic information page, where you can find a Git URL that we will use to deploy the application.</p><p>You can navigate into the entries in the left menu to see more information about your application. In addition to the Information page, you can look at the following entries:</p><ol><li>â€œDomain Namesâ€ to configure the URL to access your application</li><li>â€œLogsâ€ to view the application logs</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-application">Deploy the Application<a class="hash-link" href="#deploy-the-application" title="Direct link to heading">â€‹</a></h4><p>So we are almost there!</p><p>The deployment to Clever Cloud is done using a Git push command, so you need to add the deployment URL as a remote repository to your application, using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git remote add clever git+ssh://git@push.clever-cloud.com/app_[your_app_id].git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -a -m â€œCouchbase on Clever Cloud connectionâ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push clever mybranch:master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you have added the application as remote repository you can commit and push your application.</p><p>The last command pushes the application  to Clever Cloud. It is important to note that Clever Cloud will always deploy the application on the â€œmasterâ€ branch on the remote repository. The notation mybranch:master is used to mention it. If you work locally on your master branch just use â€œmasterâ€.</p><p>You can now go to the Clever Cloud console and look in the log and click on the URL in the â€œDomain Namesâ€ section to test your application.</p><p>You should be able to see your application, that is running on the Clever Cloud PaaS.</p><p>When you update your application, you just need to do a  git push and git commit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this tutorial you have learned how to:</p><ul><li>Create your Clever Cloud account</li><li>Create a Couchbase instance</li><li>Create and deploye a Node.js application</li></ul><p>Feel free to test this yourself, with Node or other technology, as you can see it is quite easy to setup.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SQL to NoSQL : Copy your data from MySQL to Couchbase]]></title>
            <link>https://tgrall.github.io/blog/2013/07/03/sql-to-nosql-copy-your-data-from-mysql-to-couchbase</link>
            <guid>/2013/07/03/sql-to-nosql-copy-your-data-from-mysql-to-couchbase</guid>
            <pubDate>Wed, 03 Jul 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[TL;DR: Look at the project on Github.]]></description>
            <content:encoded><![CDATA[<p><strong>TL;DR:</strong> Look at the <a href="https://github.com/tgrall/couchbase-sql-importer" target="_blank" rel="noopener noreferrer">project on Github</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>During my last interactions with the Couchbase community, I had the question how can I easily import my data from my current database into Couchbase. And my answer was always the same:</p><ul><li>Take an ETL such as Talend to do it</li><li>Just write a small program to copy the data from your RDBMS to Couchbase...</li></ul><p>So I have written this small program that allows you to import the content of a RDBMS into Couchbase. This tools could be used as it is, or you can look at the code to adapt it to your application.</p><iframe width="675" height="380" src="https://www.youtube.com/embed/xzqBjhYKCLY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-tool-couchbase-sql-importer">The Tool: Couchbase SQL Importer<a class="hash-link" href="#the-tool-couchbase-sql-importer" title="Direct link to heading">â€‹</a></h3><p>The Couchbase SQL Importer, available <a href="http://github.com/tgrall/couchbase-sql-importer" target="_blank" rel="noopener noreferrer">here</a>, allows you with a simple command line to copy all -or part of- your SQL schema into Couchbase. Before explaining how to run this command, let's see how the data are stored into Couchbase when they are imported:</p><ul><li>Each table row is imported a single JSON document<ul><li>where each table column becomes a JSON attribute</li></ul></li><li>Each document as a key made of the name of the table and a counter (increment)</li></ul><p>The following concrete example, based on the <a href="http://dev.mysql.com/doc/world-setup/en/index.html" target="_blank" rel="noopener noreferrer">MySQL World sample database</a>, will help you to understand how it works. This database contains 3 tables : City, Country, CountryLanguage. The City table looks like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+----------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Field       | Type     | Null | Key | Default | Extra          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+----------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ID          | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Name        | char(35) | NO   |     |         |                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CountryCode | char(3)  | NO   |     |         |                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| District    | char(20) | NO   |     |         |                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Population  | int(11)  | NO   |     | 0       |                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+----------+------+-----+---------+----------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The JSON document that matches this table looks like the following:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">city</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3805</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"San Francisco"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"District"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"California"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"ID"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3805</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Population"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">776733</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"CountryCode"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"USA"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You see that here I am simply taking all the rows and "moving" them into Couchbase. This is a good first step to play with your dataset into Couchbase, but it is probably not the final model you want to use for your application; most of the time you will have to see when to use embedded documents, list of values, .. into your JSON documents.</p><p>In addition to the JSON document the tool create views based on the following logic:</p><ul><li>a view that list all imported documents with the name of the "table" (aka type) as key</li><li>a view for each table with the primary key columns</li></ul><p>View: all/by_type</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4079</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"country"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">239</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">984</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see this view allows you to get with a single Couchbase query the number of document by type.</p><p>Also for each table/document type, a view is created where the key of the index is built from the table primary key. Let's for example query the "City" documents.</p><p>View: city/by_pk?reduce=false<!-- -->&amp;<!-- -->limit=5</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4079</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city:1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city:2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city:3"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city:4"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"city:5"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The index key matches the value of the <code>City.ID</code> column.  When the primary key is made of multiple columns the key looks like:</p><p>View: CountryLanguage/by_pk?reduce=false<!-- -->&amp;<!-- -->limit=5</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">984</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage:1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ABW"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Dutch"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage:2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ABW"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"English"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage:3"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ABW"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Papiamento"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage:4"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ABW"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Spanish"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"countrylanguage:5"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"AFG"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Balochi"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This view is built from the CountryLanguage table primary key made of <code>CountryLanguage.CountryCode and  </code>CountryLanguage.Language` columns.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+---------------+------+-----+---------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Field       | Type          | Null | Key | Default | Extra |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+---------------+------+-----+---------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CountryCode | char(3)       | NO   | PRI |         |       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Language    | char(30)      | NO   | PRI |         |       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| IsOfficial  | enum('T','F') | NO   |     | F       |       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Percentage  | float(4,1)    | NO   |     | 0.0     |       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------+---------------+------+-----+---------+-------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>How to use Couchbase SQL Importer tool? </strong></p><p>The importer is a simple Java based command line utility, quite simple to use:</p><p>1- Download the <a href="http://goo.gl/IF89e" target="_blank" rel="noopener noreferrer">CouchbaseSqlImporter.jar file from here</a>. This file is contains all the dependencies to work with Couchbase: the Java Couchbase Client, and GSON.
2- Download the JDBC driver for the database you are using as data source. For this example I am using MySQL and I have download the driver for MySQL Site.
3- Configure the import using a properties file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## SQL Information ##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sql.connection=jdbc:mysql://192.168.99.19:3306/world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sql.username=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sql.password=password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Couchbase Information ##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cb.uris=http://localhost:8091/pools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cb.bucket=default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cb.password=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Import information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import.tables=ALL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import.createViews=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import.typefield=type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import.fieldcase=lower</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This sample properties file contains three sections :</p><ul><li>The two first sections are used to configure the connections to your SQL database and Couchbase cluster (note that the bucket must be created first)</li><li>The third section allow you to configure the import itself</li></ul><p>4- Run the tool !</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -cp "./CouchbaseSqlImporter.jar:./mysql-connector-java-5.1.25-bin.jar" com.couchbase.util.SqlImporter import.properties</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So you run the Java command with the proper classpath (-cp parameter).</p><p>And you are done, you can get your data from your SQL database into Couchbase.</p><p>If you are interested to see how it is working internally, you can take a look to the next paragraph.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-code-how-it-works">The Code: How it works?<a class="hash-link" href="#the-code-how-it-works" title="Direct link to heading">â€‹</a></h3><p>The main class of the tool is really simple  <a href="https://github.com/tgrall/couchbase-sql-importer/blob/master/sql-importer-lib/src/main/java/com/couchbase/util/SqlImporter.java" target="_blank" rel="noopener noreferrer">com.couchbase.util.SqlImporter</a>, the process is:</p><ol><li>Connect to the SQL database</li><li>Connect to Couchbase</li><li>Get the list of tables</li><li>For each tables execute a "select * from table"
4.1. Analyze the ResultSetMetadata to get the list of columns
4.2. Create a Java map for each rows where the key is the name of the columns and the valueâ€¦is the value
4.3. Serialize this Map into a GSON document and save it into Couchbase</li></ol><p>The code is available in the <a href="https://github.com/tgrall/couchbase-sql-importer/blob/master/sql-importer-lib/src/main/java/com/couchbase/util/SqlImporter.java#L212" target="_blank" rel="noopener noreferrer">ImportTable(String table)</a> Java method.</p><p>One interesting point is that you can use and extend the code to deal with your application.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>I have created this tool quickly to help some people in the community, if you are using it and need new features, let me know, using comment or pull request.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Create a Couchbase cluster in less than a minute with Ansible]]></title>
            <link>https://tgrall.github.io/blog/2013/05/31/create-a-couchbase-cluster-in-less-than-a-minute-with-ansible</link>
            <guid>/2013/05/31/create-a-couchbase-cluster-in-less-than-a-minute-with-ansible</guid>
            <pubDate>Fri, 31 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[TL;DR: Look at the Couchbase Ansible Playbook on my Github.]]></description>
            <content:encoded><![CDATA[<p><strong>TL;DR:</strong> Look at the Couchbase Ansible Playbook on my <a href="https://github.com/tgrall/couchbase-ansible-playbook" target="_blank" rel="noopener noreferrer">Github</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>When I was looking for a more effective way to create my cluster I asked some sysadmins which tools I should use to do it. The answer I got during <a href="http://www.netways.de/osdc" target="_blank" rel="noopener noreferrer">OSDC</a> was not <a href="https://puppetlabs.com/" target="_blank" rel="noopener noreferrer">Puppet</a>, nor <a href="http://www.opscode.com/chef/" target="_blank" rel="noopener noreferrer">Chef</a>, but was <a href="http://ansible.cc/" target="_blank" rel="noopener noreferrer">Ansible</a>.</p><p>This article shows you how you can easily configure and create a Couchbase cluster deployed and many linux boxes...and the only thing you need on these boxes is an SSH Server!</p><p>Thanks to <a href="http://jpmens.net/" target="_blank" rel="noopener noreferrer">Jan-Piet Mens</a> that was one of the person that convinced me to use Ansible and answered questions I had about Ansible.</p><p>You can watch the demonstration below, and/or look at all the details in the next paragraph.</p><iframe width="675" height="380" src="https://www.youtube.com/embed/COb6y89xcYY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ansible">Ansible<a class="hash-link" href="#ansible" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ansible-is-an-open-source-software-that-allows-administrator-to-configure-and-manage-many-computers-over-ssh">Ansible is an open-source software that allows administrator to configure and manage many computers over SSH.<a class="hash-link" href="#ansible-is-an-open-source-software-that-allows-administrator-to-configure-and-manage-many-computers-over-ssh" title="Direct link to heading">â€‹</a></h4><p>I won't go in all the details about the installation, just follow the steps documented in the <a href="http://ansible.cc/docs/gettingstarted.html" target="_blank" rel="noopener noreferrer">Getting Started Guide</a>. As you can see from this guide, you just need Python and few other libraries and clone Ansible project from Github. So I am expecting that you have Ansible working with your various servers on which you want to deploy Couchbase.</p><p>Also for this first scripts I am using <strong>root</strong> on my server to do all the operations. So be sure you have register the root ssh keys to your administration server, from where you are running the Ansible scripts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-couchbase-cluster">Create a Couchbase Cluster<a class="hash-link" href="#create-a-couchbase-cluster" title="Direct link to heading">â€‹</a></h3><p>So before going into the details of the Ansible script it is interesting to explain how you create a Couchbase Cluster. So here are the 5 steps to create and configure a cluster:</p><ol><li>Install Couchbase on each nodes of the cluster, as documented <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-getting-started-install-ubuntu.html" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Take one of the node and "initialize" the cluster,  using <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-cli-other-examples.html" target="_blank" rel="noopener noreferrer">cluster-init command</a>.</li><li>Add the other nodes to the cluster, using <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-cli-other-examples.html" target="_blank" rel="noopener noreferrer">server-add command</a>.</li><li>Rebalance, using <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-cli-other-examples.html" target="_blank" rel="noopener noreferrer">rebalance command</a>.</li><li>Create a Bucket, using <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-cli-other-examples.html" target="_blank" rel="noopener noreferrer">bucket-create command</a>.</li></ol><p>So the goal now is to create an Ansible Playbook that does these steps for you.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ansible-playbook-for-couchbase">Ansible Playbook for Couchbase<a class="hash-link" href="#ansible-playbook-for-couchbase" title="Direct link to heading">â€‹</a></h4><p>The first think you need is to have the list of hosts you want to target, so I have create a <a href="https://github.com/tgrall/couchbase-ansible-playbook/blob/master/hosts" target="_blank" rel="noopener noreferrer">hosts file</a> that contains all my server organized in 2 groups:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[couchbase-main]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm1.grallandco.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[couchbase-nodes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm2.grallandco.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm3.grallandco.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The group <!-- -->[couchbase-main]<!-- --> group is just one of the node that will drive the installation and configuration, as you probably already know, Couchbase does not have any master... All nodes in the cluster are identical.</p><p>To ease the configuration of the cluster, I have create another file that contains all parameters that must be sent to all the various commands. This file is located in the <a href="https://github.com/tgrall/couchbase-ansible-playbook/blob/master/group_vars/all" target="_blank" rel="noopener noreferrer">group_vars/all</a> see the section <a href="http://ansible.cc/docs/patterns.html#splitting-out-host-and-group-specific-data" target="_blank" rel="noopener noreferrer">Splitting Out Host and Group Specific Data</a> in the documentation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Adminisrator user and password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin_user: Administrator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin_password: password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ram quota for the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cluster_ram_quota: 1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># bucket and replicas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bucket_name: ansible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bucket_ram_quota: 512</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">num_replicas: 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use this file to configure your cluster.</p><p>Let's describe the <a href="https://github.com/tgrall/couchbase-ansible-playbook/blob/master/couchbase.yml" target="_blank" rel="noopener noreferrer">playbook file</a> :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- name: Couchbase Installation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hosts: all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: download Couchbase package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_url: url=http://packages.couchbase.com/releases/2.0.1/couchbase-server-enterprise_x86_64_2.0.1.deb dest=~/.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Install dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apt: pkg=libssl0.9.8 state=present</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Install Couchbase .deb file on all machines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell: dpkg -i ~/couchbase-server-enterprise_x86_64_2.0.1.deb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As expected, the installation has to be done on <strong>all</strong> servers as <strong>root</strong> then we need to execute 3 tasks:</p><ol><li>Download the product, the get_url command will only download the file if not already present</li><li>Install the dependencies with the apt command, the state=present allows the system to only install this package if not already present</li><li>Install Couchbase with a simple shell command. (here I am not checking if Couchbase is already installed)</li></ol><p>So we have now installed Couchbase on all the nodes. Let's now configure the first node and add the others:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- name: Initialize the cluster and add the nodes to the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hosts: couchbase-main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Configure main node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell: /opt/couchbase/bin/couchbase-cli cluster-init -c 127.0.0.1:8091  --cluster-init-username=${admin_user} --cluster-init-password=${admin_password} --cluster-init-port=8091 --cluster-init-ramsize=${cluster_ram_quota}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Create shell script for configuring main node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action: template src=couchbase-add-node.j2 dest=/tmp/addnodes.sh mode=750</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Launch config script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action: shell /tmp/addnodes.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Rebalance the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell: /opt/couchbase/bin/couchbase-cli rebalance -c 127.0.0.1:8091 -u ${admin_user} -p ${admin_password}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: create bucket ${bucket_name} with ${num_replicas} replicas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell: /opt/couchbase/bin/couchbase-cli bucket-create -c 127.0.0.1:8091 --bucket=${bucket_name} --bucket-type=couchbase --bucket-port=11211 --bucket-ramsize=${bucket_ram_quota}  --bucket-replica=${num_replicas} -u ${admin_user} -p ${admin_password}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we need to execute specific taks on the "main" server:</p><ul><li>Initialization of the cluster using the Couchbase CLI, on line 06 and 07</li></ul><p>Then the system needs to ask all other server to join the cluster. For this the system needs to get the various IP and for each IP address execute the add-server command with the IP address. As far as I know it is not possible to get the IP address from the main playbook YAML file, so I ask the system to generate a shell script to add each node and execute the script.</p><p>This is done from the line 09 to 13.</p><p>To generate the shell script, I use <a href="http://ansible.cc/docs/modules.html#template" target="_blank" rel="noopener noreferrer">Ansible Template</a>, the template is available in the <a href="https://github.com/tgrall/couchbase-ansible-playbook/blob/master/couchbase-add-node.j2" target="_blank" rel="noopener noreferrer">couchbase-add-node.j2</a> file.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% for host in groups['couchbase-nodes'] %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/couchbase/bin/couchbase-cli server-add -c 127.0.0.1:8091 -u ${admin_user} -p ${admin_password} --server-add={{ hostvars[host]['ansible_eth0']['ipv4']['address'] }}:8091 --server-add-username=${admin_user} --server-add-password=${admin_password}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endfor %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see this script loop on each server in the <!-- -->[couchbase-nodes]<!-- --> group and use its IP address to add the node to the cluster.</p><p>Finally the script rebalance the cluster (line 16) and add a new bucket (line 19).</p><p>You are now ready to execute the playbook using the following command :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/ansible-playbook -i ./couchbase/hosts ./couchbase/couchbase.yml -vv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I am adding the -vv parameter to allow you to see more information about what's happening during the execution of the script.</p><p>This will execute all the commands described in the playbook, and after few seconds you will have a new cluster ready to be used! You can for example open a browser and go to the Couchase Administration Console and check that your cluster is configured as expected.</p><p> <img loading="lazy" src="http://1.bp.blogspot.com/-L-3yeJZECwY/Uaj_PA_aVUI/AAAAAAAAAcg/fKBZ47Nhd4M/s320/Screen+Shot+2013-05-31+at+9.50.44+PM.png" class="img_ev3q"></p><p>As you can see it is really easy and fast to create a new cluster using Ansible.</p><p>I have also create a script to uninstall properly the cluster.. just launch</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/ansible-playbook -i ./couchbase/hosts ./couchbase/couchbase-uninstall.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Six months as Technical Evangelist at Couchbase]]></title>
            <link>https://tgrall.github.io/blog/2013/05/28/six-months-as-technical-evangelist-at-couchbase</link>
            <guid>/2013/05/28/six-months-as-technical-evangelist-at-couchbase</guid>
            <pubDate>Tue, 28 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Already 6 months! Already 6 months that I have joined Couchbase as Technical Evangelist. This is a good opportunity to take some time to look back.]]></description>
            <content:encoded><![CDATA[<p>Already 6 months! Already 6 months that I have joined Couchbase as Technical Evangelist. This is a good opportunity to take some time to look back.</p><p>So first of all what is a Developer/Technical Evangelist?</p><p>Hmm it depends of each company/product, but let me tell you what it is for me, inside Couchbase. This is one of the most exciting job I ever had. And I think it is the best job you can have when you are passionate about technology, and you like to share this passion with others. So my role as Technical Evangelist is to help the developers to adopt NoSQL technologies in general, and as you can guess Couchbase in particular.</p><p>Let's now see in more details what I have done during these past six months and why I am so happy about it. I have organized the different activities in three types:</p><ul><li>Outbound activities : meet the developers</li><li>Online activities : reach even more developers</li><li>Inbound Activities : make the product better !</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outbound-activities--meet-the-developers-">Outbound activities : meet the developers !<a class="hash-link" href="#outbound-activities--meet-the-developers-" title="Direct link to heading">â€‹</a></h3><p>A large part of my activities for this first semester was made of conferences and meetups. All these events are great opportunities for me to talk about NoSQL and get more people to use Couchbase Server 2.0, here a short list of what I have done:</p><ul><li>participated to many Couchbase Developer Days in various cities (Portland, Seattle, Vancouver, Oslo, Copenhagen, Stockholm, Munich, Amsterdam, Barcelona, Paris, ...), these are one day workshops where I am helping developers to get their hands dirty on Couchbase</li><li>participated to Couchconf Berlin and Couchbase <!-- -->[UK]<!-- --> our main European events where I met many Customer and key members of the community</li><li>submitted talks to conferences and adapt them to the conference, then spoken in various conferences about NoSQL and Couchbase (<a href="http://33degree.org/" target="_blank" rel="noopener noreferrer">33Degree Warsaw,</a>  <a href="http://www.johnbryce.co.il/events/nosql-big-data" target="_blank" rel="noopener noreferrer">NoSQL <!-- -->&amp;<!-- --> Big Data Israel</a>, <a href="http://devoxx.fr/" target="_blank" rel="noopener noreferrer">Devoxx France</a>, <a href="http://nosql-matters.org/" target="_blank" rel="noopener noreferrer">NoSQL Matters</a>, and many others).</li><li>met many developers during user groups and meetups. I have to say that I have been very active there, and quite happy to see that NoSQL is a very hot topic for developers, and this in all languages.</li><li>delivered <a href="http://en.wikipedia.org/wiki/Brown_bag_seminar" target="_blank" rel="noopener noreferrer">BrowBagLunch</a>es to various technical teams in companies.</li></ul><p>Yes! Be a Technical Evangelist means, at least for me, be on the road. It is very nice to meet developers from various countries, different cultures, languages, andâ€¦ this also means tasting many different types of food!</p><p>Another interesting thing when you work on a database/infrastructure layer is the fact that it is <em>technology agnostic</em>; you can access Couchbase with multiple programming languages: Java, .Net,Javascript/Node, Ruby, PHP, Python, C, â€¦ and even Go. So with this job I met developers with different backgrounds and views about application development. So yes when I am at a conference or meetup, I am suppose to "teach" something to people, but I have also learned a lot of things, and still doing it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="online-activities--reach-even-more-developers">Online activities : reach even more developers!<a class="hash-link" href="#online-activities--reach-even-more-developers" title="Direct link to heading">â€‹</a></h3><p>Meeting developers during conferences is great but it, it is also very important to produce content to reach even more people, so I have :</p><ul><li>written blog post about Couchbase usage, most of them based on feedback/questions from the community</li><li>created sample code to show how it works</li><li>monitored and answered questions on various sites and mailing lists, from Couchbase discussion forums, mailing lists, Stack Overflow, Quora and others...</li></ul><p>This task is quite interesting because it is the moment where you can reach many developers and also get feedback from users, and understand how they are using the product. I have to say that I was not as productive as I was expected, mainly because I was traveling a lot during this period.</p><p>Another important thing about online activities, is the "Couchbase Community" itself, many users of Couchbase are creating content : blog posts, samples, new applications, or features - for example I am talking with a person that is developing a <a href="http://blog.rikulo.org/posts/2013/May/General/couchclient/" target="_blank" rel="noopener noreferrer">Dart Client for Couchbase</a>, so as Technical Evangelist I am also working closely with the most active contributor.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inbound-activities--make-the-product-better-">Inbound Activities : make the product better !<a class="hash-link" href="#inbound-activities--make-the-product-better-" title="Direct link to heading">â€‹</a></h3><p>So the ultimate goal of a Technical Evangelist at Couchbase is to "convert" developers to NoSQL/Couchbase and get them to talk about Couchbase. Meeting them online or during events is a way of achieving this; but it is also great to do it directly <em>with</em> the product. This means participating to the "development" of the product or its ecosystem. Here some of the things that I have done on this topic:</p><ul><li>talked a lot with the development team, core developers, product managers, architects, â€¦ Quite exciting to work with so much smart people and have access to them. During this discussions I was able to comment the roadmap, influence features, but also it is all the time an opportunity to learn new things about Couchbase - and many other things around architecture, programming languages, take a look for example to <a href="http://damienkatz.net/2013/01/the_unreasonable_effectiveness_of_c.html" target="_blank" rel="noopener noreferrer">this nice post from Damien Katz</a> .</li><li>contributed some code, yes remember Couchbase is an open source project and it is quite easy to participate to the development. Obviously based on my skills I have only help a little bit with the Java and the Javascript SDK. So if like me you are interested to contribute to the project, take a look to this page: "<a href="http://www.couchbase.com/wiki/display/couchbase/Contributing+Changes" target="_blank" rel="noopener noreferrer">Contributing Changes</a>"</li><li>but the biggest contributions to the products are such like doc reviews, testing and writing bug reports, and this is very important and interesting, since once again it helps a lot with the product adoption by the developers.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="so-what">So what?<a class="hash-link" href="#so-what" title="Direct link to heading">â€‹</a></h3><p>As you can see the Technical Evangelist job is a quite exciting job, and one of the reason I really love it, it is simply because it allows me to do many different things, that are all related to the technology. Six months is still a very short period, I still have many things to learn and to with the team to be successful, such as be more present online (blog, sample code, technical article, screencast, ..), be accepted in more conferences, and code a little more (I have to finish for example the Couchbase Data Provider for Hibernate OGM, and many other ideas around application development experience)</p><p>Finally, Couchbase needs you ! This is a good opportunity to say that Couchbase is always looking for talents, especially in the Technical/Developer Evangelist team, so do not hesitate to look at <a href="http://www.couchbase.com/careers" target="_blank" rel="noopener noreferrer">the different job openings</a> and join the team !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Screencast : Fun with Couchbase MapReduce and Twitter]]></title>
            <link>https://tgrall.github.io/blog/2013/04/29/screencast-fun-with-couchbase-mapreduce-and-twitter</link>
            <guid>/2013/04/29/screencast-fun-with-couchbase-mapreduce-and-twitter</guid>
            <pubDate>Mon, 29 Apr 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[I have created this simple screencast to show how you can, using Couchbase do some realtime analysis based on Twitter feed.]]></description>
            <content:encoded><![CDATA[<p>I have created this simple screencast to show how you can, using Couchbase do some realtime analysis based on Twitter feed.</p><p>The key steps of this demonstration are</p><ol><li>Inject Tweets using a simple program available on my Github <a href="https://github.com/tgrall/couchbase-twitter-injector" target="_blank" rel="noopener noreferrer">Couchbase-Twitter-Injector</a></li><li>Create views to index and query the Tweets by<ul><li>User name</li><li>Tags</li><li>Date</li></ul></li></ol><p>The views that I used in this demonstration are available at the bottom of this post.</p><iframe width="675" height="380" src="https://www.youtube.com/embed/X167R0TV5QE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><p>Views:</p><iframe width="100%" frameborder="0" id="gist-1df10b10c9dd387995cb"></iframe>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Easy application development with Couchbase, Angular and Node]]></title>
            <link>https://tgrall.github.io/blog/2013/03/06/easy-application-development-with-couchbase-angular-and-node</link>
            <guid>/2013/03/06/easy-application-development-with-couchbase-angular-and-node</guid>
            <pubDate>Wed, 06 Mar 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Note : This article has been written in March 2013, since Couchbase and its drivers have a changed a lot. I am not working with/for Couchbase anymore, with no time to update the code.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Note : This article has been written in March 2013, since Couchbase and its drivers have a changed a lot. I am not working with/for Couchbase anymore, with no time to update the code.</p></blockquote><p>A friend of mine wants to build a simple system to capture ideas, and votes. Even if you can find many online services to do that, I think it is a good opportunity to show how easy it is to develop new application using a Couchbase and Node.js.</p><p>So how to start?</p><p>Some of us will start with the UI, other with the data, in this example I am starting with the model. The basics steps are :</p><ol><li>Model your documents</li><li>Create Views</li><li>Create Services</li><li>Create the UI</li><li>Improve your application by iteration</li></ol><p>The sources of this sample application are available in Gihub :</p><p><a href="https://github.com/tgrall/couchbase-node-ideas" target="_blank" rel="noopener noreferrer">https://github.com/tgrall/couchbase-node-ideas</a></p><p>Use the following command to clone the project locally :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/tgrall/couchbase-node-ideas.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Note:</em> my goal is not to provide a complete application, but to describe the key steps to develop an application.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-your-documents">Model your documents<a class="hash-link" href="#model-your-documents" title="Direct link to heading">â€‹</a></h3><p>For this application you need 3 types of document :</p><ul><li>Ideas : describes the idea with a author, title and description</li><li>Vote : the author and a comment - note that it is a choice to not put a value for the vote, in this first version if the vote exists this means user like the idea.</li><li>User : contains all the information about the user (not used in this first version of the application)</li></ul><p>You can argue that it is possible to put the votes as a list of element inside the idea document. In this case I prefer to use different document and reference the idea in the vote since we do not know how many votes/comments will have. Using different documents is also interesting in this case for the following reasons :</p><ul><li>No "concurrent" access, when a user wants to vote he does not change the idea document itself, so no need to put an optimistic locking in place.</li><li>The size of the document will be smaller and easier to cache in memory.</li></ul><p>So documents will look like:</p><iframe width="100%" frameborder="0" id="gist-79f57b13e7a637c7e62e"></iframe><p>What I really like is the fact that I can quickly create a small dataset to validate that it is correct and help me to design the view. The way I do it, I start my server, launch the Couchbase Administration Console, create a bucket, and finally insert document manually and validate the model and views.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-views">Create Views<a class="hash-link" href="#create-views" title="Direct link to heading">â€‹</a></h3><p>Now that I have created some documents, I can think about the way I want to get the information out of the database. For this application I need:</p><ul><li>The list of ideas</li><li>The votes by ideas</li></ul><p>The list of idea for this first version is very simple, we just need to emit the title:</p><iframe width="100%" frameborder="0" id="gist-989a5450811dec8f305e"></iframe><p>For the votes by ideas, I choose to create a collated view, this will give me some interesting options when I will expose them into an API/View layer. I am also for this view using <code>sum()</code> reduce function to be sure I capture the number of votes.</p><iframe width="100%" frameborder="0" id="gist-5fe945cbc12cc59e9dbd"></iframe><p>I have my documents, I have some views that allow me to retrieve the list of ideas, the number of vote by idea and count the vote... So I am ready to expose all these informations to the application using a simple API layer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-services">Create Services<a class="hash-link" href="#create-services" title="Direct link to heading">â€‹</a></h3><p>Lately I have been playing a lot with Node.js, just because it is nice to learn new stuff and also because it is really easy to use with Couchbase. Think about it Couchbase loves JSON, and Node.js object format is JSON, this means I do not have any marshaling/unmarshaling to do.</p><p>My API layer is quite simple, I just need to create a set of REST endpoint to deal with:</p><ul><li>CRUD operation on each type of document</li><li>List the different Documents</li></ul><p>The code of the services is available in branch <a href="https://github.com/tgrall/couchbase-node-ideas/tree/01-simple-services" target="_blank" rel="noopener noreferrer">01-simple-services</a>:</p><p>You can run the application <!-- -->&nbsp;<!-- -->with simple services using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; git checkout -f 01-simple-services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; node app.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and go to you browser using the <a href="http://127.0.0.1:3000" target="_blank" rel="noopener noreferrer">http://127.0.0.1:3000</a></p><p><em>About the project</em></p><p>For this project I am using only 2 node modules <a href="http://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a> and <a href="https://github.com/couchbase/couchnode" target="_blank" rel="noopener noreferrer">Couchbase</a>. The package.json file looks like :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"couchbase-ideas-management"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.0.1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"private"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"dependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"express"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.x"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"couchbase"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.0.11"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After running the install, let's code the new API interface, as said before I am using an iterative approach so for now I am not dealing with the security, I just want to get the basic actions to work.</p><p>I am starting with the endpoints to get and set the documents. I am creating a generic endpoints that take the type as URI parameter allowing user/application to do a get/post on <code>/api/vote</code>, <code>/api/idea</code>. The following code captures this:</p><iframe width="100%" frameborder="0" id="gist-42f0b936a55fd2dcefac"></iframe><p>In each case I start to test if the URI is one of the supported types (idea, vote, user) and if this is the case I call the <code>get()</code> or <code>upsert()</code> method that will do the call to Couchbase.</p><p>The <code>get()</code> and <code>upsert()</code> methods are using more or less the same approach. I test if the document exists, if the type is correct and do the operation to Couchbase. Let's focus on the <code>upsert()`` method. I call it </code>upsert()` since the same operation is used to create and update the document.</p><iframe width="100%" frameborder="0" id="gist-91858dcad51affdf3521"></iframe><p>In this function I start by testing if the document contains a type and if the type is the one expected (line 3).</p><p>Then I check if the document id is present, to see if I need to create it or not. This is one of the reason why I like to keep the id/key in the document, yes I duplicate it, but it makes the development really easy. So if I have to create a new document I have to generate a new id. I chose to create a counter for each type. this is why I call the incr function (line 7) and then use the returned value to create the document (line 10).</p><p><em>Note:</em> as you can see, my documents contain the an ID as part of the attributes. This ID is the same value that the one used to set the document (the "key"). It is not necessary a good practice to duplicate this information, and in many case the application only use the document key itself. I personally like to put the ID in the document itself too, because it simplifies a lot the development.</p><p>If the ID is present, I just call the update operation to save the document. (line 15)</p><p>The delete operation is equivalent to the get, using the delete HTTP operation.</p><p>So now I can get, insert and update the documents. I still need to do some work to deal with the lists. As you can guess, here I need to call the views. I won't go in the detail of the simple list of ideas. Let's focus on the view that shows the result of the votes.</p><iframe width="100%" frameborder="0" id="gist-6468058737ff53553ae1"></iframe><p>For this part of the application I use a small trick to use the collated view. The <code>/api/results/</code> call returns the list of ideas with their title and the total number of votes. The result looks like the following:</p><iframe width="100%" frameborder="0" id="gist-6cfdedf1410ca99744bd"></iframe><p>Note that it is also possible to select only one idea , you just need to pass the id to the call for example.</p><p>If you look in more detail the function, not only I call the view, but I build an array in which I put the idea id, label, then on the next loop, I add the number of vote. This is possible because the view is a collated view of the ideas and its votes.</p><p>I have now my REST Services, including advanced query capabilities. It is time now to use these services and build the user interface.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-ui">Create the UI<a class="hash-link" href="#create-the-ui" title="Direct link to heading">â€‹</a></h3><p>For the view I am using AngularJS, that I am packaging in the same node.js application for simplicity reason</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="simple-ui-without-loginsecurity">Simple UI without Login/Security<a class="hash-link" href="#simple-ui-without-loginsecurity" title="Direct link to heading">â€‹</a></h4><p>The code of the application without login is available branch in <a href="https://github.com/tgrall/couchbase-node-ideas/tree/02-simple-ui-no-login" target="_blank" rel="noopener noreferrer">02-simple-ui-no-login</a></p><p>You can run the application <!-- -->&nbsp;<!-- -->with simple services using the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout -f 02-simple-ui-no-login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> app.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The application is based on AngularJS and Twitter Boostrap.</p><p>I am using basic feature and packaging for Angular :</p><ul><li><code>/public/js/app.js</code> contains the module declaration and all the routes to the different views/controllers</li><li><code>/public/js/controllers.js</code> contains all the controller. I will show some of them but basically this is where that I call the services that I have created above.</li><li><code>/views/partials/</code> contains the different pages/screens used by the application.</li></ul><p>Because the application is quite simple I have not done any packaging of directive, or other functions. This is true at for AngularJS and Node.js parts.</p><p><em>Dummy user management</em></p><p>In this first version of the UI I have not yet integrated any login/security, so I fake the user login using a global scope variable that <code>$scope.user</code> that you can see in the controller <code>AppCtrl()</code>. Since I have not yet implemented the login/security, I have added at the bottom of the page a textfield where you can enter a "dummy" username to test the application. This field is inserted in the <code>/views/index.html</code> page.</p><p><em>List Views and Number of Votes</em></p><p>The home page of the application contains the list of ideas and number of votes.</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-tniNkr_Pl0Q/USidTLKHw1I/AAAAAAAAAbQ/BWtfTaAWG1w/s320/ideas-home-page.png" class="img_ev3q"></p><p>Look at the EntriesListCtrl controller and the <code>view/index.html</code> file. As you can guess this is based on the Couchbase collated view that return the list of ideas and number of vote.</p><p><em>Create/Edit an idea</em></p><p>When the user click on the New link in the navigation, the application call the view <code>/view/partials/idea-form.html</code>. <!-- -->&nbsp;<!-- -->This form is called using the "/#/idea/new" URL.</p><p>Just look at the <code>IdeaFormCtrl</code> controller to see what is happening :</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">IdeaFormCtrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">$rootScope</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> $scope</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> $routeParams</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> $http</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> $</span><span class="token parameter dom variable" style="color:#36acaa">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">idea</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">$routeParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">$http</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/api/idea/'</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> $routeParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> status</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> headers</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">idea</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">save</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">idea</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"idea"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// set the type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">idea</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/api/idea'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">$scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">idea</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $</span><span class="token dom variable" style="color:#36acaa">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">cancel</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $</span><span class="token dom variable" style="color:#36acaa">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">IdeaFormCtrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$inject</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'$rootScope'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'$scope'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'$routeParams'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'$http'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'$location'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First of all I test if the controller is called with a idea identifier in the URL ( <code>$routeParams.id</code> - line 3) . If the ID is present, I call the REST API to get the idea and set it into the <code>$scope.idea</code> variable.</p><p>Then on line 9, you can see the <code>$scope.save()</code> function that calls the REST API to save/update the idea to Couchbase. I use the line 10 and 11 to set the user and the type of data to the idea.</p><p><em>Note:</em> It is interesting to look at these lines, by adding the two attributes (user <!-- -->&amp;<!-- --> type) I modify the "schema" of my data. I am adding new fields to my document that will be stored as it is in Couchbase. Once again, you see here that I drive the data type from my application. I could take another approach and force the type in the service layer. For this example I chose to put that in the application layer, that is supposed to send the proper data types.</p><p><em>Other Interactions</em></p><p>The same approach is used to create a vote associated to a user/idea as you can see in the <code>VoteFormCtrl</code>  controller.</p><p>I won't go in all the details of all operations, I am just inviting you to look at the code of the application, and feel free to add comment to this blog post if I need to clarify other part of the application.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="iterative-development--adding-a-value-to-the-vote">Iterative Development : adding a value to the vote!<a class="hash-link" href="#iterative-development--adding-a-value-to-the-vote" title="Direct link to heading">â€‹</a></h4><p>The code of the services is available in branch 01-simple-services:</p><p>You can run the application with simple services using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; git checkout -f 03-vote-with-value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; node app.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Adding the field in the form</em></p><p>Something that I really like about working with AngularJS, Node and Couchbase is the fact that the developer uses JSON from the database to the browser.</p><p>So let's implement a new feature, where instead of having only a comment the user can give a rate to its vote from 1 to 5. Doing that is quite easy, here are the steps:</p><ul><li>Modify the UI : adding a new field</li><li>Modify the Couchabe View to use the new field</li></ul><p>This is it! AngularJS deals with the binding of the new field, so I just need to edit the <code>/views/partials/idea-form.html</code> to add this. For this I need to add the list of values in the controller and expose it into a select box in form.</p><p>The list of value located in the <code>$scope.ratings</code> variable :</p><iframe width="100%" frameborder="0" id="gist-fe7c8625a6f54dfd2425"></iframe><p>Once this is done you can add a select box into your view using the following code :</p><iframe width="100%" frameborder="0" id="gist-d4115c3dbdd5a25614d9"></iframe><p>To add the select box into the form, I just use AngularJS features:</p><ul><li>the list of value described in my controller using the <code>ng-options</code> attribute</li><li>the binding to the vote.rating field object using <code>ng-model</code> attribute.</li></ul><p>I am adding the field in my form, I bind this field to my Javascript object; and... nothing else! Since my REST API is just consuming the JSON object as it is, AngularJS will send the vote object with the new attribute.</p><p><em>Update the view to use the rating</em></p><p>Now that my database is dealing with a new attribute in the vote, I need to update my view to use this in the sum function. (I could calculate an average too, but here I want the sum of all the vote/ratings).</p><iframe width="100%" frameborder="0" id="gist-c2fb3f9a3127df75e454"></iframe><p>The only line that I have changed is the line number 7. The logic is simple, if the rating is present I emit it, if not I emit a 2, that is a medium rating for an idea.</p><p>This is a small tip that allow me to have a working view/system without having to update all the existing document if I have some.</p><p>I'll stop here for now, and will add new feature later such as User Authentication and User Management using for example <a href="http://passportjs.org/" target="_blank" rel="noopener noreferrer">Passport</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="version-and-upgrade-management">Version and Upgrade Management<a class="hash-link" href="#version-and-upgrade-management" title="Direct link to heading">â€‹</a></h3><p>If you looked closely to the code of the application the views are automatically imported from the app.js file when the application is starting.</p><p>In fact I have added a small function that check the current version installed and update the views with the correct version when needed.</p><p>You can look at the function <a href="https://github.com/tgrall/couchbase-node-ideas/blob/03-vote-with-value/app.js#L21" target="_blank" rel="noopener noreferrer"><code>initApplication()</code></a> :</p><ul><li>Load the version number from Couchbase (document with ID "<code>app.version</code>")</li><li>Check the version of if this is different</li><li>Update/Create the view (I am doing it in production mode here, in real application it will be better to use dev mode - just prefix the design document ID with <code>"dev_"</code> )</li><li>Once the view is created update/create the <code>"app.version"</code> document with the new ID.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this article we have seen how you can quickly develop your application/prototype and leverage the flexibility of NoSQL for developers. The steps to do this are:</p><ol><li>Design your document model and API (REST)</li><li>Create the UI that consumes the API</li><li>Modify your model by simply adding field into the UI</li><li>Update the view to adapt your lists to your new model</li></ol><p>In addition to this, I have also quickly explain how you can from your code control the version of your application and deploy new views (and other things) automatically.</p><p>I will post another blog post in few days to explain how you can easily integrate user management, security to your application and database easily</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to get the latest document by date/time field?]]></title>
            <link>https://tgrall.github.io/blog/2013/02/18/how-to-get-the-latest-document-by-date-slash-time-field</link>
            <guid>/2013/02/18/how-to-get-the-latest-document-by-date-slash-time-field</guid>
            <pubDate>Mon, 18 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[I read this question on Twitter, let me answer the question in this short article.]]></description>
            <content:encoded><![CDATA[<p>I read this question on Twitter, let me answer the question in this short article.</p><p>First of all you need to be sure your documents have an attribute that contains a date ;), something like :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"emp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"001"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"John Doe"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"hiredate"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Jan 1, 2013 8:32:00 AM"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To get the "latest hired employee" you need to create a view, and emit the hire date as key. The important part is to check that this date is emitted in a format that is sorted properly, for example an array of value using dateToArray function, or the time as numerical value. In the following view I am using the date as an array like that I will be able to do some grouping but this is another topic. The view looks like the following:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> meta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hiredate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dateToArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hiredate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that you have a view. You can now query it using the parameters:</p><ul><li>descending = true</li><li>limit = 1</li></ul><p>If you use Java SDK the code will look like the following :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Query</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">View</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ViewResponse</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ViewRow</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">View</span><span class="token plain"> view </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"employees"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_hiredate"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setIncludeDocs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescending</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ViewResponse</span><span class="token plain"> viewResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ViewRow</span><span class="token plain"> row </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> viewResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> documentJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally it is important when you work with views to understand how the index are managed by the server so be sure your read the chapter "<a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html" target="_blank" rel="noopener noreferrer">Index Updates and the stale Parameter</a>".</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Introduction to Collated Views with Couchbase 2.0]]></title>
            <link>https://tgrall.github.io/blog/2013/02/13/introduction-to-collated-views-with-couchbase-2-dot-0</link>
            <guid>/2013/02/13/introduction-to-collated-views-with-couchbase-2-dot-0</guid>
            <pubDate>Wed, 13 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Most of the applications have to deal with "master/detail" type of data:]]></description>
            <content:encoded><![CDATA[<p>Most of the applications have to deal with "master/detail" type of data:</p><ul><li>breweries and beer</li><li>department and employees</li><li>invoices and items</li><li>...</li></ul><p>This is necessary for example to create application view like the following:
<img loading="lazy" src="http://1.bp.blogspot.com/-vdpPEX_Wfm0/URt23LU3r1I/AAAAAAAAAbA/rDykow-eQY4/s320/Screen+Shot+2013-02-13+at+12.19.11+PM.png" class="img_ev3q"></p><p>With Couchbase, and many of the document oriented databases you have different ways to deal with this, you can:</p><ul><li>Create a single document for each master and embed all the children in it</li><li>Create a master and child documents and link them using an attribute.</li></ul><p>In the first case when all the information are stored in a single document it is quite easy to use the entire set of data and for example create a screen that shows all the information, but what about the second case?</p><p>In this post I am explaining how it is possible to use Couchbase views to deal with that an make it easy to create master/detail views.</p><p>As an ex-Oracle employee, I am using the infamous SCOTT schema with the DEPT and EMP tables, as the first example. Then at the end I will extend this to the beer sample data provided with Couchbase.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-data">The Data<a class="hash-link" href="#the-data" title="Direct link to heading">â€‹</a></h3><p>Couchbase is a schema-less database, and you can store â€œanything you wantâ€ into it, but for this you need to use JSON documents and create 2 types of document : â€œdepartmentâ€ and â€œemployeeâ€.</p><p>The way we usually do that is using a technical attribute to type the document. So the employee and department document will look as follow :</p><p>Department</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dept"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Accounting"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"city"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"New York"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Employee</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"emp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7782</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Blake"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"job"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Clark"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"manager"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7839</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2450</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"dept_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dept__10"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This shows just the document, in Couchbase you have to associate a document to a key. For this example I am using a simple pattern : <code>type__id</code>, for these documents the keys will look like the following:</p><ul><li><code>dept__10</code></li><li><code>emp__20</code></li></ul><p>You can use any pattern to create a key, for example for the employee you could chose to put an email.</p><p>Note the â€œdept_idâ€ attribute in the employee document. This is the key of the department; you can see that as the â€œforeign keyâ€. But remember, the relationship between the department and employee documents are managed entirely by the application, Couchbase Server does not enforce it.</p><p>I have created a Zip file that contains all the data, you can download it from <a href="http://db.tt/NsUfweBM" target="_blank" rel="noopener noreferrer">here</a>; and import the data into Couchbase using the <code>cbdocloader</code> utility. To import the data run the following command from a terminal window:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./cbdocloader -n 127.0.0.1:8091 -u Administrator -p password -b default ~/Downloads/emp-dept.zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can learn more about the <code>cbdocloader</code> tool in <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-cmdline-cbdocloader.html" target="_blank" rel="noopener noreferrer">the documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-view">The View<a class="hash-link" href="#the-view" title="Direct link to heading">â€‹</a></h3><p>Queries inside Couchbase are based on <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-basics.html" target="_blank" rel="noopener noreferrer">views</a>; and views build indexes, so we have to create a view, a "collated view" to be exact.</p><p>The idea behing a collated view is to produce an index where the keys are ordered so that a parent id appears first followed by its children. So we are generating an index that will look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_10, Accounting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_10, Blake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_10, Miller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_20, Research</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_20, Adams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEPT_20, Ford</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is in fact quite easy to do with Couchbase views. The only trick here is to control the order and be sure the master is always the first one, just before its children.</p><p>So to control this we can create an compound key that contains the department id, a "sorting" element and the name (beer or brewery)</p><p>So the map function of the view looks like the following:</p><iframe width="100%" frameborder="0" id="gist-bfb625e0ff175b1778bc"></iframe><p>The key is composed of:</p><ul><li>the department id extracted from the department document itself or from the employee document depending of the type of document</li><li>an arbitrary number that is used to control the ordering. I put 0 for the department, 1 for the employee</li><li>the name of the department or the employee, this also allows to sort the result by name</li></ul><p>In addition to the key, this view is used to emit some information about the salary of the employees. The salary is simply the sum of the salary plus thecommission when exists. The result of the view looks like:</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-wLmoUPfo-f8/URtierY_qBI/AAAAAAAAAaw/i3DMCvilCcU/s400/Screen+Shot+2013-02-13+at+10.52.30+AM.png" class="img_ev3q"></p><p>With this view you can now use the result of the view to build report for your application. It is also possible to use parameters in your query to see only a part of the data, for example by departement, using for example <code>startkey=["dept__20",0]&amp;amp;endkey=["dept__20",2]</code> to view only the data -Department and Employees- of the deparment 20-Research.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-beer-sample-application">The Beer Sample Application<a class="hash-link" href="#the-beer-sample-application" title="Direct link to heading">â€‹</a></h3><p>You can create an equivalent view for the beer sample application where you print all the breweries and beers in the same report. The view is called "<code>all_with_beers</code>" in the design document "<code>brewery</code>". The view looks like:</p><iframe width="100%" frameborder="0" id="gist-4944154"></iframe><p>Once you have publish it in production you can use it in the Beer Sample application, for this example I have modified the Java sample application.</p><p><strong>Create a servlet to handle user request and on the /all URI.</strong></p><p>The "BreweryAndBeerServlet" that calls the view using the following code :</p><iframe width="100%" frameborder="0" id="gist-4944142"></iframe><p>The result of the query is set into the HttpRequest and the all.jsp page is executed. The JSP uses JSTL to print the information using the following code:</p><iframe width="100%" frameborder="0" id="gist-c163f57778d663632e87"></iframe>The JSP gets the items from the HTTP Request and loops on each items, then based on the type of the item the information is printed. The final result looks like :<p><img loading="lazy" src="http://1.bp.blogspot.com/-vdpPEX_Wfm0/URt23LU3r1I/AAAAAAAAAbA/rDykow-eQY4/s320/Screen+Shot+2013-02-13+at+12.19.11+PM.png" class="img_ev3q"></p><p>This extension to the Beer Sample application is available here :<a href="https://github.com/tgrall/beersample-java/tree/BreweriesAndBeers" target="_blank" rel="noopener noreferrer">https://github.com/tgrall/beersample-java/tree/BreweriesAndBeers</a></p>]]></content:encoded>
            <category>couchbase</category>
            <category>nosql</category>
            <category>view</category>
            <category>json</category>
        </item>
        <item>
            <title><![CDATA[Getting started with Couchbase and node.js on Windows]]></title>
            <link>https://tgrall.github.io/blog/2013/01/04/getting-started-with-couchbase-and-node-dot-js-on-windows</link>
            <guid>/2013/01/04/getting-started-with-couchbase-and-node-dot-js-on-windows</guid>
            <pubDate>Fri, 04 Jan 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[In a previous post I have explained how to use Couchbase and Node.js on OS X. Since it is quite different on Windows here another article about it.]]></description>
            <content:encoded><![CDATA[<p>In a previous post I have explained how to use Couchbase and Node.js on OS X. Since it is quite different on Windows here another article about it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-couchbase-server-20">Install Couchbase Server 2.0<a class="hash-link" href="#install-couchbase-server-20" title="Direct link to heading">â€‹</a></h3><p>If you have not installed Couchbase Server already, do the following :</p><ol><li>Download Couchbase Server from <a href="http://www.couchbase.com/download" target="_blank" rel="noopener noreferrer">here</a></li><li>Run the installer</li><li>Configure the database at <a href="http://localhost:8091/" target="_blank" rel="noopener noreferrer">http://localhost:8091</a> (if you have issue take a look to <a href="http://tugdualgrall.blogspot.fr/2012/12/what-to-do-if-your-couchbase-server.html" target="_blank" rel="noopener noreferrer">this article</a>)</li></ol><p>These steps are documented in the <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-getting-started-install-win.html" target="_blank" rel="noopener noreferrer">Couchbase Server Manual</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-node">Install Node<a class="hash-link" href="#install-node" title="Direct link to heading">â€‹</a></h3><p><strong>Install latest version of node</strong></p><p>It is quite easy to install Node.js using the Windows installer provided at <a href="http://nodejs.org/" target="_blank" rel="noopener noreferrer">http://nodejs.org</a>.</p><p>Once you have installed node, you can test is using the command line interface:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;gt; console.log(process.version);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v0.8.16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Node is installed. So far so good !</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-couchnode">Install Couchnode<a class="hash-link" href="#install-couchnode" title="Direct link to heading">â€‹</a></h3><p>Couchnode, the Couchbase Client Library for Node.js, is a native module. The tool used to install native modules is <code>node-gyp</code>.  So to install couchnode you need to install :</p><ul><li>node-gyp</li><li>python</li><li>Visual Studio to have access to a C/C++ compiler</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-node-gyp">Install node-gyp<a class="hash-link" href="#install-node-gyp" title="Direct link to heading">â€‹</a></h4><p>The node-gyp module is easy to install and you can install it using npm using the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g node-gyp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <em>-g</em> parameter indicates that this module will be installed globally and added to your <code>%PATH%</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-python">Install Python<a class="hash-link" href="#install-python" title="Direct link to heading">â€‹</a></h4><p>GYP uses Python to generate the project, so you need to install it on your environment. I have installed <a href="http://www.python.org/download/releases/2.7.3/" target="_blank" rel="noopener noreferrer">Python 2.7.3</a> using the Windows installer.</p><p><strong>Install Visual Studio</strong></p><p>Finally you need a C/C++ compiler, the best way to get it is to install Visual Studio. As you probably know I am not a Windows expert and I do not know a lot about Microsoft development tools. I have downloaded Visual Studio Express the free development tools from <a href="http://www.microsoft.com/visualstudio/eng/downloads" target="_blank" rel="noopener noreferrer">here</a>; it was sufficient.</p><p><strong>Install Libcouchbase for Windows</strong></p><p>Couchnode uses libcouchbase the C client library, so before running the npm install for Couchbase, you need to install libcouchbase itself.</p><p>You can download it from <a href="http://www.couchbase.com/develop/c/current" target="_blank" rel="noopener noreferrer">Couchbase site</a>. The Windows versions are located in the left menu of the page. Download the zip file, that matches your environment. I have downloaded the "Windows, 64-bit MSVC 10".</p><p>Node-gyp will look for all the dependencies (DLL, library headers) into <code>c:\couchbase</code> directory, so you need to unzip the file in this folder. This location comes from the <a href="https://github.com/couchbase/couchnode/blob/master/binding.gyp#L7" target="_blank" rel="noopener noreferrer">binding.gyp</a> file of the couchnode project.</p><p><strong>Install and Test Couchnode itself!</strong></p><p>Let's check what we have done so far; we have installed:</p><ul><li>Node</li><li>node-gyp</li><li>Python</li><li>Visual Studio</li><li>Libcouchbase</li></ul><p>We are now ready to install and use couchnode itself. For this we can create a new node project.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install couchbase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The install command will:</p><ul><li>Create a node_modules folder and put couchbase client library in it</li><li>When installing/building couchnode on Windows I had the following warning :</li></ul><p>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppBuild.targets(1138,5): warning MSB8012: TargetExt(.dll) does not match the Linker's Output
File property value (.node). This may cause your project to build incorrectly.
To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
<!-- -->[C:\Users\tgrall\node\node_modules\couchbase\build\couchbase_impl.vcxproj]</p><p>This is only a warning and as far as I know, it is not a blocker. At the end of the log you should see:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">couchbase@0.0.10 node_modules\couchbase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ bindings@1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ request@2.11.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You have successfully installed couchnode.</p><p>Let's now write a small test. Create a <code>test.js</code> file with the following content:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain">  driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'couchbase'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"username"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"password"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"hostname"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost:8091"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"bucket"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> cb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'foo'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'{"server" : "couchbase", "version" : 2 }'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> meta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> doc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run this with the command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node test.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the following text in your console :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ server: 'couchbase', version: 2 }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this article you have learned how to:</p><ul><li>Install Couchbase</li><li>Install Node</li><li>Install and configure node-gyp</li><li>Install and use Couchbase and Node</li></ul><p>all this on Windows 7.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Couchbase 101: Create views (MapReduce) from your Java application]]></title>
            <link>https://tgrall.github.io/blog/2012/12/30/couchbase-101-create-views-mapreduce-from-your-java-application</link>
            <guid>/2012/12/30/couchbase-101-create-views-mapreduce-from-your-java-application</guid>
            <pubDate>Sun, 30 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[When you are developing a new applications with Couchbase 2.0, you sometimes need to create view dynamically from your code. For example you may need this when you are installing your application, writing some test, or you can also use that when you are building frameworks, and wants to dynamically create views to query data. This post shows how to do it.]]></description>
            <content:encoded><![CDATA[<p>When you are developing a new applications with Couchbase 2.0, you sometimes need to create view dynamically from your code. For example you may need this when you are installing your application, writing some test, or you can also use that when you are building frameworks, and wants to dynamically create views to query data. This post shows how to do it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h3><ul><li><a href="http://www.couchbase.com/download" target="_blank" rel="noopener noreferrer">Couchbase Server 2.0</a></li><li><a href="http://www.couchbase.com/develop/java/current" target="_blank" rel="noopener noreferrer">Couchbase Jave Client Library 1.1.x</a></li><li><a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-sampledata-beer.html" target="_blank" rel="noopener noreferrer">Beer Sample dataset</a></li></ul><p>If you are using Maven you can use the following information in your <code>pom.xml</code> to add the Java Client library:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Couchbase Maven Repository</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">default</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://files.couchbase.com/maven2/</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">false</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enabled</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">snapshots</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repositories</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">couchbase-client</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">jar</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See online at <a href="https://gist.github.com/4337172" target="_blank" rel="noopener noreferrer">https://gist.github.com/4337172</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-manage-views-from-java">Create and Manage Views From Java<a class="hash-link" href="#create-and-manage-views-from-java" title="Direct link to heading">â€‹</a></h3><p>The full Maven project is available on <a href="https://github.com/tgrall/couchbase-java-101/tree/master/java-document-design/" target="_blank" rel="noopener noreferrer">Github</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-couchbase-cluster">Connect to Couchbase Cluster<a class="hash-link" href="#connect-to-couchbase-cluster" title="Direct link to heading">â€‹</a></h4><p>The first thing to do when you want to create a view from Java is obviously to connect to the cluster.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">CouchbaseClient</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">uri</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> uris </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LinkedList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">uri</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://127.0.0.1:8091/pools"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">CouchbaseClient</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CouchbaseClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uris</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"beer-sample"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// put your code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Error connecting to Couchbase: "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>Create a list of URIs to different nodes of the cluster - lines 5-6. (In this example I am working on a single node)</li><li>Connect to the bucket, in our case <code>beer-sample</code> -line 9. You can include the password if the bucket is protected ( this is not the case here so I am sending an empty string)</li></ol><p>If you are looking for more information about Couchbase and Java, you can read this article from DZone : <a href="http://architects.dzone.com/articles/hello-world-couchbase-and-java" target="_blank" rel="noopener noreferrer">Hello World with Couchbase and Java</a>.</p><p>Let's now talk about Couchbase views. You use views/map-reduce functions to index and query data from Couchbase Server based on the content of the JSON document you store inside Couchbase. For more information about views you can look at the <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-basics.html" target="_blank" rel="noopener noreferrer">"view basics" chapter</a> of the Couchbase Server Manual.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-views-from-java">Create Views from Java<a class="hash-link" href="#create-views-from-java" title="Direct link to heading">â€‹</a></h4><p>Creating a view from Java is really easy : the Java Client Library contains all the classes and methods to do it. As a concrete use case we will use the Application that is described in the <a href="http://www.couchbase.com/docs/couchbase-sdk-java-1.1/tutorial.html" target="_blank" rel="noopener noreferrer">Couchbase Java Tutorial</a>.</p><p>When you follow this tutorial, you need to manually create some views, as you can see <a href="http://www.couchbase.com/docs/couchbase-sdk-java-1.1/preps-views.html" target="_blank" rel="noopener noreferrer">here</a>. In this example, we will create our map function and directly in our Java code and then store it to Couchbase Server. The tutorial asks you to create the following artifacts:</p><ul><li>a view named "by_name"</li><li>in the design document named <code>"dev_beer"</code> (development mode)</li><li>and the map function which looks like the following :</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> meta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following code allows you to do it from Java:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">DesignDocument</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ViewDesign</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DesignDocument</span><span class="token plain"> designDoc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DesignDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"dev_beer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> viewName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_name"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> mapFunction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"function (doc, meta) {\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"  if(doc.type &amp;&amp; doc.type == \"beer\") {\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"    emit(doc.name);\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"  }\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"}"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ViewDesign</span><span class="token plain"> viewDesign </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ViewDesign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">mapFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">designDoc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getViews</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewDesign</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createDesignDoc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> designDoc </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create a design document using the <code>com.couchbase.client.protocol.views.DesignDocument</code> class - line 4.</li><li>Create a view using <code>com.couchbase.client.protocol.views.ViewDesign</code> class with a name and the map function - line 14.</li><li>You can add this view to a design document - line 15</li><li>Finally save the document into the cluster using the <code>CouchbaseClient.createDesignDoc</code> method.</li></ul><p>If you need to use a reduce function (built-in or custom) you just need to pass to the ViewDesign constructor as 3rd parameter.</p><p>When developing view, from Java or from any other tool/language be sure you understand what are the best practices, and the life cycle of the index. This is why I am inviting you to take a look to the following chapters in the Couchbase documentation:</p><ul><li><a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html" target="_blank" rel="noopener noreferrer">View Writing Best Practice</a> : for example in the map function, I do not emit any value. I only emit a key (the beer name).</li><li><a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-datastore.html" target="_blank" rel="noopener noreferrer">Views and Stored Data</a></li><li><a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-types.html" target="_blank" rel="noopener noreferrer">Development and Production Views</a> : in the view above, I have created the view in the development environment (<code>dev_</code> prefix) allowing me to test and use it on a subset of the data (cluster/index)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-view">Using the view<a class="hash-link" href="#using-the-view" title="Direct link to heading">â€‹</a></h4><p>First of all, the view that you just created is in "development mode", and by default the Java client SDK will only access the view when it is in "production mode". This means that when you are calling a view from your application it will search it into the production environment. So before connecting to Couchbase cluster you need to setup the <code>viewmode</code> to development.</p><p>This is done using the <code>viewmode</code> environment variable from the Java SDK, that could be set using the following methods:</p><ul><li>In your code, add this line <strong>before</strong> the client connects to the cluster : <code>System.setProperty("viewmode", "development");</code></li><li>At the command line <code>-Dviewmode=development</code></li><li>In a properties file <code>viewmode=development</code></li></ul><p>Once it is done you can call the view using the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">couchbase</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">client</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">protocol</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">views</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"viewmode"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"development"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// before the connection to Couchbase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">View</span><span class="token plain"> view </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"beer"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"by_name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setIncludeDocs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setStale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">Stale</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FALSE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ViewResponse</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ViewRow</span><span class="token plain"> row </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// deal with the document/data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code queries the view you just created. This means Couchbase Server will generate an index based on your map function, will query the server for results. In this case, we specifically want to set a limit of 20 results and also get the most current results by setting Stale.FALSE.</p><ul><li>Set the <code>viewmode</code> to <code>development</code> - line 4</li><li>Get the view using the <code>CouchbaseClient.getView()</code> method -line 6-. As you can see I just use the name beer for the design document (and not dev_beer, Couchbase will know where to search since I am in development mode)</li><li>Create a query and set a limit (20) and ask the SDK to return the document itself
<code>setIncludeDocs(true)</code> -line 8- The document will be returned from Couchbase server in the most efficient way</li><li>Ask the system to update the index before returning the result using query.setStale( Stale.FALSE <code>); </code>-line 9-. Once again be careful when you use setStale method. Just to be sure here is the documentation about it : <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html" target="_blank" rel="noopener noreferrer">Index Updates and the stale Parameter</a></li><li>Execute the query - line 10</li><li>And use the result - lines 11-13</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this article, you have learned:</p><ul><li>How to create Couchbase views from Java</li><li>Call this view from Java</li><li>Configure development/production mode views from Couchbase Java Client Library</li></ul><p>This example is limited to the creation of a view, you can take a look to the other methods related to design documents and views if you want to manage your design documents : <code>getDesignDocument()</code>, <code>deleteDesignDocument()</code>, ...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[What to do if your Couchbase Server does not start?]]></title>
            <link>https://tgrall.github.io/blog/2012/12/26/what-to-do-if-your-couchbase-server-does-not-start</link>
            <guid>/2012/12/26/what-to-do-if-your-couchbase-server-does-not-start</guid>
            <pubDate>Wed, 26 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[Working with the Couchbase 2.0.0 release you may have issues when trying to access the Web Admin Console or simply starting the server. This is due to the way Couchbase Server uses the IP address/hostname during the installation process. So when you have one of the following errors :]]></description>
            <content:encoded><![CDATA[<p>Working with the Couchbase 2.0.0 release you may have issues when trying to access the Web Admin Console or simply starting the server. This is due to the way Couchbase Server uses the IP address/hostname during the installation process. So when you have one of the following errors :</p><ul><li>On Windows, Server is not working at all, even after installation. You can access the sever on port 8092 (Couchbase API port), but cannot on port 8091</li><li>You have the following error when accessing the console <code>"[10:02:02] IP address seems to have changed. Unable to listen on 'ns_1@10.0.2.15'"</code></li></ul><p><img loading="lazy" src="http://2.bp.blogspot.com/-OXj1bGEZTGg/UNs8QBx6X-I/AAAAAAAAAaI/TproFMOQXcE/s320/cb-20-ip-address-error.png" class="img_ev3q"></p><ul><li>When you try to restart the server it does not start and you have the following error message in the error log :
<code>"Configured address '10.0.2.15' seems to be invalid. Will refuse to start for safety reasons"</code></li></ul><p>Some of these issues are related to a known issue on Windows ( see <a href="http://www.couchbase.com/issues/browse/MB-7417" target="_blank" rel="noopener noreferrer">MB-7417</a> that will be fixed in 2.0.1) or the fact that Couchbase server does not support change of the IP address after installation.  This is documented in the section â€œ<a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-bestpractice-cloud-ip.html" target="_blank" rel="noopener noreferrer">Using Couchbase in the Cloud: Handling Changes in IP Addresses</a>â€ of the Couchbase Server Manual. This article explains what should be done when configuring Couchbase Server on Windows, but you can do equivalent steps on any platform using the shell scripts available on Linux and/or Mac OS X.</p><p>Once you have installed Couchbase, you can see in the console that the IP address of your server is used :
<img loading="lazy" src="http://3.bp.blogspot.com/-7wJEnnsZNlA/ULzAYBU09tI/AAAAAAAAAZk/PxZGdUbqo6k/s320/Screen+Shot+2012-12-03+at+4.07.03+PM.png" class="img_ev3q"></p><p>Typically the address 192.168.0.97 is stored in the configuration of Couchbase. If your server receives a new address from the DHCP server, Couchbase will not work anymore. In this article you will see how you can configure Couchbase to use another IP address or Hostname.</p><p><strong>Important:</strong> The steps that follow will completely destroy any data and configuration from the node, so it is best to start with a fresh Couchbase install. If you can not, you should backup your data using the file based backup-restore documented <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-backup-restore.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-a-hostname-in-hosts-file">Setting up a hostname in hosts file<a class="hash-link" href="#setting-up-a-hostname-in-hosts-file" title="Direct link to heading">â€‹</a></h3><p>The best practice is to register Couchbase using a hostname instead of an IP Address. For this you will need to associate this hostname to an IP address in the <code>hosts</code> file.</p><p>Since the <code>hosts</code> file is part of the system, <em>you need to edit it as administrator</em>. You have different approaches to achieve this:</p><p>The following steps explain the easiest way to do it:  </p><ol><li>Click â€œStart Menuâ€</li><li>Navigate to â€œAll Programs <!-- -->&gt;<!-- --> Accessoriesâ€</li><li>â€œRight Clickâ€ on â€œNotepadâ€ (or your favorite text editor)</li><li>Click â€œRun as Administratorâ€</li></ol><p><img loading="lazy" src="http://4.bp.blogspot.com/-gxd-rAWLqd8/ULy-vIxak3I/AAAAAAAAAZc/00pNi3Iu0uc/s320/Screen+Shot+2012-12-03+at+3.57.16+PM.png" class="img_ev3q"></p><p>You can now open the file <code>C:\Windows\System21\drivers\etc\hosts</code></p><p>Add a new entry with a host name that will be used by Couchbase Server for example something like :</p><p><code>127.0.0.1    couchbase-node1.mycompany.com</code></p><p>Here I am using the local address (127.0.0.1) like that I won't have to change it even when my IP address changes. (This is useful when you are working in a single node mode)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-couchbase-to-use-the-hostname-or-new-ip-address">Configure Couchbase to use the hostname or new IP address<a class="hash-link" href="#configure-couchbase-to-use-the-hostname-or-new-ip-address" title="Direct link to heading">â€‹</a></h3><p>During the installation Couchbase has been registered as a Windows Service. To be able to associate Couchbase to the new hostname (or IP address) the service needs to re-configured and reinstalled.</p><p>This could be done using the scripts provided with the product. To run the scripts you need to do it as administrators, you can do it with one of the following methods:</p><ul><li>Search for the file and right click and select <code>Run as Administrator</code> (documented below)</li><li>Run the terminal as administrator and run all the command from there (documented below)</li><li>Search for the file and run it using <code>Ctrl+Shift+Enter</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-1--using-the-start-menu-and-search-program">Option 1 : Using the Start Menu and Search Program<a class="hash-link" href="#option-1--using-the-start-menu-and-search-program" title="Direct link to heading">â€‹</a></h4><p><strong>Stop Couchbase Server Windows Service</strong></p><p>The first thing to do, is to stop this service that is automatically started after the installation:</p><ol><li>Click <code>Start Menu</code></li><li>Type <code>Services</code> in the Search Program form</li><li>Click on <code>Services</code></li><li>In the Services Application navigate to <code>CouchbaseServer</code></li><li>Right Click and Click on <code>Stop</code></li><li>Couchbase is now stopped.</li></ol><p><strong>Edit the Service Register script</strong></p><p>Note: Due to a small formatting issue (See <a href="http://www.couchbase.com/issues/browse/MB-7322" target="_blank" rel="noopener noreferrer">MB-7322</a>), Notepad could not be used, a solution is to take <a href="http://notepad-plus-plus.org/" target="_blank" rel="noopener noreferrer">Notepad++</a> or any other advanced editing tool.</p><ol><li>As Administrator, open the <code>C:\Program Files\Couchbase\Server\bin\service_register.bat</code> file with your favorite editor. To open the editor as Administrator you can use the approach described in the previous step.</li><li>Edit the line 9 to replace <code>%IP_ADDR%</code> by your hostname, the line should look like: <code>NS_NAME=ns_1@couchbase-node1.mycompany.com</code></li><li>Save the file</li></ol><p><strong>Delete existing configuration and logs</strong></p><ol><li>Using the file explorer, go into: <code>C:\Program Files\Couchbase\Server\var\lib\couchbase\mnesia</code></li><li>Delete its content (Select All and Right Click)</li></ol><p><strong>Register the new Configuration as Service</strong></p><ol><li>Using the file explorer, go into: <code>C:\Program Files\Couchbase\Server\bin</code></li><li>Right Click on <code>service_reregister.bat</code></li><li>Click on <code>Run as Administrator</code></li></ol><p>This script recreates the Couchbase Server Windows Service and starts it automatically.</p><p><strong>Check the configuration</strong></p><ol><li>Launch your Internet Browser</li><li>Go to http://localhost:8091</li><li>Follow the Couchbase Installation Steps</li><li>Once install connect to the console</li><li>Go to <code>Server Nodes</code> tab</li><li>Check that the server name is now <code>couchbase-node1.mycompany.com</code></li></ol><p><img loading="lazy" src="http://3.bp.blogspot.com/-tAn4jv_cdrk/ULzOA53roDI/AAAAAAAAAZ0/r8gts5uSdbU/s320/Screen+Shot+2012-12-03+at+5.06.07+PM.png" class="img_ev3q"></p><p>Your Couchbase node is now configured to use the hostname of your server.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-2--using-the-command-line">Option 2 : Using the Command Line<a class="hash-link" href="#option-2--using-the-command-line" title="Direct link to heading">â€‹</a></h4><p><strong>Launch Command Prompt as Administrator</strong></p><ol><li>Click <code>Start Menu</code></li><li>Type <code>Command Prompt</code> in the Search program form</li><li>Type <code>Ctrl+Shift+Enter</code></li><li>Go to <code>C:\Program Files\Couchbase\Server\bin</code> (or other location if you have chosen another location during installation)</li></ol><p>You are now ready to do the administration tasks.</p><ol><li><p>Execute the <code>service_stop.bat</code></p></li><li><p>Edit the Service Register script</p></li><li><p>Open <code>service_register.bat</code></p></li><li><p>Edit the line 9 to replace <code>%IP_ADDR%`` by your hostname (or your IP address), the line should look like: </code>set NS_NAME=<a href="mailto:ns_1@couchbase-node1.mycompany.com" target="_blank" rel="noopener noreferrer">ns_1@couchbase-node1.mycompany.com</a>`</p></li><li><p>Save the file3.  Delete the content of: <code>C:\Program Files\Couchbase\Server\var\lib\couchbase\mnesia</code></p></li><li><p>Execute the `service_reregister.bat</p></li></ol><p>This script recreates the Couchbase Server Windows Service and starts it automatically.</p><p><strong>Check the configuration</strong></p><ol><li>Launch your Internet Browser</li><li>Go to http://localhost:8091</li><li>Follow the Couchbase Installation Steps</li><li>Once install connect to the console</li><li>Go to <code>Server Nodes</code> tab</li><li>Check that the server name is now <code>couchbase-node1.mycompany.com</code></li></ol><p><img loading="lazy" src="http://3.bp.blogspot.com/-tAn4jv_cdrk/ULzOA53roDI/AAAAAAAAAZ0/r8gts5uSdbU/s320/Screen+Shot+2012-12-03+at+5.06.07+PM.png" class="img_ev3q"></p><p>Your Couchbase node is now configured to use the hostname of your server.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Adventure...]]></title>
            <link>https://tgrall.github.io/blog/2012/12/01/new-adventure-dot-dot-dot</link>
            <guid>/2012/12/01/new-adventure-dot-dot-dot</guid>
            <pubDate>Sat, 01 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[Yesterday was my last day at eXo... I have been working at eXo since 2008, and we have achieved many exciting things such as building eXo Platform, the open source social platform, and the Cloud-IDE allowing developers to build, test, and deploy applications online.]]></description>
            <content:encoded><![CDATA[<p>Yesterday was my last day at eXo... I have been working at eXo since 2008, and we have achieved many exciting things such as building <a href="http://www.exoplatform.com/" target="_blank" rel="noopener noreferrer">eXo Platform</a>, the open source social platform, and the <a href="http://www.cloud-ide.com/" target="_blank" rel="noopener noreferrer">Cloud-IDE</a> allowing developers to build, test, and deploy applications online.</p><p>It was a great experience for me, but it is time for me to jump into a new adventure...</p><p>I am joining <a href="http://www.couchbase.com/" target="_blank" rel="noopener noreferrer">Couchbase</a>&nbsp;<!-- -->as a Technical Evangelist for the EMEA Region. When I have started to work with NoSQL engines (starting with Google BigTable for <a href="http://www.resultri.com/" target="_blank" rel="noopener noreferrer">Resultri</a>) I really enjoyed the experience and the flexibility that it gives to the developers. Then I choose to work on a documented oriented database because it looks very natural to me, and evaluate the clustering capabilities.<!-- -->&nbsp;<!-- -->This is how I discovered<!-- -->&nbsp;<a href="http://www.couchbase.com/" target="_blank" rel="noopener noreferrer">Couchbase</a>&nbsp;<!-- -->and its community.</p><p>This new job is a great opportunity for me to do the things that I really like about software:</p><ul><li>Coding applications using different languages and frameworks</li><li>Understanding the sysops/devops related challenges when using a new product/technology</li><li>And finally probably the most important part; sharing it with others!</li></ul><p>I look forward to sharing what I like about NoSQL and Couchbase and discuss with others about their experience or needs around NoSQL.<!-- -->&nbsp;</p><p>See you soon online and in real life during conferences and meetups!</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-jxz50giRSQM/ULnaWxkHkyI/AAAAAAAAAZM/s0y7CFw4jUk/s320/couch-logo-company-page.png" alt="Couchbase Logo" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Couchbase : Create a large dataset using Twitter and Java]]></title>
            <link>https://tgrall.github.io/blog/2012/11/05/couchbase-create-a-large-dataset-using-twitter-and-java</link>
            <guid>/2012/11/05/couchbase-create-a-large-dataset-using-twitter-and-java</guid>
            <pubDate>Mon, 05 Nov 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[An easy way to create large dataset when playing/demonstrating Couchbase -or any other NoSQL engine- is to inject Twitter feed into your database.]]></description>
            <content:encoded><![CDATA[<p>An easy way to create large dataset when playing/demonstrating Couchbase -or any other NoSQL engine- is to inject Twitter feed into your database.</p><p>For this small application I am using:</p><ul><li><a href="http://www.couchbase.com/downloads-all#couchbase-server-2-0" target="_blank" rel="noopener noreferrer">Couchbase Server 2.0 Server</a></li><li><a href="http://www.couchbase.com/develop/java/next" target="_blank" rel="noopener noreferrer">Couchbase Java SDK</a> (will be installed by Maven)</li><li><a href="http://twitter4j.org/" target="_blank" rel="noopener noreferrer">Twitter4J</a> (will be installed by Maven)</li><li><a href="https://dev.twitter.com/docs/streaming-apis" target="_blank" rel="noopener noreferrer">Twitter Streaming API</a> called using Twitter4J</li></ul><p>In this example I am using Java to inject Tweets into Couchbase, you can obviously use another langage if you want to.</p><p>The sources of this project are available on my Github repository <a href="https://github.com/tgrall/couchbase-twitter-injector" target="_blank" rel="noopener noreferrer"> Twitter Injector for Couchbase</a> you can also download the Binary version <a href="https://github.com/downloads/tgrall/couchbase-twitter-injector/CouchbaseTwitterInjector.jar" target="_blank" rel="noopener noreferrer">here</a>, and execute the application from the command line, see <a href="http://www.blogger.com/blogger.g?blogID=785895453418216075#runTheApp" target="_blank" rel="noopener noreferrer">Run The Application paragraph</a>. Do not forget to create your Twitter oAuth keys (see next paragraph)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-oauth-keys">Create oAuth Keys<a class="hash-link" href="#create-oauth-keys" title="Direct link to heading">â€‹</a></h4><p>The first thing to do to be able to use the Twitter API is to create a set of keys. If you want to learn more about all these keys/tokens take a look to the oAuth protocol : <a href="http://oauth.net/" target="_blank" rel="noopener noreferrer">http://oauth.net/</a></p><p>1- Log in into the Twitter Development Portal : <a href="https://dev.twitter.com/" target="_blank" rel="noopener noreferrer">https://dev.twitter.com/</a></p><p>2- Create a new Application</p><p>Click on the "Create an App" link or go into the "User Menu <!-- -->&gt;<!-- --> My Applications <!-- -->&gt;<!-- --> Create a new application"</p><p>3- Enter the Application Details information</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-zxOaF_YLaO0/UJhoZOhjoJI/AAAAAAAAAVk/7HnRfFRSKxs/s320/couchbase-twitter-001.png" class="img_ev3q"></p><p>4- Click "Create Your Twitter Application" button</p><p>Your application's OAuth settings are now available :</p><p><img loading="lazy" src="http://3.bp.blogspot.com/-ZdaST7c-HdY/UJhqi8WJMGI/AAAAAAAAAVs/ndeXQwc4F0k/s320/couchbase-twitter-002.png" class="img_ev3q"></p><p>5- Go down on the Application Settings page and click on the "Create My Access Token" button</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-WIW2AN93n6k/UJhrfZV1AVI/AAAAAAAAAV0/OseQ1EOpg9k/s320/couchbase-twitter-003.png" class="img_ev3q"></p><p>You have now all the necessary information to create your application:</p><ul><li>Consumer key</li><li>Consumer secret</li><li>Access token</li><li>Access token secret</li></ul><p>These keys will be uses in the <code>twitter4j.properties</code> file when running the Java application from the command line</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-java-application">Create the Java Application<a class="hash-link" href="#create-the-java-application" title="Direct link to heading">â€‹</a></h4><p>The following code is the main code of the application:</p><iframe width="100%" frameborder="0" id="gist-4022377"></iframe><p>Some basic explanation:</p><ul><li>The <code>setUp()</code> method simply reads the <code>twitter4j.properties</code> file from the classpath to build the Couchbase connection string.</li><li>The <code>injectTweets</code> opens the Couchbase connection -line 76- and calls the TwitterStream API.</li><li>A Listener is created and will receive all the <code>onStatus(Status status)</code> from Twitter. The most important method is onStatus() that receive the message and save it into Couchbase.</li><li>One interesting thing : since Couchbase is a JSON Document database it allows your to just take the JSON String and save it directly. <code>cbClient.add(idStr,0 ,twitterMessage);</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="packaging">Packaging<a class="hash-link" href="#packaging" title="Direct link to heading">â€‹</a></h4><p>To be able to execute the application directly from the Jar file, I am using the assembly plugin with the following informations from the pom.xml:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">archive</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">manifest</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mainclass</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.couchbase.demo.TwitterInjector</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mainclass</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">manifest</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">manifestentries</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">class-path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">.</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">class-path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">manifestentries</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">archive</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Some information:</p><ul><li>The mainClass entry allows you to set which class to execute when running java -jar command.</li><li>The Class-Path entry allows you to set the current directory as part of the classpath where the program will search for the twitter4j.properties file.</li><li>The assembly file is also configure to include all the dependencies (Twitter4J, Couchbase client  SDK, ...)</li></ul><p>If you do want to build it from the sources, simply run :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will create the following Jar file ./target/CouchbaseTwitterInjector.jar</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-java-application">Run the Java Application<a class="hash-link" href="#run-the-java-application" title="Direct link to heading">â€‹</a></h4><p>Before running the application you must create a twitter4j.properties file with the following information :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">twitter4j.jsonStoreEnabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oauth.consumerKey=[YOUR CONSUMER KEY]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oauth.consumerSecret=[YOUR CONSUMER SECRET KEY]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oauth.accessToken=[YOUR ACCESS TOKEN]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oauth.accessTokenSecret=[YOUR ACCESS TOKEN SECRET]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">couchbase.uri.list=http://127.0.0.1:8091/pools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">couchbase.bucket=default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">couchbase.password=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save the properties file and from the same location run:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jar -jar [path-to-jar]/CouchbaseTwitterInjector.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will inject Tweets into your Couchbase Server. Enjoy !</p>]]></content:encoded>
            <category>couchbase</category>
            <category>nosql</category>
            <category>java</category>
            <category>twitter</category>
        </item>
        <item>
            <title><![CDATA[Create a Simple Node.js and Couchbase application... on OS X]]></title>
            <link>https://tgrall.github.io/blog/2012/09/24/create-a-simple-node-dot-js-and-couchbase-application-dot-dot-dot-on-os-x</link>
            <guid>/2012/09/24/create-a-simple-node-dot-js-and-couchbase-application-dot-dot-dot-on-os-x</guid>
            <pubDate>Mon, 24 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[NOTE: The Couchbase Node.js Client Library is currently changing. I will update this article and source code once the API is stable.]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>NOTE:</strong> The Couchbase Node.js Client Library is currently changing. I will update this article and source code once the API is stable.</p></blockquote><p>I am currently playing a little bit with Node.js . It is quite fun! In this article I won't go in a a very complex application but just give you the basic steps to create your first Node.js+Couchbase application... on Mac OS X.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h3><p><strong>Couchbase 2.0 Beta:</strong></p><p>You can take a look the first steps of my <a href="http://tugdualgrall.blogspot.fr/2012/07/couchbase-101-install-store-and-query.html" target="_blank" rel="noopener noreferrer">previous article</a> to install Couchbase. The basics steps are:</p><ul><li>Download <a href="http://www.couchbase.com/couchbase-server/beta" target="_blank" rel="noopener noreferrer">Couchbase 2. 0 Beta</a></li><li>Start the server (Run the "Couchbase Server" application)</li><li>Configure the server</li></ul><p><strong>Other Components :</strong></p><ul><li>Node.js</li><li>Couchbase Client Library (C version)</li></ul><p>To install these two components I am using homebrew (aka brew).</p><p><em>_Hmmm, what is homebrew?</em></p><p>Homebrew is a package manager for OS X that allows you to install, update and uninstall unix tools using very simple commands. You can find more information on the <a href="http://mxcl.github.com/homebrew/" target="_blank" rel="noopener noreferrer">homebrew site</a>. So let's start by installing homebrew itself.</p><p>From a terminal window:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then let's install node</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and finally install Couchbase Client Library</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install https://github.com/couchbase/homebrew/raw/preview/Library/Formula/libcouchbase.rb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="coding">Coding<a class="hash-link" href="#coding" title="Direct link to heading">â€‹</a></h3><p>You are now ready to start the development of your application.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-very-simple-application">Create a very simple application<a class="hash-link" href="#create-a-very-simple-application" title="Direct link to heading">â€‹</a></h4><p>1- Create a folder for your application</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir sample-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd sample-app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2- Create an <code>app.js</code> file and copy the following code:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"Content-Type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text/plain"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello World"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">onRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&amp;gt; SERVER STARTED"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I won't go in all the details about a node application; for this I invite you to read <a href="http://www.nodebeginner.org/" target="_blank" rel="noopener noreferrer">The Node Beginnger Book</a>.</p><p>3- Start your server</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should be able to access your application using http://localhost:8080</p><p>To stop your server just use ctrl+c.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-use-couchbase-client-for-nodejs">Install and use Couchbase client for node.js<a class="hash-link" href="#install-and-use-couchbase-client-for-nodejs" title="Direct link to heading">â€‹</a></h4><p>npm is the <a href="https://npmjs.org/" target="_blank" rel="noopener noreferrer">node package manager</a>, that allows you to easily install node.js modules and manage dependencies for your application (I will present the dependency management in another post)</p><p>1- Install the Couchbase Client for node.js, using the following command</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install couchbase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Couldn't be simpler! You can find more information about Couchbase Client for node on its <a href="https://npmjs.org/package/couchbase" target="_blank" rel="noopener noreferrer">npm page</a>.</p><p>2- Lets now insert some data into Couchbase</p><p>Create a simple function that inserts some documents, and call it after server startup:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load the Couchbase driver and connect to the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'couchbase'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">driver</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Couchbase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"localhost:8091"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// insert employees in Couchbase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> emps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Thomas"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Development"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Jane"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Marketing"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Insert the data in Couchbase using the add method ()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> emps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> cas</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">amp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 12 : LCB_KEY_EEXISTS  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Failed to store object:\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Lines 4-5 : load the Couchbase driver and connect to the server. I am using the complete list of parameter <code>connect("server:port", "username", "password", "bucket"). But you can use the short version </code>connect("server:port")`</li><li>Lines 12-30 : just create JSON object that will be pushed in Couchbase.</li><li>Line 33 : the application just read each element of the array and insert them into Couchbase using the <code>couchbase.add()</code> function.</li><li>Lines 34-38 : the <code>couchbase.add()</code> function set the value only if it does not exist. If the value exists the error code LCB_KEY_EEXISTS (12) is return by the callback function</li></ul><p>3- Start your server - <code>node app.js</code> - and check using the Admin Console that employees are inserted into your Couchbase instance. Note that node.js applications do not support hot deployment, so you need to bounce your application when changing the code.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-use-couchbase-view">Create and use Couchbase View<a class="hash-link" href="#create-and-use-couchbase-view" title="Direct link to heading">â€‹</a></h4><p>Let's now create and use a view to return the employee list.</p><p>1- All Couchbase views are accessible using a simple REST API, but you can also use the node.js plugin : <a href="https://npmjs.org/package/baseview" target="_blank" rel="noopener noreferrer">baseview</a>; so let's install this module:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install baseview</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Create a new view from your application</li></ol><p>You can use the Admin Console to create the view, but it is also possible to do it from your node.js code. So let's add the view programmatically in the insertData function.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load the Couchbase driver and connect to the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'couchbase'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">driver</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Couchbase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"localhost:8091"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load the baseview module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> baseview </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'baseview'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://localhost:8092'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">bucket</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'default'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//create a new view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setDesign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'design_employees'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'basic_list'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">'map'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"function (doc, meta) { if(doc.type == 'employee') {emit(meta.id, doc.name);}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This new code, create a new view in Couchbase server:</p><ul><li>line 7 : load the module and set the properties to call the view services</li><li>line 16-17 : call the <code>basevie.setDesign()</code> method, that create a view.</li><li>line 18 : set the map function that list all the employees</li></ul><p>3- Let's now call the view in the onRequest function.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"Content-Type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text/plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"See list of employees in the console"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">'descending'</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">'include_docs'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'design_employees'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'basic_list'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> employee </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">employee</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Calling the view is quite simple :</p><ul><li>lines 6-8 : create an object to send view parameters. In this example I am just using descending, and include_docs to get the full document as part of the response. You can find the list of all the parameters you can use in the <a href="http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-querying-rest-api.html" target="_blank" rel="noopener noreferrer">Couchbase documentation : Querying Using the REST API</a> (The <a href="https://github.com/PatrickHeneise/baseview/blob/master/baseview.js" target="_blank" rel="noopener noreferrer">baseview</a> module is using REST API to call the views).</li><li>line 10-14 : just loop on the result content, returned in the data variable, and print the employee information in the console.</li></ul><p>Note: Because of the asynchronous nature of node.js, and my lack of experience with node, I was not able to send the list of employee to the HTTP response.</p><p>In another article I will explain how to integrate Couchbase with an node.js application based on Express and Socket.io, where I list the Employee in my the Web page.</p><p>Below, the complete code of this simple node.js application:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'couchbase'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> cb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">driver</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Couchbase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"localhost:8091"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"default"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> baseview </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'baseview'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://127.0.0.1:8092'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">bucket</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'default'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"Content-Type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text/plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"See list of employees in the console"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'descending'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'include_docs'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'design_employees'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'basic_list'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> employee </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">employee</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//create a new view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setDesign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'design_employees'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'basic_list'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">'map'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"function (doc, meta) { if(doc.type == 'employee') {emit(meta.id, doc.name);}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// insert employees in Couchbase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> emps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Thomas"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Development"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Jane"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Marketing"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Insert the data in Couchbase using the add method ()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> emps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> cas</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 12 : LCB_KEY_EEXISTS  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Failed to store object:\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">onRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&gt; SERVER STARTED"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Couchbase 101 : install, store and query data]]></title>
            <link>https://tgrall.github.io/blog/2012/07/06/couchbase-101-install-store-and-query-data</link>
            <guid>/2012/07/06/couchbase-101-install-store-and-query-data</guid>
            <pubDate>Fri, 06 Jul 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p>In this post I just want to show how easily is to get
started with Couchbase, and also explain how to â€œqueryâ€ the data. The basic
steps of this tutorial are:</p><ol><li>Install Couchbase</li><li>Create Data</li><li>Query Data</li></ol><p>I will try to post more articles, if I have time to show how to use Couchbase from your applications (starting with Java).</p><p>Prerequisites :</p><ul><li>Could not be simpler : Couchbase 2.0 available <a href="http://www.couchbase.com/downloads-all" target="_blank" rel="noopener noreferrer">here</a>. (Currently in Developer Preview)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="couchbase-101--insert-and-query-data">Couchbase 101 : Insert and Query data<a class="hash-link" href="#couchbase-101--insert-and-query-data" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h3><p>I am using Couchbase on Mac OS X, so let me describe the installation in this environment. If you are using other operating system just take a look to the Couchbase documentation.</p><p>Couchbase installation is very (very!) fast:</p><ol><li>Download the Mac OS X Zip file.</li><li>Double-click the downloaded Zip installation file to extract the contents. This will create a single file, the Couchbase.app application.</li><li>Drag and Drop the Couchbase.app to your chosen installation folder, such as the system Applications folder.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-and-configure-couchbase-server">Start and Configure Couchbase Server<a class="hash-link" href="#start-and-configure-couchbase-server" title="Direct link to heading">â€‹</a></h3><p>To start Couchbase Server, just double click on the Couchbase Server. Once the server is started, a new icon is added in the OS X Menu to indicate that the Server is up and running.</p><p>You can now configure your Couchbase instance, for this you just need to access the Admin Console, available at the following location <a href="http://127.0.0.1:8091/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8091</a> (change the IP address if needed) or simply by going in the Couchbase menu and click on Open Admin Console entry.</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-UokiHs1DlFw/T_VpJHmn8KI/AAAAAAAAAUo/oy7bh5w9nOw/s1600/couchbase-menu.png" class="img_ev3q"></p><ol><li>Welcome Screen : Click Setup</li><li>Set the disk and cluster configuration. On my instance I keep the default location for the on disk storage. Just configure the size of the memory usage for your instance, for example 800Mb. So far, we have a single instance, so no need to join a cluster.</li><li>Choose to generate sample data. This will be interesting to learn more about data and views.</li><li>Create <code>the default</code> bucket (use for testing only). A bucket is used by Couchbase to store data. It could be compared to a â€œdatabaseâ€ in RDBMS world.</li><li>Configure update notifications to be alerted when new version of Couchbase is released</li><li>Configure the server with a final step with the administrator username and password</li><li>When this is done you are automatically redirected to the Admin Console.</li></ol><p><img loading="lazy" src="http://2.bp.blogspot.com/-_a1iynqdk8w/T_VpTwa5qEI/AAAAAAAAAUw/ZGBHZsC6x_8/s320/install-step8.png" class="img_ev3q"></p><p>This is it! You are ready to use your Couchbase server.</p><p>Couchbase has many interesting features, especially around scalability and elasticity but for not in this article let's focus on the basics :</p><ul><li>Insert some data and query them</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="insert-data">Insert Data<a class="hash-link" href="#insert-data" title="Direct link to heading">â€‹</a></h3><p>Couchbase has many ways to manipulate data from you favorite programming language using the different client libraries : Java, Python, PHP, Ruby, .Net, C. For now let's use the Admin Console to create and query data.</p><p>Couchbase can store any type of data, but when you need to manipulate some data with a structure the best way is to use JSON Documents. So let's use the console and create documents.</p><p>To create new documents in your database, click on the "Data Buckets" tab. If you have installed the sample you see 2 buckets: <code>default</code> and <code>gamesim-sample</code>.</p><p>Let's create a new documents in the <code>default</code> bucket:</p><ol><li>Click on Documents button</li><li>Click on Create Document</li><li>Since each document must have an id for example 100.</li><li>Couchbase save the document and add some metadata such as <!-- -->_<!-- -->rev, $flags, expiration</li><li>Add new attributes to the document that describe an employee : Name, Departement and Salary, then save it. You just need to update the JSON object with values</li></ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"100"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Thomas"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Repeat the operation with some other employees :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Jason</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Technology</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Mayla</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Technology</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">7000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Nisha</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Marketing</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">9500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Randy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Technology</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">6000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">501</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Ritu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">Accounting</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5400</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You have now a list of employees in your database. That was easy isn't? Let's now query them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-data">Query Data<a class="hash-link" href="#query-data" title="Direct link to heading">â€‹</a></h3><p>Access document directly from its ID</p><p>First of all you can quickly access a document using a simple HTTP request using its id. For example to access the Mayla with the id 300 just enter the following URL:</p><ul><li><code>http://127.0.0.1:8092/default/300</code>  </li></ul><p>In this URL you have :</p><ul><li><code>8092</code> is the Couch API REST port used to access data (where 8091 is the port for the Admin console)</li><li><code>default</code> is the bucket in which the document is stored</li><li><code>300</code> is the id of the document</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="search-your-data-with-queries">Search your data with queries<a class="hash-link" href="#search-your-data-with-queries" title="Direct link to heading">â€‹</a></h4><p>So we have seen how you can access one document. But what if my need is :</p><ul><li>"Give me all the employee of the Technology department"</li></ul><p>To achieve such query it is necessary to create views. The views are used by Couchbase server to index and search your data. A view is a Map function written in JavaScript, that will generate a key value list that is compliant with logic you put in the Map function. Note that this key,value is now indexed and sorted by key. This is important when you query your data.</p><p>So let's create a new view from the Admin Console:</p><ol><li>Click on the Views tab (be sure you are on the default bucket)</li><li>Click on the "Create Development View"</li><li>Enter the Document and View name:</li></ol><ul><li>Document Name : _design/dev_dept</li><li>View Name : dept</li></ul><ol start="4"><li>Cick Save</li><li>Click on your View to edit it</li></ol><p>Since we need to provide the list of employees that are part of a the Technology department, we need to create a view that use the <u>department as key</u>, so the map function looks like :</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dept</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save the view</p><p>This function takes the document and create a list that contains the "dept" as key and null as value. The value itself is not that important in our case. A simple rule will be : do not put too much data in the value since at the end Couchbase server creates an index with this map. Will see that Couchbase allows developer to easily get the document information when accessing a view.</p><p>Click on the "Show Results" button, the result will look like:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"501"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Accounting"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"400"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Marketing"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"100"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"300"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As we have seen in earlier it is possible to access the document using a single URL, it is the same for views. You can for example access the view we have just created using the following URL:</p><ul><li><a href="http://127.0.0.1:8092/default/_design/dev_dept/_view/dept" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8092/default/_design/dev_dept/_view/dept
</a></li></ul><p>Now it is possible to use query parameter to filter the results using the key parameter with the value entered using a JSON String :</p><ul><li><a href="http://127.0.0.1:8092/default/_design/dev_dept/_view/dept?key=%22Technology%22" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8092/default/_design/dev_dept/_view/dept?key="Technology"</a></li></ul><p>The result of this query is now :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"300"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You have many other parameters you can use when accessing a view to control the size, the time out, .... One of them is quite interesting is include_docs that ask Couchbase to include the full content of the document in the result. So if you call :</p><ul><li><a href="http://127.0.0.1:8092/default/_design/dev_dept/_view/dept?key=%22Technology%22&amp;include_docs=true" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8092/default/_design/dev_dept/_view/dept?key="Technology"<!-- -->&amp;<!-- -->include_docs=true</a></li></ul><p>The result is :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-1de6e6751608eada0000003200000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Jason"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5500</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"300"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"300"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-f3e44cee742bfae10000003200000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Mayla"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-05780359aac8f3790000003200000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Randy"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let's now create a little more complicated view to answer the following business requirement:</p><ul><li>"Give me all the employee with a salary between 5000 and 6000"</li></ul><p>So now you know that you need to create a new view with the salary as key let's with the following Map function:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">doc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">salary</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Couchbase is automatically sorting the key when creating/updating the index so, let's use the <code> startkey</code>  and  <code>endkey</code> parameter when calling the view. So let's call the view with from the following URL:</p><ul><li><a href="http://127.0.0.1:8092/default/_design/dev_salary/_view/salary?startkey=5000&amp;endkey=6000&amp;include_docs=true" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8092/default/_design/dev_salary/_view/salary?startkey=5000<!-- -->&amp;<!-- -->endkey=6000<!-- -->&amp;<!-- -->include_docs=true</a></li></ul><p>The result is :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"total_rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"rows"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"100"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"100"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-0f33580d780014060000002e00000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Thomas"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"501"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"501"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-b1fe5bc79637720e0000003100000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Ritu"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Accounting"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5400</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5500</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"200"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-1de6e6751608eada0000003200000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Jason"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5500</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"key"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"doc"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"_id"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"500"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"_rev"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1-05780359aac8f3790000003200000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$flags"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"$expiration"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Randy"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"dept"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Technology"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"salary"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this short article you have learn how to:</p><ul><li>Install Couchbase*   Create data using the Admin Console</li><li>Query data with views</li></ul><p>When I get more time I will write another article that do the same from Java, and other languages.</p><hr><p>Note from @ingenthr</p><blockquote><p>Nice blog! Note that while querying the REST interface directly is okay, we've really tried to make it easy by having high-level language support for queries in each of the official client libraries. They're all listed over at <a href="http://www.couchbase.com/develop" target="_blank" rel="noopener noreferrer">http://www.couchbase.com/develop</a></p></blockquote>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[eXo Platform: Internationalization of content]]></title>
            <link>https://tgrall.github.io/blog/2012/05/11/exo-platform-internationalization-of-content</link>
            <guid>/2012/05/11/exo-platform-internationalization-of-content</guid>
            <pubDate>Fri, 11 May 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[In this screencast I explain the support of multi-lingual content of eXo Platform 3.5. The different features that you can see in this video are:]]></description>
            <content:encoded><![CDATA[<p>In this screencast I explain the support of multi-lingual content of eXo Platform 3.5. The different features that you can see in this video are:</p><ul><li>Support of multiple languages from URL</li><li>Configure the eXo File Explorer to add support for multi-lingual content (new button)</li><li>Content translation</li><li>Add new language to the platform</li></ul><iframe width="675" height="380" src="https://www.youtube.com/embed/huzPX3UPvrY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Twitter Boostrap 2 and Google Maps]]></title>
            <link>https://tgrall.github.io/blog/2012/04/11/twitter-boostrap-2-and-google-maps</link>
            <guid>/2012/04/11/twitter-boostrap-2-and-google-maps</guid>
            <pubDate>Wed, 11 Apr 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[Like many developers I am using Twitter Boostrap for my Web applications. Using this framework has been very helpful for me, since I am really not a good HTML/CSS developer. For now, on my site Resultri I am using the default look and feel, will customize it later.]]></description>
            <content:encoded><![CDATA[<p>Like many developers I am using <a href="http://twitter.github.com/bootstrap/" target="_blank" rel="noopener noreferrer">Twitter Boostrap</a> for my Web applications. Using this framework has been very helpful for me, since I am really not a good HTML/CSS developer. For now, on my site <a href="http://www.resultri.com/" target="_blank" rel="noopener noreferrer">Resultri</a> I am using the default look and feel, will customize it later.</p><p>Lately, I wanted to integrate Google Map to my application, and when testing it, I had the bad surprise to see that the Controls and WindowInfo are not printed correctly as you can see in the screen shot below:</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-J9_mgk-eCmw/T4VCyQ86jFI/AAAAAAAAAT0/rc6uKm5qyQM/s400/Screen+Shot+2012-04-11+at+10.29.11+AM.png" class="img_ev3q"></p><p>This is not a big issue at all, just a conflict on the <strong><code>img</code></strong> tag and its style (max-width) coming from Twitter Bootstrap. The quick fix :</p><ul><li>override the style of the <strong><code>img</code></strong> tag for the div that contains your map.</li></ul><p>For example in my case the div for my map is define as:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">resultriMap</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You just need to add a new style to your page with the following definition:</p><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token selector" style="color:#00009f">&lt;style</span><span class="token selector combinator" style="color:#00009f">&gt;</span><span class="token selector" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token selector" style="display:inline-block;color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token selector" style="color:#00009f"></span><span class="token selector id" style="color:#00009f">#resultriMap</span><span class="token selector" style="color:#00009f"> img</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">max-width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After adding this to my page the map is correctly printed as you can see in the following screenshot :</p><p><img loading="lazy" src="http://3.bp.blogspot.com/-BZje60RpKWo/T4VESYjt7gI/AAAAAAAAAT8/Az1xV8Xv2Dg/s320/Screen+Shot+2012-04-11+at+10.29.42+AM.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SAP Cloud Inside : Build and Run Applications in the Cloud]]></title>
            <link>https://tgrall.github.io/blog/2012/02/19/sap-cloud-inside-build-and-run-applications-in-the-cloud</link>
            <guid>/2012/02/19/sap-cloud-inside-build-and-run-applications-in-the-cloud</guid>
            <pubDate>Sun, 19 Feb 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[Last week I was invited to present eXo Cloud IDE during the SAP Cloud Inside. This SAP Community event was a great opportunity to discuss about the cloud with an interesting point of view: the impact of the cloud for SAP customers (especially administrators and developers).]]></description>
            <content:encoded><![CDATA[<p>Last week I was invited to present eXo Cloud IDE during the SAP Cloud Inside. This SAP Community event was a great opportunity to discuss about the cloud with an interesting point of view: the impact of the cloud for SAP customers (especially administrators and developers).</p><p>During this presentation I have introduced the <a href="http://www.cloud-ide.com/" target="_blank" rel="noopener noreferrer">eXo Cloud IDE</a>, and I did a demonstration in which O have built and deployed applications : Open Social Gadgets, Ruby on Rails and Java/Spring, and explain how it could be extended to SAP business services.</p><p>Here the slides that I have used during this presentation:</p><p><strong><a href="http://www.slideshare.net/tgrall/sap-cloud-inside-develop-and-deploy-on-the-cloud" target="_blank" rel="noopener noreferrer" title="SAP Cloud Inside : Develop and Run on the Cloud">SAP Cloud Inside : Develop and Run on the Cloud</a></strong></p><p>Remember that you can register yourself to the <a href="http://www.cloud-ide.com/" target="_blank" rel="noopener noreferrer">eXo Cloud IDE</a> Service and start develop application from your browser.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[eXo Platform : Integrate Twitter and eXo Activity Stream]]></title>
            <link>https://tgrall.github.io/blog/2012/01/19/exo-platform-integrate-twitter-and-exo-activity-stream</link>
            <guid>/2012/01/19/exo-platform-integrate-twitter-and-exo-activity-stream</guid>
            <pubDate>Thu, 19 Jan 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[eXo Platform 3.5 provides many extension points and API for developers, allowing them to create very cool stuff.]]></description>
            <content:encoded><![CDATA[<p>eXo Platform 3.5 provides many extension points and API for developers, allowing them to create very cool stuff.</p><p>I have developed a small extension that allows any user to associate his Twitter account to his eXo Platform account. This extension simply post on your Twitter account when you write a message with a special hashtag (#tw).</p><p>This is a very quick development that I have done while waiting for my kids, so I still have things to integrate to provide complete feature, but this is a good example to show how you can extend the platform.</p><p>You can view it in action in this video:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/KN0jsOdauPU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><p>You can download the source code and the binaries from this <a href="https://github.com/tgrall/exo-twitter-integration" target="_blank" rel="noopener noreferrer">GitHub project</a>. I hope to find some time to complete the feature, and document this use case.</p><p>Enjoy!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to watch YouTube videos offline (on OS X)?]]></title>
            <link>https://tgrall.github.io/blog/2011/12/05/how-to-watch-youtube-videos-offline-on-os-x</link>
            <guid>/2011/12/05/how-to-watch-youtube-videos-offline-on-os-x</guid>
            <pubDate>Mon, 05 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Lately I have been traveling a lot, and I was not able to access the internet all the time; but I still want to look at some YouTube video, for example the greate Google I/O Sessions...]]></description>
            <content:encoded><![CDATA[<p>Lately I have been traveling a lot, and I was not able to access the internet all the time; but I still want to look at some YouTube video, for example the greate Google I/O Sessions...</p><p>My needs are simple :</p><ul><li>running on OS X (Lion)</li><li>download the video easily</li><li>no need to convert the file (to be able to read the file as soon as possible)</li><li>free</li></ul><p>After some basic research, I found an easy way to achieve this using the following softwares:</p><ul><li><a href="http://www.enolsoft.com/free-youtube-downloader-hd-for-mac.html" target="_blank" rel="noopener noreferrer">Enolsoft Free YouTube Downloader HD</a> : this software allows you to download easily the YouTube FLV on your hard drive.</li><li><a href="http://www.videolan.org/vlc/download-macosx.html" target="_blank" rel="noopener noreferrer">VLC Media Player</a> : to play the FLV file locally.</li></ul><p><img loading="lazy" src="http://2.bp.blogspot.com/-8j7u3NgOGkQ/TtyWZDO6-_I/AAAAAAAAATQ/rNkRF1JNUYE/s400/capture-youtube-video.png" class="img_ev3q"></p><p>Enjoy!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Installing Memcached on Mac OS X and using it in Java]]></title>
            <link>https://tgrall.github.io/blog/2011/11/20/installing-memcached-on-mac-os-x-and-using-it-in-java</link>
            <guid>/2011/11/20/installing-memcached-on-mac-os-x-and-using-it-in-java</guid>
            <pubDate>Sun, 20 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>In this article I will explain how you can:</p><ol><li>Install and Configure Memcached on Mac OS X</li><li>Use Memcached in your Java Application</li></ol><p>I won't go in too much detail about the benefits of using a distributed cache in your applications, but let's at least provide some use cases for applications that are running in the context of an enterprise portal, eXo Platform in my case - <em>surprising isn't?</em> And I will show this in another post.</p><p>We have many reasons to use a cache (distributed or not), in the context of enterprise portal, let's take a look to some of these reasons:</p><ul><li>A portal is used to aggregate data in a single page. These data could come from different sources : Web Services, Database, ERP, ..... and accessing the data in real time could be costly. So it will be quite interesting to cache the result of the call when possible.</li><li>If the portal is used to aggregate many data from many sources, it is sometime necessary to jump into another application to continue some operation. A distributed and shared cache could be used to manage some context between different applications running in different processes (JVM or even technologies)
These are two example where a shared cache could be interesting for your portal based applications, we can find many other reason.</li></ul><p>Note that the Portlet API (JSR-286) contains already a cache mechanism that cache the HTML fragment, and that eXo Platform also provide a <a href="http://docs.jboss.org/exojcr/1.14.0-CR4/developer/en-US/html/ch-cache.html" target="_blank" rel="noopener noreferrer">low level cache</a>, based on <a href="http://www.jboss.org/jbosscache" target="_blank" rel="noopener noreferrer">JBoss Cache</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-and-configuration">Installation and Configuration<a class="hash-link" href="#installation-and-configuration" title="Direct link to heading">â€‹</a></h3><p><strong>Installing Memcached from sources</strong></p><p>You can find some information about Memcached installation on the Memcached <a href="http://code.google.com/p/memcached/wiki/NewStart" target="_blank" rel="noopener noreferrer">Wiki</a>. The following steps are the steps that I have used on my environment.</p><p>As far as I know, Memached is not available as package for Mac OS X. I am still on Snow Leopard (10.6.8), and I have installed XCode and all development tools. I have use the article "Installing memcached 1.4.1 on Mac OS X 10.6 Snow Leopard" from <a href="https://wincent.com/wiki/Installing_memcached_1.4.1_on_Mac_OS_X_10.6_Snow_Leopard" target="_blank" rel="noopener noreferrer">wincent.com</a>. For simplicity reason I have duplicate the content and updated to the latest releases.</p><p>1- Create a working directory :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir memcachedbuild</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd memcachebuild</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2- Install <a href="http://libevent.org/" target="_blank" rel="noopener noreferrer">libevent</a> that is mandatory for memcached</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -O http://www.monkey.org/~provos/libevent-1.4.14-stable.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ tar xzvf libevent-1.4.14-stable.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd libevent-1.4.14-stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo make install&amp;nbsp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3- Install memcached</p><p>Go back to your install directory (<em>memcachedbuild</em>)</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -O http://memcached.googlecode.com/files/memcached-1.4.10.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ tar xzvf memcached-1.4.10.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd memcached-1.4.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You are now ready to use memcached that is available at <code>/usr/local/bin/memcached</code>.</p><p>This allows you to avoid changing to the pre-installed memcached located in /usr/bin, if you want to replace it instead of having you own install, just run the configure command with the following parameter: <code>./configure --prefix=/usr</code></p><p><strong>Starting and testing Memcached</strong></p><p>Start the memcached server, using the following command line:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /usr/local/bin/memcached -d -p 11211</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command starts the memcached server as demon (-d parameter), on the TCP port 11211 (this is the default value). You can find more about the memcached command using <code>man memcached</code>.</p><p>It is possible to connect and test your server using a telnet connection. Once connected you can set and get object in the cache, take a look to the following paragraph.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ telnet 127.0.0.1 11211</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Trying 127.0.0.1...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connected to tgrall-server.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Escape character is '^]'.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set KEY 0 600 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is my value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STORED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VALUE KEY 0 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is my value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">END</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>set</code> command allows you to put a new value in the cache using the following syntax:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">set &lt;key&gt;  &lt;flags&gt; &lt;expiration_time&gt;  &lt;number_of_bytes&gt; [noreply] \n\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>key : the key used to store the data in the cache</li><li>flags : a 32 bits unsigned integer that memcached stored with the data</li><li>expiration_time : expiration time in seconds, if you put 0 this means no delay</li><li>number_if_bytes : number of bytes in the data block</li><li>noreply : option to tell the server to not return any value</li><li>value : the value to store and associate to the key.</li></ul><p>This is a short view of the documentation located in your source directory <code>/memcachedbuild/memcached-1.4.10/doc/protocol.txt</code>.</p><p>The <code>get</code> command allows you to access the value that is associated with the key.</p><p>You can check the version of memcahed you are running by calling the <code>stats</code> command in your telnet session.</p><p>Your memcached server is up and running, you can now start to use it inside your applications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-java-application-with-memcached">Simple Java Application with Memcached<a class="hash-link" href="#simple-java-application-with-memcached" title="Direct link to heading">â€‹</a></h3><p>The easiest way to use memcached from your Java applications is to use a client library. You can find many <a href="http://code.google.com/p/memcached/wiki/Clients#Java" target="_blank" rel="noopener noreferrer">client libraries</a>. In this example I am using <a href="http://code.google.com/p/spymemcached/" target="_blank" rel="noopener noreferrer">spymemcached</a> developped by the people from <a href="http://www.couchbase.com/" target="_blank" rel="noopener noreferrer">Couchbase</a>.</p><p>1- Adding SpyMemcached to your Maven project</p><p>Add the repository to you pom.xml (or you setting.xml)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spy</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Spy Repository</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">default</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://files.couchbase.com/maven2/</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">repository</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then the dependency to your pom.xml</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spy</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spymemcached</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactid</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.7.3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2- Use SpyMemcache client in your application</p><p>The following code is a simple Java class that allows you to enter the key and the value and set it in the cache.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">grallandco</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">blog</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">BufferedReader</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">IOException</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Console</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">InputStreamReader</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Level</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">logging</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Logger</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">net</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spy</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">memcached</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">AddrUtil</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">net</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spy</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">memcached</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">MemcachedClient</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Test</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Enter the new key : "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">BufferedReader</span><span class="token plain"> reader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BufferedReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">InputStreamReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">in</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">String</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readLine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Enter the new value : "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">String</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readLine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">MemcachedClient</span><span class="token plain"> cache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MemcachedClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AddrUtil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAddresses</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"127.0.0.1:11211"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// read the object from memory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Get Object before set :"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// set a new object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Get Object after set :"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IOException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Level</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SEVERE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So when executing the application you will see something like :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Enter the new key : CITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter the new value : Paris, France</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2011-11-16 15:22:09.928 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=/127.0.0.1:11211, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2011-11-16 15:22:09.932 INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@5b40c281</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get Object before set :null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get Object after set :Paris, France</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also access the object from a Telnet session:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">get CITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VALUE CITY 0 13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Paris, France</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">END</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use any Java class in your application, the only thing to do is to make this class serializable.</p><p>This is it for the first post about memcached and Java,<!-- -->&nbsp;<!-- --> I am currently working on a small example integrating Web Services call, Portlets and memcached.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JAX-RS: Jersey and JSON single element arrays]]></title>
            <link>https://tgrall.github.io/blog/2011/09/02/jax-rs-jersey-and-json-single-element-arrays</link>
            <guid>/2011/09/02/jax-rs-jersey-and-json-single-element-arrays</guid>
            <pubDate>Fri, 02 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Last week I have been struggling with a small issue while developing a service using Jersey.]]></description>
            <content:encoded><![CDATA[<p>Last week I have been struggling with a small issue while developing a service using Jersey.</p><p>The goal of this service is to provide JSON object to my Web application, so called directly from the browser. This service returns in a JSON array a list of Employees, something like:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"employee"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"email"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"jdoe@example.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"firstName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"lastName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"email"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"mmajor@example.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"firstName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Mary"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"lastName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Major"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So an "employee" array, this is perfect and expected, but when my service returns a single element the returned object looks like:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"employee"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"email"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"jdoe@example.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"firstName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"lastName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see brackets <strong>[...]</strong> are missing around the employee item. This is an issue since your client code is expecting an array.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-solution">A solution...<a class="hash-link" href="#a-solution" title="Direct link to heading">â€‹</a></h4><p>My application is using Jersey, the JAX-RS Reference Implementation, and JAXB for the serialization of Java Objects to JSON, as I have explained in a <a href="http://tugdualgrall.blogspot.com/2010/02/create-and-deploy-jax-rs-rest-service.html" target="_blank" rel="noopener noreferrer">previous blog post</a>. I found a solution to this by creating a new <a href="http://jersey.java.net/nonav/documentation/latest/json.html#d4e919" target="_blank" rel="noopener noreferrer">JAXB Context Resolver</a>.</p><p>In this resolver I can control how the JSON object should be generated, here is my implementation :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">grallandco</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">employee</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">service</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">converter</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ext</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ContextResolver</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ext</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Provider</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">xml</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">JAXBContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sun</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">jersey</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">api</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">json</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">JSONConfiguration</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sun</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">jersey</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">api</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">json</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">JSONJAXBContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">JAXBContextResolver</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ContextResolver</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token class-name">JAXBContext</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">JAXBContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Class</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> types </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">JAXBContextResolver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">JSONJAXBContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">JSONConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mapped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">arrays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    types</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">JAXBContext</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Class</span><span class="token plain"> objectType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Class</span><span class="token plain"> type </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> types</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> objectType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First of all I declare this new class as a <a href="http://jersey.java.net/nonav/apidocs/1.7/jersey/index.html?javax/ws/rs/ext/Provider.html" target="_blank" rel="noopener noreferrer"><code>@Provider</code></a> to say that it this class is of interest to the JAX-RS runtime.</p><p>I put in the <code>types</code> array the list of the Java classes that are concerned by the serialization (line#13). Then I create the ContextResolved with the different options that fulfill my requirements. You can take a look to the <a href="http://jersey.java.net/nonav/apidocs/1.7/jersey/index.html?com/sun/jersey/api/json/JSONJAXBContext.html" target="_blank" rel="noopener noreferrer"><code>JAXBContextResolver</code></a> Javadoc to see all the possible options available.</p><p>With this class, the service now returned the following JSON String:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"employee"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">"email"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"jdoe@example.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"firstName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string-property property" style="color:#36acaa">"lastName"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find a complete example (NetBeans project) <a href="https://github.com/tgrall/Sample-REST-Service-using-JSON" target="_blank" rel="noopener noreferrer">here</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to create a new Content List Template for eXo Platform 3]]></title>
            <link>https://tgrall.github.io/blog/2011/08/31/how-to-create-a-new-content-list-template-for-exo-platform-3</link>
            <guid>/2011/08/31/how-to-create-a-new-content-list-template-for-exo-platform-3</guid>
            <pubDate>Wed, 31 Aug 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>eXo Platform provide many powerful features to manipulate and expose any type of content on a page. This is due to the fact that eXo stores the all the content in its Java Content Repository (JCR) and render the content on a page using Groovy Templates.</p><p>In this how to you will learn how you can create and use template that are used in the "Content List" portlet. For example in the ACME sample site you can show the content in 1 or 2 columns just by selecting different templates.</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-aEn1Gp75nD4/TbbALBRftVI/AAAAAAAAAPc/3JLHePfFkuM/s200/one-col-view.png" class="img_ev3q">
One Column View</p><p><img loading="lazy" src="http://4.bp.blogspot.com/-xSn44HNlBZ8/TbbAMSRDq7I/AAAAAAAAAPg/YEu715pX3WE/s200/two-col-view.png" class="img_ev3q">
Two Columns View</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-content-list-template">Creating a new Content List Template<a class="hash-link" href="#creating-a-new-content-list-template" title="Direct link to heading">â€‹</a></h3><p>In this section you will learn how to create a new template using the eXo IDE. Before writing the new template it is important to learn where the templates are stored.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exo-content-service-template-storage">eXo Content Service: Template Storage<a class="hash-link" href="#exo-content-service-template-storage" title="Direct link to heading">â€‹</a></h4><p>Like many things inside eXo Platform, the eXo JCR is used to stored the templates. Templates are just a special type of content. This allows developers to easily write and test code without having complex deployment process, but also it make the life easy to export a running configuration to another one. For this you just need to use the standard JCR export/import features.</p><p>All the template and eXo Content Service configurations are stored inside a specific JCR workspace named : <code>dms-system</code>.</p><p>Each template type (Document Type, Content List, ....) is stored in a specific location. In our case we want to work on the "Content List" portlet so the template are stored inside the following folder:</p><ul><li><code>/exo:ecm/views/templates/content-list-viewer/list/</code></li></ul><p>Just for the fun of it, let's inspect this folder using the eXo CRaSH utility. If you are not interested you can jump to the next section. CRaSH is a shell for Java Content Repositories, the source of CRaSH is available on <a href="http://code.google.com/p/crsh/" target="_blank" rel="noopener noreferrer">Google Code</a>. So in a terminal window:</p><p>1-  Connect to CRaSH using telnet client:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> telnet 127.0.0.1 5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2-  Connect to the JCR workspace using the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> connect -u root -p gtn -c portal dms-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where: -u is the user, -p the password, -c the Portal Container, and dms-system the workspace to use</p><p>3-  Move the the folder that contains all the templates for the Content List portlet:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> cd /exo:ecm/views/templates/content-list-viewer/list/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4-  List all the templates using the <code>ls</code> command
You can see the list of all the templates available for the Content List portlet.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-template-using-the-exo-ide">Create a new template using the eXo IDE<a class="hash-link" href="#create-a-new-template-using-the-exo-ide" title="Direct link to heading">â€‹</a></h4><p>Let's now create a new template using the IDE. For this be sure you are connected with a user that is part of the <code>/Developer</code> group. For simplicity reason I am using the <code>root</code> user.</p><p>The first important step is to go the the template location using the following steps:</p><p>1-  Access the IDE: click on <code>My Spaces &amp;gt; IDE</code>.</p><p>2-  Switch <code>dms-system</code> workspace: In the IDE menu click <code>My Spaces &amp;gt;on Window &amp;gt; Select Workspace</code>. And select the dms-system location in the dialog box and click OK.</p><p>3-  In the file structure on the left navigate to the template location :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/exo:ecm/views/templates/content-list-viewer/list/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4-  Create a new template : In the IDE Menu click on <code>File &amp;gt; New &amp;gt; Groovy Template</code></p><p>5-  Save the file as "<code>MyNewTemplate.gtmpl</code>"</p><p>6-  Enter some basic code:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">This is my template</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The date is &lt;= new Date()&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>7-  Save the template</p><p>8-  Go back to the Home page of the Acme Site</p><p>9-  Switch to Edit more by selecting Edit in the top right drop down list.</p><p><img loading="lazy" src="http://3.bp.blogspot.com/-EsSUDUdUo_8/TbbRJZlZlHI/AAAAAAAAAPk/5iTn-NoC-JE/s200/edit-mode.png" class="img_ev3q"></p><p>10-  Move you mouse at the top of the list of news and click on the preference button: <img loading="lazy" src="http://1.bp.blogspot.com/-ksljDe3llf4/TbbSIOl0DII/AAAAAAAAAPs/C0eBv-SJ25I/s200/PreferencesIcon.png" class="img_ev3q"></p><p>11-  In the list of templates, select the "MyNewTemplate", and click save.</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-7hT5osGXK1w/TbbTTJ7ZKSI/AAAAAAAAAP0/--VCTefhrSI/s320/select-template.png" class="img_ev3q"></p><p>We have created our new template, and use it on a page. We should now add some more interesting code to the template to really loop over the content based on the portlet configuration. But before this it is important to talk about caching and code modification.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exo-template-and-cache">eXo Template and Cache<a class="hash-link" href="#exo-template-and-cache" title="Direct link to heading">â€‹</a></h4><p>To improve performances and a running system, the compiled version of the template is by default cached. This is why when you are modifying a template you do not see any change. We have two ways to work around this:</p><ul><li>Run eXo Platform in Debug mode, in this case nothing is cached</li><li>Invalidate the cache manually using JMX</li></ul><p>Since working with no cache at all is not an option, here is the MBean you have to use to invalidate the Template Service cache:</p><ul><li><code>exo:portal="portal",service=cache,name="TemplateService"</code>, then call the <code>clearCache</code> operation on it</li></ul><p>I do use JConsole for this, but you can use any method to call your MBeans operation.</p><p><img loading="lazy" src="http://1.bp.blogspot.com/-ZuMQz-VHBYY/TbldhSRY2NI/AAAAAAAAAP8/pb09UoA9_b4/s200/TemplateServiceCacheMbean.png" class="img_ev3q"></p><p>Do not forget to call this operation each time you modify your template to be sure eXo recompile the template.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-content-in-the-template">Accessing Content in the template<a class="hash-link" href="#accessing-content-in-the-template" title="Direct link to heading">â€‹</a></h4><p>The current code of the template is really simple, you need now to add code to print the content in the page. For this we will be using some eXo Content programming, once again in the IDE.</p><p>If you are not interested to have detailed explanation of the code you can go to the complete source code <!-- -->[here]<!-- -->(javascript: alert().</p><p>The template used by the Content List portlet is based on the following Java class <code>org.exoplatform.wcm.webui.clv.UICLVPresentation</code>, this class is responsible to set the complete context that you can use in the template such as:</p><ul><li>The folder or category that contains the content to show. The "Folder Path" field in the preference screen</li><li>The display settings: title, number of documents, elements to show, ...</li></ul><p>Here is the code to access these preferences:</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// import all the classes need in the template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import javax.jcr.Node;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.exoplatform.wcm.webui.paginator.UICustomizeablePaginator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.exoplatform.wcm.webui.clv.UICLVPortlet;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.exoplatform.wcm.webui.Utils;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.exoplatform.services.wcm.core.NodeLocation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// get the portlet preferences</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def header = uicomponent.getHeader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowRssLink = uicomponent.isShowRssLink();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowHeader = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_HEADER);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowRefresh = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_REFRESH_BUTTON);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowTitle = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_TITLE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowDate = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_DATE_CREATED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowLink = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_LINK);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowReadmore = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_READMORE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowImage = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_ILLUSTRATION) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def isShowSummary = uicomponent.isShowField(UICLVPortlet.PREFERENCE_SHOW_SUMMARY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>uicomponent</code> object is defined by the container class of the portlet that calls the template. This class contains many utility methods. In the code above I retrieve all the preferences of the portlet, since the name are self-explanatory it is not necessary to detail them, especially when you look at the preferences screen below:</p><p><img loading="lazy" src="http://3.bp.blogspot.com/-bDIJtSVaD9A/TblkjTr2wMI/AAAAAAAAAQE/6mRLmEYqpsE/s320/preference-screen.png" class="img_ev3q"></p><p>Now that the template has all the preferences, it is time to loop on the content on print the information.</p><p>The eXo Content Service provides API to manipulate the content, including pagination of content. The idea behind this is to let the Content Service manage the JCR query, sorting, caching and pagination of data. So in your template you will mainly manage two classes to loop through the content to show:</p><ul><li><code>uicomponent.getUIPageIterator()</code> a paginator object that is configured based on the portlet preferences</li><li><code>uicomponent.getCurrentPageData()</code>contains a list of the content (JCR Nodes) that should print on the current page</li></ul><p>So let's print all the content of the page as a simple HTML list:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag" style="color:#00009f"> </span><span class="token tag special-attr attr-name" style="color:#00a4db">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">"</span><span class="token tag special-attr attr-value value css language-css property" style="color:#36acaa">margin</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#393A34">:</span><span class="token tag special-attr attr-value value css language-css" style="color:#e3116c"> </span><span class="token tag special-attr attr-value value css language-css number" style="color:#36acaa">20</span><span class="token tag special-attr attr-value value css language-css unit" style="color:#e3116c">px</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (viewNode in uicomponent.getCurrentPageData()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def title = viewNode.getProperty("exo:title").getString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print("</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">$title</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just  copy this code in your template, save it, refresh the cache... and go to your page. You should see the list of the content in a simple HTML list.</p><p>On each content (Node), eXo Content API provides some helper method to easily manipulate the content and avoid using the JCR API directly. In the following code you can see the most important methods accessing content properties:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def itemName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> viewNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def webdDavLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getWebdavURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemDateCreated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCreatedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemModifiedDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getModifiedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemAuthor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAuthor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def imgSrc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIllustrativeImage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemTitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def itemSummary </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSummary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>One important point is the fact that these methods are responsible of many things, for example: formatting dates, returning complete URLs depending of the context of the portlet.</p><p>Based on these methods you can now work on the presentation of the information on the page. Let's for example print the image, the title and allow user to click on the title to go in the detail view of the article. This is done simply using the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode in uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCurrentPageData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> viewNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def webdDavLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getWebdavURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemDateCreated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCreatedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemModifiedDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getModifiedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemAuthor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAuthor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def imgSrc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIllustrativeImage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemTitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemSummary </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSummary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div style</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"overflow: auto;"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"$imgSrc"</span><span class="token plain"> align</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"left"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">h3</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a href</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"$itemLink"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$itemTitle</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h3</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $itemSummary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For simplicity reason, this code does not manage any null value. Also the template do not deal with the portlet preferences such as the "Header", "RSS" links and so on, do not hesitate to do it if you want.</p><p>The Web site should look like the following image:</p><p><img loading="lazy" src="http://3.bp.blogspot.com/-JvoTBERVTH0/Tbmf9tYRcUI/AAAAAAAAAQM/sdUy2gs39ks/s320/new-site-001.png" class="img_ev3q"></p><p>The last important point is to add the support for the in context editing that allows the user to edit the content directly from the template. Once again this is done with a method of the <code>uicomponent</code> object, that create a DIV around the content. Let's add this to the template:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode in uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCurrentPageData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> viewNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def webdDavLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getWebdavURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemDateCreated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCreatedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemModifiedDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getModifiedDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemAuthor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAuthor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def imgSrc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIllustrativeImage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemTitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def itemSummary </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSummary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div style</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"overflow: auto;"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%=</span><span class="token plain">uicomponent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addQuickEditDiv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"MyTemplateContentEditor"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> viewNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"$imgSrc"</span><span class="token plain"> align</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"left"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">h3</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a href</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"$itemLink"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$itemTitle</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h3</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $itemSummary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The lines 15 and 19 are new in this template and provide support for Quick Edit feature.</p><p>Done! We have created a new template for eXo Platform Content Service using embedded IDE.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h4><p>In this article you have learned how to create a new template for eXo Content Service, with some basic steps:</p><ul><li>Create a new Groovy Template using the eXo IDE</li><li>Edit this template using the eXo Java Content API</li><li>Configure your Content List portlet instance on a page to select the new template</li></ul><p>You can now create your own templates and use your imagination to add cool features to your site (for example the carrousels you see on the <a href="http://www.exoplatform.com/" target="_blank" rel="noopener noreferrer">eXo site</a> are using custom CLV template.)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to protect your REST service and Gadget in eXo Platform]]></title>
            <link>https://tgrall.github.io/blog/2011/04/11/how-to-protect-your-rest-service-and-gadget-in-exo-platform</link>
            <guid>/2011/04/11/how-to-protect-your-rest-service-and-gadget-in-exo-platform</guid>
            <pubDate>Mon, 11 Apr 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[During a partner workshop I was showing to the developers how the eXo IDE can help them to develop new features quickly and push them to the users in few minutes. A person asked me if it is possible to put some restriction in services and gadgets based on user profile.]]></description>
            <content:encoded><![CDATA[<p>During a partner workshop I was showing to the developers how the eXo IDE can help them to develop new features quickly and push them to the users in few minutes. A person asked me if it is possible to put some restriction in services and gadgets based on user profile.</p><p>As you can guess the answer is YES WE CAN!</p><ul><li>How to access the security context in a REST service</li><li>How to check is a user is member of a  group and manage permission from this information</li><li>How to consume this service in a gadget and leverage the security to protect resources</li></ul><p><img loading="lazy" src="http://1.bp.blogspot.com/-eR15bpCaiXo/TZ8yp1kkLYI/AAAAAAAAAPM/8Az5EVfVrzU/s200/rest-no-access.png" class="img_ev3q">
Not-authorized</p><p><img loading="lazy" src="http://2.bp.blogspot.com/-wcfWsRgV8Xc/TZ8ypzrBsLI/AAAAAAAAAPE/U9VnHpc3q9M/s200/rest-access.png" class="img_ev3q">
Authorized</p><p>If you are not interested to follow steps by step the explanations you can directly jump to the complete <a href="#completeService">REST Service code</a> or download the full eXo IDE Project from <a href="https://github.com/tgrall/sample-gadget-with-security" target="_blank" rel="noopener noreferrer">GitHub</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-the-user-profile-from-your-rest-service">Access the User Profile from your REST Service<a class="hash-link" href="#access-the-user-profile-from-your-rest-service" title="Direct link to heading">â€‹</a></h3><p>As you probably know eXo Platform uses <a href="http://jcp.org/en/jsr/detail?id=311" target="_blank" rel="noopener noreferrer">JAX-RS</a> as API to develop and deploy REST Services. eXo developers can create REST services using their favorite Java IDE, but here I am using the eXo IDE package with <a href="http://www.exoplatform.org/company/public/website/platform" target="_blank" rel="noopener noreferrer">eXo Platform</a>.</p><p>To access the security and user information in your service method it is possible to use the <a href="http://jersey.java.net/nonav/apidocs/1.5/jersey/javax/ws/rs/core/SecurityContext.html" target="_blank" rel="noopener noreferrer">SecurityContext</a> class of the JAX-RS API.  Your method signature will look like:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token constant" style="color:#36acaa">GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">PathParam</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">MediaType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Produces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">SecurityContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Context</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/system"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Produces</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SystemInformationService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"information"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSystemInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Context</span><span class="token plain"> </span><span class="token class-name">SecurityContext</span><span class="token plain"> sc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">APPLICATION_JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In lines 7 and 8, I import the classes needed to inject the security context in the method <code>getSystemInfo()</code> in line 16. For now let's forget about the other part of the code.</p><p>With the Security Context object you can now access many things in your code. Two methods are quite interesting for this example: <code>getUserPrincipal()</code> and <code>isUserInRole()</code>, since our goal is to check if a user is allowed to execute or not a part of the business logic.</p><p>It is important here to remember that we cannot directly use the <code>isUserInRole()</code> method since this method uses the logical JavaEE roles that are defined at the Java application level. In our case we are interested to know if a user is present in a "eXo User Identity" Group, for example member of the <code>/platform/administrators group</code>. This information is populated during the login process and comes from the user provider that could be LDAP, the eXo Database or JCR, or any other source since developers can extend this API to plug their own provider.</p><p>Let's create an helper method that check, using the eXo Identity Service, if the user that executes the method is present in a group.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ExoContainer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ExoContainerContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">component</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ComponentPlugin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">services</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Identity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">services</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">String</span><span class="token plain"> group</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ExoContainer</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ExoContainerContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCurrentContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">IdentityRegistry</span><span class="token plain"> identityRegistry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getComponentInstanceOfType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Identity</span><span class="token plain"> identity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> identityRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIdentity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> identity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> group </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So this method is quite simple, it takes as parameter:</p><ul><li>the name of the user, that you can get from the <code>UserPrincipal.getName()</code> method</li><li>the eXo Group you want to check, for example <code>/platform/administrator</code></li></ul><p>You can now call this method from your resource to check the user, and code the "permission business logic". The method could now looks like:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"information"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSystemInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Context</span><span class="token plain"> </span><span class="token class-name">SecurityContext</span><span class="token plain"> sc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> groupToCheck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/platform/administrators"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> groupToCheck</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NOT-ALLOWED"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ALLOWED"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  response   </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">APPLICATION_JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example for simplicity reason I have hard coded the group to check, you can obviously use smarter code to user external configuration to inject a list of group to check for example. I manage the security logic of my method using simple if statement and return a string. You can also depending of your needs, manage the status of your response and use HTTP Code for example return an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4" target="_blank" rel="noopener noreferrer">HTTP 403</a>. For this you just need to return a different response using following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Response</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Status</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FORBIDDEN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For simplicity reason I will stay with a single Response status (OK) and manage the permission in my client code.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-rest-service">Complete REST Service<a class="hash-link" href="#complete-rest-service" title="Direct link to heading">â€‹</a></h3><p>Let's take a look to the full service now, this service allows administrators to get the list of the System Properties, other users get an status string "NOT-ALLOWED":</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token constant" style="color:#36acaa">GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">PathParam</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">MediaType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">CacheControl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Produces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">SecurityContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">javax</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ws</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rs</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">core</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">Context</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ExoContainer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ExoContainerContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">container</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">component</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ComponentPlugin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">services</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Identity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">exoplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">services</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/system"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Produces</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SystemInformationService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"information"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSystemInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Context</span><span class="token plain"> </span><span class="token class-name">SecurityContext</span><span class="token plain"> sc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> groupToCheck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/platform/administrators"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">SimpleResponseWrapper</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SimpleResponseWrapper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> groupToCheck</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NOT-ALLOWED"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"OK"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">CacheControl</span><span class="token plain"> cacheControl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CacheControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cacheControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setNoCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cacheControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setNoStore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  response   </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">APPLICATION_JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">cacheControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheControl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">String</span><span class="token plain"> role</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ExoContainer</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ExoContainerContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCurrentContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">IdentityRegistry</span><span class="token plain"> identityRegistry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getComponentInstanceOfType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IdentityRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Identity</span><span class="token plain"> identity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> identityRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIdentity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> identity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isMemberOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> role </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleResponseWrapper</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Object</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To summarize:</p><ul><li>Line 24 : the <code>SecurityContext</code> is injected to the method</li><li>Line 26 : Initialization of a simple <code>ResponseWrapper</code> defined on line 51, that contains a status and data. That will be serialized in JSON by the eXo REST engine.* Line 28 : the method check if a user is connected and member of `/platform/administratorc. If not it send response with the status NO-ALLOWED.</li><li>Line 31/32 : The response object is sent. This response contains an OK status and the data (system properties list)</li><li>Line 42 : Using the eXo Identity Service, the method check if the connected user is member of a specific group.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consume-the-service-into-a-gadget">Consume the service into a Gadget<a class="hash-link" href="#consume-the-service-into-a-gadget" title="Direct link to heading">â€‹</a></h3><p>I can now take this service and consume it into an Gadget. I also develop this Gadget using the eXo IDE.</p><p>The following code shows the Javascript part of the Gadget that calls the service, check the security and push the response content in Gadget body. For productivity I use JQuery framework.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">script</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> htmlResponse</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"OK"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    htmlResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&lt;tr&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">each</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      htmlResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'&lt;tr&gt;&lt;td&gt;'</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'&lt;/td&gt;&lt;td&gt;'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    htmlResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&lt;/tr&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'#systemInfo'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    htmlResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Not permitted"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'#systemInfo'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'#systemInfo'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">html</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">htmlResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gadgets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">adjustHeight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'#sysInfoContainer'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">outerHeight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadInformationFromServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getJSON</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/rest/private/system/information'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">loadInformationFromServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gadgets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">registerOnLoadHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">init</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">script</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here some quick explanation about this code:</p><ul><li>Line 23: To call the REST service, I use the <code>$.getJSON()</code> method. This method is really easy to use when you are executing the Gadget is in the same container than the portal that consumes it. When you are using the gadget.io.MakeRequest is interesting to proxy a request and you need to re-authenticate, for example using oAuth.</li><li>Line 3 : This is the call back method, as you can see in this method I use the <code>ResponseWrapper</code> to check the code in the status attribute. Depending of the status OK or not I do print the value.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this how-to you have learned how to:</p><ul><li>Get the security context in your REST Service</li><li>Check the membership of a user using the eXo Identity Service</li><li>Create a gadget that consume this service and expose only data to user with correct profile</li><li>Download the full project from <a href="https://github.com/tgrall/sample-gadget-with-security" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[eXo Cloud IDE : develop for the Cloud on the Cloud]]></title>
            <link>https://tgrall.github.io/blog/2011/03/16/exo-cloud-ide-develop-for-the-cloud-on-the-cloud</link>
            <guid>/2011/03/16/exo-cloud-ide-develop-for-the-cloud-on-the-cloud</guid>
            <pubDate>Wed, 16 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Yesterday, eXo has launched a new cloud based service: the eXo Cloud IDE. This IDE is an online service that facilitates the development of gadgets and mashups that could be deployed directly to a PaaS.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://1.bp.blogspot.com/-IgPlseainto/TYBq0-Sr6nI/AAAAAAAAAOw/YL3TECcXJts/s400/logoexoplatform.png" class="img_ev3q"></p><p>Yesterday, eXo has launched a new cloud based service: the <a href="http://www.cloud-ide.com/" target="_blank" rel="noopener noreferrer">eXo Cloud IDE</a>. This IDE is an online service that facilitates the development of gadgets and mashups that could be deployed directly to a PaaS.</p><p>Before launching this service on the Cloud we, eXo team and customers, have used the IDE embedded in the <a href="http://www.exoplatform.com/company/en/platform/exo-platform-35" target="_blank" rel="noopener noreferrer">eXo Platform</a> to extend our intranet and customer deployments (some of the modules that we have developed live on our intranet are available as plugins on the <a href="http://www.exoplatform.com/company/en/Content-types/Plugins" target="_blank" rel="noopener noreferrer">eXo Resource Center</a>).</p><p>This IDE is the last mile between the users and the developers. It provides a way to add new services asked by business users at a lower cost with a good time to market. And all this based on standards that corporate and Web developers like : REST Services using <a href="http://jcp.org/en/jsr/detail?id=311" target="_blank" rel="noopener noreferrer">JAX-RS</a> and UI based on <a href="http://www.opensocial.org/" target="_blank" rel="noopener noreferrer">OpenSocial</a> gadgets in which you can leverage all the cool and powerful features of HTML5.</p><p>What eXo has launched yesterday is a big step for developers since you can now develop, test and deploy your gadgets and services online, and this in your "personal environment" using eXo Cloud IDE supports multi-tenancy. I won't go in all the features of the IDE since you can test it yourself by joining the <a href="http://cloud-ide.com/" target="_blank" rel="noopener noreferrer">beta program</a> and look at this video:</p><p>eXo Cloud IDE resources:</p><ul><li>Overview of <a href="http://www.exoplatform.com/company/en/platform/exo-platform-35" target="_blank" rel="noopener noreferrer">eXo Platform 3.5</a></li><li>Overview of <a href="http://cloud-ide.com/" target="_blank" rel="noopener noreferrer">eXo Cloud IDE</a>, including how-to videos and sample applications</li><li>Join the <a href="http://cloud-ide.com/" target="_blank" rel="noopener noreferrer">eXo Cloud IDE private beta</a></li><li>Benjamin Mestralletâ€™s <a href="http://blog.exoplatform.org/2011/03/15/history-of-exo-cloud-ide/" target="_blank" rel="noopener noreferrer">blog post</a> about eXo Cloud IDE</li><li><a href="http://www.exoplatform.com/exo-platform-3-trial/eXoPlatform-3.zip" target="_blank" rel="noopener noreferrer">Evaluation download</a> of eXo Platform 3.0</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to calculate the size of a folder in JCR (Java Content Repository)?]]></title>
            <link>https://tgrall.github.io/blog/2011/03/01/how-to-calculate-the-size-of-a-folder-in-jcr-java-content-repository</link>
            <guid>/2011/03/01/how-to-calculate-the-size-of-a-folder-in-jcr-java-content-repository</guid>
            <pubDate>Tue, 01 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Today I was working with a partner in Paris and he wanted to know how to calculate the size of a specific folder in the eXo Java Content Repository (JCR).]]></description>
            <content:encoded><![CDATA[<p>Today I was working with a partner in Paris and he wanted to know how to calculate the size of a specific folder in the <a href="http://www.exoplatform.com/company/en/resource-viewer/Features-and-Benefits/eXo-JCR-Features-and-Benefits" target="_blank" rel="noopener noreferrer">eXo Java Content Repository (JCR)</a>.</p><p>For this specific need the goal is to calculate the size of all the documents stored inside a specific location in the content repository. This could be used for example to manage quotas, estimate the size of a shared or personal storage, ... For this specific sample I will only take in consideration the size of the binary part of the document stored in the repository; this means I will not pay attention to the various attributes and meta-data that are also stored, neither the full text index created by <a href="http://lucene.apache.org/" target="_blank" rel="noopener noreferrer">Lucene</a> that is embedded in eXo JCR.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-the-files-are-stored-in-the-jcr">How the files are stored in the JCR?<a class="hash-link" href="#how-the-files-are-stored-in-the-jcr" title="Direct link to heading">â€‹</a></h3><p>Files are stored in eXo JCR in the standard node type <code>nt:file</code> (and <code>nt:resource</code>). So for this example I will simply list all the <code>nt:file</code> of a folder and aggregate the size of the file itself. It is important to understand how JCR is storing the binary content. The best way to understand it, is to view it. For that I am using the print information given by  <a href="http://www.exoplatform.com/company/en/resource-viewer/Tutorial/Introduction-to-Crash" target="_blank" rel="noopener noreferrer">CRaSH</a>, a shell for content repository developed by eXo team and lead by <a href="http://julienviet.com/" target="_blank" rel="noopener noreferrer">Julien Viet</a>.</p><p>Here the structure of a PDF document :</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/Documents/jsr170-1.0.pdf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:primaryType: nt:file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:mixinTypes: [mix:referenceable,mix:versionable]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:uuid: '6b89b6f0c0a8006530a8617df51bb0d7'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:created: 2011-02-28T10:11:50.770+01:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-children</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-/Groups/spaces/intranet_v2/Documents/Technical/jsr170-1.0.pdf/jcr:content</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see in this node the 'binary' is not visible, nothing bad here. As written in the specification in the section <code>6.7.22.6 nt:file</code>, the binary content is an attribute of the child node <code>jcr:content</code> that is exposed below:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/Groups/spaces/intranet_v2/Documents/Technical/jsr170-1.0.pdf/jcr:content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:primaryType: nt:resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:mixinTypes: [exo:owneable,exo:datetime,dc:elementSet]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:uuid: '6b89b6f7c0a80065735b1a8853d389d0'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:data: &lt;binary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:encoding: 'UTF-8'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:lastModified: 2011-02-28T10:11:50.767+01:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +-jcr:mimeType: 'application/pdf'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-children</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/binary&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see now that the <code>jcr:content</code> contains some interesting attributes:</p><ul><li><code>jcr:mimeType</code></li><li><code>jcr:data</code> this is where the binary content, the PDF itself , is.
So using the JCR API you just need to get the content length using the following java code:</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"jcr:content/jcr:data"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This returns the number of bits of the binary data.</p><p>So to calculate the size of a folder you just need to navigate in all the documents (nt:file or jcr:content) and cumulate the size of all the files. In this following code, I am calculating the size of the folder "/Documents" by navigating into all the files contains in this folder and subfolders. (I could have chose to query all the <code>jcr:content</code> type instead of <code>nt:file</code>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Session</span><span class="token plain"> session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// use RepositoryService or context to get a session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">QueryManager</span><span class="token plain"> manager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getWorkspace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getQueryManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> queryStatement </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"select * from nt:file where (jcr:path LIKE '/Documents/%')"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> manager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryStatement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SQL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">NodeIterator</span><span class="token plain"> nodeIterator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getNodes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Node</span><span class="token plain"> node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> totalSizeInMb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nodeIterator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nodeIterator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  totalSizeInMb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalSizeInMb </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"jcr:content/jcr:data"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can guess since we are navigating in the hierarchy you have to be very careful when using such query. This example is just a simple code sample to show you some of the cool features provided by the JCR API.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[iOS 101: How to convert a String to a NSDate]]></title>
            <link>https://tgrall.github.io/blog/2011/01/02/ios-101-how-to-convert-a-string-to-a-nsdate</link>
            <guid>/2011/01/02/ios-101-how-to-convert-a-string-to-a-nsdate</guid>
            <pubDate>Sun, 02 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[During my vacations, I took some time to play with iOS development. I have been struggling with many small issues... This is the price to pay when learning a new technology, and this is part of the fun of doing it. I will try to document some of these issues in articles...  Let's start with a very common story : working with date.]]></description>
            <content:encoded><![CDATA[<p>During my vacations, I took some time to play with iOS development. I have been struggling with many small issues... This is the price to pay when learning a new technology, and this is part of the fun of doing it. I will try to document some of these issues in articles...  Let's start with a very common story : working with date.</p><p>Objective-C and iOS SDK provide a class to help formatting date (marshaling and unmarshaling), this class is <a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html" target="_blank" rel="noopener noreferrer">NSDateFormatter</a>. No surprise, the NSDateFormatter uses the <a href="http://unicode.org/reports/tr35/#Date_Format_Patterns" target="_blank" rel="noopener noreferrer">Unicode Date Format Patterns</a>.</p><p>A small example of date creating from a string:</p><div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NSDateFormatter </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dateFormatter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSDateFormatter alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">init</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter setDateFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">@"yyyy-MM-dd"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NSDate </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">date </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter dateFromString</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">publicationDate </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter release</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// use your date object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The date that I have to create from a sting looks like "<code>2010-11-12</code>". So I do not have any time information. When I do convert this string with the code above, the result is  "<code>2010-11-11 23:00:00 +0000</code>". As you can see the date is calculated from my current time zone, small reminder I am in France. So the "date" object itself is perfectly fine, but in my example I want to have the date independently of the time.</p><p>To be able to manage the date without any time/timezone information, I can force the timezone I want to use when using the  <code>NSDateFormatter</code> class. I just need to use the <code>setTimeZone</code> instance method.</p><p>The code looks like that now (see line#3):</p><div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    NSDateFormatter </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dateFormatter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSDateFormatter alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">init</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter setDateFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">@"yyyy-MM-dd"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter setTimeZone</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSTimeZone timeZoneForSecondsFromGMT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NSDate </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">date </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter dateFromString</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">publicationDate </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dateFormatter release</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// use your date object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hope that helps!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[What Appleâ€™s Announcement Really Means to Java Developers]]></title>
            <link>https://tgrall.github.io/blog/2010/10/29/what-apples-announcement-really-means-to-java-developers</link>
            <guid>/2010/10/29/what-apples-announcement-really-means-to-java-developers</guid>
            <pubDate>Fri, 29 Oct 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[Hey Steve, keep the bean in the Apple!]]></description>
            <content:encoded><![CDATA[<p>Hey Steve, keep the bean in the Apple!</p><p>The <a href="http://www.infoq.com/news/2010/10/apple-deprecates-java" target="_blank" rel="noopener noreferrer">news from last week</a> that grabbed the attention of many Java developers was Appleâ€™s announcement of <a href="http://developer.apple.com/library/mac/#releasenotes/Java/JavaSnowLeopardUpdate3LeopardUpdate8RN/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">its intentions to deprecate Java in the latest OS X 10.6 update</a>. One sentence stood out in particular, â€œDevelopers should not rely on the Apple-supplied Java runtime being present in future versions of Mac OS X,â€ and raised the question: should Java developers (many of whom, like me, develop on Macs) freak out?</p><p>I donâ€™t think so. (Though it prompted additional speculation and <a href="http://gigaom.com/2010/10/26/java-is-under-siege-will-oracle-let-it-burn/" target="_blank" rel="noopener noreferrer">follow-on news stories</a>.)</p><p>Letâ€™s be realistic. Most applications run on the server side, on Unix/Linux and/or Windows Server â€“ which has nothing to do with Apple or Mac OS X. And more and more applications are running on the cloud, where the language isnâ€™t necessarily irrelevant, but certainly less important than the services that the application exposes. And Iâ€™m sure Java will have a big role in â€˜development in the cloud,â€™ as we can already see with Google AppEngine and the VMWare/SpringSource effort.</p><p>I think the more interesting question to ask is â€œWhy did Apple do this?â€  </p><p>I believe this is related Appleâ€™s other big news last week: the new â€œMac App Store,â€ which looks like an effort to have one single technology and language to develop â€œofficialâ€ applications for Mac. In fact, for all Apple platforms running OS X and iOS, developers should use X Code and Objective C. Thatâ€™s fine with me, as I enjoy developing small apps for my iPhone and iPad in my spare time, using these tools. But at eXo, many of our developers are using Java, often on Macs, to build our software.</p><p>Weâ€™re not talking about the same kind of applications. If, in the future, Java does not exist on Macs, it will not cause enterprise developers to abandon Java, but simply force them to move away from their Macs. Personally, I donâ€™t want that to happen. I switched to Mac in 2001, and Iâ€™ve been a big fan of all Apple products ever since (most of my extended family are now also on Macs, and they couldnâ€™t care less about Java).</p><p>As a Java developer, do I switch back to PC now? Unlikely. I am very confident (overconfident?) that Java will still be present on OS X. The difference is that Apple will simply stop caring about it -- the same way that Microsoft doesnâ€™t care now. I cannot believe that Apple will stop/block Java on their platform. So the future of Java in general, and now on Mac, is fully under the control of the Java community, driven by Oracle and OpenJDK.  I am sure we will find many skilled â€œMacAddictsâ€ to maintain and improve Java on OS X, to at least allow Java developers to run their favorite IDE and test their applications before deploying them on the servers -- keeping the â€œWrite Once, Run Anywhereâ€ a reality (almost...). The only â€œbadâ€ part is the fact that â€œJava Desktopâ€ will not borrow any of the cool features of Apple Mac OS X. Not a big deal, since Java Desktop has never been that successful anyway.</p><p>So my advice to fellow Java developers is this: if you care, be vocal.  Letâ€™s make sure Apple lets the community drive the future of Java on Mac, since the future of the Java platform is still very exciting for many of us.</p><p>Original Post on<!-- -->&nbsp;<a href="http://blog.exoplatform.org/2010/10/29/what-apples-announcement-really-means-to-java-developers/" target="_blank" rel="noopener noreferrer">eXo Blog</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Create and Deploy a JAX-RS REST service on Google App Engine]]></title>
            <link>https://tgrall.github.io/blog/2010/02/28/create-and-deploy-a-jax-rs-rest-service-on-google-app-engine</link>
            <guid>/2010/02/28/create-and-deploy-a-jax-rs-rest-service-on-google-app-engine</guid>
            <pubDate>Sun, 28 Feb 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[In this article you will learn how to create a REST service using JAX-RS reference implementation (Jersey) and deploy it on Google AppEngine.]]></description>
            <content:encoded><![CDATA[<p>In this article you will learn how to create a REST service using JAX-RS reference implementation (Jersey) and deploy it on Google AppEngine.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h3><p>For this tutorial you will need:</p><ul><li>a Google AppEngine account : <a href="http://code.google.com/appengine/" target="_blank" rel="noopener noreferrer">http://code.google.com/appengine/</a></li><li>Eclipse Galileo (3.5.x)</li><li>Google App Engine SDK for Java</li></ul><ul><li>Install the Google Plugin for Eclipse as documented <a href="http://code.google.com/eclipse/docs/install-eclipse-3.5.html" target="_blank" rel="noopener noreferrer">here</a> (Check that you are using the release 1.3.1 of the GAE Java SDK, if not download it and configure the plugin to use it)<ul><li>it is also useful to have the AppEngine documentation locally, you can download it from <a href="http://code.google.com/appengine/downloads.html#Download_the_Google_App_Engine_Documentation" target="_blank" rel="noopener noreferrer">here</a>.</li><li>JAX-RS Reference Implementation, be sure you take the
Jersey 1.1.5 release. You can download it from <a href="https://jersey.dev.java.net/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Unzip the file in a directory that we will call <code>$JERSEY_HOME</code></li><li>JAXB 2.2 Implementation to simplify the marshalling/unmarshalling of the XML, and also facilitate the JSON support. Download it from <a href="https://jaxb.dev.java.net/" target="_blank" rel="noopener noreferrer">here</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-new-application">Creating new application<a class="hash-link" href="#creating-new-application" title="Direct link to heading">â€‹</a></h3><p>To create a new App Engine project in Eclipse:</p><p>1-  Click on the "<strong>New Web Application Project</strong>" button <img loading="lazy" src="http://2.bp.blogspot.com/_aoQgQ1obiyE/S4pv-VRkifI/AAAAAAAAAKc/cNoURwz9n8M/s320/new_app_button.png" class="img_ev3q"> in the toolbar . It is also possible to do it using the menu <strong>File <!-- -->&gt;<!-- --> Web Application Project</strong></p><p>2-  The "Create a Web Application Project" wizard opens:</p><ul><li>Project Name: <code>EmployeeService</code></li><li>Package : <code>com.grallandco.employee.service</code></li><li>Uncheck "<code>Use Google Web Toolkit</code>"</li><li>Check that the SDK version your are using is "<code>App Engine 1.3.0</code>"; if not configure the project to use it.</li><li>The screen should look like the following screen :</li></ul><p><img loading="lazy" src="http://3.bp.blogspot.com/_aoQgQ1obiyE/S4pu9erB81I/AAAAAAAAAKE/ER3aDZKd520/s320/app-engine-wizard.png" class="img_ev3q"></p><ul><li>Click Finish</li><li>The project should look like the following screen :</li></ul><p><img loading="lazy" src="http://4.bp.blogspot.com/_aoQgQ1obiyE/S4pvDuZVWQI/AAAAAAAAAKM/8I2aUTtx7Os/s320/project-structure.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-application">Running the application<a class="hash-link" href="#running-the-application" title="Direct link to heading">â€‹</a></h4><p>The App Egine SDK, installed with the Eclipse plugin contains a Web server (based on Jetty), that could be used for testing and debugging. To test that your application has been created correctly select the menu <strong>Run <!-- -->&gt;<!-- --> Run As <!-- -->&gt;<!-- --> Web Application</strong>. I personally most of the time run my server using the debug command <strong>Run <!-- -->&gt;<!-- --> DebugAs <!-- -->&gt;<!-- --> Web Application</strong>. In debug mode you can change source code and test is without restarting the server.</p><p>The web server is starting automatically, you should see the following messagein the Eclipse console</p><p>The server is runningat <code>http://localhost:8080/</code></p><p>You can access the application, and the sample servlet that has been created using the URL: <code>http://localhost:8080/employeeservice</code>.</p><p>To stop the server, click on the terminate button <img loading="lazy" src="http://1.bp.blogspot.com/_aoQgQ1obiyE/S4pvYft_VPI/AAAAAAAAAKU/UCNDdfNlEnM/s320/terminate_button.png" class="img_ev3q"> in the Eclipse console.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-rest-support-in-the-application">Configuring the REST support in the application<a class="hash-link" href="#configuring-the-rest-support-in-the-application" title="Direct link to heading">â€‹</a></h3><p>To be able to create and run REST services in your application you need to:</p><ul><li>Add the JAX-RS, JAXB Jars in your project and application</li><li>Configure the web application (web.xml) to handle REST requests <strong>Add JAX-RS, JAXB to your project</strong></li></ul><ol><li>Right click on the project and select menu entry <strong>Build Path <!-- -->&gt;<!-- --> Configure Build Path...</strong></li><li>Click on the Add External JARs button</li><li>Select all the JARs located in $JERSEY_HOME/lib and $JAXB_HOME/lib folders. You can for better visibility and reuse create a user library with all these JARs</li><li>You also need to copy the JARs in the web-inf/lib directory of your application, this step is mandatory to be sure that the JARs are included in the application when deployed to App Engine.
<em>Note: I do not like this step. I would prefer to do that by configuration of the build path, to automatically add the JARs to the WEB-INF/lib directory when executing/deploying the application. Unfortunately I did not find the way to do it, so if you know it, feel free to post a comment and I will
update the article.</em></li></ol><p><strong>Configure the web application</strong></p><p>In this step you will register a new URI to handle REST requests. To do that you need to register a new servlet that is using the Jersey API and configure it to a specific URI (eg: /ressources  and/or /rest) and configure what are the Java packages that contain the REST implementation classes. So you need to modify the web.xml of your application with the following entries:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Jersey Web Application</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.sun.jersey.spi.container.servlet.ServletContainer</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.sun.jersey.config.property.packages</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.grallandco.employee.service.rest.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Jersey Web Application</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/resources/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Jersey Web Application</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/rest/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This servlet that will answer to the /resources/ and /rest/ URL. The configuration parameter <code>com.sun.jersey.config.property.packages</code> is used by Jersey to list the packages where REST services implementation are located.Note that you can put as many package as you need to, you just need to separate the package names by a ; .</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-simple-rest-service-to-test-the-environment">Creating a simple REST Service to test the environment<a class="hash-link" href="#creating-a-simple-rest-service-to-test-the-environment" title="Direct link to heading">â€‹</a></h3><p>The project is now ready to contain REST service. It is time to create  one.Create for example the class <code>com.grallandco.employee.service.rest.impl.HelloWorldResource</code>, be sure to use the package name that you have configured in the web.xml for the Jersey servlet, based on the configuration we have made in previous step the package is <code>com.grallandco.employee.service.rest.impl</code></p><p>Here a sample class with the JAX-RS annotations:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">grallandco</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">employee</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">service</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rest</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">impl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">GET</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Produces</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hr/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EmployeeResource</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Produces</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"text/plain"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/employee"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEmployee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello World!"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should be able to test it, stop the server and run it again, enter the following URL in your browser:</p><p><code>http://localhost:8080/resources/hr/employee</code></p><p>or</p><p><code>http://localhost:8080/rest/hr/employee</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-application-to-google-app-engine">Deploying the application to Google App Engine<a class="hash-link" href="#deploying-the-application-to-google-app-engine" title="Direct link to heading">â€‹</a></h4><p>Before deploying the application you need to register a new application in Google App Engine using the Administartion Console, see the documentation <a href="http://code.google.com/appengine/docs/theadminconsole.html" target="_blank" rel="noopener noreferrer">here</a>. In my example I have used "<code>tugdual</code>" as Application ID.</p><p>You can easily now deploy the application to Google App Engine by clicking on the  "Deploy App Engine Project" button "Deploy App Engine Project Button") available in the Eclipse toolbar.</p><p>To be able to deploy your application to Google App Engine, you need to check that your application can be registered, the application ID is stored  in the <code>WEB-INF/lib/appengine-web.xml</code>.</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appengine-web-app</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://appengine.google.com/ns/1.0</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">application</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">[your-application-id]</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">application</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Configure java.util.logging --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">system-properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">java.util.logging.config.file</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WEB-INF/logging.properties</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">system-properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">appengine-web-app</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The App Engine deploy button prompts you for multiple informations: username (your Google account) and password.</p><p>When the deployment is complete you can access your application using the following URL:</p><p><code>http://[your-application-id].appspot.com/resources/hr/employee</code></p><p>or</p><p><code>http://[your-application-id].appspot.com/rest/hr/employee</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ading-xml-and-json-support-to-the-service">Ading XML and JSON support to the service<a class="hash-link" href="#ading-xml-and-json-support-to-the-service" title="Direct link to heading">â€‹</a></h3><p>Let's now add new method to manipulate an "Employee" object using the service, and the data format should be based on JSON and XML. This is where JAXB is useful, since it allows easily to transform marshall/unmarshall Java objects in XML -obviously- and JSON (cool isn't!)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-employee-class">Creating an Employee Class<a class="hash-link" href="#creating-an-employee-class" title="Direct link to heading">â€‹</a></h4><p>Start with the creation of a new class to manipulate Employee data, this is a very simple Java class that could look like the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">grallandco</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">employee</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">service</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">model</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hireDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Date</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hireDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">StringBuffer</span><span class="token plain"> sb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">StringBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"First: "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" - Last: "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" - Date: "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" - Email: "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When implementing your "real" application with some persistence layer
this POJO is the one as JDO/JPA entity.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-converter-class-for-your-entity">Create a Converter class for your entity<a class="hash-link" href="#create-a-converter-class-for-your-entity" title="Direct link to heading">â€‹</a></h4><p>I usually encapsulate all the transformation in some converter class, like that I do not directly couple my business class to the serialisation mechanism. (So I do that for classes and lists of classes). So instead of adding the JAXB annotations to the Employee class itself, let's create an EmployeeConverter class that will be responsible of the transformation and used by your REST service.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">grallandco</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">employee</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">service</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">converter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">xml</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">XmlElement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">xml</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">XmlRootElement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">grallandco</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">employee</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">service</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">model</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Employee</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@XmlRootElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"employee"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EmployeeConverter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Employee</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@XmlElement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@XmlElement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@XmlElement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@XmlElement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEmployee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Date</span><span class="token plain"> hireDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setHireDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hireDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lastName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now update your service to use this utility/converter class to return XML or JSON ojbect based on the content type of the request.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-support-to-json-and-xml-to-your-rest-service">Add support to JSON and XML to your REST service<a class="hash-link" href="#add-support-to-json-and-xml-to-your-rest-service" title="Direct link to heading">â€‹</a></h4><p>You need to change the <code>EmployeeRessource</code> class, to change the signature and add new annotations of the <code>getEmployee()</code> method.</p><p>The annotation you are adding:</p><ul><li><code>@Produces({"application/xml", "application/json"})</code> : indicates which type of content will be produced by the service. Based on the type of the request.</li><li><code>@Path("/employee/{employeeEmail}/")</code> : change the Path to indicate a Path parameter, here for example the URL can accept an email in the URI - not the best example, but you get the point...</li><li><code>public EmployeeConverter getEmployee( @PathParam ("employeeEmail") String email)</code> : change the type returned by the method and take a parameter as String that match the Path param defined in the @Path annotation.</li></ul><p>Here the complete class code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">grallandco</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">employee</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">service</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">rest</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">impl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">GET</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PathParam</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">ws</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">rs</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Produces</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">grallandco</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">employee</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">service</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">converter</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">grallandco</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">employee</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">service</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">model</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Employee</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hr/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EmployeeRessource</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Produces</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"application/xml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/employee/{employeeEmail}/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">EmployeeConverter</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEmployee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@PathParam</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"employeeEmail"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//dummy code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Employee</span><span class="token plain"> emp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">EmployeeConverter</span><span class="token plain"> converter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">EmployeeConverter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> converter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-service">Test the service<a class="hash-link" href="#test-the-service" title="Direct link to heading">â€‹</a></h3><p>You can now run the server locally and test the service</p><p><code>http://localhost:8080/resources/hr/employee/tug@grallandco.com</code></p><p>This will return an XML document.</p><p>If you want to test the JSON call you have multiple choice:</p><ul><li>Using following command</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tgrall$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">"Accept: application/json"</span><span class="token plain"> http://localhost:8080/resources/hr/employee/tug@grallandco.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"email"</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">"tug@grallandco.com"</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">"firstName"</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">"John"</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">"lastName"</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">"Doe"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Using an HTTP client that allows your to configure/set the HTTP request completely, I am using the <a href="https://addons.mozilla.org/en-US/firefox/addon/2691" target="_blank" rel="noopener noreferrer">Poster Firefox Plugin</a></li><li>Using some Javascript code in an application</li></ul><p>You can repeat the test on your deployed application on Google AppEngine.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In this article you have learned how to create and deploy a new REST Service on Google App Engine. This service has been created with the JAX-RS Reference Implementation the Jersey project. In the next article you will learn how to add persistence and create a CRUD Rest service on Google App Engine.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[VirtualBox: How to clone a virtual machine?]]></title>
            <link>https://tgrall.github.io/blog/2010/02/24/virtualbox-how-to-clone-a-virtual-machine</link>
            <guid>/2010/02/24/virtualbox-how-to-clone-a-virtual-machine</guid>
            <pubDate>Wed, 24 Feb 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[During some testing I had to put in place a cluster on my network. So I create a first virtual machine. It is not possible to directly copy the Virtual Disk Image (.vdi). VirtualBox saved in each disk image a UUID that is also store inside the virtual machine image. VirtualBox does not support two images with the same number. So to clone the an image you need to use the VBoxManage clonehd command line.]]></description>
            <content:encoded><![CDATA[<p>During some testing I had to put in place a cluster on my network. So I create a first virtual machine. It is not possible to directly copy the Virtual Disk Image (.vdi). VirtualBox saved in each disk image a UUID that is also store inside the virtual machine image. VirtualBox does not support two images with the same number. So to clone the an image you need to use the <code>VBoxManage clonehd</code> command line.</p><p>The clonehd command copy the VDI file and assigns a new UUID into it.</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VBoxManage  clonehd /opt/tools/vm/vm1-rhel.vdi  /opt/tools/vm/vm2-rhel.vdi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the copy is done, you can now register this new VDI in your VirtualBox environment and create a new virtual machine.</p><p>Note: I am running VirtualBox on MacOS X, and I needed to put complete path to VDI files, if not the command id not working</p><p><em>Alternative approach</em></p><p>Initially I had issue with the clonehd command since I was not using full path. So what you can do is:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> vm1-rhel.vdi vm2-rhel.vdi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxManage internalcommands sethduuid vm2-rhel.vdi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now add the new VDI to your VirtualBox environment.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[NantesJUG: Next Meeting Friday November 13th about 'Google Technologies']]></title>
            <link>https://tgrall.github.io/blog/2009/11/08/nantesjug-next-meeting-friday-november-13th-about-google-technologies</link>
            <guid>/2009/11/08/nantesjug-next-meeting-friday-november-13th-about-google-technologies</guid>
            <pubDate>Sun, 08 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[This Friday , the Nantes JUG is pleased to organize a conference about "Google Technologies". Didier Girard, http]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://sites.google.com/site/nantesjug/_/rsrc/1222637453551/config/app/images/customLogo/customLogo.gif?revision=2" class="img_ev3q"></p><p>This Friday , the Nantes JUG is pleased to organize a conference about "Google Technologies". Didier Girard, <a href="http://twitter.com/dgirard" target="_blank" rel="noopener noreferrer">http://twitter.com/dgirard</a> , will be presenting and demoing cool stuff from Google:</p><ul><li>GWT 2</li><li>Android</li><li>Wave</li><li>App Engine</li></ul><p>Want to come? Register for free <a href="http://jugevents.jugpadova.it/jugevents/event/registration.form?event.id=20744" target="_blank" rel="noopener noreferrer">here</a></p><p>The event will occur at the "<a href="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=ecole+des+mines+de+nantes&amp;sll=47.176415,-1.340556&amp;sspn=0.078063,0.181103&amp;ie=UTF8&amp;hq=%C3%89cole+des+mines+de+Nantes&amp;hnear=%C3%89cole+des+mines+de+Nantes,+France&amp;ll=47.283363,-1.520834&amp;spn=0.019476,0.045276&amp;t=h&amp;z=15&amp;iwloc=near" target="_blank" rel="noopener noreferrer">Ecole des Mines de Nantes</a>" one of our sponsor from 7 to 9 pm.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[USI2009: The Geek and Boss French Conference]]></title>
            <link>https://tgrall.github.io/blog/2009/07/08/usi2009-the-geek-and-boss-french-conference</link>
            <guid>/2009/07/08/usi2009-the-geek-and-boss-french-conference</guid>
            <pubDate>Wed, 08 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[This year I was lucky enough to have a presentation at the second edition of the "UniversitÃ© du SI", organized by Octo Technologies. I have to say that this conference is one of the best that I have attended, for sure it is the best in France. Unfortunately I was only able to attend the first day of the conference, but even in one day, I was very happy with the content of the presentations, keynotes, and networking opportunities.]]></description>
            <content:encoded><![CDATA[<p>This year I was lucky enough to have a presentation at the second edition of the "<a href="http://www.universite-du-si.com/" target="_blank" rel="noopener noreferrer">UniversitÃ© du SI</a>", organized by <a href="http://octo.com/" target="_blank" rel="noopener noreferrer">Octo Technologies</a>. I have to say that this conference is one of the best that I have attended, for sure it is the best in France. Unfortunately I was only able to attend the first day of the conference, but even in one day, I was very happy with the content of the presentations, keynotes, and networking opportunities.</p><p>I won't go in details in all the presentations that I have seen, Google for the Enterprise, Application Server Future, Usability concerns, and keynotes. If you want to have a good feedback about this conference I invite you to read, in French, the reports from <a href="http://www.touilleur-express.fr/tag/usi/" target="_blank" rel="noopener noreferrer">Le Touilleur Express</a>.</p><p>Let me just share the presentation that I gave with <a href="http://massol.net/" target="_blank" rel="noopener noreferrer">Vincent Massol</a> from <a href="http://www.xwiki.com/" target="_blank" rel="noopener noreferrer">XWiki</a>, about CMS vs Wiki.</p><p><strong>Wiki vs CMS duel</strong></p><p>First of all, the room was packed, so it looks like it is an interesting subject for many of you, so do not hesitate to post comments or question on this entry. Vincent and I will be pleased to update our presentation for a new event.</p><p>The main message of the talk was:</p><ul><li><strong>For collaboration on content</strong> the wiki is king</li><li><strong>For publication of content</strong> the CMS is king</li></ul><p><a href="http://www.slideshare.net/tgrall/wiki-vs-cms-1678352" target="_blank" rel="noopener noreferrer" title="Wiki vs CMS ">Wiki vs CMS </a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Next Generation Portals : How OpenSocial Standard Adds Social to the Mix?]]></title>
            <link>https://tgrall.github.io/blog/2009/04/07/next-generation-portals-how-opensocial-standard-adds-social-to-the-mix</link>
            <guid>/2009/04/07/next-generation-portals-how-opensocial-standard-adds-social-to-the-mix</guid>
            <pubDate>Tue, 07 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[I have published on SlideShare a new presentation about OpenSocial and eXo Platform.]]></description>
            <content:encoded><![CDATA[<p>I have published on SlideShare a new presentation about OpenSocial and eXo Platform.</p><p>Feel free to test OpenSocial and eXo Platform integration by downloading latest release of eXo products.</p><p><a href="https://www.slideshare.net/tgrall/open-social-introduction-jug-summercamp-2010" target="_blank" rel="noopener noreferrer">Open Social Introduction - JUG SummerCamp 2010</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Conference season for eXo Platform in Paris]]></title>
            <link>https://tgrall.github.io/blog/2009/03/30/conference-season-for-exo-platform-in-paris</link>
            <guid>/2009/03/30/conference-season-for-exo-platform-in-paris</guid>
            <pubDate>Mon, 30 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[eXo Platform, and I, will be present in conferences in the upcoming weeks:]]></description>
            <content:encoded><![CDATA[<p>eXo Platform, and I, will be present in conferences in the upcoming weeks:</p><ul><li><a href="http://www.solutionslinux.fr/" target="_blank" rel="noopener noreferrer">Linux Solutions</a>, March 31st - April 2nd : In addition to the demonstration pod where you can meet eXo people, I am inviting you to joing us during the <a href="http://www.ow2.org/view/Events2009AnnualConference/" target="_blank" rel="noopener noreferrer">OW2 Annual Conference</a> presentations:<ul><li>Next generation Portals: how OpenSocial standard adds social to the mix (April 2, 01:30 - 02:00)</li><li>Which Portlet Bridge is made for you? (April 2, 02:00 - 02:30)</li></ul></li></ul><p>You can find the <a href="http://www.ow2.org/view/Events2009AnnualConference/Sessions" target="_blank" rel="noopener noreferrer">full program here</a>.</p><ul><li><a href="http://www.salon-intranet.com/" target="_blank" rel="noopener noreferrer">Salon Intranet</a>, May 12th,13th : Once again, eXo will be present with a demonstration pod, but also come to meet eXo CEO, Benjamin Mestrallet and myself during the "eXo Platform, the Open Source solution for your Intranet" on May 12th from 3pm-4pm.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JAX-WS: How to configure the service end point at runtime?]]></title>
            <link>https://tgrall.github.io/blog/2009/02/17/jax-ws-how-to-configure-the-service-end-point-at-runtime</link>
            <guid>/2009/02/17/jax-ws-how-to-configure-the-service-end-point-at-runtime</guid>
            <pubDate>Tue, 17 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[When deploying your Web Service client you often need to change the endpoint of the service that &nbsp;has been set during the code generation. This short post explains how you can set change it at runtime in the client code.]]></description>
            <content:encoded><![CDATA[<p>When deploying your Web Service client you often need to change the endpoint of the service that <!-- -->&nbsp;<!-- -->has been set during the code generation. This short post explains how you can set change it at runtime in the client code.</p><p>You have two approaches to do that:</p><ul><li>set the endpoint in the <code>Port</code> using the <code>BindingProvider</code></li><li>get the endpoint <code>URL</code> from the WSDL itself at runtime</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-binding-provider-to-set-the-endpoint-url">Use the Binding Provider to set the endpoint URL<a class="hash-link" href="#use-the-binding-provider-to-set-the-endpoint-url" title="Direct link to heading">â€‹</a></h3><p>The first approach is to change the
BindingProvider.ENDPOINT_ADDRESS_PROPERTY property value of the
BindingProvider (Port) using the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">EmployeeServiceService</span><span class="token plain"> service </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">EmployeeServiceService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">EmployeeService</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEmployeeServicePort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">BindingProvider</span><span class="token plain"> bp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BindingProvider</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getRequestContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BindingProvider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">ENDPOINT_ADDRESS_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://server1.grallandco.com:8282/HumanRessources/EmployeeServiceService"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Employee</span><span class="token plain"> emp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEmployee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Result = "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> emp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-wsdl-to-get-the-endpoint-url">Use the WSDL to get the endpoint URL<a class="hash-link" href="#use-the-wsdl-to-get-the-endpoint-url" title="Direct link to heading">â€‹</a></h3><p>Another part is to set the WSDL when you are creating the Service. The
service will be using the value that is located in the WSDL port -SOAP
Endpoint-. This is simply done using the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">EmployeeServiceService</span><span class="token plain"> service </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">org</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">demo</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">service</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">EmployeeServiceService</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://server1.grallandco.com:8282/HumanRessources/EmployeeServiceService?wsdl"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://service.demo.org/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"EmployeeServiceService"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">EmployeeService</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEmployeeServicePort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Employee</span><span class="token plain"> emp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEmployee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Result = "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> emp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that, in Glassfish, like lot of Web Service environments the WSDL can generate dynamically the Endpoint URL based on the URL used
<!-- -->&nbsp;<!-- -->to get the WSDL. With this approach you can also dynamically
change the Soap endpoint. (If compatible with the network configuration
of the production environment.)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Interest of Enterprise Portals]]></title>
            <link>https://tgrall.github.io/blog/2009/02/10/interest-of-enterprise-portals</link>
            <guid>/2009/02/10/interest-of-enterprise-portals</guid>
            <pubDate>Tue, 10 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[I am writing this post as an answer to Christian Faure's blog post, (in French), about interest of enterprise portals. Let me take each point, one by one and comment them. I won't go in the all the details of many other points that why new enterprise portals are interesting for many of us, I just want to focus on Christian's remarks.]]></description>
            <content:encoded><![CDATA[<p>I am writing this post as an answer to <a href="http://www.christian-faure.net/2009/01/31/de-linteret-dun-portail-dentreprise/" target="_blank" rel="noopener noreferrer">Christian Faure's blog post</a>, (in French), about interest of enterprise portals. Let me take each point, one by one and comment them. I won't go in the all the details of many other points that why new enterprise portals are interesting for many of us, I just want to focus on Christian's remarks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-access-point">Single Access Point<a class="hash-link" href="#single-access-point" title="Direct link to heading">â€‹</a></h3><blockquote><p>Christian's quote: I do not need it, I have bookmarks, that I can put in any of my internet browser, allowing me to access any Web applications that I am using.</p></blockquote><p>I think that here it is a little broader that simply the bookmarks, but let starts with this.</p><p>Some other important part of the "single access point" is the fact that it becomes your home page in your working environment where you not only have access to many "links"  but also you have some information that are pushed to you in a personalized and automatic fashion without having to go to each applications, some example:</p><ul><li>a manager see that he has some holiday or expenses to approve</li><li>a content editor see which content has been modified and should be validated to be published.</li></ul><p>Another interesting point, is the fact that the IT <!-- -->&amp;<!-- --> Business people define together what is the important view for this "portal home page" providing automatically the needed information to the users depending of its profile.</p><p>Finally you can access your portal from everywhere, from any browser, so your â€œworking environmentâ€ is always with you - from any browser, or computer/device. If you are using your browser bookmark you are â€œlimitedâ€ to your computer only (I know you can use internet bookmak service Ã  la Delicious)</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="many-application-screens-in-the-same-time">Many Application screens in the same time<a class="hash-link" href="#many-application-screens-in-the-same-time" title="Direct link to heading">â€‹</a></h5><blockquote><p>Christian's quote: I do not need that since I can use many windows, or tabs in my Web browser</p></blockquote><p>First of all, deploying a portal does not mean that you "must" execute all the applications in it. But I have to admit that it is quite useful to be able to have a quick overview of all the applications, content that you need to be aware of. When designing your portal you first design the way you want to aggregate the content based on the user profiles/roles. This is a key point in a portal project, you need to take time to choose the information you will make available to your user.</p><p>I can reuse the example of the business process/workflow validation from the portal page. Since you are authenticated, information can be pushed to your page to inform you that you have some tasks to manage and this without to have to go to the application itself. It could make you more efficient.</p><p>All these do not mean that you have many application screens in the same time but an overview of your most important application. Then based on the design of your application or portal you will jump to the application in another window/tab, or use the application in the portal.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-authentication-point">Single Authentication Point<a class="hash-link" href="#single-authentication-point" title="Direct link to heading">â€‹</a></h3><blockquote><p>Christian's quote:  Any Active Directory or LDAP will do that the same way</p></blockquote><p>Portal is not necessary a "Single Authentication Point" it depends how you look at it.</p><p>If you have multiple Web applications, including the portal, Portal is not necessary the single entry point, any application that will share the same SSO will be the entry point. You will access one of the application (the portal or another), the SSO will ask you for your crendetials, that will then be shared by all the applications in the same â€œdomainâ€.  A good example is the Google applications, you are not forced to enter the system by iGoogle (the portal) to access in a secured way all the applications. This is a pure WebSSO concern that is not directly related to Enterprise Portals.</p><p>That said, Portals provide also a mechanism for SSO. The portal is here to propagate the identity to all the application that are integrated with it.</p><p>Letâ€™s reuse the example of the expenses validation. The manager is authenticated to the portal. The workflow/BPM application is integrated to the portal as portlet (most BPM product provides such portlets, in eXo Platform we have dedicated portlet allowing you to integrate easily JBPM and OW2 Bonita). The cool thing here is the fact that the user identity is transmitted by the portal to the portlet so the â€œBPMâ€ portlet knows who the user is and can execute the process in this context.  (You do not have to configure a WebSSO here since the credentials are managed by the backend)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="portal-provides-personnalized-views">Portal provides 'personnalized views'<a class="hash-link" href="#portal-provides-personnalized-views" title="Direct link to heading">â€‹</a></h3><blockquote><p>Christian's quote:  Who needs that?</p></blockquote><p>Here we need to see two points:</p><ol><li>the personalization: the end user that really has it "own and Personalized" page</li><li>the profiling: a view of the portal that is based on the profile (group, business role) of the connected user.</li></ol><p><em>Personalization</em></p><p>For the first point, personalization, we need to see what are the various personalization features that a portal can offer to the users.</p><p>It is true that many portals, including eXo Portal with User Pages, allow any user to create, rearrange pages. This features has probably most of the time be oversold by the vendors. Standard users do not "adapt" their tools, they most of the time use the portal as it is defined by the managers.</p><p>Another very important part of the personalization is the fact that portlets can be personalized to the user (by him or for him), for example a WebMail portlet that allows you to see "your" mails and select some properties (number of mails per pages, order, ...) This part is quite useful when you put a portal in place.</p><p>Finally, with the arrivals of new generation â€œconsumer portalsâ€ such as iGoogle, Netvibes, ... users have started to create their own dashboard based on a set of simple gadgets. Enterprise Portal, starting with eXo Portal, provide now these features that are simpler to use than standard portal page creation.</p><p><em>Profiling</em></p><p>So personalization is quite important but the real benefits of most of the enterprise portals, so not come directly from the â€œpersonalizationâ€ but more from the profiling. The portal, and applications are managed based on the role of the user in the enterprise.</p><p>The pages you can see, the content of the applications available on the pages are not managed directly by you, but by your role. This is very useful to help people to be more productive. The flip side of that: when designing/deploying a portal it is important to take some time to understand the way people are working to give them â€œtheir portalâ€. The use of the profiling will help the IT to provide a business view of the information system.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="an-page-with-integrated-applications">An page with integrated applications<a class="hash-link" href="#an-page-with-integrated-applications" title="Direct link to heading">â€‹</a></h3><blockquote><p>Christian's quote:  Who is "working in a portal? A simple personalizes page with widgets will offer me the perfect dashboard to manage my daily work and launch a full page with the application if needed.</p></blockquote><p>For sure today's portal are not built to be used directly to "work" in them, but this is more a design issue, than an user experience one. When the application is already built and working perfectly used in a stand alone mode, no point to entirely "portletize" it to run it in the portal. When it is the case just develop Web services and publish them in the portal using Portlets or Gadgets.</p><p>At the opposite when you build a new application from scratch, it may be useful to develop it to be executed in a Portal, to leverage interesting services of a portal: profiling, integrated SSO, centralized management, ... The integration of applications in Portal are made even simpler today with the concept of Portlet Bridges allowing the developer to use a rich framework (JSF, Seam, ...) and publish the application in the portal.</p><p>Yes I do agree with that, you can see the portal as simple dashboard, but in reality if you take some time to design it properly you can also use the application in it. Portlets have been made for that. You can for example design your applications/portlets to leverage the state of the portlet: when normal you use it as a â€œsimple viewâ€ on your dashboard, when maximize you can use the full application.</p><p>Another important point, it is the fact that with the portal the user has a virtualize working environnement that is not dependant of the client machine but work in a simple browser. With eXo WebOS, we have pushed the concept further to provide a Web based operating system giving access in a multi window environment to the various application and content from anywhere with a rich user experience. (So we are pushing all the benefits of Enterprise Portal into an virtual operating system)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>In my opinion enteprise portals are still very interesting. We need to keep in mind that here we are talking about "enterprise", just to say that deploying a portal in the enteprise is also here to provide consistent user experience to the user, facilitate the management of the applications and users for the IT, etc etc...</p><p>Like any other IT project, the Portal project should be managed and validated by user and management (Business and IT), if not it will be a failure. So when starting such project it is important to scope it correctly and deploy it step by step. (it is a content oriented portal or an intergration one?; which type of users will be the first audience? Which content <!-- -->&amp;<!-- --> data will be the most important for them, ...) Another important point is, on the technology side, how the portal that I will chose can be integrated with my current IS?  Finally when you start the project always start with the "most bang for the buck" approach, choose the community of users and applications that will help you to sell the project.</p><p>In my arguments, I have been focused on a very centralized view of the enterprise (the IT and Business people choose for the rest of us), this is because it is one important point in current portal project. But do not get me wrong, I am also a big fan of the community driven portals and tools. The next step in the portal deployment is to give more power to the user letting them create not "their own portal" but use the existing infrastructure to create portals/sub-portals based on their center of interest/role in the enterprise. This is where all the concepts coming from the Social Networks will be very useful in the enterprise, At eXo Platform, we have integrated in our portal an Open Social container, that is fully working in the context of the Portal and Web OS to facilitate the created of Enterprise Social Network Portals.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Screen Cast: eXo WebOS: How to use a Google Gadget as an eXo WebOS Application]]></title>
            <link>https://tgrall.github.io/blog/2009/01/26/screen-cast-exo-webos-how-to-use-a-google-gadget-as-an-exo-webos-application</link>
            <guid>/2009/01/26/screen-cast-exo-webos-how-to-use-a-google-gadget-as-an-exo-webos-application</guid>
            <pubDate>Mon, 26 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[In this short screen cast I show you, how you can easily take a Google Gadget and use it inside WebOS.]]></description>
            <content:encoded><![CDATA[<p>In this short screen cast I show you, how you can easily take a Google Gadget and use it inside WebOS.</p><iframe width="675" height="380" src="https://www.youtube.com/embed/ijD0ZPnTcKg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[eXo Portal and Google Gadgets: Great post from Laurent Bois]]></title>
            <link>https://tgrall.github.io/blog/2008/11/24/exo-portal-and-google-gadgets-great-post-from-laurent-bois</link>
            <guid>/2008/11/24/exo-portal-and-google-gadgets-great-post-from-laurent-bois</guid>
            <pubDate>Mon, 24 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I cannot find time to post any interesting things lately, so I can only share great stuff with readers.]]></description>
            <content:encoded><![CDATA[<p>I cannot find time to post any interesting things lately, so I can only share great stuff with readers.</p><p>This week end, <a href="http://www.laurentbois.com/" target="_blank" rel="noopener noreferrer">Laurent Bois</a> has published a great post about:</p><ul><li><a href="http://laurentbois.com/2008/11/23/deploy-a-remote-opensocial-google-gadget-made-with-gwt-in-exo/" target="_blank" rel="noopener noreferrer">Deploying a remote (OpenSocial) Google Gadget made with GWT in eXo</a></li></ul><p>Take a look to this tutorial, that is based on eXo Portal 2.5 and eXo WebOS 1.5.</p><p><img loading="lazy" src="http://1.bp.blogspot.com/_aoQgQ1obiyE/SSqarvVSitI/AAAAAAAAAF0/GnCQ-Y-17xo/s320/image-29.png" class="img_ev3q"></p><p>Thanks Laurent for this great post!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[(French) eXo Platform Nominee for 01.Net awards.]]></title>
            <link>https://tgrall.github.io/blog/2008/10/06/french-exo-platform-nominee-for-01-dot-net-awards</link>
            <guid>/2008/10/06/french-exo-platform-nominee-for-01-dot-net-awards</guid>
            <pubDate>Mon, 06 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[eXo Platform is a nominee in the 01.net Pro 2008 awards. If you like our product I am inviting you to vote for our solution:]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://2.bp.blogspot.com/_aoQgQ1obiyE/SOnBLoos9wI/AAAAAAAAAFU/H8_WYRtid5U/s400/01trophy.png" class="img_ev3q"></p><p><a href="http://www.exoplatform.org/" target="_blank" rel="noopener noreferrer">eXo Platform</a> is a nominee in the <a href="http://www.01net.com/" target="_blank" rel="noopener noreferrer">01.net</a> Pro 2008 awards. If you like our product I am inviting you to vote for our solution:</p><ul><li><p><a href="http://www.01net.com/contenu/3322/trophees2008/trophees-pro-1" target="_blank" rel="noopener noreferrer">01Net Pro Awards</a>In addition to the professional awards you can also vote for your favorites products, technologies, entrepreneurs, ... :</p></li><li><p><a href="http://www.01net.com/contenu/4681/trophees2008/trophees-1" target="_blank" rel="noopener noreferrer">01Net Technologies Awards</a>And if you do not know eXo Platform yet... this is a good time to test it!</p></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New cool tools that  I am using: DabbleBoard &amp; Balsamiq]]></title>
            <link>https://tgrall.github.io/blog/2008/08/07/new-cool-tools-that-i-am-using-dabbleboard-and-balsamiq</link>
            <guid>/2008/08/07/new-cool-tools-that-i-am-using-dabbleboard-and-balsamiq</guid>
            <pubDate>Thu, 07 Aug 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[When working on software design, UI Mockups are quite important and Patrice, colleague of mine at eXo has pointed me to a very cool tool to use when you have to quickly do a mockup, and work with the dev team in an iterative fashion]]></description>
            <content:encoded><![CDATA[<p>When working on software design, UI Mockups are quite important and Patrice, colleague of mine at eXo has pointed me to a very cool tool to use when you have to quickly do a mockup, and work with the dev team in an iterative fashion: This tool is "<a href="http://www.balsamiq.com/products/mockups" target="_blank" rel="noopener noreferrer">Balsamiq Mockup</a>". Here an example of mockup realized with Balsamiq:</p><p><a href="http://www.balsamiq.com/images/myTunez.gif" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://www.balsamiq.com/images/myTunez.gif" class="img_ev3q"></a></p><p>Also if you read more about the tool, you can see that it has native integration with others tools such as JIRA, so cool to be able to integrate a mockup easily when defining a new item...</p><p>Take a look to this screencast explaining the basic features and use of the product:</p><iframe width="675" height="380" src="https://www.youtube.com/embed/aJTuFRaIi_g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe><p>Another interesting tool is the online white board "<a href="http://www.dabbleboard.com/main" target="_blank" rel="noopener noreferrer">DabbleBoard</a>" that allows user to quickly create and share graphs, ideas, ... A very cool feature of this tool is the automatic recognition of shapes. The best way to understand, is simply to see it in action:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="viddler" height="342" width="437"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;param name="movie" value="http://www.viddler.com//simple_on_site/a95e1956" /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;param name="allowScriptAccess" value="always"&gt;&lt;param name="allowFullScreen" value="true"/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;embed src="http://www.viddler.com//simple_on_site/a95e1956" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" name="viddler" height="342" width="437"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/embed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/object&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[A month in eXo... busy busy busy...]]></title>
            <link>https://tgrall.github.io/blog/2008/07/29/a-month-in-exo-dot-dot-dot-busy-busy-busy-dot-dot-dot</link>
            <guid>/2008/07/29/a-month-in-exo-dot-dot-dot-busy-busy-busy-dot-dot-dot</guid>
            <pubDate>Tue, 29 Jul 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I have been within eXo Platform for almost 2 months now.. As expected, it is crazy, and exciting. This is why I did not have lot of time to blog... Ideas are here, just time is not... So here a very quick post on my current work...]]></description>
            <content:encoded><![CDATA[<p>I have been within eXo Platform for almost 2 months now.. As expected, it is crazy, and exciting. This is why I did not have lot of time to blog... Ideas are here, just time is not... So here a very quick post on my current work...</p><p>We have been releasing new releases of products (Portal/Portlet Container, Collaboration Suite), deliver a training on eXo Portal,  writing docs, articles, and many other exciting things... One of them is this nice example of integration of <a href="http://blog.exoplatform.org/2008/07/29/create-gwt-portlet-to-deploy-in-exo/" target="_blank" rel="noopener noreferrer">GWT Google Gadget in eXo WebOS</a>.</p><p>During this period, when I was not working with customers, prospects and partners, I have learned a lot about one of the most exciting and powerful features: eXo ECM coupled with eXo Portal/WebOS. eXo exposed using a powerful UI, and set of API, its JavaContent Repository on which you can build powerful sites/portal using eXo templating engine... and one other cool thing, at least for me, is the fact that most of the programming that you do, including rich Ajax based application is done using Groovy. (using GroovyServer Pages)... More to come about eXo features on this blog, but the best place to be is to follow our company/project blog at <a href="http://blog.exoplatform.org" target="_blank" rel="noopener noreferrer">http://blog.exoplatform.org</a>, where all the team is presenting new features, and events of the eXo community...</p><p>Also, I have created,  with Sebastien Roul a JUG in Nantes, here some information for French people:</p><ul><li><a href="http://www.nantesjug.org/" target="_blank" rel="noopener noreferrer">Nantes JUG's Web Site</a></li><li><a href="http://www.nantes-developpement.com/1217255362373/0/fiche___actualite/&amp;RH=ACCUEIL" target="_blank" rel="noopener noreferrer">Press Release</a> in the "Nantes Development" site.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Joining eXo Platform]]></title>
            <link>https://tgrall.github.io/blog/2008/06/17/joining-exo-platform</link>
            <guid>/2008/06/17/joining-exo-platform</guid>
            <pubDate>Tue, 17 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I am very excited to say that this week is my first week as an employee]]></description>
            <content:encoded><![CDATA[<p>I am very excited to say that this week is my first week as an employee
of eXo Platorm. Excited for many reasons.... I'll pass on the
excitement of a new job, we are all excited about that... So what are
the others reasons:</p><ul><li>working for open source</li><li>be part of a visionary team/product.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-for-open-source">Working for open source<a class="hash-link" href="#working-for-open-source" title="Direct link to heading">â€‹</a></h4><p>Some of you know that I have been working for Oracle from 1999 to 2007,
and lately for Sogeti (Cap Gemini Group) that is one of the biggest
IBM's partner... So moving to eXo Platform an open source company is
definitively a big shift for me. Anyway, I was looking for more â€œagileâ€
working environment....</p><p>I am pleased to work for a product where users can follow on a daily
basis what is the exact status of the different features, not from
marketing slides but directly from the source trunk... But also where
any user can influence the product either by providing direct feedback
to the developers using mailing lists, tracking tools and wikis; even
more if they want to participate to the development itself.</p><p>So being open source, will avoid some kind of lock-in, but this is not
the only point: standards is another important point. eXo Platform,
since its first release in 2003, has been great about defining,
supporting and implementing standards. So eXo Portal is a great
implementation of a JSR-168 portlet container, and it is today also one
of the first portal and portlet container supporting the new JSR-286
Java Portlet API. In addition to the Java Portlet API support, it is
also possible to consume remote portlet using WSRP 1<!-- -->&amp;<!-- -->2. As you
can see eXo Portal is a great solution to implement and integrate an
enterprise portal based on standards. In addition to portal standard,
eXo is also providing a powerful ECM that is based on a Java Content
Repostory (JCR/JSR-170) implementation.</p><p>Based on the fact that eXo is open source and support industry
standard
it is a great tool to use; and it has been chosen by some other
projects for example:</p><ul><li>NovaForge: an innovative Forge platform that aggregates and
glue
several Open Source tools used for Software Developments such as SVN
repositories, Bug trackers, Continuous buildâ€¦ It used eXo WebOS and ECM
to provide a single access points to all the resources as you can see
in the following screenshot.</li></ul><p>![](<a href="http://farm4.static.flickr.com/3087/2586150929_85d1f80644_m.jpg" target="_blank" rel="noopener noreferrer">http://farm4.static.flickr.com/3087/2586150929_85d1f80644_m.jpg</a> Novaforge and eXo WeboS )</p><ul><li>Bonita: is an open source workflow and BPM that is using
eXo WebOS to
expose its console, as you can see in the following screenshot</li></ul><p>You also have other softwares that are using various part of the product from te JCR to the Portlet Container... it depends a lot of your needs...</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-visionary-team-and-product">Working with visionary team and product<a class="hash-link" href="#working-with-visionary-team-and-product" title="Direct link to heading">â€‹</a></h4><p>eXo Platform is a lot more than en enterprise portal. The core architecture of eXo is based on an internal SOA built at the top of an IoC container (Pico Container). This architecture has been leveraged in many point to expose new services and assemble all the components of the eXo Platform suite.</p><p>Let's take a quick look to the components of eXo Platform:</p><ul><li>eXo Portal 2.0: create and publish your portal
using a simple
and powerful Ajax based user interface</li><li>eXo ECM 2.0: manage all your digital assets that are stored
in the JCR,
and expose them using many protocols (WebDac, FTP, CIFS, ...)* eXo CS 1.0: collaborate inside and outside your enterprise
using shared
calendars, WebMail, Forums and Contact Management</li><li>eXo WebOS 1.0: virtualize your desktop in this revolutionary user
interface, where you can expose portlets and widgets and run any Web
applications.</li></ul><p><img loading="lazy" src="http://farm4.static.flickr.com/3262/2586521963_56fece571a_m.jpg" class="img_ev3q"></p><p>In addition to these component that are available today in the eXo Ultimate distribution or as stand alone solution, you can see in the source trunk:</p><ul><li>LiveRoom: a Web based real time collaborative tools allowing shared whiteboard, visioconference/VoIP using once again your browser, (in fact we have been implementing  it using Flash/Flex)</li><li>WCM: Web CMS System that is extending the ECM to facilitate Web site publishing.</li><li>and many other features...</li></ul><p>One last example of the vision of the eXo Platform is the fact that all services could be exposed either as REST Services using the JSR-311(JAX-RS) or as SOAP Services using the JSR-181 (Annotations based services).</p><p>One of the feature that I am currently watching closely is the implementation and support of Open Social standard, that allows easy integration of "social-applications" with other very hot subjects for
the â€œEnterprise 2.0â€ such as social networks, mashups and so on...</p><p>Stay tuned, and take the time to download and install eXo Platform...</p><p>As a closure, I just invite you to take a look to eXo and contact me if you have any question about the product or if you have.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[The good side of expensive oil price...]]></title>
            <link>https://tgrall.github.io/blog/2008/06/02/the-good-side-of-expensive-oil-price-dot-dot-dot</link>
            <guid>/2008/06/02/the-good-side-of-expensive-oil-price-dot-dot-dot</guid>
            <pubDate>Mon, 02 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[We are all badly impacted with the price of oil. Yeah it really expensive,]]></description>
            <content:encoded><![CDATA[<p>We are all badly impacted with the price of oil. Yeah it really expensive,
now people is the US have a gas that is as expensive as France's
prices, shocking! ;).</p><p>Anyway, I do not want to talk about cars and gas, but really on the
good effect of the expensive oil. I do believe that expensive oil has
good impacts, not for my bank account but for the "planet", and may be
indirectly for software industry.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="change-in-transportation">Change in transportation<a class="hash-link" href="#change-in-transportation" title="Direct link to heading">â€‹</a></h4><p>First of all, we are all forced to try to save gaz/enegy to save money. So people are thinking more about alternative to "individual car driving": carpooling, public
transportations are more often used these days. I
addition, people are using public bikes that you can find
more and more in cities now. Nantes, where I live has launched its new
program "<a href="http://www.bicloo.nantesmetropole.fr/" target="_blank" rel="noopener noreferrer">Bicloo</a>". So not only people are changing
but I am sure industrials will also adapt to this offering greener
alternative to oil for transportation. Personally, I would like to buy
a cheap
electric car to be able to go in the city, at least to reach the
various Park&amp;Ride points. I have to say that I really like the<a href="http://www.google.org/recharge/" target="_blank" rel="noopener noreferrer">
Google RecharcheIT</a> initiative, that is used to charge plug-in
hybrid cars... This is enough for the "transportation" and cars....</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="change-in-way-we-do-work">Change in way we do work<a class="hash-link" href="#change-in-way-we-do-work" title="Direct link to heading">â€‹</a></h4><p>I believe also that expensive oil will have an impact on the way we do
work: we must try to avoid traveling all the time. Some work could be
done just using the Internet and good collaborative tools. When most of
a work is about: reading mail, phone talks, and meetings all these
activities could be done using "IT" isn't?</p><p>I used to work from home a lot when I was working for Oracle HQ from
France: the working kit is quite simple and not that expensive: laptop,
fast Internet connection, VoIP phone, VPN and a Collaborative
Suite (webmail, shared calendar, web conference tools, social networks, ...). Using this simple set of tools I was as productive as any employee but without
traveling that much. I do not say that we should all work from home or smal local office, but we should try to do it. And limit our endless travels, that burns so much energy for CO2.... Yes all the IT is also consuming energy, but I do believe that it is probably easy to make IT industry "greener" than car industry... (I might be wrong...), but still at the office we will use computers/IT anyway..</p><p>So many of the software vendor are offering tools to make us more productive using the "network as the computer" -we all remember this-.
One example of tools that in fact is "greener" is <a href="http://www.exoplatform.org" target="_blank" rel="noopener noreferrer">eXo Platform</a>. eXo provides all the tools for collaborative work: personalized portal, webmail, chat, shared calendar, ... and soon
LiveRoom that is the Web conference/VoIP solution integrated to your   navigator (Flex based application). In addition to this, users can also
virtualized their desktop using eXo WebOS, and access his work   environment from everywhere... I know that other solutions are available on the market, from various vendors such as Oracle, IBM,   Microsoft, I have chosen eXo first of all it is an open source project where any user can participate at least by asking from requirements   proposing ideas, but also and mainly because its offering is based on industry standards that will help integration to any existing IT   systems. (... and also because I am currently working closely with the eXo team...)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="it-for-a-greener-world">IT for a greener world<a class="hash-link" href="#it-for-a-greener-world" title="Direct link to heading">â€‹</a></h4><p>In conlusion, we, IT folks can I have some impact on the environment by helping people to be more effective when doing remote work, avoiding useless commute... Clearly, the technologies are avaiable today to help us, to work efficiently from home or "virtual offices" the main constraints are coming from enterprise/management culture.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Seesmic in action on TechCrunch's 'great' Twitter post....]]></title>
            <link>https://tgrall.github.io/blog/2008/05/26/seesmic-in-action-on-techcrunchs-great-twitter-post-dot-dot-dot</link>
            <guid>/2008/05/26/seesmic-in-action-on-techcrunchs-great-twitter-post-dot-dot-dot</guid>
            <pubDate>Mon, 26 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Like many of you I am following TechCrunch, and one of the latest post was quite "amazing":]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://www.techcrunch.com/wp-content/themes/techcrunch/techcrunch.gif" class="img_ev3q">
Like many of you I am following <a href="http://www.techcrunch.com/" target="_blank" rel="noopener noreferrer">TechCrunch</a>, and one of the latest post was quite "amazing":</p><ul><li>see the <a href="http://www.techcrunch.com/2008/05/25/twitter-2/" target="_blank" rel="noopener noreferrer">Twitter!</a> post from Michael Arrigton.More than the post itself, the comments that this single word generated is quite funny: so far we have 291 comments... As you can guess I have not read (all of) them... But something is interesting, you can see that many people have used <a href="http://www.seesmic.com/" target="_blank" rel="noopener noreferrer">Seesmic </a>to drop a video comment.
<a href="http://www.seesmic.com/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://api.seesmic.com/images/seesmic_logo.png" class="img_ev3q"></a></li></ul><p>I have to say that I am quite impressed by the large number of comments that have  been made using Seesmic.  Bravo to Loic Lemeur's vision for this tools... This is simply the new and easy way to really do the "read/write" Web, I should say "record/watch" Web.</p><p>One thing is still bothering me, how to I find interesting content that is saved using Seesmic?</p><p>Yes, I can use social features to subscribe to people that are sharing similar center of interest.  But I cannot find any folksonomy on Seesmic, am I missing it, or it is just not available yet?</p><p>Or let's dream and imagine than Web search/index engine will be able to index these video content to help me to find interesting content -may be this exists but I have not found it yet-.  Loic, is it your next big feature to transform Seesmic in the next killer app?</p><p>So far I do not have the feeling that I missed anything -watch the comments and you will understand-, but it looks like people love to use the video to discuss/share with others, and I can understand why... We have moved from technical tools: Complex Web Authoring Platform, to easy Blog publishing, to pure video recording tool, so very easy indeed. I can imagine my mother posting a comment to a blog or video now... thanks to Seesmic!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[What is Twitter? It is a simple tool to turn off lights]]></title>
            <link>https://tgrall.github.io/blog/2008/05/21/what-is-twitter-it-is-a-simple-tool-to-turn-off-lights</link>
            <guid>/2008/05/21/what-is-twitter-it-is-a-simple-tool-to-turn-off-lights</guid>
            <pubDate>Wed, 21 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Lately, I have been presenting Web 2.0 tools to my coworkers, and explaining how it could be used to improve the way we do "things" (especially business). Here a list of some of the tools I am talking about blogs, wikis, second life, social networking/bookmarking/tagging/rating,, facebook, friendfeed, youtube, seesmic, feeddo, flock and many others depending of the questions and the mood of the moment...]]></description>
            <content:encoded><![CDATA[<p>Lately, I have been presenting Web 2.0 tools to my coworkers, and explaining how it could be used to improve the way we do "things" (especially business). Here a list of some of the tools I am talking about blogs, wikis, second life, social networking/bookmarking/tagging/rating,, facebook, friendfeed, youtube, seesmic, feeddo, flock and many others depending of the questions and the mood of the moment...</p><p>One of the tool that I love to present is Twitter... and now I have an good example of why we all need to be on Twitter ;)</p><p><a href="http://www.vimeo.com/1025711?pg=embed&amp;sec=1025711" target="_blank" rel="noopener noreferrer">Control Lights with Twitter</a> from <a href="http://www.vimeo.com/user284499?pg=embed&amp;sec=1025711" target="_blank" rel="noopener noreferrer">Justin Wickett</a> on <a href="http://vimeo.com?pg=embed&amp;sec=1025711" target="_blank" rel="noopener noreferrer">Vimeo</a>.</p><p>Thanks to Justin from Twitter...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaOne 2008: Groovy and Grails presentations and code]]></title>
            <link>https://tgrall.github.io/blog/2008/05/16/javaone-2008-groovy-and-grails-presentations-and-code</link>
            <guid>/2008/05/16/javaone-2008-groovy-and-grails-presentations-and-code</guid>
            <pubDate>Fri, 16 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Andres and Guillaume have posted on the Groovy Users list the pointers to many (if not all) the Groovy and Grails sessions of JavaOne 2008...Â You want to learn more, this is a great opportunity to do it so:]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://media.xircles.codehaus.org/_projects/groovy/_logos/medium.png" class="img_ev3q">Andres and Guillaume have posted on the Groovy Users list the pointers to many (if not all) the Groovy and Grails sessions of JavaOne 2008...&nbsp;You want to learn more, this is a great opportunity to do it so:</p><ul><li><a href="http://permalink.gmane.org/gmane.comp.lang.groovy.user/32891" target="_blank" rel="noopener noreferrer">JavaOne 2008: Groovy and Grails presentations and code</a></li></ul><p>Thanks to all of the authors... I would love to be there watching these session live... This post is the opportunity also to point you to this video from InfoQ of <a href="http://www.infoq.com/presentations/rudolph-grails-intro" target="_blank" rel="noopener noreferrer">Jason Rudolph doing a very nice introduction to Grails</a> during last year QCon conference...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Sun/Liferay: why? and what is the next step?]]></title>
            <link>https://tgrall.github.io/blog/2008/05/09/sun-slash-liferay-why-and-what-is-the-next-step</link>
            <guid>/2008/05/09/sun-slash-liferay-why-and-what-is-the-next-step</guid>
            <pubDate>Fri, 09 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Yesterday, I have been surprised when I saw the following announcement:]]></description>
            <content:encoded><![CDATA[<p>Yesterday, I have been surprised when I saw the following announcement:</p><ul><li><a href="http://www.liferay.com/web/guest/about_us/news/sun" target="_blank" rel="noopener noreferrer">Sun Microsystems Joins Liferay Open Source Community / Sun's new Web platform to leverage core elements of Liferay Portal 5.0.</a>One interesting thing is  Brian Chan's blog entry about <a href="http://www.liferay.com/web/bchan/blog/-/blogs/liferay_and_sun?_33_redirect=%2Fweb%2Fguest%2Fcommunity%2Fblog" target="_blank" rel="noopener noreferrer">Liferay and Sun</a> explaining how they have been working together so far... to fill the limitations of each other solutions.</li></ul><p>So today what does that means? Liferay is leveraging the development power of Sun to implements standards (for example JSR-286). I have always been frustrated by the lack of standard support and 'real' innovation in Liferay (compare to its competitors such as <a href="http://www.exoplatform.org/" target="_blank" rel="noopener noreferrer">eXo Platform</a>, and Jboss for example). In the other hand Sun will leverage the "tiny Liferay product" killing its own solution. Sun's portal is really to big without that benefits for developers/users (compare to its competitors, BEA,IBM, Oracle for example).</p><p>So what's the next step for this partnership? If Sun wants to push a real portal offering, it can only finish by a full acquisition of Liferay... even if it is stated that it is not the plan.</p><p>Let's wait and see how this "WebSynergy" goes... However one thing is cool, it will put more visibility on Enteprise Portals. With all the Web 2.0 stuff: social computing, mashups, collaborative works/intelligence, the need for "Enterprise Portal" (I should add a 2.0) is back stronger than before...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaOne 2008: my sessions choice...]]></title>
            <link>https://tgrall.github.io/blog/2008/05/01/javaone-2008-my-sessions-choice-dot-dot-dot</link>
            <guid>/2008/05/01/javaone-2008-my-sessions-choice-dot-dot-dot</guid>
            <pubDate>Thu, 01 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I have attended or presented at JavaOne for the last 6 years when I was living in the SF Bay Area... But this year I won't be in San Francisco for JavaOne. As you can guess, I am sad about that... However, I still look at the schedule and events, and here what I would like to do:]]></description>
            <content:encoded><![CDATA[<p>I have attended or presented at JavaOne for the last 6 years when I was living in the SF Bay Area... But this year I won't be in San Francisco for JavaOne. As you can guess, I am sad about that... However, I still look at the schedule and events, and here what I would like to do:</p><ul><li><a href="http://www.g2one.com/meetup/" target="_blank" rel="noopener noreferrer">Groovy/Grails meetup</a> organized by G2One and NFJS</li><li>Sun and Oracle General Sessions: Tuesday, Wednesday and Friday at 8:30am. I am particularly interested to see the Oracle's one &nbsp;talk about the Oracle/BEA deal... May be we will be able to learn more about the products roadmap</li><li>TS-6050 - Comparing JRuby and Groovy</li><li>TS-5274 - Groovy on a Cloud: Testing Java EE Platform Applications on Amazon EC2</li><li>BOF-5102 - Cooking Your Own Groovy Builder: A Step Forward into Domain-Specific Languages</li><li>TS-5793 - Groovy and Grails: Changing the Landscape of Java EE Platform Patterns</li><li>BOF-5101 - Boosting Your Testing Productivity with Groovy</li><li>TS-5764 - Grails in Depth</li><li>TS-6298 - Designing Graphical Model-Driven Applications: Lego MindStorm ... long time that I have not programmed/designed with my Legos...</li><li>BOF-4888 - Taming the Leopard: Extending OS X the Java Technology Way: would be great to see my ex-coworker talking about OS X and Java.. John and Tim are terrific developers</li><li>BOF-6400 - The Future of Guice. even if I have not used (yet) this API from Google I have been a big fan of Bob's work</li><li>TS-5657 - JavaFX Technology: Bring the Web with You--Multiple Interfaces to Games, Chat, and More</li><li>TS-4817 - The Java Platform Portlet Specification 2.0 (JSR 286)</li><li>TS-5343 - Enterprise JavaBeans (EJB) 3.1 Technology. As I am pushing more and more customer to use the standard JPA.. would be great to learn more about the next release of EJB</li><li>TS-6169 - Spring Framework 2.5: New and Notable... would like to see what will be said about SpringAppServer</li><li>TS-6072 - Advanced Enterprise Debugging Techniques</li><li>BOF-5634 -  Java EE Platform Connector Architecture 1.6 Overview. I have been using J2CA a lot lately when dealing with SOA in large IT department... So quite cool to have an update on this spec.</li><li>TS-5318 - Dealing with Asynchronicity in Java Technology-Based Web Services. A feature in the WS Stack that I have been pushing a lot...</li><li>TS-5616 - JSR 303: From a World of Constraints to Constrain the World</li><li>TS-6339 - Top 10 Patterns for Scaling Out Java Technology-Based Applications</li><li>TS-5706 - SCA and Java Platform, Enterprise Edition (Java EE Platform): Integration Inside</li><li>BOF-5495 - Untangling the Asynchronous Web</li><li>TS-5425 - JAX-RS: The Java API for RESTful Web Services</li><li>LAB-4500LT - Develop AJAX Based Portlets With OpenPortal and GWT</li><li>TS-6574 - How to Implement Your Own OpenSocial Container on the Java Platform</li><li>TS-6807 - Whatâ€™s New in Ajax</li><li>BOF-5661 - Comet: The Rise of Highly Interactive Web Sites</li><li>BOF-4922 - Writing Real-Time Web Applications, Using Google Web Toolkit and Comet</li><li>TS-5870 - The Best of Both Worlds with Javaâ„¢ Business Integration and Service Component Architecture</li><li>TS-5152 - Overview of the JavaFX Script Programming Language</li><li>TS-5572 - Groovy, the Red Pill: Metaprogramming--How to Blow the Mind of Developers on the Java Platform</li><li>TS-5815 - Going Mobile with JavaFX Script Technology, Groovy, and Google Android</li><li>TS-5535 - Tying Java Technologies Together the RESTful Way</li></ul><p>I have probably selected many conflicting sessions, not really an issue since I am not going there. That said, this year again JavaOne looks quite exciting and a lot of content again around Scripting Languages and Framework; Web2.0 related technologies and SOA.</p><p>I hope that I will be there for the 2009 one ;)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Launch of Exo Enterprise WebOS]]></title>
            <link>https://tgrall.github.io/blog/2008/04/21/launch-of-exo-enterprise-webos</link>
            <guid>/2008/04/21/launch-of-exo-enterprise-webos</guid>
            <pubDate>Mon, 21 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Last Friday (April 18th) I was attending the launch of "eXo WebOS" in Paris. Benjamin Mestrallet, creator of eXo has started the event with a presentation of the solution and its impact on the IT.]]></description>
            <content:encoded><![CDATA[<p>Last Friday (April 18th) I was attending the launch of "eXo WebOS" in Paris. Benjamin Mestrallet, creator of eXo has started the event with a presentation of the solution and its impact on the IT.</p><p>Like any internet user, each time I see eXo Web OS and applications I am very very impressed. They have pushed very far the use of AJAX based applications to offer a complete virtualization of the OS/Desktop, not in a Virtual Machine, but simply in your favorite browser.</p><p><img loading="lazy" src="http://1.bp.blogspot.com/_aoQgQ1obiyE/SAxdf2YzmSI/AAAAAAAAADk/B9iAEMKI8yc/s320/webos001.png" class="img_ev3q"></p><p>As you  can see in this screenshot, eXo is launching in your browser, a complete desktop, where I run many applications provided by eXo: Calendar, Forum, Mail, but a also a calculator gadget attached to the desktop itself. The easiest is to try the product, go to <a href="http://www.exoplatform.com/portal/public/en/quicktry" target="_blank" rel="noopener noreferrer">eXoplatform site and download it</a>.</p><p>After the presentation of the eXo new features, and vision, two customers have presented their project based on eXo Portal and Collaboration Suite:</p><ul><li><p><a href="http://www.m6.fr/" target="_blank" rel="noopener noreferrer">M6</a>. M6 is one of the major French TV channel. M6 is using eXo for their new intranet. Some of the key point that I kept from this experience:</p></li><li><p>Flexibility/Agility of the platform: M6 IT has been able, with <a href="http://www.interakting.com/" target="_blank" rel="noopener noreferrer">Business<!-- -->&amp;<!-- -->Decision</a>, to answer end user needs in term of design/look<!-- -->&amp;<!-- -->feel. Quite important in media industry ;)</p></li><li><p>Extensibility: in addition to the pure publishing of personalized pages, eXo has showed lot of power. Creation of new services based on the core architecture of eXo (IoC based container), or simply by creation new Groovy script to capture events in the Java Content Repository. One example of such script, is the creation of a new script to automatically resize images when they are published in the repository.*   <a href="http://minfin.fgov.be/" target="_blank" rel="noopener noreferrer">Belgium Minister of Finances</a>, with <a href="http://www.bull.com/" target="_blank" rel="noopener noreferrer">Bull Belgium</a> In addition to the classical portal usage of eXo. They have chosen to put in place for their 30 000 users, the brand new eXo Collaboration Suite (Mail, Calendar, Contacts) and even more exciting use the real time collaboration tools provided by eXo LiveRoom. This extension to eXo provides using a Flex based architecture exciting tools for collaborative work:</p></li><li><p>Video and Voice over IP for Web conferences</p></li><li><p>Shared Whiteboard allowing multiple people to see and modify documents and graphicsFor me these tools in addition to the eXo chat (Ajax based) are really exciting, and this for many reasons: The event was closed by a very passionate Round Table, moderated by Christian Faure (Atos Origin) with Adobe (Michael Chaize), eXo (Benjamin Mestrallet), Google (Dave Armstrong), Microsoft ( Christophe Lauer), Mozzila (Tristan Nitot) and Sun (Eric Mahe) have discussed many topics around Web/Internet, Standards, Open Source,  and Web OS... If you are french speaker I am inviting you to take a look to the recording of this event available on the eXo blog:</p></li><li><p><a href="http://blog.exoplatform.org/2008/04/19/exo-webos-launch-party-the-round-table-video-with-adobe-exo-google-mozilla-microsoft-and-sun-microsystems/" target="_blank" rel="noopener noreferrer">eXo WebOS launch Party: the Round Table Video with Adobe, eXo, Google, Mozilla, Microsoft and Sun Microsystems!</a></p></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Exposing a Database as a Web Service... with OracleAS and DB]]></title>
            <link>https://tgrall.github.io/blog/2008/03/25/exposing-a-database-as-a-web-service-dot-dot-dot-with-oracleas-and-db</link>
            <guid>/2008/03/25/exposing-a-database-as-a-web-service-dot-dot-dot-with-oracleas-and-db</guid>
            <pubDate>Tue, 25 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I am just cross posting this entry to react to this very interesting article:]]></description>
            <content:encoded><![CDATA[<p>I am just cross posting this entry to react to this very interesting article:</p><ul><li><a href="http://www.developer.com/db/article.php/3735771" target="_blank" rel="noopener noreferrer">Exposing a Database as a Web Service</a> a developer.com article...</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oracle-application-server-web-services">Oracle Application Server Web Services<a class="hash-link" href="#oracle-application-server-web-services" title="Direct link to heading">â€‹</a></h4><p>If you are an Oracle Application Server user, you may know that it is possible to expose database resources as Web Services using the OracleAS Web Services stack. You can for example using JAX-RPC based Web Service create service on a PL/SQL stored procedure, a SQL statement and even poste message on a queue (AQ). This is available in the Web Service Assembler (wsa) tool and also JDeveloper.</p><p>At the end when you have executed the wizard, you have a complete JavaEE application ready to be deloyed. All the JDBC calls and PL type mapping are done automatically by the wizard... very neat Take a look to the <a href="http://download.oracle.com/docs/cd/B32110_01/web.1013/b28974/devdbase.htm#BDCCBHFG" target="_blank" rel="noopener noreferrer">Assembling Database Web Services</a> documentation.</p><p>Here the archtecture schema of OracleAS Database Web Services:</p><p><img loading="lazy" src="http://1.bp.blogspot.com/_aoQgQ1obiyE/R-ni1lmTTxI/AAAAAAAAADc/Os4eMkzOGXM/s320/aswsv009.gif" class="img_ev3q"></p><p>It is important to mention that such service can leverage the WS-* support of OracleAS and any JAX-RPC handler you want to add to the service.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bpel-pm-and-database-resources">BPEL PM and Database Resources<a class="hash-link" href="#bpel-pm-and-database-resources" title="Direct link to heading">â€‹</a></h4><p>In addition to a pure Java developer approach it is also possible to expose database resource as Web Service using Oracle BPEL PM, yeah... it could be overloaded, but still it is possible and very easy to do. See the chapter <a href="http://download.oracle.com/docs/cd/B31017_01/core.1013/b28764/bpel006.htm#CIHCIDGF" target="_blank" rel="noopener noreferrer">BPEL: Communicating with a Database</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oracle-rdbms-11-ndws">Oracle RDBMS 11 NDWS<a class="hash-link" href="#oracle-rdbms-11-ndws" title="Direct link to heading">â€‹</a></h4><p>Orale RDBMS introduced a new feature that is called: Native Oracle XML DB Web Services, that allows developer to directly expose Web Services from the DB. Take a look to the chapter <a href="http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28369/xdb_web_services.htm#ADXDB3900" target="_blank" rel="noopener noreferrer">Using Native Oracle XML DB Web Services</a>.</p><p>Note that in this case you do not have any WS-* support without another technical solution that could be Oracle Web Service Manager or any other solutions (such as a SOA appliance like for example IBM dataPower)</p><p>hmm I have not used that much this feature since I have left Oracle... I wonder when Oracle will provide a OS X release that will allow me to use my computer without any VM...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[My (Work) Life on a Key: XWiki and other portables applications]]></title>
            <link>https://tgrall.github.io/blog/2008/03/07/my-work-life-on-a-key-xwiki-and-other-portables-applications</link>
            <guid>/2008/03/07/my-work-life-on-a-key-xwiki-and-other-portables-applications</guid>
            <pubDate>Fri, 07 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Now that I am back in consulting business, I often have customers where I am not allowed to connect my Mac on the network. Annoying!!!! But this is not a big issue since now it is easy to bring you environment on a USB key.]]></description>
            <content:encoded><![CDATA[<p>Now that I am back in consulting business, I often have customers where I am not allowed to connect my Mac on the network. Annoying!!!! But this is not a big issue since now it is easy to bring you environment on a USB key.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="xwikey-my-wiki-on-a-key">XWi<em>key</em>: my wiki on a key<a class="hash-link" href="#xwikey-my-wiki-on-a-key" title="Direct link to heading">â€‹</a></h4><p>On a daily business, I have installed my personal <a href="http://www.xwiki.com/" target="_blank" rel="noopener noreferrer">XWiki</a> on my 2Gb USB Key, and a JDK (for windows, on OSX I am using the default one). So with this solutions I have my personal CMS, Website and applications with me, and I can use it from any computer available. I work on any site, any meeting room directly on my Wiki even when I am not connected. I am using a packaged Entprise XWiki that comes with Jetty and HSQL, so it is a complete and self contained environment. I just changed the start and stop scripts to point to the JDK that is on the key. Nothing exceptional here, but it is very useful.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="others-portable-applications">Others portable applications<a class="hash-link" href="#others-portable-applications" title="Direct link to heading">â€‹</a></h4><p>I know that a Wiki is not enough most of the time to " bring your life with you", and you may want more, such as Open Office, Mail and Web clients, ... Some of the packages you can use:</p><ul><li><a href="http://portableapps.com/" target="_blank" rel="noopener noreferrer">PortableApps</a> take a look to <a href="http://portableapps.com/apps" target="_blank" rel="noopener noreferrer">the list of applications</a> that are available in a portable fashion</li><li><a href="http://pendriveapps.com/" target="_blank" rel="noopener noreferrer">PenDriveApps</a></li><li><a href="http://www.framakey.org/En/Index" target="_blank" rel="noopener noreferrer">Framakey</a></li></ul><p>The next test will be to run the OS from the key, I have not done it yet, have you? Some options for this:</p><ul><li><a href="http://www.pendrivelinux.com/" target="_blank" rel="noopener noreferrer">PenDriveLinux</a></li><li><a href="http://flashlinux.org.uk/" target="_blank" rel="noopener noreferrer">FlashLinux</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Acquisitions... cannot remember all of them?]]></title>
            <link>https://tgrall.github.io/blog/2008/02/11/oracle-acquisitions-dot-dot-dot-cannot-remember-all-of-them</link>
            <guid>/2008/02/11/oracle-acquisitions-dot-dot-dot-cannot-remember-all-of-them</guid>
            <pubDate>Mon, 11 Feb 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend of mine asked me some questions about Oracle and acquisitions. He could not, remember all of them and when they occurred...]]></description>
            <content:encoded><![CDATA[<p>A friend of mine asked me some questions about Oracle and acquisitions. He could not, remember all of them and when they occurred...</p><p>If you have the same questions take a look to the Oracle Acquisition page on Oracle.com since 2005:</p><ul><li><a href="http://www.oracle.com/corporate/acquisition.html" target="_blank" rel="noopener noreferrer">Oracle Strategic Acquisition</a>Some others are probably missing since in 2003/2004, Collaxa was acquired by Oracle. If you do not remember Collaxa was the first release of the BPEL Process Manager.</li></ul><p>You can also take a look to a part of the site that I like that is the <a href="http://www.oracle.com/corporate/story.html" target="_blank" rel="noopener noreferrer">Oracle's history.</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Looking for a Wiki... take a look to WikiMatrix]]></title>
            <link>https://tgrall.github.io/blog/2008/02/08/looking-for-a-wiki-dot-dot-dot-take-a-look-to-wikimatrix</link>
            <guid>/2008/02/08/looking-for-a-wiki-dot-dot-dot-take-a-look-to-wikimatrix</guid>
            <pubDate>Fri, 08 Feb 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[You are looking for a Wiki... take a look to this very nice online tools:]]></description>
            <content:encoded><![CDATA[<p>You are looking for a Wiki... take a look to this very nice online tools:</p><ul><li><a href="http://www.wikimatrix.org/" target="_blank" rel="noopener noreferrer">WikiMatrix</a>This tool can help you to find the best Wiki for you needs, free or not, hosted or not, ... and many other criteria.</li></ul><p>In addition to the Wiki Matrix, this site offers the same features for:</p><ul><li><a href="http://www.weblogmatrix.org/" target="_blank" rel="noopener noreferrer">Blogs</a></li><li><a href="http://www.forummatrix.org/" target="_blank" rel="noopener noreferrer">Forums</a></li><li><a href="http://www.podcatchermatrix.org/" target="_blank" rel="noopener noreferrer">Podcatchers</a></li></ul><p>Enjoy!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle JAX-RPC: How to change the Character Encoding?]]></title>
            <link>https://tgrall.github.io/blog/2008/02/02/oracle-jax-rpc-how-to-change-the-character-encoding</link>
            <guid>/2008/02/02/oracle-jax-rpc-how-to-change-the-character-encoding</guid>
            <pubDate>Sat, 02 Feb 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[By default Oracle Web Service client is sending the SOAP messages using an UTF-8 encoding. This is the recommendation of WS-I Basic Profile. To be exact it says UTF-8 or UTF-16.]]></description>
            <content:encoded><![CDATA[<p>By default Oracle Web Service client is sending the SOAP messages using an UTF-8 encoding. This is the recommendation of WS-I Basic Profile. To be exact it says UTF-8 or UTF-16.</p><p>It is quite simple to change this encoding...</p><p>First you have to know that the JAX-RPC container will return the same character encoding than the one that is received. To change the character encoding, you just need to set the <code>ClientConstants.CHARACTER_SET_ENCODING</code> to the value you want to use. Here some simple client code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Stub</span><span class="token plain"> stub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">myPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name namespace" style="opacity:0.7">oracle</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">webservices</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">ClientConstants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CHARACTER_SET_ENCODING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"UTF-16"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most of the Web Services stacks are offering the same kind of utility to do that, for example here the property you must set to do the same in IBM's JAX-RPC implementation: <code>com.ibm.wsspi.webservices.Constants.MESSAGE_CHARACTER_SET_ENCODING</code>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[My first Sogeti Kickoff: a great experience]]></title>
            <link>https://tgrall.github.io/blog/2008/01/28/my-first-sogeti-kickoff-a-great-experience</link>
            <guid>/2008/01/28/my-first-sogeti-kickoff-a-great-experience</guid>
            <pubDate>Mon, 28 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Last week, more than 400 people of Sogeti group were meeting atÂ Les Fontaines, for the annual KickOff. It was for me the first big event since I have joined this company last October.]]></description>
            <content:encoded><![CDATA[<p>Last week, more than 400 people of Sogeti group were meeting at&nbsp;<a href="http://www.les-fontaines.com/" target="_blank" rel="noopener noreferrer">Les Fontaines</a>, for the annual KickOff. It was for me the first big event since I have joined this company last October.</p><p><img loading="lazy" src="http://4.bp.blogspot.com/_aoQgQ1obiyE/R568S_vsHII/AAAAAAAAADM/Ma3Y9Y5IHso/s200/back-terrace.jpg" alt="Les Fontaines" class="img_ev3q">Les Fontaines, is the training/conference center of the Cap Gemini Group located 30mn from Paris. I have to say that it is really a great place. Click on the <a href="http://www.les-fontaines.com/" target="_blank" rel="noopener noreferrer">Les Fontaines</a> to see&nbsp;&nbsp;what I mean...</p><p>First of all it was a great experience to meet my colleagues from all over the world&nbsp;, Sogeti is a company of&nbsp;&nbsp;16,000+ people, all over Europe, in the USA and India. &nbsp;The main theme of this 2008 Kickoff was "Web 2.0", the reason why I was invited indeed. If most of the technical people are using&nbsp;internally&nbsp;and externally Web 2.0 tools such as wikis, blogs, ims, .. It was important to have during this kickoff an "overall" brainstorming about the use of this tools for the group, but also how we can leverage of knowledge to help customers to be more efficient in their business.</p><p>As part of this theme our marketing folks have invited external speakers:</p><ul><li><a href="http://dreamcompany.dk/index.php?id=105" target="_blank" rel="noopener noreferrer">Rolf Jensen</a> : talking about the Dream Society, explaining that the next step for business is to add an&nbsp;emotional&nbsp;aspect into it, to add value... &nbsp;I am a emotional person, and I can tell that I am buying Rolf's idea, and like most of Apple fan you can tell how important are the emotions to do business...</li><li><a href="http://www.beckstrom.com/" target="_blank" rel="noopener noreferrer">Rod Bekstrom</a>, co-author of the well known book "<a href="http://www.starfishandspider.com/" target="_blank" rel="noopener noreferrer">The Starfish and The Spider</a>" focusing on the fact an company&nbsp;must shift &nbsp;from a centralized organization to a decentralized one. You can listen to the presentation online on Rod's site.. I have to say that I soon as I have finished my current readings (RestFul Web Services-O'Reillys <!-- -->&amp;<!-- --> Get Things Done) I will order this book. I really found some inspiration in Rod presentation, and his ideas could be immediately put in place in your organization or at your customer site.</li><li>Last but not least, <a href="http://www-03.ibm.com/press/us/en/biography/10057.wss" target="_blank" rel="noopener noreferrer">Nick Donofrio</a>, EVP Technology and Innovation, talked about the important of innovation for the enterprise, and how we do not control the changes but we should adapt to it in a productive manner to stay at the top.</li></ul><p>However, I would have loved to see <a href="http://padawan.info/" target="_blank" rel="noopener noreferrer">Francois Nonnemacher</a> on the stage too since I had the opportunity to see him talking about Web 2.0/Social Computing for the enterprise and he is terrific... and also because as far as I know he has worked at Cap Gemini few years back</p><p>I really enjoyed all these presentations, in addition to the one that I have cited, we had many Sogeti's speakers including Sogeti CTO Michiel Boreel.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IBM ProjectZero: A new development model for commercial software?]]></title>
            <link>https://tgrall.github.io/blog/2008/01/23/ibm-projectzero-a-new-development-model-for-commercial-software</link>
            <guid>/2008/01/23/ibm-projectzero-a-new-development-model-for-commercial-software</guid>
            <pubDate>Wed, 23 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[You have probably heard about IBM ProjectZero, this "incubator"project from IBM pushing a new way of building, assemble and run Web applications. I won't talk about the technology in this post, it will come later, but just comment about the way this project is developped: a Community-Driven Commercial Development process.]]></description>
            <content:encoded><![CDATA[<p>You have probably heard about <a href="http://www.projectzero.org/" target="_blank" rel="noopener noreferrer">IBM ProjectZero</a>, this "incubator"project from IBM pushing a new way of building, assemble and run Web applications. I won't talk about the technology in this post, it will come later, but just comment about the way this project is developped: a <em>Community-Driven Commercial Development</em> process.</p><p>The idea behind this "process" is to apply to a commercial software, ideas that are common &nbsp;in free software. As you see I am not talking about "open source" since Project Zero is open source, it is really about the way a "commercial" software is built...</p><p>If you take a look to the "<a href="http://www.projectzero.org/wiki/bin/view/Main/About" target="_blank" rel="noopener noreferrer">About</a>" page of ProjectZero you can learn more about this process/ideas. Some key points:</p><ul><li>the development team, mainly IBM folks, want&nbsp; feedback, insight, suggestions, and criticism from the community. So we as the community can really be involved in the product in a stage where it is usually inside IBM labs without any visibility for non IBM employee... This is quite exciting to see that we can really discuss with the development team as they do the product, and we can see the product evolving based on "real" customer requirements/comments.</li><li>so as "future" user of the production release I can discuss the features. As a developer of the "current" development release I can participate to the future product. So what you may be tempted to say, especially if you are a lot involved in open source and free projects, but you have to admit that it is quite a switch for commercial product.Project Zero is not the only project that is using this approach <a href="https://jazz.net/" target="_blank" rel="noopener noreferrer">Jazz</a> from the rational team is also on this model.&nbsp;</li></ul><p>In the same time if we consider, GlassFish, we do have more or less an equivalent, that is the JavaEE RI and the Sun Application Server... but here on Jazz or Project zero it is really happening on a brand new product that is not a reference implementation but new products part of a commercial R<!-- -->&amp;<!-- -->D lab...</p><p>I am still a little confused to see what will be the license when release 1.0 goes out... Just wait and see.. hmm sorry I should say "just participate and see".</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Poll: Which 'Web 2.0' Tools are you using for business?]]></title>
            <link>https://tgrall.github.io/blog/2008/01/22/new-poll-which-web-2-dot-0-tools-are-you-using-for-business</link>
            <guid>/2008/01/22/new-poll-which-web-2-dot-0-tools-are-you-using-for-business</guid>
            <pubDate>Tue, 22 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[I have just created a poll -see leftbar- asking to list the different tools you are using for business. In fact I would like to have some feedback of you use of Wiki, Blogs, Instant Messaging on you daily job.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://2.bp.blogspot.com/_aoQgQ1obiyE/R5Y9QvPDP0I/AAAAAAAAADE/loju_rH1Ie8/s200/Web+20.png" class="img_ev3q"> I have just created a poll -see leftbar- asking to list the different tools you are using for business. In fact I would like to have some feedback of you use of Wiki, Blogs, Instant Messaging on you daily job.</p><p>Myself I am using all of this for work:</p><ul><li>Internal and external communication with Wikis</li><li>My blog that you are currently reading</li><li>Chat, I use probably more the chat than phone these days (thanks to <a href="http://meebo.com" target="_blank" rel="noopener noreferrer">http://meebo.com</a> when I cannot connect with a rich client)</li><li>Social Networking: I am not necessarily  talking about big sites like LinkedIn/Facebook but more internal sites. For example, back at Oracle we had access to an internal Social Network site, that is now exposed at <a href="http://mix.oracle.com" target="_blank" rel="noopener noreferrer">http://mix.oracle.com</a>, and now at Sogeti, in the Cap Gemini group we do also have internal social networks.The idea behind this post/poll is to be able to discuss, with customers around Web 2.0 tools adoption in the enterprise. So do not hesitate to post a comment describing the tools and how you are using them for business.</li></ul><p>Thanks for your vote ;)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Infoq news: 'Request: Sun Drop Support for JRuby]]></title>
            <link>https://tgrall.github.io/blog/2008/01/18/infoq-news-request-sun-drop-support-for-jruby</link>
            <guid>/2008/01/18/infoq-news-request-sun-drop-support-for-jruby</guid>
            <pubDate>Fri, 18 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[With the latest big news around Oracle-BEA and SUN-MySQL deals I have missed an interesting article on Infoq with the following title:]]></description>
            <content:encoded><![CDATA[<p>With the latest big news around Oracle-BEA and SUN-MySQL deals I have missed an interesting article on Infoq with the following title:</p><ul><li><a href="http://www.infoq.com/news/2008/01/sun_drop_jruby" target="_blank" rel="noopener noreferrer">Request: Sun, Drop Support for JRuby</a></li></ul><p>I have to say that I do agree with Craig Wickesser asking Sun to Drop Support for JRuby.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-matters">Syntax Matters?<a class="hash-link" href="#syntax-matters" title="Direct link to heading">â€‹</a></h3><p><em>Yes syntax matters</em>, not only for the "beauty" of it, but also because of the investment that enterprises have made into it. We should not force people to completely remodel their brain all the time, for no gain.&nbsp;</p><p><em>I love <a href="http://groovy.codehaus.org/" target="_blank" rel="noopener noreferrer">Groovy</a> language</em>, and one of the main reason is because it gives me the most bang for my buck. Java people can immediately catchup with the syntax, and step by step leverage powerful features available by dynamic languages and domain specific languages. I was hoping to see a great adoption by SUN... It is one thing to support scripting with the <a href="http://jcp.org/en/jsr/detail?id=223" target="_blank" rel="noopener noreferrer">JSR-223</a>, but SUN has to "endorse" a scripting, and from what could be seen today it is not Groovy nor Javascript. When we see all the marketing noise it is Ruby with <a href="http://jruby.codehaus.org/" target="_blank" rel="noopener noreferrer">JRuby</a>... And I do not think that is necessary good for the Java platform.</p><p>Do not get me wrong, I think that is a great idea, and need for Java to be able to execute many languages, for example we see a lot of IBM WAS and BEA WL administrator using Python to administer their application server instance with Jython. But once again the "default" one should be close to Java and integrate with it as close as possible to reduce the impact on scalability and performances, and I do think that Groovy did a great job on these topics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-rubyonrails">What about RubyOnRails?<a class="hash-link" href="#what-about-rubyonrails" title="Direct link to heading">â€‹</a></h3><p>I am not a <a href="http://rubyonrails.com/" target="_blank" rel="noopener noreferrer">RoR</a> expert, far far away from it, but I have learned it, and developed small applications with it, and I have to say that I love this framework.&nbsp;&nbsp;And I am sure that like many Java developers that used RoR, I was thinking: &nbsp;"If only I had the same productivity in my favorite platform: J2EE...".</p><p>I was not expecting to run RoR application as-it-is, but more hoping that JavaEE will learn from RoR to simplify development...&nbsp;&nbsp;And... somebody did it, with <a href="http://grails.codehaus.org/" target="_blank" rel="noopener noreferrer">Grails</a>. <a href="http://grails.codehaus.org/" target="_blank" rel="noopener noreferrer">Grails</a> takes inspiration from RoR, but in a "real" JavaEE environment, since it leverages key pieces of the current Java applications such as Hibernate and Spring, using the power of Groovy to glue all this together.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-conclusion">In conclusion...<a class="hash-link" href="#in-conclusion" title="Direct link to heading">â€‹</a></h3><p>I do not know for you but yes I do think that SUN should drop support for <a href="http://jruby.codehaus.org/" target="_blank" rel="noopener noreferrer">JRuby</a>, and in place push a language more natural for existing Java Developers, I vote for <a href="http://groovy.codehaus.org/" target="_blank" rel="noopener noreferrer">Groovy</a>. In addition to the language itself, I also expect the JavaEE EG to provide a more productive way of developing "simple" Web applications. This is where I see <a href="http://grails.org/" target="_blank" rel="noopener noreferrer">Grails</a> coming in the picture, but many other framework could do the job, taking advantage of some interesting concepts of RoR...</p><p>As Rick says, I (we?) am not looking for a Revolution but for an Evolution.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Which sites are you using for 'business'? Another Web2.0 list...]]></title>
            <link>https://tgrall.github.io/blog/2008/01/04/which-sites-are-you-using-for-business-another-web2-dot-0-list-dot-dot-dot</link>
            <guid>/2008/01/04/which-sites-are-you-using-for-business-another-web2-dot-0-list-dot-dot-dot</guid>
            <pubDate>Fri, 04 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Disclaimer: you do probably already know all these sites if you are like me spending lot of time on the Internet... (too much time?) But still, some people could be interested, like the customer I have been working with lately...]]></description>
            <content:encoded><![CDATA[<p>Disclaimer: you do probably already know all these sites if you are like me spending lot of time on the Internet... (too much time?) But still, some people could be interested, like the customer I have been working with lately...</p><p>During a presentation to a customer around Web 2.0 and Social Networking, which sites do I use myself and why they could be interested for customer and their business.... So I really quickly write up this list, and just want to share it here...</p><p>Social networking... and many more. More and more important in business.</p><ul><li><a href="http://facebook.com/" target="_blank" rel="noopener noreferrer">http://facebook.com</a></li><li><a href="http://linkedin.com/" target="_blank" rel="noopener noreferrer">http://linkedin.com</a></li></ul><p>Multimedia site... I am sure you all use it daily. I have used this to share pics about events (internal or external).</p><ul><li><a href="http://flickr.com/" target="_blank" rel="noopener noreferrer">http://flickr.com</a></li><li><a href="http://dailymotion.com/" target="_blank" rel="noopener noreferrer">http://dailymotion.com</a></li><li><a href="http://youtube.com/" target="_blank" rel="noopener noreferrer">http://youtube.com</a></li></ul><p>Social Bookmarking...</p><ul><li><a href="http://del.icio.us/" target="_blank" rel="noopener noreferrer">http://del.icio.us</a></li></ul><p>Social links, content is rated by user.</p><ul><li><a href="http://www.digg.com/" target="_blank" rel="noopener noreferrer">http://www.digg.com/</a></li><li><a href="http://www.technorati.com/" target="_blank" rel="noopener noreferrer">http://www.technorati.com/</a></li></ul><p>Project Management tools,</p><ul><li><a href="http://www.basecamphq.com/" target="_blank" rel="noopener noreferrer">http://www.basecamphq.com/</a></li><li>you need to look to all the <a href="http://37signals.com/" target="_blank" rel="noopener noreferrer">37signals</a> applications. Very useful</li></ul><p>Google services are terrific, as user or developer.</p><p><a href="http://docs.google.com/" target="_blank" rel="noopener noreferrer">http://docs.google.com</a>
<a href="http://google.com/apps" target="_blank" rel="noopener noreferrer">http://google.com/apps</a>
<a href="http://code.google.com/" target="_blank" rel="noopener noreferrer">http://code.google.com</a>
<a href="http://maps.google.com/" target="_blank" rel="noopener noreferrer">http://maps.google.com</a></p><p>Public and free wiki that I used to communicate with customers, coworker and friends.</p><ul><li><a href="http://wetpaint.com/" target="_blank" rel="noopener noreferrer">http://wetpaint.com</a></li><li><a href="http://wikidot.com/" target="_blank" rel="noopener noreferrer">http://wikidot.com</a></li></ul><p>News and content syndication.</p><ul><li><a href="http://www.netvibes.com/" target="_blank" rel="noopener noreferrer">http://www.netvibes.com/</a></li><li><a href="http://google.com/reader" target="_blank" rel="noopener noreferrer">http://google.com/reader</a></li></ul><p>Blogs...</p><p><a href="http://wordpress.org/" target="_blank" rel="noopener noreferrer">http://wordpress.org/</a>
<a href="http://blogspot.com/" target="_blank" rel="noopener noreferrer">http://blogspot.com</a>
<a href="http://typepad.com/" target="_blank" rel="noopener noreferrer">http://typepad.com</a></p><p>I use these site as consumer, but these services are more and more important in customer business, and will be part of our job as developer/integrator.</p><ul><li><a href="http://amazon.com/" target="_blank" rel="noopener noreferrer">http://amazon.com</a></li><li><a href="http://paypal.com/" target="_blank" rel="noopener noreferrer">http://paypal.com</a></li><li><a href="http://ebay.com/" target="_blank" rel="noopener noreferrer">http://ebay.com</a></li><li><a href="http://www.salesforce.com/" target="_blank" rel="noopener noreferrer">http://www.salesforce.com/</a></li></ul><p>Hmm, when you see this list you can tell that I am a very happy Google user, and I have not talk about the other services that I use from Google: Gmail, GTalk, Analytics, Notebooks, and obviously the search...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Web Services and Files Exchange]]></title>
            <link>https://tgrall.github.io/blog/2007/12/20/web-services-and-files-exchange</link>
            <guid>/2007/12/20/web-services-and-files-exchange</guid>
            <pubDate>Thu, 20 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[SOAP based Web Services are now very common in the enterprise architecture, and quite often, applications that consume or publish services would need to send binary content such as images, PDF or Word documents (or anything you have in mind...). The SOAP and XML provide different way to achieve this. So what are the challenges around binary data exchange using SOAP based Web Services:]]></description>
            <content:encoded><![CDATA[<p>SOAP based Web Services are now very common in the enterprise architecture, and quite often, applications that consume or publish services would need to send binary content such as images, PDF or Word documents (or anything you have in mind...). The SOAP and XML provide different way to achieve this. So what are the challenges around binary data exchange using SOAP based Web Services:</p><ul><li><p>The main goal of Web Services is <strong>interoperability</strong>; so when you are offering a service, you need to be careful about the technical choice you are making. SOAP has been one great success in term of interoperability. I am aware that REST is also a very good fit for that but since I talk about SOAP and later WS-* standards, I do not want to talk about REST more in this post, the only thing that you can put in your mind is before choosing to implement SOAP based Web Services, ask the following question to yourself: "do I really need SOAP services or REST would be enough?"... That said let's continue on SOAP and binary content exchange. When talking about binary content, the interoperability comes with some trade off around for example performance/message sized or impact on developer. This will be discussed later, but always keep in mind that interoperability is the key point of Web Services. If this is not the case on your project, that means you probably do not need to use SOAP that has an important overhead in general.</p></li><li><p><strong>Performance</strong> and <strong>Scalability</strong> is also quite important when you are building a service based application. Especially that often you cannot predict exactly how much a service will be used. We have to keep in mind that often services are build to be reusable, it is one of the basic best practices of development, so if the service is really "reused" it is important to keep it running with acceptable performances. This is why when talking about binary content, with SOAP it is important to talk about the impact of it on the size of the message and the processing cost.</p></li><li><p>When using SOAP <strong>Composability</strong> is also quite important. In the context of binary content exchange with XML/SOAP it is important to support composability of the WS-* standard, and this in a performant manner. An example would be that a services that is  sing WS-Security to sign part of the messages should be able to sign the PDF document using the same standard.</p></li><li><p><strong>Impact on development</strong>: it is interesting also when choosing the way binary content should be exchanged with SOAP, to see how much impact it has on the development itself. Does a developer must import specific API to be sure that the binary content is properly sent/consumed by the server or client. Note: I will talk about Java here, and particularly about JAX-WS/JAX-RPC since it is the stacks that I know the much, but the remarks would be the same on all technologies.Let's now dive into the different options that are offered to a developer/architect to exchange document using SOAP:</p></li><li><p>XML Base64 encoding</p></li><li><p>SOAP With Attachment (SwA) using MIME (Multipurpose Internet Mail Extensions)</p></li><li><p><del>SOAP With Attachment using DIME (Direct Internet Message Encapsulation)</del></p></li><li><p>Message Transmission Optimization Mechanism (MTOM)</p></li></ul><p>First of all, I will not talk in detail about the 3rd point around SOAP with Attachment with DIME, for a simple reason: this approach has been pushed by Microsoft around 2003/2004 and it is now deprecated in favor of MTOM.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="base64-encoding">Base64 Encoding<a class="hash-link" href="#base64-encoding" title="Direct link to heading">â€‹</a></h3><p>Base64 is part of the core XML capabilities, and when using it to exchange binary content in a SOAP message it has some very good advantages:</p><ul><li>Since it is part of XML itself, it has a <strong>great interoperability</strong>, I can say that all stacks will be able to consume or send messaged that contains Base64 data.</li><li>For the same reason it <strong>does not have any impact on development</strong>, most of the Java stacks will automatically use base64 encoding when byte[] paramters will be present.</li><li>Always because of the fact that is it 100% XML based, the <strong>composability</strong> with other XML/WS-* standard <strong>is very good</strong>.</li><li>So far everything looks great for this approach, but the trade off is the following:
Base64 encoding <strong>is not efficient</strong>, since "lot of" CPU will be used to encode and decode the binary content. In addition the size of the encoded data would be around 30% bigger than the binary content itself. (It can still be used for small dataset)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="soap-with-attachment-swa">SOAP with Attachment (SwA)<a class="hash-link" href="#soap-with-attachment-swa" title="Direct link to heading">â€‹</a></h3><p>The SOAP with Attachment specification is the first effort of the Web Services industry to solve the problem of binary content with SOAP. The idea is to  In addition to the W3C Note, the WS-Interoperability organization, has extend this recommendation to create a basic attachment profile to enforce the interoperability of it, using the SOAP with Attachment Reference (swaRef).</p><ul><li>The good part of SwA and is the fact that it has been noted by the W3C but also adopted by the WS-I organization. But in fact the <em>interoperability is not that great</em>, mainly because none of the Microsoft Web Services solution support SwA. It is true that most of the Java stacks, starting with the standard JAX-RPC/JAX-WS is supporting SwA and swaRef but it is not enough to call it a good interoperability.</li><li>The reason why Microsoft refused to implement it, and why it is only a W3C note (and not a recommendation) it is because  <strong>SOAP with Attachment has poor composability</strong>. The reason why it is hard to use WS-* standard with SwA, it is because it breaks some part of the model by ignoring the SOAP/XML processing and just put the document in the MIME header, and a simple reference to it into the SOAP message.</li><li>*<em>SOAP with Attachment is efficient</em>, because of the previous point. The SOAP stack does not really deal with the content and just stream it into the MIME header.</li><li>When it is used with JAX-RPC and JAX-WS, <strong>has an impact on the developer</strong>, that must use specific Java API to build it service and put specific data types in the WSDL. The impact on development is not large, but still developper has to think about providing the good method signature or WSDL entry to enforce the use of SwA/swaRef in its service. Where I do believe most developers would expect this to be transparent.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-transmission-optimization-mechanism-mtom">Message Transmission Optimization Mechanism (MTOM)<a class="hash-link" href="#message-transmission-optimization-mechanism-mtom" title="Direct link to heading">â€‹</a></h3><p>The last mechanism is also based on MIME on the wire to exchange the binary content, but the way the message (SOAP+MIME) is build is totally different from the previous SwA approach. MTOM has been based on the "experience" of the others mechanisms, to be able to support composability without impacting the performance and the development.</p><ul><li><strong>Interoperability is virtually great</strong>. It is great because it has been pushed by major vendors such as IBM, Microsoft, BEA, Oracle and it is a <a href="http://www.w3.org/TR/soap12-mtom/" target="_blank" rel="noopener noreferrer">W3C recommendation</a>, so interoperability should be good. I put a "virtually", because to be interoperable the various Web Services stack must implement it, and it is not the case yet. Today, most of the latest stacks are supporting MTOM so it should not be an issue if you are starting a project.</li><li><strong>Composability is perfect</strong>, since MTOM does use the SOAP envelop but it provides an automatic and transparent optimization to put the binary content  on the MIME header. During the serialization of the message, the SOAP engine is working with the content with a temporary base64 representation of the content allowing all the WS-* operation needed, for example an XML signature, but without the overhead of dealing with base64 over the wire.</li><li><strong>MTOM appears like the most efficient</strong> way of dealing with large document and SOAP.</li><li>Because MTOM is using the same approach than the pure XML base64 process, <strong>it does not have any impact on development</strong>. In fact this the the Web Service stack that choose to use base64 (embedding the document) or MTOM over the wire. And this could be done in conjunction with a WS-Policy. As you can see in the <a href="http://www.w3.org/Submission/WS-MTOMPolicy/" target="_blank" rel="noopener noreferrer">WS-MTOMPolicy</a> this is not under the control of the developer but more under the control of the administrator and then the applications to choose or not to use MTOM.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="but-which-one-i-should-use">But... Which one I should use?<a class="hash-link" href="#but-which-one-i-should-use" title="Direct link to heading">â€‹</a></h3><p>Based on the different points described earlier is looks like <strong>MTOM is the way to go</strong>; even if this is true it cannot be summarized to this. First of all MTOM is not supported by all the stacks, so if you cannot control the consumers of your services and cannot impose a modern stack, MTOM may not be the best approach. For me, the second on the list is the Base64 approach, because of high interoperability but it is important to remember that has an impact on performance/processing. I personnally would not push SwA because of its non support in the Microsoft world... As you know the world is not yet 100% Java based ;).</p><p>Let's take a look on which stacks are supporting MTOM today:</p><ul><li>JAX-WS reference implementation (and Metro)</li><li>IBM Websphere 6.x with SOA Feature Pack</li><li>BEA Weblogic 10* OracleAS 10gR3 (10.1.3.1) JAX-RPC and FWM 11 preview (JAX-RPC and JAX-WS)</li><li>Axis2</li><li>XFire</li><li>JBossWSYou can find more information on these comparison matrices : <a href="http://wiki.apache.org/ws/StackComparison" target="_blank" rel="noopener noreferrer">Apache WS Stack Comparison</a> and <a href="http://xfire.codehaus.org/Stack+Comparison" target="_blank" rel="noopener noreferrer">Xfire Comparison Matrix</a>. (these two are probably very interesting to keep... unfortunately they do not contains any MSFT data. I had one in the past, but cannot find it... if you have such matrix feel free to post it in comment.)</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Working on a large XML or SOA project: think about 'separation of concerns']]></title>
            <link>https://tgrall.github.io/blog/2007/12/10/working-on-a-large-xml-or-soa-project-think-about-separation-of-concerns</link>
            <guid>/2007/12/10/working-on-a-large-xml-or-soa-project-think-about-separation-of-concerns</guid>
            <pubDate>Mon, 10 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[With XML and SOA becoming mainstream in the enterprise XML operation such as Schema validations, XSL transformations are now very common. These specific operations are CPU intensive and could become a performance bottleneck when directly applied on the middleware. It could be even worst now when using SOAP based Web Services and their related WS-* standards. For example with WS-Security, XML encryption and signature is now more and more used in SOA based applications.]]></description>
            <content:encoded><![CDATA[<p>With XML and SOA becoming mainstream in the enterprise XML operation such as Schema validations, XSL transformations are now very common. These specific operations are CPU intensive and could become a performance bottleneck when directly applied on the middleware. It could be even worst now when using SOAP based Web Services and their related WS-* standards. For example with WS-Security, XML encryption and signature is now more and more used in SOA based applications.</p><p>This is why many enterprise architects are bow looking for solutions to improve performances of XML centric applications.</p><p>One of the think we learn when developing application, and that Aspect Oriented Programming has highlighted is the concept of â€œseparation of concernsâ€. It is key to keep that in mind also in global architecture in our case by separating the XML processing from the business logic. Hopefully it is most of the time done directly by the various Web Services framework you are using, you do not code the SOAP request/response, it is hidden by the Web Services framework.</p><p>However, in the current application server, the full XML treatment is made directly in the container, for example the XML Encryption is made in the same container that the place where the pure business logic is executed. So letâ€™s find a solution to extract the most intensive XML processing into another part of the system.</p><p>Vendors have now in their catalog appliances that could do the job. The same way that today we are using SSL accelerators to deal with SSL encryption/decryption, we can put XML appliance to deal with the intensive CPU processing operation: XML validations, transformation, Ws-Security enforcing point,...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a class="hash-link" href="#architecture-overview" title="Direct link to heading">â€‹</a></h3><p>The overall architecture could be represented using the following schema :</p><p><img loading="lazy" src="http://3.bp.blogspot.com/_aoQgQ1obiyE/R11pWKMLwEI/AAAAAAAAACU/Bvo623h0JCA/s400/soa-appliance.png" class="img_ev3q"></p><p>The role of the XML/SOA Appliance varies a lot depending of your project:</p><ul><li><em>Simple XML firewall</em> to check the validity of the XML/SOAP messages</li><li><em>Web Services access control</em>: lookup enterprise directory to check authentication and authorization. This could be based on the WS-Security standards and its various tokens (username, SAML, ...)</li><li><em>Content generation and transformation</em>: the appliance can be used to serve various devices for example WAP cell phone or simple HTML Web Client. the XSL transformation is done in a very efficient way in the appliance directly.</li><li><em>Services Virtualization</em> : it is possible to route the different messages to various end point depending of simple rules. (business or IT system rules)</li></ul><p>As you can see from an architecture point of view, XML appliances are very interesting to distribute the heavy processing of XML to some specific hardware. I have noticed that sometimes developers/architects hesitate to put another piece of hardware/software in their design, but I do think that in this specific case it is probably a good move.</p><p>Separating the concern is quite easy and very clean when dealing with XML processing, but also it will allow the overall architecture to be managed in a better way. This kind of appliance will allow administrators to centralize the management of policies, and transformations. But also a side effect of this is the simple fact that when dealing with Web Services, you can easily add WS-* support to many stacks that do not support "them".</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xmlsoa-appliances-offering">XML/SOA Appliances Offering<a class="hash-link" href="#xmlsoa-appliances-offering" title="Direct link to heading">â€‹</a></h3><p>I have said earlier that vendors are offering such products, here some of the product that I have met or pushed:</p><ul><li><a href="http://www.ibm.com/software/integration/datapower/" target="_blank" rel="noopener noreferrer">IBM DataPower</a></li><li><a href="http://www.bee-ware.net/en/product/i-sentry/" target="_blank" rel="noopener noreferrer">Bee Ware i-Sentry</a></li><li><a href="http://www.vordel.com/products/" target="_blank" rel="noopener noreferrer">Vordel</a></li><li><a href="http://www.layer7tech.com/" target="_blank" rel="noopener noreferrer">Layer 7 XML Appliances</a></li></ul><p>###What's next?</p><p>Some of you would probably raise the fact that the application server, especially when dealing with Web Services, must parse the XML/SOAP request even if this has been done by the appliance. Yes it is true, but I am sure that in a next future the vendors of such solution would optimize it by providing for example support for binary XML, or any other solution that will improve even more the performance of the overall IT in complex enterprise architecture. But for this application server must support binary XML first to avoid proprietary approaches.</p><p>Another point of view that I have not talk about is the possible support of such appliance around Web 2.0/Ajax optimization. I have not yet dive into this, but I am sure we can do very interesting things too.</p><p>Finally if you have experiences with any XML/SOA appliance feel free to post a comment about it, it will help the readers to see the interest (or not) around this topic.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Portal Project: Time to Think about your Social Networking Enterprise Strategy]]></title>
            <link>https://tgrall.github.io/blog/2007/12/03/portal-project-time-to-think-about-your-social-networking-enterprise-strategy</link>
            <guid>/2007/12/03/portal-project-time-to-think-about-your-social-networking-enterprise-strategy</guid>
            <pubDate>Mon, 03 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Most of the enterprises these days have already put in place a portal -- with more or less success. These projects have started most of the time, with the goal of providing  personalized information to users and communities. When working in a Portal project you probably]]></description>
            <content:encoded><![CDATA[<p>Most of the enterprises these days have already put in place a portal -- with more or less success. These projects have started most of the time, with the goal of providing  personalized information to users and communities. When working in a Portal project you probably
define many objectives, that are represented from a technical point of view by the following features:</p><ul><li>community and group of users</li><li>easy content management, allowing people to communicate and share</li><li>data integration of many types of data related to the information needed by each user/community.I do not see anything special there except that is exactly the same goals that what most of the Web2.0/Social Networking applications do have:</li><li>User management and creation of the community is something that you do on a daily basis with FaceBook and LinkedIn (and any equivalent sites). The key here is the fact that it is the user that define its own community, not an administrator that does not know â€œmyâ€ business that put me in a specific bucket.</li><li>Content Management: Blogs are very good example of communication of a single person (or team) to the rest of the enterprise, (or the rest of the world). Wikis are tools helping you to share content with other people in a very efficient way. If you are working with OpenSource you see that most of them are using a wiki to communicate with user. This is true for the documentation, but also any type of content that is related to a project.</li><li>Data Integration: Web 2.0 is all about RSS feeds and Mashups that are, at least today one of the most efficient way, from a user perspective, to integrate content.This is why I do believe that if today you are thinking about an enterprise portal for your organization, it is probably time to step down a little and think more about:</li><li>the â€œenterprise social networking strategyâ€, that is often also related to the â€œWeb 2.0 enterprise strategyâ€.So some ideas to approach this:</li><li>create a community with some internet tools, for example start by creating a network in Facebook for your enterprise. Some if you will probably think that it is not productive for the enterprise... Hmm I have to say that it is not directly, but at least it helps people to be familiar with a new way of using the computer and the Internet. Companies I am working in or with do have their network already (Sogeti, CapGemini, IBM, Oracle, ...). An example of this is the way <a href="http://blog.holtz.com/index.php/weblog/fir_interview_jeremy_burton_ceo_serena_software_on_facebook_fridays_novembe/" target="_blank" rel="noopener noreferrer">Serena</a> is using FaceBook as part of their intranet and as a tools to do better business. (and some people reactions to this: <a href="http://valleywag.com/tech/bad-ideas/friday-is-facebook-day-318507.php" target="_blank" rel="noopener noreferrer">FaceBook Friday:Bad Idea</a>)</li><li>if your challenges are around content management start by installing a Wiki in house or using an internet one. I am sure you will be surprised to see the adoption and use in your team. I have many experiences where a regular "Portal/CMS" failed regarding the "community sharing" where Wikis have been a great success.</li><li>if your challenges are around data integration, I will encourage you to learn more about Rest/RSS and other technologies that are used in mashups. It is true that this one is probably will need more effort from IT to provide the good content feed, but instead of giving the data already packaged in an HTML view (portlet?) do send only the XML using a proper format (RSS/ATOM) and give correct tools to the user, to see how then will be consuming it.</li></ul><p>I see this approach more business oriented, this is empowering the business user giving them an infrastructure to select their own tools. Portal the Darwin way kind of approach.</p><p>So if you have an existing portal, or more important if you are thinking about starting a Portal project, add the â€œWeb 2.0/Social Networking strategyâ€ question to your plan. And to be honest, asking yourself this question about Web20/Social Network does not cost that much but could probably help yourself to satisfy your end users and customers...</p><p>Note: It is voluntarily that I am mixing up the Web 2.0 (technologies) and the social networking (behavior), since these two are intimately linked. Web 2.0 being the set of tools and technologies facilitating the social networking.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Open World 2007: presentations available online]]></title>
            <link>https://tgrall.github.io/blog/2007/11/20/oracle-open-world-2007-presentations-available-online</link>
            <guid>/2007/11/20/oracle-open-world-2007-presentations-available-online</guid>
            <pubDate>Tue, 20 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[For the first time since 2001, I was not participating at OOW... As you may know I have moved back to France and now working for a new company Sogeti. So I am quite happy to se that once again all the presentations are available for download there:]]></description>
            <content:encoded><![CDATA[<p>For the first time since 2001, I was not participating at OOW... As you may know I have moved back to France and now working for a new company <a href="http://www.sogeti.com/" target="_blank" rel="noopener noreferrer">Sogeti</a>. So I am quite happy to se that once again all the presentations are available for download there:</p><ul><li><a href="http://www28.cplan.com/cc176/catalog.jsp" target="_blank" rel="noopener noreferrer">OOW 2007 Content Catalog.</a></li></ul><p>I personnaly looked at OracleAS and Java presentations, and especially the one regarding SOA, performances, security and web Services:</p><ul><li><p><a href="http://cboracle:oraclec6@www28.cplan.com/cbo_export/PS_S291388_291388_176-1_FIN_v3.pdf" target="_blank" rel="noopener noreferrer">New Features of Java EE 5.0 and How to Use Them</a></p></li><li><p><a href="http://cboracle:oraclec6@www28.cplan.com/cbo_export/PS_S292174_292174_176-1_FIN_v2.pdf" target="_blank" rel="noopener noreferrer">Maximizing Your Java Middleware Performance on Multicore Platforms</a></p></li></ul><p>Some other presentations that I would like to read/see:</p><ul><li>Java EE/Java SE/Java Authorization Contract for Containers (JACC) Security in a Nutshell</li><li>A New Approach to Diagnosing Java Application Performance</li><li>Next-Generation Web Services Infrastructure and Interoperability</li><li>Performance Management for SOA Applications</li></ul><p>And I will take more time do read some others...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[A Groovier ADF with Oracle ADF 11]]></title>
            <link>https://tgrall.github.io/blog/2007/11/08/a-groovier-adf-with-oracle-adf-11</link>
            <guid>/2007/11/08/a-groovier-adf-with-oracle-adf-11</guid>
            <pubDate>Thu, 08 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Steve Muench has published in Oracle Magazine an article about the use of Groovy in Oracle ADF. In this article you learn how you can do validation and calculation in you business service layer.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://media.xircles.codehaus.org/_projects/groovy/_logos/medium.png" class="img_ev3q"></p><p>Steve Muench has published in Oracle Magazine an article about the use of Groovy in Oracle ADF. In this article you learn how you can do validation and calculation in you business service layer.</p><ul><li><a href="http://www.oracle.com/technology/oramag/oracle/07-nov/o67frame.html" target="_blank" rel="noopener noreferrer">Enhanced Calculation and Validation</a></li><li><a href="http://www.oracle.com/technology/products/adf/index.html" target="_blank" rel="noopener noreferrer">Oracle ADF</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Guillaume Laforge Interview on JavaLobby]]></title>
            <link>https://tgrall.github.io/blog/2007/11/03/guillaume-laforge-interview-on-javalobby</link>
            <guid>/2007/11/03/guillaume-laforge-interview-on-javalobby</guid>
            <pubDate>Sat, 03 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[I am sure you have seen it before, but just in case... Geertjan from JavaLobby has interviewed yesterday Guillaume, in case you do not know.. Guillaume is the Project Leader of the Groovy project and co-founder of the G2One company.]]></description>
            <content:encoded><![CDATA[<p>I am sure you have seen it before, but just in case... Geertjan from JavaLobby has interviewed yesterday Guillaume, in case you do not know.. Guillaume is the Project Leader of the Groovy project and co-founder of the G2One company.</p><p>Interview: <a href="http://www.javalobby.org/java/forums/t103036.html" target="_blank" rel="noopener noreferrer">What's so groovy about Groovy?</a>.</p><p>In case you have not look at it, <a href="http://www.g2one.com/" target="_blank" rel="noopener noreferrer">G2One</a> is offering many services around Groovy and Grails ... directly from the source since Guillaume, and Graeme Rocher are working there... So if you need any help on these nice technologies do not hesitate....</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[The good and bad of PLC ethernet... in hotels]]></title>
            <link>https://tgrall.github.io/blog/2007/10/30/the-good-and-bad-of-plc-ethernet-dot-dot-dot-in-hotels</link>
            <guid>/2007/10/30/the-good-and-bad-of-plc-ethernet-dot-dot-dot-in-hotels</guid>
            <pubDate>Tue, 30 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[I am traveling visiting partner and pleased to see that I have internet access in my room. Unfortunately it is not Wifi access but not that bad, but with PLC (Power line communication)...]]></description>
            <content:encoded><![CDATA[<p>I am traveling visiting partner and pleased to see that I have internet access in my room. Unfortunately it is not Wifi access but not that bad, but with PLC (Power line communication)...</p><p>So I take my PLC Adapator at the concierge. Plug it in my room and start to surf the web. Performance is good... Now I am looking for another electric plug for my MacBook AC... oh maaaan! I cannot find any other free plug.. except in the bathroom. This is really annoying and stupid... Sorry for this little post about a small and annoying experience.. alone in my PLC bedroom.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Paris 'SOA Forum' feedback; and  little comments about SOA projects]]></title>
            <link>https://tgrall.github.io/blog/2007/10/07/paris-soa-forum-feedback-and-little-comments-about-soa-projects</link>
            <guid>/2007/10/07/paris-soa-forum-feedback-and-little-comments-about-soa-projects</guid>
            <pubDate>Sun, 07 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[This week I have attended a SOA conference in Paris the SOA Forum. (I was not there in 2006). This event is not a technical event targeted towards developers but mainly oriented for IT managers and decision makers. This day was well attended, around 200 people. The content and more important the questions and round tables provide a good snapshot of how SOA is adopted.]]></description>
            <content:encoded><![CDATA[<p>This week I have attended a SOA conference in Paris the <a href="http://forumsoa.fr/" target="_blank" rel="noopener noreferrer">SOA Forum</a>. (I was not there in 2006). This event is not a technical event targeted towards developers but mainly oriented for IT managers and decision makers. This day was well attended, around 200 people. The content and more important the questions and round tables provide a good snapshot of how SOA is adopted.</p><p>If last year, based on comments that I can get, the message was "<em>What <!-- -->&amp;<!-- --> Why SOA?</em>" this year I have the feeling that most of the audience was really familiarized with the SOA concepts -as I said earlier it is not a technical conference- and now they are more asking "<em>How and When SOA?</em>". Lot of discussions were about how to I start the projects, since in many case the SOA will impact the whole IT, and even more the full enterprise.</p><p><strong>Thoughts about SOA project <!-- -->&amp;<!-- --> approach</strong></p><p>It is hard to say if the best way to start with SOA is starting from the Top (C level) or from the IT department on a departmental project. To be honest I think it will depend of each organizations; and depends of "why" SOA is a good fit for the enterprise.</p><p>I am tempted to say that if the choice is made for a "Time-To-Market" reason I believe that the project will start from a specific business need and be implemented in a "bottom-up" fashion., meaning the IT will quickly put together some services to give some agility to the business. This is something that I have seen many times in the telco industry.</p><p>At the other end, when the key factor is about rationalization of the business processes over the whole enterprise, the project is often manage at the IT management level if not even higher. This because this kind of approach will have impact on many departments/people.</p><p>Basically like in any project it is important to have:</p><ul><li>good communication between actors that could be developers or departments</li><li>share the same goals</li><li>have an understanding of the technologies that will be used and their constraints.If for the point 1 <!-- -->&amp;<!-- --> 2 this is management that deals with this. For the 3rd one, we are closer to the technology where we can probably share the most -saying that because I believe that most of you, reader, are technical people. At the end of the day we do not build system with slideshows, but with products/solutions. So it is part of our job to take time to understand the pros/cons, limitations of the different products that will be involved in the project.</li></ul><p>One example, is this week I have visited a customer and this customer wants to put in place an ESB to provide services to the different departments of the enterprise. Discussing at the global level of the architecture we all agreed on the different needs such as: connectivity to heterogeneous systems, transformation, routing, ...</p><p>Then the customer talk about "Web Services" again and again, this is where I have to say, I always try to slow down the discussion to set the expectation at the correct level, for example talking about impact on reliability, security of the HTTP/SOAP based Web Services. Don't get me wrong I am not saying that it is not possible to achieve correct QoS (Quality of Services) with Web Services but it could have an impact on the product choice, for example supporting WS-RM, WS-Security or even using proprietary approach for stateful Web Services, ... And the same comments, questions could occur with other part of the stack.</p><p>In conclusion, independently of the type of approach you are taking to put in place a Service Oriented Architecture, you will need sometimes to really understand well the product/solution you will be using to implement it. And for each of the options you will be choosing take some time to estimate the pros/cons and limitations of it. The same way you are taking time to list the different services, their granularity,  their QoS, you need to take some time to analyze the different solution. For example when you choose to use an ESB, BPEL engine with their connectivity capabilities, what are the best way to connect to a system (SOAP, JMS, JDBC, JCA, Java, ..), how to code the logic (Java, BPEL, business rules, ...) and for each of this question think about the impact of it on your system. For example, how portable will be my code/business process, and is it important for me?</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Free Burma: International Bloggers' Day for Burma on the 4th of October]]></title>
            <link>https://tgrall.github.io/blog/2007/10/03/free-burma-international-bloggers-day-for-burma-on-the-4th-of-october</link>
            <guid>/2007/10/03/free-burma-international-bloggers-day-for-burma-on-the-4th-of-october</guid>
            <pubDate>Wed, 03 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Free Burma!]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.free-burma.org/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://freeburma.s3.amazonaws.com/free_burma_02.jpg" alt="Free Burma!" class="img_ev3q"></a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Derek Sivers's blog: 7 reasons I switched back to PHP after 2 years on Rails]]></title>
            <link>https://tgrall.github.io/blog/2007/09/25/derek-siverss-blog-7-reasons-i-switched-back-to-php-after-2-years-on-rails</link>
            <guid>/2007/09/25/derek-siverss-blog-7-reasons-i-switched-back-to-php-after-2-years-on-rails</guid>
            <pubDate>Tue, 25 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[The new post on the Ruby section of O'Reilly authored by Derek Sivers is quite interesting, starting with the title:]]></description>
            <content:encoded><![CDATA[<p>The new post on the <a href="http://www.oreillynet.com/ruby/" target="_blank" rel="noopener noreferrer">Ruby section of O'Reilly</a> authored by Derek Sivers is quite interesting, starting with the title:</p><ul><li><a href="http://www.oreillynet.com/ruby/blog/2007/09/7_reasons_i_switched_back_to_p_1.html" target="_blank" rel="noopener noreferrer"> 7 reasons I switched back to PHP after 2 years on Rails</a>I am far away of being a PHP expert, or even a Ruby one, but I have the impression that I could post a similar title with Java instead of PHP. If this is true that Java EE could look a little complex for a start -this is probably less true today with the new JavaEE simplifications-. Yes... when you compare Rails and Java alone it is more complex but we should not forget that Java is now more a platform than a simple programming language. And many developers and companies have built very productive solution on this platform.</li></ul><p>Since I am talking about Ruby on Rails here, it is important to mention again Grails and Groovy that provide on the Java platform a simple and productive way to
develop applications, and time to get back to the different reasons mentioned by Derek in his post:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1---is-there-anything-railsruby-can-do-that-php-java-cant-do--thinking-no">1 - â€œIS THERE ANYTHING RAILS/RUBY CAN DO THAT <strike>PHP</strike> JAVA CANâ€™T DO? â€¦ (thinking)â€¦ NO.â€<a class="hash-link" href="#1---is-there-anything-railsruby-can-do-that-php-java-cant-do--thinking-no" title="Direct link to heading">â€‹</a></h4><p>I believe that we will all agree on the fact that you can do anything you want in Java; Web applications, mobile applications, operating systems, rdbms, ... the only limit is your brain! -and your skills ;) -</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2---our-entire-companys-stuff-was-in-php-java-dont-underestimate-integration">2 - OUR ENTIRE COMPANYâ€™S STUFF WAS IN <strike>PHP</strike> JAVA: DONâ€™T UNDERESTIMATE INTEGRATION<a class="hash-link" href="#2---our-entire-companys-stuff-was-in-php-java-dont-underestimate-integration" title="Direct link to heading">â€‹</a></h4><p>I think this is one of the key point here. Enterprise is using JavaEE a lot and it is part of the IT, moving to another technology will be expensive even if development is faster. In addition, the developers, administrators are used to develop and manage Java based applications.</p><p>And I do not want to talk about how complex it could be when you are building a Rails application on an existing database, designed from a pure Entity/Relation methodology....</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-4-5---i-have-nothing-special-to-say-here">3, 4 5 - I have nothing special to say here...<a class="hash-link" href="#3-4-5---i-have-nothing-special-to-say-here" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="6---i-love-sql">6 - I LOVE SQL<a class="hash-link" href="#6---i-love-sql" title="Direct link to heading">â€‹</a></h4><p>I still see a lot of developers using SQL directly in Java programs. The nice thing about Java is the fact that based on your skills and what you like to do you can choose the way you want to access the database, simple SQL, powerful O-R Mappings, ...</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="7---programming-languages-are-like-girlfriends-the-new-one-is-better-because-you-are-better">7 - PROGRAMMING LANGUAGES ARE LIKE GIRLFRIENDS: THE NEW ONE IS BETTER BECAUSE <em>YOU</em> ARE BETTER<a class="hash-link" href="#7---programming-languages-are-like-girlfriends-the-new-one-is-better-because-you-are-better" title="Direct link to heading">â€‹</a></h4><p>I love this reason, but nothing special to say, I let you read the original post.</p><p>As you can see from the number of comments in Derek's blog -no times to read all of them- this entry generates lot of reactions.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IDTVG and Co: how to merge meetic and expedia]]></title>
            <link>https://tgrall.github.io/blog/2007/09/18/idtvg-and-co-how-to-merge-meetic-and-expedia</link>
            <guid>/2007/09/18/idtvg-and-co-how-to-merge-meetic-and-expedia</guid>
            <pubDate>Tue, 18 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[With all the Web 2.0/Social Networking noise we are all used to "virtually socialize", but now you can use it to do more and improve the quality of your trips.]]></description>
            <content:encoded><![CDATA[<p>With all the Web 2.0/Social Networking noise we are all used to "virtually socialize", but now you can use it to do more and improve the quality of your trips.</p><p>The site <a href="http://idtgvandco.idtgv.com/" target="_blank" rel="noopener noreferrer">IDTGV and Co</a> (only in French so far) allows you to enter your profile and hobbies. Then when you do a reservation for the TGV (high speed train) you can match it up with other travelers. I have not tried this service yet since I am mainly traveling in the north of France but I will for sure try it as soon as I can.... Let me know if you have tested it.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Prototype Windows: the best way to create 'Web 2.0' windows]]></title>
            <link>https://tgrall.github.io/blog/2007/09/15/prototype-windows-the-best-way-to-create-web-2-dot-0-windows</link>
            <guid>/2007/09/15/prototype-windows-the-best-way-to-create-web-2-dot-0-windows</guid>
            <pubDate>Sat, 15 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[I am sure that most of you already know the "Prototype Windows"  project that provides a very powerful way to create windows and dialogs inside your Web pages. If you do not know it, take a look it's awesome!]]></description>
            <content:encoded><![CDATA[<p>I am sure that most of you already know the "<a href="http://prototype-window.xilinus.com/" target="_blank" rel="noopener noreferrer">Prototype Windows</a>"  project that provides a very powerful way to create windows and dialogs inside your Web pages. If you do not know it, take a look it's awesome!</p><p>Sebastien Gruhier, aka Mr Proto, and others have done a terrific job allowing developers to integrate exciting features with few lines of code. Find more on the <a href="http://prototype-window.xilinus.com/" target="_blank" rel="noopener noreferrer">PWC site</a> or on <a href="http://blog.xilinus.com/pwc" target="_blank" rel="noopener noreferrer">Mr Proto's blog</a>.</p><p><img loading="lazy" src="http://3.bp.blogspot.com/_aoQgQ1obiyE/Ruvo6E3lYfI/AAAAAAAAAB0/fk6OCadNOCA/s400/pwcdemo.png" class="img_ev3q"></p><p>In addition to the Windows API, you can also take a look to the Tranparent Message, Prototype Carousel and Prototype Graphics projects</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Java 101: Generate a unique identifier with java.util.UUID]]></title>
            <link>https://tgrall.github.io/blog/2007/08/07/java-101-generate-a-unique-identifier-with-java-dot-util-dot-uuid</link>
            <guid>/2007/08/07/java-101-generate-a-unique-identifier-with-java-dot-util-dot-uuid</guid>
            <pubDate>Tue, 07 Aug 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend of mine was asking me how to generate a unique ID for his application... As you probably already know Java SE 5 has introduced the java.util.UUID class to easily generate Universally Unique Identifier (UUID). As usual  Wikipedia is a great starting point to learn more about UUID.]]></description>
            <content:encoded><![CDATA[<p>A friend of mine was asking me how to generate a unique ID for his application... As you probably already know Java SE 5 has introduced the java.util.UUID class to easily generate Universally Unique Identifier (UUID). As usual  <a href="http://en.wikipedia.org/wiki/UUID" target="_blank" rel="noopener noreferrer">Wikipedia</a> is a great starting point to learn more about UUID.</p><p>Generating the unique ID is as simple as calling the method <code>UUID.randomUUID()</code> in the class. This will give a new instance of UUID that you can now manipulate; for example do a toString() to get the UUID string representation as describe in the specifications; for example <code>5462dc18-4653-42d1-b4e4-22fc970a6ce5</code></p><p>Resources:</p><ul><li><a href="http://en.wikipedia.org/wiki/UUID" target="_blank" rel="noopener noreferrer">UUID on Wikipedia</a></li><li><a href="http://java.sun.com/javase/6/docs/api/java/util/UUID.html" target="_blank" rel="noopener noreferrer">java.util.UUID Documentation</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OracleAS OC4J and Java EE releases....]]></title>
            <link>https://tgrall.github.io/blog/2007/08/02/oracleas-oc4j-and-java-ee-releases-dot-dot-dot</link>
            <guid>/2007/08/02/oracleas-oc4j-and-java-ee-releases-dot-dot-dot</guid>
            <pubDate>Thu, 02 Aug 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[This morning I was helping a customer to debug some Web Services deployment issues, when I simply realized that the error was coming from the fact that he was trying to deploy a JAX-RPC service on a OracleAS 10gR2 server; where it is not supported/available.]]></description>
            <content:encoded><![CDATA[<p>This morning I was helping a customer to debug some Web Services deployment issues, when I simply realized that the error was coming from the fact that he was trying to deploy a JAX-RPC service on a OracleAS 10gR2 server; where it is not supported/available.</p><p>This give me the opportunity to clarify the different versions of the Oracle Application Server and their related Java Enterprise Edition release support.</p><table class="tug" cellpadding="2" cellspacing="2"><tbody><tr><td class="tug">Oracle AS Release</td><td class="tug">J2EE/Java EE Release</td><td class="tug">Comments/Extensions</td><td class="tug">Certification Matrix</td></tr><tr><td class="tug">11.1.0.0</td><td class="tug">Java EE 5.0</td><td class="tug">*   Currently available as technology preview</td><td class="tug"></td></tr><tr><td class="tug">10.1.3.x (Oracle AS 10gR3)</td><td class="tug">J2EE 1.4</td><td class="tug">*   Support of EJB 3/JPA *   Web Services Annotations *   MTOM support (10.1.3.1) *   Integration of Spring 2.0 (10.1.3.2) *   Integrationf of Oracle Coherence (10.1.3.3)</td><td class="tug">[OTN Certicification Matrix](http://www.oracle.com/technology/software/products/ias/files/oracle_soa_certification_101310.html)</td></tr><tr><td class="tug">10.1.2.x (Oracle AS 10gR2)</td><td class="tug">J2EE 1.3</td><td class="tug"></td><td class="tug">[OTN Certicification Matrix](http://www.oracle.com/technology/software/products/ias/files/as_certification_r2_101202.html)</td></tr><tr><td class="tug">9.0.4.x</td><td class="tug">J2EE 1.3</td><td class="tug"></td><td class="tug">[OTN Certicification Matrix](http://www.oracle.com/technology/software/products/ias/files/as-certification-904.html)</td></tr><tr><td class="tug">9.0.3.x</td><td class="tug">J2EE 1.3</td><td class="tug"></td><td class="tug">[OTN Certicification Matrix](http://www.oracle.com/technology/software/products/ias/files/as_certification_r2_101202.html)</td></tr></tbody></table>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Visiting Paris with Velib (new bike transit system)]]></title>
            <link>https://tgrall.github.io/blog/2007/07/18/visiting-paris-with-velib-new-bike-transit-system</link>
            <guid>/2007/07/18/visiting-paris-with-velib-new-bike-transit-system</guid>
            <pubDate>Wed, 18 Jul 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[IÂ was in Paris last week end so I took this as a good opportunity toÂ visit the city using the new "Velib" system. Velib is a new selfÂ service rental bike system that the city of Paris and JCDecaux put inÂ place on July 15th. So you can take and return any of the 10,000+ bikes in any of the 750 locations all around Paris.Â I believe thatÂ Paris wants to a total number of 20,000 bikes for Â 1,400Â locations.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://3.bp.blogspot.com/_aoQgQ1obiyE/Rp3kJ-2QaVI/AAAAAAAAABU/BmlcbzgcwCk/s200/photos_velib_visuel_article.gif" class="img_ev3q"></p><p>I&nbsp;was in Paris last week end so I took this as a good opportunity to&nbsp;visit the city using the new "Velib" system. Velib is a new self&nbsp;service rental bike system that the city of Paris and JCDecaux put in&nbsp;place on July 15th. So you can take and return any of the 10,000+ bikes in any of the 750 locations all around Paris.&nbsp;I believe that&nbsp;Paris wants to a total number of 20,000 bikes for &nbsp;1,400&nbsp;locations.</p><p>The concept is really simple, you can&nbsp;take a bike for 1 euro day and it is free for 30mn, supplet of 1 euro&nbsp;will be charge for additional 30 mn then 2euros for the next one, ...&nbsp;The idea is to use the bike for short periode of time, return it to a&nbsp;station and take another one after 5mn. So I have been enjoying the&nbsp;city all Sunday for only 1 euro, it was really nice to be able to ride under the Eiffel tower, les Invalides, Place Vendome on all these very&nbsp;nice and romantic Parisian places. Not only is it probably one of the&nbsp;best way to visit Paris as a touris but also it is good for the&nbsp;environment...</p><p>One the flip side, I need to say that&nbsp;Parisian drivers are not that nice with bikers, even with the 230 miles&nbsp;of bike lanes...</p><p>From a technical point of view,&nbsp;the rental system is really nice, &nbsp;the bike stations have a&nbsp;nice and simple to use system allowing you to take a bike, see your&nbsp;balance and they are all connected together allowing you to take and&nbsp;return bike anywhere in Paris. I will try to find more information&nbsp;about this application that is probably quite fun, and hopefully not
like the<a href="http:/www.velib.paris.fr" target="_blank" rel="noopener noreferrer">&nbsp;www.velib.paris.fr&nbsp;</a>site, the stations are available in multiple languages.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[BPEL in Cluster: In which node my process is working]]></title>
            <link>https://tgrall.github.io/blog/2007/07/10/bpel-in-cluster-in-which-node-my-process-is-working</link>
            <guid>/2007/07/10/bpel-in-cluster-in-which-node-my-process-is-working</guid>
            <pubDate>Tue, 10 Jul 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[I was helping a customer with his BPEL in cluster and we needed to follow the flow and on which machine the instance was running.]]></description>
            <content:encoded><![CDATA[<p>I was helping a customer with his BPEL in cluster and we needed to follow the flow and on which machine the instance was running.</p><p>I simply use a <code>bpel:exec</code> activity with the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name namespace" style="opacity:0.7">java</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">net</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">InetAddress</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">java</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">net</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">InetAddress</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLocalHost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"EXCEPTION :"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setVariableData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"HostNameVariable"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCanonicalHostName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code is just an example of what could be done. Here I am using java.net code API and put the result in a BPEL global variable using the <code>setVariableData()</code> method. Obviously you will use appropriate code to differenciate the different nodes for example the name of the OC4J instance, hostname, ... or any interesting value.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Using your Built-In iSight with Parallels (and VMWare)]]></title>
            <link>https://tgrall.github.io/blog/2007/06/04/using-your-built-in-isight-with-parallels-and-vmware</link>
            <guid>/2007/06/04/using-your-built-in-isight-with-parallels-and-vmware</guid>
            <pubDate>Mon, 04 Jun 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[It is probably an old tipe, but I have just configured my Windows XP Parallels VMs]]></description>
            <content:encoded><![CDATA[<p>It is probably an old tipe, but I have just configured my Windows XP Parallels VMs
to use my MacBook buit-in iSight Web Cam using the driver that you can find here:</p><ul><li><a href="http://www.maconlysource.com/?p=885" target="_blank" rel="noopener noreferrer">Download iSight Driver for XP</a></li></ul><p>The site states that it does not work with Parallels, but I am using the release Build 3170 RC3 and I do not have any issue.</p><ol><li><p>Start your VM</p></li><li><p>Download the Driver <!-- -->&amp;<!-- --> Unip zip</p></li><li><p>Grab the Built-In iSight using the Devices &gt; USB  menu</p></li><li><p>Point the Windows Devices Manager Installer to the location of the Unzipped folder</p></li><li><p>and you are done...</p></li></ol>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Endangered Peregrine Falcons Return to Oracle HQ]]></title>
            <link>https://tgrall.github.io/blog/2007/05/25/endangered-peregrine-falcons-return-to-oracle-hq</link>
            <guid>/2007/05/25/endangered-peregrine-falcons-return-to-oracle-hq</guid>
            <pubDate>Fri, 25 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Peregrine falcons have returned to Oracle's campus in Redwood Shores, California. You can watch the newborns on the Oracle Falconcam.]]></description>
            <content:encoded><![CDATA[<p>Peregrine falcons have returned to Oracle's campus in Redwood Shores, California. You can watch the newborns on the <em>Oracle Falconcam</em>.</p><p><a href="http://oracleimg.com/admin/images/ocom/hp/news/news_image_falcon.jpg" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://oracleimg.com/admin/images/ocom/hp/news/news_image_falcon.jpg" class="img_ev3q"></a></p><p>Read more and watch videos on <a href="http://www.oracle.com/corporate/community/stories/falcons-return.html" target="_blank" rel="noopener noreferrer">Oracle's Site</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Development Kit for Spring]]></title>
            <link>https://tgrall.github.io/blog/2007/05/21/oracle-development-kit-for-spring</link>
            <guid>/2007/05/21/oracle-development-kit-for-spring</guid>
            <pubDate>Mon, 21 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[To help you better understand the support Oracle offers to Spring developers, everything you need to get started with Spring on Oracle Containers for Java EE is now available in the Oracle Development Kit for Spring. Whether you're new to Spring or an old hand, you're sure to benefit from the contents of the Development Kit:]]></description>
            <content:encoded><![CDATA[<p>To help you better understand the support Oracle offers to Spring developers, everything you need to get started with Spring on Oracle Containers for Java EE is now available in the Oracle Development Kit for Spring. Whether you're new to Spring or an old hand, you're sure to benefit from the contents of the Development Kit:</p><ul><li>A comprehensive set of How-To examples illustrating Spring-OC4J integration</li><li>The Oracle Developer Depot Web application, which enables you to deploy and run the How-To projects on OC4J</li><li>A Spring extension to JDeveloper, Oracle's free Java IDE</li><li>Supporting documentation and white papers</li></ul><p>The Kit is available as <a href="http://download-hq.oracle.com/otn/esd/other/ODK4Spring.zip" target="_blank" rel="noopener noreferrer">a self-extracting ZIP archive</a>. Note that you will need Oracle Containers for Java EE (10.1.3.2) or higher to use all of the How-To projects provided.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OracleAS &amp; JDeveloper: JavaEE 5.0 Technology Preview]]></title>
            <link>https://tgrall.github.io/blog/2007/05/16/oracleas-and-jdeveloper-javaee-5-dot-0-technology-preview</link>
            <guid>/2007/05/16/oracleas-and-jdeveloper-javaee-5-dot-0-technology-preview</guid>
            <pubDate>Wed, 16 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[During JavaOne last week Oracle has announced the availability of a the new JavaEE 5.0 Technology Preview of Oracle Containers for JavaEE and JDeveloper (release 11).]]></description>
            <content:encoded><![CDATA[<p>During JavaOne last week Oracle has announced the availability of a the new JavaEE 5.0 Technology Preview of Oracle Containers for JavaEE and JDeveloper (release 11).</p><p>Find more information on OTN:</p><ul><li><p><a href="http://www.oracle.com/technology/tech/java/oc4j/11/index.html" target="_blank" rel="noopener noreferrer">OC4J 11: Java EE 5 Technology Preview</a></p></li><li><p><a href="http://www.oracle.com/technology/products/jdev/11/index.html" target="_blank" rel="noopener noreferrer">JDeveloper 11 Technology preview</a> includes a Mac release</p></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Develop 2007: conference near you from Oracle]]></title>
            <link>https://tgrall.github.io/blog/2007/04/03/oracle-develop-2007-conference-near-you-from-oracle</link>
            <guid>/2007/04/03/oracle-develop-2007-conference-near-you-from-oracle</guid>
            <pubDate>Tue, 03 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle is has started to deliver the "Oracle Developer 2007" conference. In this two days even you will learn more about multiple technologies: Enterprise Java,]]></description>
            <content:encoded><![CDATA[<p>Oracle is has started to deliver the "Oracle Developer 2007" conference. In this two days even you will learn more about multiple technologies: Enterprise Java,
SOA, .NET, Databases and PL/SQL, as well as Ajax, PHP, Spring, and more.</p><p>This event is organized in 4 different tracks for developers:</p><ul><li><a href="http://www.oracle.com/technology/events/develop2007/java.html" target="_blank" rel="noopener noreferrer">Java</a></li><li><a href="http://www.oracle.com/technology/events/develop2007/soa.html" target="_blank" rel="noopener noreferrer">SOA</a></li><li><a href="http://www.oracle.com/technology/events/develop2007/dotnet.html" target="_blank" rel="noopener noreferrer">.Net</a></li><li><a href="http://www.oracle.com/technology/events/develop2007/database.html" target="_blank" rel="noopener noreferrer">Database</a></li></ul><p>Find an Oracle Develop event near you:</p><ul><li>May 14-15, 2007 | <a href="http://www.oracle.com/technology/events/develop2007/registration-seoul.html" target="_blank" rel="noopener noreferrer">Seoul, Lotte Jamsil</a></li><li>May 17-18, 2007 | <a href="http://www.oracle.com/technology/events/develop2007/registration-bangalore.html" target="_blank" rel="noopener noreferrer">Bangalore, The Grand Ashok</a></li><li>May 22-23, 2007 | <a href="http://www.oracle.com/technology/global/cn/events/develop2007" target="_blank" rel="noopener noreferrer">Beijing, China World Hotel</a></li><li>June 18-19, 2007 | <a href="http://www.oracle.com/technology/events/develop2007/registration-munich.html" target="_blank" rel="noopener noreferrer">Munich, Arabella Sheraton</a></li><li>June 21-22, 2007 | <a href="http://www.oracle.com/technology/events/develop2007/registration-prague.html" target="_blank" rel="noopener noreferrer">Prague, Prague Conference Center</a></li><li>June 26-27, 2007 | <a href="http://www.oracle.com/technology/events/develop2007/registration-london.html" target="_blank" rel="noopener noreferrer">London, ExCeL</a>
I will be presenting the Java Developer conference and SOA in Munich, Prague
and London at the end of June... see you there !</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Online Public Libraries: Google Books and now.. Europeana]]></title>
            <link>https://tgrall.github.io/blog/2007/03/29/online-public-libraries-google-books-and-now-dot-europeana</link>
            <guid>/2007/03/29/online-public-libraries-google-books-and-now-dot-europeana</guid>
            <pubDate>Thu, 29 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[I am sure that you know about Google Books//books.google.com/]]></description>
            <content:encoded><![CDATA[<p>I am sure that you know about Google Books: <a href="http://books.google.com/" target="_blank" rel="noopener noreferrer">http://books.google.com/</a></p><p>Even if I truly believe that Google wants the good by publishing all this information for free - We all remember the sentence: "Don't be evil" that is part of the <a href="http://investor.google.com/conduct.html" target="_blank" rel="noopener noreferrer">Google code of Conduct</a>-. I think it is not a good idea to have only one service that provide access to the "world culture"... Competition is always good for consumer...</p><p>The French National Library (<a href="http://www.bnf.fr/" target="_blank" rel="noopener noreferrer">BNF</a>) and some other public libraries (Hungarian, Portugal) have created a new site to offer a similar service in beta:  <a href="http://www.europeana.eu/" target="_blank" rel="noopener noreferrer">http://www.europeana.eu</a>. It is true that currently the list of books is really small compare to Google but I am inviting you to use both of then.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Grails vs Rails Performance Benchmark]]></title>
            <link>https://tgrall.github.io/blog/2007/03/23/grails-vs-rails-performance-benchmark</link>
            <guid>/2007/03/23/grails-vs-rails-performance-benchmark</guid>
            <pubDate>Fri, 23 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Graeme, the Grails Project Lead has published a very interesting benchmark of Grails versus Rails applications, that is available on the Grails wiki:]]></description>
            <content:encoded><![CDATA[<p>Graeme, the Grails Project Lead has published a very interesting benchmark of Grails versus Rails applications, that is available on the Grails wiki:</p><ul><li><a href="http://grails.org/Grails+vs+Rails+Benchmark" target="_blank" rel="noopener noreferrer">Grails vs Rails Performance Benchmarking</a>I let you read and comment on the Wiki the results... Grails development team is open to comment and improvement of the bench to capture as much information as possible.</li></ul><p>It is also important to note that performances, productivity are very important when choosing a development environment; but something that is also key for enterprises, is the fact that Grails/Groovy "are" Java/J2EE based. This means that a Grails application is packaged, deployed, administered and monitored like any applications that already exist in the information system on J2EE application servers.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Tangosol is joining the Oracle family]]></title>
            <link>https://tgrall.github.io/blog/2007/03/23/tangosol-is-joining-the-oracle-family</link>
            <guid>/2007/03/23/tangosol-is-joining-the-oracle-family</guid>
            <pubDate>Fri, 23 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[During The Server Side Symposium in Vegas, Thomas Kurian announced that Oracle is acquiring Tangosol, during the keynote, Cameron Purdy (Tangosol's CEO) has demonstrated how cool Coherence can be, and they have presented how it could be used in the context of XTP (Extreme Transaction Processing).]]></description>
            <content:encoded><![CDATA[<p>During The Server Side Symposium in Vegas, Thomas Kurian announced that Oracle is acquiring <a href="http://tangosol.com/" target="_blank" rel="noopener noreferrer">Tangosol</a>, during the keynote, Cameron Purdy (Tangosol's CEO) has demonstrated how cool Coherence can be, and they have presented how it could be used in the context of XTP (Extreme Transaction Processing).</p><p>Soon more to come about this in the different technical side and blog of the Oracle's community.</p><ul><li>See <a href="http://www.oracle.com/tangosol/index.html" target="_blank" rel="noopener noreferrer">Oracle and Tangosol page</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Using Groovy within Oracle Data Integrator]]></title>
            <link>https://tgrall.github.io/blog/2007/03/18/using-groovy-within-oracle-data-integrator</link>
            <guid>/2007/03/18/using-groovy-within-oracle-data-integrator</guid>
            <pubDate>Sun, 18 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[As you may remember, Oracle acquired few months back a data integration solution from Sunopsis, and has integrated it in our product under the name "Oracle Data Integrator" (ODI).]]></description>
            <content:encoded><![CDATA[<p>As you may remember, Oracle acquired few months back a data integration solution from Sunopsis, and has integrated it in our product under the name "<a href="http://www.oracle.com/technology/products/oracle-data-integrator/index.html" target="_blank" rel="noopener noreferrer">Oracle Data Integrator</a>" (ODI).</p><p>One of the first thing that I look when we got this product was the support for Scripting technologies, since it makes lot of sense to have such support in any ETL. And yes ODI has support for Jython (thought BSF). So when the dev team joined Oracle, I've asked the following question "did you try to use Groovy?"... I personnaly did not take the time to test, but one of the developer did and document it in his blog:
"<a href="http://thierrychantier.blogspot.com/2007/04/groovy-and-odi.html" target="_blank" rel="noopener noreferrer">Using Groovy and ODI</a>" from Thierry. When I get a chance I will provide a more complete sample of using Groovy in Oracle Data Integrator.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaEE 5 Features of OracleAS 10gR3]]></title>
            <link>https://tgrall.github.io/blog/2007/03/07/javaee-5-features-of-oracleas-10gr3</link>
            <guid>/2007/03/07/javaee-5-features-of-oracleas-10gr3</guid>
            <pubDate>Wed, 07 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[OracleAS 10g R3 (10.1.3.x) is a certified J2EE 1.4 container, but OracleAS provides already support to some of the features of the Java Enterprise Edition 5]]></description>
            <content:encoded><![CDATA[<p><a href="http://otn.oracle.com/products/oc4j" target="_blank" rel="noopener noreferrer">OracleAS 10g R3 (10.1.3.x)</a> is a certified J2EE 1.4 container, but OracleAS provides already support to some of the features of the Java Enterprise Edition 5: JavaEE 5. One of the key driver of the new EE version was simplification of the development and deployment applications. Here is the list of the JavaEE 5 features that are supported in OracleAS 10gR3 that will simplify the development of applications <em>(in comparison to a standard J2EE 1.x development)</em>:</p><ul><li><p>Java Persistence API (JPA) and EJB 3.0 (<a href="http://download-uk.oracle.com/docs/cd/B32110_01/web.1013/b28221/toc.htm" target="_blank" rel="noopener noreferrer">documention</a>)</p></li><li><p>Support of shared library at the EAR level (<code>&amp;lt;library-directory&amp;gt; / applib</code>). (<a href="http://download.oracle.com/docs/cd/B31017_01/web.1013/b28952/classload.htm#BABGAABD" target="_blank" rel="noopener noreferrer">documentation</a>). This comes in addition to the OracleAS 10gR3 classloader framework that allows administrators to create, and version shared libraries that can be used into applications by referencing them in the deployment plan.</p></li><li><p>Annotations Based Web Services (JSR181)  that could be used for Java classes and EJB3 Session Beans (<a href="http://download.oracle.com/docs/cd/B32110_01/web.1013/b28974/devannotation.htm#CHDFJBEH" target="_blank" rel="noopener noreferrer">documentation</a>)</p></li><li><p>Referencing resources using annotations in the Web container: <code>@EJB, @Resource, @Resources, @PostConstruct, @PreDestroy, @PersistenceUnit, @PersistenceContext, @WebServiceRef, @DeclaresRoles, @RunAs</code>  (<a href="http://download.oracle.com/docs/cd/B32110_01/web.1013/b28959/annotations.htm#sthref248" target="_blank" rel="noopener noreferrer">documentation</a>)
Hope that this small summary will give you the opportunity to test some of the features of OracleAS 10g.</p></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle donates Toplink to Eclipse]]></title>
            <link>https://tgrall.github.io/blog/2007/03/06/oracle-donates-toplink-to-eclipse</link>
            <guid>/2007/03/06/oracle-donates-toplink-to-eclipse</guid>
            <pubDate>Tue, 06 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle has announced yesterday during  EclipseCon in Santa Clara (California) that it open-sources Oracle Toplink as part of the Eclipse Project.]]></description>
            <content:encoded><![CDATA[<p>Oracle has announced yesterday during  <a href="http://www.eclipsecon.org/" target="_blank" rel="noopener noreferrer">EclipseCon</a> in Santa Clara (California) that it <em>open-sources</em> Oracle Toplink as part of the Eclipse Project.</p><p>The idea is to open source all the features of Toplink (ORM/JPA, OXM/JAXB, and EIS support), but also features that are currently under development and will be part of the Eclipse project:</p><ul><li>Service Data Objects (SDO) implementation and SDO Data Access Service (DAS) that leverages JPA for use with SDO.*   XR (XML-Relational) that provides a completely metadata driven approach to obtaining relational data as XML.</li><li>DBWS which exposes XR as a web service. With DBWS, you can easily build web services that access relational data without any programming.</li></ul><p>One part will be kept by Oracle, this is the "glue" code that is used for the integration with OracleAS that is probably not useful for anybody but Oracle.
For details check out the <a href="http://www.oracle.com/corporate/press/2007_mar/OpenSource-TopLink.html" target="_blank" rel="noopener noreferrer">press release</a> and the <a href="http://www.oracle.com/technology/tech/eclipse/pdf/eclipselink-faq.pdf" target="_blank" rel="noopener noreferrer">FAQ</a>.</p><p>If you are at EclipseCon do not hesitate to visit the Oracle booth to learn more about this great news for the Java developers.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Netbeans : OC4J support available]]></title>
            <link>https://tgrall.github.io/blog/2007/03/02/netbeans-oc4j-support-available</link>
            <guid>/2007/03/02/netbeans-oc4j-support-available</guid>
            <pubDate>Fri, 02 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[It has been a long time that I did not look in the update center and development wiki of Netbeans. And I have been very pleased to see that it is possible now to register OC4J 10g as a server in Netbeans 5.5 (and 6.0). To add it in your environment just do a :]]></description>
            <content:encoded><![CDATA[<p>It has been a long time that I did not look in the update center and development wiki of Netbeans. And I have been very pleased to see that it is possible now to register OC4J 10g as a server in Netbeans 5.5 (and 6.0). To add it in your environment just do a :</p><ul><li>Tools &gt; Update Center</li><li>Select "Netbeans Update Center Beta"</li><li>Select OC4J 10gYou can then configure a new Server and run/stop the server from your IDE.</li></ul><p><img loading="lazy" src="http://2.bp.blogspot.com/_aoQgQ1obiyE/RehrkeHe9xI/AAAAAAAAAAw/0DruPeS4ijQ/s1600-h/nb-002.png" class="img_ev3q"></p><p>You can follow the development of this plugin directly in the <a href="http://wiki.netbeans.org/wiki/view/OC4JSupport" target="_blank" rel="noopener noreferrer">Netbeans Wiki OC4J Support</a> page.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Spring and Oracle: I21 blog entry about Oracle contribution to Spring]]></title>
            <link>https://tgrall.github.io/blog/2007/02/27/spring-and-oracle-i21-blog-entry-about-oracle-contribution-to-spring</link>
            <guid>/2007/02/27/spring-and-oracle-i21-blog-entry-about-oracle-contribution-to-spring</guid>
            <pubDate>Tue, 27 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Rod Johnson in the Interface21 team blog entry named "Oracle Contributing Oracle Application Server Integration Code to Spring Framework" described the contribution of Oracle to Spring framework.]]></description>
            <content:encoded><![CDATA[<p>Rod Johnson in the Interface21 team blog entry named "<a href="http://blog.interface21.com/main/2007/02/27/oracle-contributing-oracle-application-server-integration-code-to-spring-framework/" target="_blank" rel="noopener noreferrer">Oracle Contributing Oracle Application Server Integration Code to Spring Framework</a>" described the contribution of Oracle to Spring framework.</p><p>This contribution allows Spring applications to leverage the OracleAS transaction manager and its features. In addition to this contribution and some previous investments of Oracle in Spring, see the <a href="http://www.oracle.com/technology/tech/java/spring.html" target="_blank" rel="noopener noreferrer">Oracle and Spring</a> page of OTN; Oracle continues to invest more and more in Spring, as contributor or as user since, as stated by Rod, Spring has an important roles in  <a href="http://www.oracle.com/products/middleware/index.html" target="_blank" rel="noopener noreferrer">Oracle Fusion Middleware</a>, and its upcoming <a href="http://www.osoa.org/" target="_blank" rel="noopener noreferrer">Services Component Architecture</a> offering.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OC4J tip: changing the server information]]></title>
            <link>https://tgrall.github.io/blog/2007/02/26/oc4j-tip-changing-the-server-information</link>
            <guid>/2007/02/26/oc4j-tip-changing-the-server-information</guid>
            <pubDate>Mon, 26 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[When you are running OC4J in stand alone mode you are using the HTTP server that is bundle with it. This HTTP server returns by default for the HTTP information the following information Oracle Containers for J2EE]]></description>
            <content:encoded><![CDATA[<p>When you are running OC4J in stand alone mode you are using the HTTP server that is bundle with it. This HTTP server returns by default for the HTTP information the following information: <em>Server: Oracle Containers for J2EE</em></p><p>If you want to change that you just need to set the <code>http.server.header</code> property. For example,</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -Dhttp.server.header="My blog on Oracle" -jar oc4j.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will now look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Mon, 26 Feb 2007 21:52:53 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server: My blog on Oracle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last-Modified: Mon, 09 Oct 2006 19:17:10 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Accept-Ranges: bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Length: 19882</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection: close</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: text/html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Thanks to James Kirsh for this <em>very useful</em> tip...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[The first International Grails eXchange 2007]]></title>
            <link>https://tgrall.github.io/blog/2007/02/22/the-first-international-grails-exchange-2007</link>
            <guid>/2007/02/22/the-first-international-grails-exchange-2007</guid>
            <pubDate>Thu, 22 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Packed with presentations on Grails, Groovy, Ajax & Web 2.0 and JavaEE and the core technologies that support the Grails technology, the first Grails eXchange conference (London from May 30th to June 1st) will be the place to be for any member of the Groovy/Grails community... You can already register on the conference web site//www.grails-exchange.com]]></description>
            <content:encoded><![CDATA[<p>Packed with presentations on Grails, Groovy, Ajax &amp; Web 2.0 and JavaEE and the core technologies that support the Grails technology, the first <a href="http://www.grails-exchange.com/" target="_blank" rel="noopener noreferrer">Grails eXchange</a> conference (London from May 30th to June 1st) will be the place to be for any member of the Groovy/Grails community... You can already register on the conference web site: <a href="http://www.grails-exchange.com/" target="_blank" rel="noopener noreferrer">http://www.grails-exchange.com</a></p><p>Come to see <a href="http://www.grails-exchange.com/speakers" target="_blank" rel="noopener noreferrer">speakers</a> including Grails project lead <a href="http://www.grails-exchange.com/graeme-rocher" target="_blank" rel="noopener noreferrer">Graeme Rocher</a>, Groovy project lead <a href="http://www.grails-exchange.com/guillaume-laforge" target="_blank" rel="noopener noreferrer">Guillaume LaForge</a>, creator of Spring <a href="http://www.grails-exchange.com/rod-johnson" target="_blank" rel="noopener noreferrer">Rod Johnson</a>, Dojo's <a href="http://www.grails-exchange.com/alex-russel-dylan-schiemann" target="_blank" rel="noopener noreferrer">Alex Russel and Dylan Schieman</a> as well as speakers from technology-leading organisations such as <a href="http://www.grails-exchange.com/joe-walnes" target="_blank" rel="noopener noreferrer">Google</a>, <a href="http://www.grails-exchange.com/rob-harrop" target="_blank" rel="noopener noreferrer">Interface 21</a>, <a href="http://www.grails-exchange.com/manik-surtani" target="_blank" rel="noopener noreferrer">JBoss</a>, <a href="http://www.grails-exchange.com/tugdual-grall" target="_blank" rel="noopener noreferrer">Oracle</a> <!-- -->&amp;<!-- --> <a href="http://www.grails-exchange.com/geertjan-weilenga" target="_blank" rel="noopener noreferrer">Sun Microsystems</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Groovy 101: Extracting XML from your database]]></title>
            <link>https://tgrall.github.io/blog/2007/02/20/groovy-101-extracting-xml-from-your-database</link>
            <guid>/2007/02/20/groovy-101-extracting-xml-from-your-database</guid>
            <pubDate>Tue, 20 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[In the previous entry I showed how you can easily take an XML feed and insert the content in the database. Let's do the opposite now, meaning taking the data out of your database as XML. In this post I am using the Sql Dataset again but to create an XML document, using the Groovy MarkupBuilder.]]></description>
            <content:encoded><![CDATA[<p>In the previous entry I showed how you can easily take an XML feed and insert the content in the database. Let's do the opposite now, meaning taking the data out of your database as XML. In this post I am using the Sql Dataset again but to create an XML document, using the Groovy MarkupBuilder.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import groovy.sql.Sql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import groovy.xml.MarkupBuilder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def sql = Sql.newInstance("jdbc:oracle:thin:@//tgrall-linux:1521/XE",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"HR", "HR", "oracle.jdbc.driver.OracleDriver")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def set = sql.dataSet("EMPLOYEES");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def writer = new StringWriter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def xml = new MarkupBuilder(writer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xml.employees() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set.each { emp -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    employee(first: emp.first_name , last: emp.last_name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email( emp.email )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println writer.toString();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see, I use the builder to create XML Elements and attributes employee(first: emp.first_name , last: emp.last_name), I do reference the current record of the dataset (emp), and all this in very simple and concise code.
This will give a result like:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">employees</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">first</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">Steven</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">last</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">King</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">SKING</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">first</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">Neena</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">last</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">Kochhar</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">NKOCHHAR</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">first</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">Lex</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">last</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">De</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">LDEHAAN</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">email</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">employee</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">employees</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So once again quite simple.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Groovy 101: Importing XML in your database]]></title>
            <link>https://tgrall.github.io/blog/2007/02/18/groovy-101-importing-xml-in-your-database</link>
            <guid>/2007/02/18/groovy-101-importing-xml-in-your-database</guid>
            <pubDate>Sun, 18 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend of mine was looking for an easy way to import some XML content in his database. You have many ways to do it. But the easiest for a Java/Groovy developer is to use Groovy, and I have create this small example for him.]]></description>
            <content:encoded><![CDATA[<p>A friend of mine was looking for an easy way to import some XML content in his database. You have many ways to do it. But the easiest for a Java/Groovy developer is to use Groovy, and I have create this small example for him.</p><p>Groovy provides really simple solution to parse XML and manipulate your database. The following sample reads an RSS new feed and import the title and link in a table named NEWS that contains two columns TITLE and LINK.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import groovy.sql.Sql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def rssFeed = "http://www.javablogs.com/ViewDaysBlogs.action?view=rss";</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def xmlFeed      = new XmlParser().parse(rssFeed);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def sql = Sql.newInstance("jdbc:oracle:thin:@//tgrall-linux:1521/XE",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"GROOVY",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"GROOVY",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"oracle.jdbc.driver.OracleDriver")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def set = sql.dataSet("NEWS");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(0..&amp;lt; xmlFeed.channel.item.size()).each {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def item = xmlFeed.channel.item.get(it);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def title = item.title.value[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def link = item.link.value[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  println("Importing $title ...");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set.add(TITLE: title, LINK: link);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First I create a Groovy SQL object and a DataSet to manipulate my data <code>sql.dataSet("NEWS")</code>. Do not forget, if like me you are using Oracle database, to add the Oracle JDBC driver to your classpath ;-)</p><p>Then I create a loop on each items of the RSS feed I am using: <code>(0..&amp;gt; xmlFeed.channel.item.size()).each {...}</code>. As you see, Groovy XML help me to parse, and navigate the XML document.</p><p>Like any Groovy iterator you have access to an implicit object available in the loop "<code>it</code>", so I can get the item using the Groovy XML : <code>xmlFeed.channel.item.get(it)</code></p><p>Then you can get the different values you want of the  item element.Using the dataset.add method, you can insert them in the table.This is done using the  value pairs notation <em>column:value</em>, this looks like: <code>set.add(TITLE: title, LINK: link)</code></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Application Server 10gR3: iHat]]></title>
            <link>https://tgrall.github.io/blog/2007/02/15/oracle-application-server-10gr3-ihat</link>
            <guid>/2007/02/15/oracle-application-server-10gr3-ihat</guid>
            <pubDate>Thu, 15 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[When preparing a complex topology, where you have multiple HTTP servers ,talking with many OC4J instances, it is sometimes hard to understand what is going on. Oracle Application Server Control provides the complete view of your topologies in different pages. If you want to have a quick overview of your topology, you may want a more graphical view of your Oracle Application Server instance.]]></description>
            <content:encoded><![CDATA[<p>When preparing a complex topology, where you have multiple HTTP servers ,talking with many OC4J instances, it is sometimes hard to understand what is going on. Oracle Application Server Control provides the complete view of your topologies in different pages. If you want to have a quick overview of your topology, you may want a more graphical view of your Oracle Application Server instance.</p><p>One of the tool that I use a lot to present OracleAS and its components is <a href="http://www.oracle.com/technology/products/ias/utilities/ihat1013.zip" target="_blank" rel="noopener noreferrer">OracleAS Hi-Av Tool 10g (10.1.3)</a> also known as <strong>iHat</strong>. This utility uses Oracle Process &amp; Notification Manager (OPMN) to gather information of all the components used in your topology, representing it in a nice graphical viewer. In addition to use iHat to show the different components, I do also use that to validate my configuration.</p><p><img loading="lazy" src="http://2.bp.blogspot.com/_aoQgQ1obiyE/RdSOpbcqAJI/AAAAAAAAAAk/huSO5c9xg9o/s1600/ihat001.png" alt="iHat View" class="img_ev3q"></p><p>In this case I am showing a specific instance, that contains 3 OC4Js instance, with 2 of them that are in the same group.  When using iHat you will notice that you can, in addition to have some monitoring information start, stop, restart the different components directly from the view.</p><p><em>How do you install and start iHat?</em></p><p>1- Download iHat from  <a href="http://www.oracle.com/technology/products/ias/utilities/index.html" target="_blank" rel="noopener noreferrer">Utilities for Oracle Application Server 10<em>g</em> OTN page</a></p><p>2- Unzip it, and this becomes the <code>$IHAT_HOME</code></p><p>3- You have an ORACLE_HOME that is pointing to one of the OracleAS instance, so you can start iHat using the follling command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -cp $ORACLE_HOME/opmn/lib/optic.jar:$IHAT_HOME/ihat.jar oracle.ias.opmn.ihat.WebServer 8181 $ORACLE_HOME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using this command, iHat is starting an HTTP server on port 8181, and use the OPMN configuration of the <code>$ORACLE_HOME</code> that I you have entered as parameter. iHat provided other parameters such as the host-name and OPMN port if you want to connect remotely without dependency on the <code>$ORACLE_HOME</code>. All this, is documented in the readme file located in the iHat folder.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Web Services: Sharing Session between client calls]]></title>
            <link>https://tgrall.github.io/blog/2007/02/15/oracle-web-services-sharing-session-between-client-calls</link>
            <guid>/2007/02/15/oracle-web-services-sharing-session-between-client-calls</guid>
            <pubDate>Thu, 15 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[OracleAS Web Services Runtime provides a support for stateful Web Services that is based on HTTP /Servlet session. Some people will probably say that Web Services should not be stateful, or at least not based on the protocol... However, today most of Web Services are using HTTP, and in some specific cases it is very useful to be able to have a state.]]></description>
            <content:encoded><![CDATA[<p>OracleAS Web Services Runtime provides a support for stateful Web Services that is based on HTTP /Servlet session. Some people will probably say that Web Services should not be stateful, or at least not based on the protocol... However, today most of Web Services are using HTTP, and in some specific cases it is very useful to be able to have a state.</p><p>In this post, I am not explaining how to enable stateful services and clients, since it is documented in the <a href="http://download.oracle.com/docs/cd/B31017_01/web.1013/b28974/devjavaclass.htm#BEIDDAFG" target="_blank" rel="noopener noreferrer">Java Classes and Stateful Web Wervices</a> chapter of the developer guide. Here I am show you how you can using client side programming share the same state (session) between different web services calls (even different services running in the same server side application).</p><p>The tip used here is about the association of cookies to the client instance (JAX-WS Stub or Call object). Here the code you have to write to do that using DII, will be very similar when using static Stub</p><p>1- Enable the state management</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Service</span><span class="token plain"> service </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">qName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">QName</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"CartService"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Call</span><span class="token plain"> call </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createCall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SESSION_MAINTAIN_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Boolean</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// this is necessary to be able to manipulate cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> 2- Create a Map that contains the Cookies and assign it to the call (or Stub)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token class-name">Map</span><span class="token plain"> cookieMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClientConstants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">COOKIE_MAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cookieMap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This specific step associates a map that will contains all the cookie with the call/stub instance. You will be able then to manipulate the Map to get or set the cookies.</p><p> 3- How to get the <code>JSESSION</code> cookie</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Cookie</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getJSessionCookie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Call</span><span class="token plain"> call</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Map</span><span class="token plain"> cookies </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClientConstants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">COOKIE_MAP</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cookies </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Iterator</span><span class="token plain"> it </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">values</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">iterator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">it</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">Cookie</span><span class="token plain"> cookie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Cookie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">it</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cookie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"JSESSIONID"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cookie</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the Cookie object is an instance of Oracle <code>HTTPClient.Cookie</code>.</p><p>4- Utilizing the Cookie</p><p>So now you have all the information to be able to get the Session information when the stateful conversation has started;</p><p>In this example each time the call.invoke() is done, a counter is incremented on the server.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Call</span><span class="token plain"> call </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createCall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SESSION_MAINTAIN_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Boolean</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// this is necessary to be able to manipulate cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Map</span><span class="token plain"> cookieMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClientConstants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">COOKIE_MAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cookieMap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The session will only be created after the first invoke</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">invoke</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// counter = 1 call.invoke(...); // counter = 2 since on the same session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the session is now created so you can get the cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Cookie</span><span class="token plain"> mySession </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getJSessionCookie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now use the cookie in another call using the following code:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mySession </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// was extracted from the call #1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token comment" style="color:#999988;font-style:italic">// now I am creating a new call instance (myNewCall) that could be in another class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Call</span><span class="token plain"> myNewCall </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createCall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNewCall</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SESSION_MAINTAIN_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Boolean</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// this is necessary to be able to manipulate cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Map</span><span class="token plain"> cookieMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// add the cookie to the map this will add the cookie to the HTTP request so it will be associated to the same session (/state)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cookieMap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mySession</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">mySession</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">// associate the cookie Map to the call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNewCall</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClientConstants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">COOKIE_MAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cookieMap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNewCall</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// counter = 3 since we share the same session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using this sample you have 2 instances of a client calling a service and reusing the same session -state-.  You can also use the same approach to have 2 different clients talking to different services and share the same session. To do that you will have on the server side to use the HTTP Session directly to store your data between calls, and share it between services.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Groovy Plugin for Oracle JDeveloper 10g]]></title>
            <link>https://tgrall.github.io/blog/2007/02/07/new-groovy-plugin-for-oracle-jdeveloper-10g</link>
            <guid>/2007/02/07/new-groovy-plugin-for-oracle-jdeveloper-10g</guid>
            <pubDate>Wed, 07 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[You can find a first release of the Groovy extension for JDeveloper on the Groovy site:]]></description>
            <content:encoded><![CDATA[<p>You can find a first release of the Groovy extension for JDeveloper on the Groovy site:</p><ul><li><a href="http://groovy.codehaus.org/Oracle+JDeveloper+Plugin" target="_blank" rel="noopener noreferrer">http://groovy.codehaus.org/Oracle+JDeveloper+Plugin</a></li></ul><p>The plugin creates a new JDeveloper library for Groovy 1.0, allows you to create and run scripts. I hope to be able to provide more feature such as syntax coloring,  structure recognition, ... lot of ideas here...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Grails 0.4 Released...]]></title>
            <link>https://tgrall.github.io/blog/2007/01/31/grails-0-dot-4-released-dot-dot-dot</link>
            <guid>/2007/01/31/grails-0-dot-4-released-dot-dot-dot</guid>
            <pubDate>Wed, 31 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[The Grails developer team is pleased to announce the release 0.4 of Grails. The release can be]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://grails.codehaus.org/images/grails_logo.jpg" class="img_ev3q">The Grails developer team is pleased to announce the release 0.4 of <a href="http://grails.codehaus.org/" target="_blank" rel="noopener noreferrer">Grails</a>. The release can be
obtained from the <a href="http://grails.org/Download" target="_blank" rel="noopener noreferrer">downloads page</a>.</p><p>Notable improvements include:</p><ul><li>ORM enhancements with support for more relationship types, easy transactions and criteria building, constraints to SQL schema mappings, and upgrade to Hibernate 3.2</li><li>All-new non-invasive plugin system for writing reusable plugins for Grails applications</li><li>Greater Spring integration thanks to a new syntax for scripting Spring (<a href="http://grails.org/Spring+Bean+Builder" target="_blank" rel="noopener noreferrer">http://grails.org/Spring+Bean+Builder</a>) and an upgrade to Spring 2.0</li><li>Easier unit testing of controllers and custom taglibs</li><li>Validation improvements, including support for inherited constraints and simplified size constraint handling</li><li>Automatic encoding of unsafe HTML characters and URL parameters in all scaffolding and taglibs</li><li>Fixes to support Grails on more containers such as GlassFish and over 200 issues and bugs resolved in JIRA</li><li>Grails now ships with Groovy 1.0!</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle JDeveloper (10.1.3.2) / WebCenter available for download]]></title>
            <link>https://tgrall.github.io/blog/2007/01/30/oracle-jdeveloper-10-dot-1-3-dot-2-slash-webcenter-available-for-download</link>
            <guid>/2007/01/30/oracle-jdeveloper-10-dot-1-3-dot-2-slash-webcenter-available-for-download</guid>
            <pubDate>Tue, 30 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle JDeveloper (10.1.3.2.0) extends the SOA development features from  the previous release by introducing the Oracle WebCenter extension.  Oracle WebCenter Suite combines the standards-based, declarative development of JavaServer Faces (JSF), the flexibility and power of portals, and a set of integrated Web 2.0 services to boost end-user productivity.   Oracle WebCenter Suite provides the tools and services to embed portlets, content, customizable components, Web 2.0 content,]]></description>
            <content:encoded><![CDATA[<p>Oracle JDeveloper (10.1.3.2.0) extends the SOA development features from  the previous release by introducing the Oracle WebCenter extension.  Oracle WebCenter Suite combines the standards-based, declarative development of JavaServer Faces (JSF), the flexibility and power of portals, and a set of integrated Web 2.0 services to boost end-user productivity.   Oracle WebCenter Suite provides the tools and services to embed portlets, content, customizable components, Web 2.0 content,
collaboration and communication services directly into your JavaServer Faces (JSF) application.  These WebCenter features are in addition to the large set of new features that were introduced in Oracle JDeveloper 10.1.3.0 and 10.1.3.1.0.  For more information on WebCenter, visit the
<a href="http://www.oracle.com/technology/products/webcenter/index.html" target="_blank" rel="noopener noreferrer">Oracle WebCenter Suite page on OTN</a>.</p><ul><li>Build Portlets<ul><li>Build JSR 168 portlets</li><li>Build Oracle PDK-Java portlets</li><li>Expose JavaServer Faces (JSF) applications as portlets</li><li>Preconfigured OC4J within Oracle JDeveloper</li></ul></li><li>Consume Portlets<ul><li>Consume JSR 168 portlets through WSRP</li><li>Consume other WSRP portlets</li><li>Consume Oracle PDK-Java portlets</li><li>Inter-component communication</li></ul></li><li>Business User Web 2.0 Enterprise Mashup Tools<ul><li>Rich Text / Blog Portlet</li><li>WebClipping Portlet</li><li>OmniPortlet</li></ul></li><li>Runtime Customization<ul><li>showDetailFrame</li><li>panelCustomizable</li></ul></li><li>Integrate Content using JCR 1.0<ul><li>Access content using data controls</li><li>Access to many content repositories</li></ul></li><li>WebCenter Services<ul><li>Secure Enterprise Search (SES)</li><li>Oracle Communication and Mobility Server (OCMS)</li><li>Oracle Content Database</li><li>Discussions</li><li>Wiki</li></ul></li><li>Declarative Security<ul><li>ADF Security Wizard</li><li>Authorization Editor</li></ul></li><li>Lifecycle Tool<ul><li>Embedded Lifecycle Tool</li><li>Command Line Lifecycle Tool</li><li>ANT Tasks</li></ul></li></ul><p>Some links:</p><ul><li><a href="http://www.oracle.com/technology/software/products/jdev/htdocs/soft10132.html" target="_blank" rel="noopener noreferrer">New Features</a></li><li><a href="http://www.oracle.com/technology/software/products/jdev/htdocs/soft10132.html" target="_blank" rel="noopener noreferrer">Download</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JDJ Review: Oracle JDeveloper An IDE Worth a Second Look]]></title>
            <link>https://tgrall.github.io/blog/2007/01/27/jdj-review-oracle-jdeveloper-an-ide-worth-a-second-look</link>
            <guid>/2007/01/27/jdj-review-oracle-jdeveloper-an-ide-worth-a-second-look</guid>
            <pubDate>Sat, 27 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[As the saying goes you never get a second chance at a first impression. In general, that's true, but if you've been thoroughly revitalized, matured, and cosmetically re-engineered, shouldn't you get a second shot at that first impression? I'd argue that's true of Oracle's Java/J2EE Workbench, Oracle JDeveloper.]]></description>
            <content:encoded><![CDATA[<p>As the saying goes you never get a second chance at a first impression. In general, that's true, but if you've been thoroughly revitalized, matured, and cosmetically re-engineered, shouldn't you get a second shot at that first impression? I'd argue that's true of Oracle's Java/J2EE Workbench, Oracle JDeveloper.</p><ul><li><a href="http://java.sys-con.com/read/313602.htm" target="_blank" rel="noopener noreferrer">Java Product Review â€” Oracle JDeveloper An IDE Worth a Second Look</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Apple released beta version of Dashcode]]></title>
            <link>https://tgrall.github.io/blog/2007/01/22/apple-released-beta-version-of-dashcode</link>
            <guid>/2007/01/22/apple-released-beta-version-of-dashcode</guid>
            <pubDate>Mon, 22 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Dashcode is a new application for developing Dashboard widgets coming in Mac OS X 10.5 (Leopard).  This tools is already available as developer preview on Tiger.]]></description>
            <content:encoded><![CDATA[<p>Dashcode is a new application for developing Dashboard widgets coming in Mac OS X 10.5 (Leopard).  This tools is already available as developer preview on Tiger.</p><p>I have installed it and it is really great, easy to use, helping you to create good looking widgets. As usual, like all the Apple development tools it is really intuitive. More than a long blog entry on this I am just pointing you to the DashCode page on the Apple site:</p><ul><li><a href="http://developer.apple.com/tools/dashcode/" target="_blank" rel="noopener noreferrer">Dashcode</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Using Oracle Data Integrator on Mac OS X]]></title>
            <link>https://tgrall.github.io/blog/2007/01/18/using-oracle-data-integrator-on-mac-os-x</link>
            <guid>/2007/01/18/using-oracle-data-integrator-on-mac-os-x</guid>
            <pubDate>Thu, 18 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle just released on OTN a new product "Oracle Data Integrator" (ODI), I wanted]]></description>
            <content:encoded><![CDATA[<p>Oracle just released on OTN a new product "<a href="http://www.oracle.com/technology/products/oracle-data-integrator/index.html" target="_blank" rel="noopener noreferrer">Oracle Data Integrator</a>" (ODI), I wanted
to quickly take a look to the product, so I have downloaded it and
installed it on my Mac. This product is a 100% Java based solution that
you can quickly installed on mac following these steps:</p><p>1- Download and unzip ODI from <a href="http://www.oracle.com/technology/software/products/ias/htdocs/101310.html" target="_blank" rel="noopener noreferrer">OTN download page</a> (bottom).</p><p>2- Open a terminal Window and go to the folder where you have unzipped
ODI, you should have the following content:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- external</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- index.htm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- oracledi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- oracledilwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- oracledimn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- setup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Open the index.html and select the Getting Started Guide, this will
help you to learn more about ODI using a comprehensive scenario.</p><p>3- Setup the environment variables:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ODI_JAVA_HOME=/Library/Java/Home/   (need to be Java 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ODI_HOME=&lt;path to ODI installation folder&gt;/odi/oracled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4- Go to the <code>$ODI_HOME/bin</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd $ODI_HOME/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>5- Start the HSQL databases that contain the sample application and data:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./startdemo.sh &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command starts 3 different instances: repo (metadata repository), src (source db), trg (target db) that are used in the Getting Started guide. To stop the DB run the script <code>./stopdemo.sh</code>.</p><p>6- You can now start the designer too using the command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./designer.sh &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Select the Getting Started project and when you are in the designer switch to the Mac OS X look and feel ;-), using the Menu "Look And Feel <!-- -->&gt;<!-- --> Standard <!-- -->&gt;<!-- --> Mac OS X".</p><p><img loading="lazy" src="http://farm1.static.flickr.com/139/361446290_8481172875_o.png" class="img_ev3q"></p><p>These are the first steps to start with Oracle Data Integrator, you can now follow the Getting Started Guide, to learm more about the product, and since your environment is set you can run any of the command documented in this guide.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OTN Article: Install Oracle RAC 10g on Oracle Enterprise Linux Using VMware Server]]></title>
            <link>https://tgrall.github.io/blog/2007/01/15/otn-article-install-oracle-rac-10g-on-oracle-enterprise-linux-using-vmware-server</link>
            <guid>/2007/01/15/otn-article-install-oracle-rac-10g-on-oracle-enterprise-linux-using-vmware-server</guid>
            <pubDate>Mon, 15 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Install Oracle RAC 10g on Oracle Enterprise Linux using VMware Server is a very interesting article on using Oracle RAC using Oracle Linux on VMWare.]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.oracle.com/technology/pub/articles/chan-ubl-vmware.html" target="_blank" rel="noopener noreferrer">Install Oracle RAC 10<em>g</em> on Oracle Enterprise Linux using VMware Server</a> is a very interesting article on using Oracle RAC using Oracle Linux on VMWare.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle JDeveloper Features Matrix]]></title>
            <link>https://tgrall.github.io/blog/2007/01/08/oracle-jdeveloper-features-matrix</link>
            <guid>/2007/01/08/oracle-jdeveloper-features-matrix</guid>
            <pubDate>Mon, 08 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Not familiar with Oracle JDeveloper?]]></description>
            <content:encoded><![CDATA[<p>Not familiar with Oracle JDeveloper?</p><p>Take a look to the new Oracle JDeveloper 10g (10.1.3.1) matrix, this document exposes in a simple matrix the different features of the Oracle Java, J2EE, SOA development environment...</p><ul><li><a href="http://www.oracle.com/technology/products/jdev/101/collateral/101/featurematrix_10131.html" target="_blank" rel="noopener noreferrer">Oracle JDeveloper 10.1.3.1.0 Feature Matrix</a></li></ul><p>You can find all the information and download <a href="http://otn.oracle.com/products/jdev" target="_blank" rel="noopener noreferrer">this free Java IDE from OTN.</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to use SOAP Compression using JAX-RPC]]></title>
            <link>https://tgrall.github.io/blog/2007/01/07/how-to-use-soap-compression-using-jax-rpc</link>
            <guid>/2007/01/07/how-to-use-soap-compression-using-jax-rpc</guid>
            <pubDate>Sun, 07 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[HTTP compression has improved a lot the download time of content from]]></description>
            <content:encoded><![CDATA[<p>HTTP compression has improved a lot the download time of content from
servers. In the context of Web Service it could be very interesting to
also use HTTP compression to improve the network traffic. Firs, I am
explaining how to compress a SOAP response when you have a Web Service
running in Oracle Containers for J2EE (OC4J) using a generic servlet
filter. I have to give credit to <a href="http://www.thomas-bayer.com/" target="_blank" rel="noopener noreferrer">http://www.thomas-bayer.com/</a>
since he has created the Filter and documented how to do such thing
using Axis.<!-- -->&nbsp;</p><p>So you can take a look to the following article for more details, you
can read the 2 following article, or jump to the next paragraph that
explains how to configure your JAX-RPC based service to send compressed
HTTP response.</p><ul><li><a href="http://www.thomas-bayer.com/soap-compression-howto.htm" target="_blank" rel="noopener noreferrer">How to Use SOAP Compression with Apache Axis</a></li><li><a href="http://www.thomas-bayer.com/gzip-compression-filter.htm" target="_blank" rel="noopener noreferrer">2Way HTTP Compression Servlet Filter</a></li></ul><p>In this sample I am showing how to compress the SOAP response
using a servlet filter, it is also possible to use some other Oracle
infrastructure element to achieve that such as Oracle HTTP
Server/Apache, or Oracle Webcache.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1--install-the-compression-filter-library-in-your-application">1- Install the compression filter library in your application<a class="hash-link" href="#1--install-the-compression-filter-library-in-your-application" title="Direct link to heading">â€‹</a></h4><p>Download the compression filter library <a href="http://www.thomas-bayer.com/resources/gzip-compression-filter/2wayfilter-1.2.jar" target="_blank" rel="noopener noreferrer">2wayfilter-1.2.jar</a>
and copy it into the Web application's<code> WEB-INF/lib</code> folder</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2--configure-your-application-to-use-the-filter">2- Configure your application to use the filter<a class="hash-link" href="#2--configure-your-application-to-use-the-filter" title="Direct link to heading">â€‹</a></h4><p>The configuration of a servlet filter is done using
the web.xml where you reference which servlet or URL will be using the
filter. As you may knowin JAX-RPC, the HTTP endpoint of a service are
exposed as servlet and defined in the web.xml. You can choose to
compress all the endpoint/URL or create a new servlet mapping, that
will become a new SOAP endpoint and only compress this one. If you take
the option of creating a new endpoint keep in mind that it will not be
added to the WSDL automatically, so the client application will have to
point explicitly to the compressed endpoint URL to take benefits of it.</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://java.sun.com/xml/ns/j2ee</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2.4</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Web Service CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">display-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Web Service CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">display-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">demo.oracle.CustomerServiceImpl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- New servlet mapping to handle compressed SOAP Messages --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CompressedCustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Filter definition with mapping on the compressed endpoint --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2WayFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.osmoticweb.gzipfilter.GZIP2WayFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2WayFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CompressedCustomerServiceSoapHttpPort</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now package and deploy your application.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3--create--invoke-the-service">3- Create &amp; Invoke the service<a class="hash-link" href="#3--create--invoke-the-service" title="Direct link to heading">â€‹</a></h4><p>In this basic configuration you have only changed the servlet that is
the HTTP endpoint of your service. So the compressed endpoint is not
present in the WSDL, but you can use any of the URL to create your
proxy.</p><p>When you have created your proxy, if you want to access the endpoint
that will return the compressed response you must be sure that you are
calling the correct endpoint. You can set the endpoint using the <code>setEndpoint</code> method, of your Web
Service client.</p><p>This is it!</p><p>I will in a next post explain how you can using the Oracle Web Service
client API send a compressed request that will have to be uncompressed
on the server using the same filter.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Groovy 1.0 released]]></title>
            <link>https://tgrall.github.io/blog/2007/01/02/groovy-1-dot-0-released</link>
            <guid>/2007/01/02/groovy-1-dot-0-released</guid>
            <pubDate>Tue, 02 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Groovy release 1.0 is here now !]]></description>
            <content:encoded><![CDATA[<p>Groovy release 1.0 is here now !</p><p>You can find the release at the following location:</p><ul><li><a href="http://dist.codehaus.org/groovy/distributions/" target="_blank" rel="noopener noreferrer">http://dist.codehaus.org/groovy/distributions/</a></li></ul><p>Congratulations to all the Groovy developers, and users that have done a great job with this language that is here in production. And it is interesting to see that more and more projects are using Groovy as part of their infrastructure to simplify development:</p><ul><li>SOAPUI</li><li>XWiki</li><li>Spring 2 integration</li><li>Grails</li><li>... and many development teams in custom projects</li></ul><p>So once again happy new year to all... and enjoy it with Groovy !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SOAP Client: A simple Web Services testing tools for Mac]]></title>
            <link>https://tgrall.github.io/blog/2006/12/26/soap-client-a-simple-web-services-testing-tools-for-mac</link>
            <guid>/2006/12/26/soap-client-a-simple-web-services-testing-tools-for-mac</guid>
            <pubDate>Tue, 26 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[I was discussing with a friend about SOAP testing tools. We all know SOAP UI that is a very powerful one, but I am also using a very simple one developed on Mac for Mac (cocoa based application), this application is SOAP Client:]]></description>
            <content:encoded><![CDATA[<p>I was discussing with a friend about SOAP testing tools. We all know SOAP UI that is a very powerful one, but I am also using a very simple one developed on Mac for Mac (cocoa based application), this application is SOAP Client:</p><ul><li><a href="http://www.ditchnet.org/soapclient/" target="_blank" rel="noopener noreferrer">SOAP Client Site</a></li></ul><p><img loading="lazy" src="http://farm1.static.flickr.com/151/333678730_abc9923589_o.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[VMWare finally on Mac (Beta)]]></title>
            <link>https://tgrall.github.io/blog/2006/12/23/vmware-finally-on-mac-beta</link>
            <guid>/2006/12/23/vmware-finally-on-mac-beta</guid>
            <pubDate>Sat, 23 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[As Mac user I sometimes need to use Windows (too often...) or Linux computer, and for this I have been using either my PC or Parallels. Parallels is great but in my daily job my coworker are mainly using VMWare images....]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://www.vmware.com/img/logo_top.gif" class="img_ev3q"> As Mac user I sometimes need to use Windows (too often...) or Linux computer, and for this I have been using either my PC or <a href="http://www.parallels.com" target="_blank" rel="noopener noreferrer">Parallels</a>. Parallels is great but in my daily job my coworker are mainly using VMWare images....</p><p>VMWare has now open the <a href="http://www.vmware.com/products/beta/fusion/" target="_blank" rel="noopener noreferrer">VMware Virtualization for Mac Beta Program</a>. If you like me need virtualization jump on it and give feedback...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[A nice christmas present for Groovy and Grails project]]></title>
            <link>https://tgrall.github.io/blog/2006/12/22/a-nice-christmas-present-for-groovy-and-grails-project</link>
            <guid>/2006/12/22/a-nice-christmas-present-for-groovy-and-grails-project</guid>
            <pubDate>Fri, 22 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[The groovy project gets funding for its development. Big Sky is hiring [Jochen]]></description>
            <content:encoded><![CDATA[<p>The groovy project gets funding for its development. Big Sky is hiring <a href="http://blackdragsview.blogspot.com/" target="_blank" rel="noopener noreferrer">Jochen
Theodorou</a> one of the Groovy commiter. For the people that do
not know Big Sky. Big Sky is the company behind the the <a href="http://www.nofluffjuststuff.com/index.jsp" target="_blank" rel="noopener noreferrer">No Fluff Just Stuff</a> symposium tour. Talking about this
symposium, in 2007, Groovy and Grails will have a dedicated track.</p><p>More about this funding:</p><ul><li><a href="http://www.eweek.com/article2/0,1895,2074908,00.asp" target="_blank" rel="noopener noreferrer">eWeek news</a> article</li><li>Jay Zimmerman (founder of Big Sky) and Jochen Theodorou's <a href="http://www.infoq.com/news/2006/12/groovy-sponsorship" target="_blank" rel="noopener noreferrer">interviews/article</a> from infoQ.</li></ul><p>In addition to this very good news, here some other activities around
Groovy and Grails:</p><ul><li>Releases of Groovy 1.0 and Grails 0.4</li><li>Two books on <a href="http://groovy.canoo.com/gina" target="_blank" rel="noopener noreferrer">Groovy</a> and one on <a href="http://www.amazon.com/Definitive-Guide-Grails/dp/1590597583/sr=8-2/qid=1165386946?ie=UTF8&amp;s=books&amp;tag2=abougroo-20" target="_blank" rel="noopener noreferrer">Grails</a>.</li><li>A dedicated Groovy and Grails website: <a href="http://www.aboutgroovy.com/" target="_blank" rel="noopener noreferrer">aboutGroovy.com</a></li><li>Also a dedicated Groovy and Grails conference: the<a href="http:/http://skillsmatter.com/grailsexchange" target="_blank" rel="noopener noreferrer">Grails eXchange 2007</a></li><li>And the third Groovy Developer Conference in Paris at the end of January</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Jesus Rodriguez: Interoperability between OracleAS and between Windows Communication Foundation (WCF)]]></title>
            <link>https://tgrall.github.io/blog/2006/12/20/jesus-rodriguez-interoperability-between-oracleas-and-between-windows-communication-foundation-wcf</link>
            <guid>/2006/12/20/jesus-rodriguez-interoperability-between-oracleas-and-between-windows-communication-foundation-wcf</guid>
            <pubDate>Wed, 20 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Jesus Rodrigues has published on his blog multiple articles on interoperability between OracleAS and Microsoft  WCF:]]></description>
            <content:encoded><![CDATA[<p>Jesus Rodrigues has published on <a href="http://weblogs.asp.net/gsusx/default.aspx" target="_blank" rel="noopener noreferrer">his blog</a> multiple articles on interoperability between OracleAS and Microsoft  WCF:</p><p><strong>MTOM Interoperability:</strong></p><ul><li><a href="http://weblogs.asp.net/gsusx/archive/2006/12/14/mtom-interoperability-between-oracle-application-server-and-windows-communication-foundation-part1-from-wcf-to-oracle.aspx" target="_blank" rel="noopener noreferrer">MTOM Interoperability between Oracle Application Server and Windows Communication Foundation Part1: From WCF to Oracle</a></li><li><a href="http://weblogs.asp.net/gsusx/archive/2006/12/19/mtom-interoperability-between-oracle-application-server-and-windows-communication-foundation-part2-from-oracle-to-wcf.aspx" target="_blank" rel="noopener noreferrer">MTOM Interoperability between Oracle Application Server and Windows Communication Foundation Part2: From Oracle to WCF</a></li></ul><p><strong>WS-Security Interoperability:</strong></p><ul><li><p><a href="http://weblogs.asp.net/gsusx/archive/2006/10/20/WCF-Oracle-Application-Server-WS_2D00_Security-interoperability-Part1_3A00_-from-WCF-to-Oracle.aspx" target="_blank" rel="noopener noreferrer">WCF Oracle Application Server WS-Security interoperability Part1: from WCF to Oracle</a></p></li><li><p><a href="http://weblogs.asp.net/gsusx/archive/2006/11/02/WCF-Oracle-Application-Server-WS_2D00_Security-Interoperability-Part1_3A00_-from-Oracle-to-WCF.aspx" target="_blank" rel="noopener noreferrer">WCF Oracle Application Server WS-Security Interoperability Part 2: from Oracle to WCF</a></p><p>In addition Jesus did also publish previously articles on OracleAS BPEL Process Manager and Microsoft:</p></li><li><p><a href="http://weblogs.asp.net/gsusx/archive/2006/06/01/WS_2D00_Addressing-interoperability-between-Oracle-BPEL-Process-Manager-and-Microsoft-Windows-Communication-Foundation.aspx" target="_blank" rel="noopener noreferrer">WS-Addressing interoperability between Oracle BPEL Process Manager and Microsoft Windows Communication Foundation</a></p></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Web Conference: Groovy &amp; Grails UG London]]></title>
            <link>https://tgrall.github.io/blog/2006/12/05/web-conference-groovy-and-grails-ug-london</link>
            <guid>/2006/12/05/web-conference-groovy-and-grails-ug-london</guid>
            <pubDate>Tue, 05 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[The London Groovy and Grails User Group will be holding their next meeting on Wednesday, 6th December 2006 at Skills Matter in London and for the first time ever the meeting will be available via a live web conference, so don't worry if you are not in London!]]></description>
            <content:encoded><![CDATA[<p>The London Groovy and Grails User Group will be holding their next meeting on Wednesday, 6th December 2006 at Skills Matter in London and for the first time ever the meeting will be available via a live web conference, so don't worry if you are not in London!</p><p>Speaking at this month's meeting will be Graeme Rocher, Grails Project Lead and CTO at Skills Matter. During his talk entitled; Grails Dynamic Tags: Making Tag Libraries Agile, Graeme will discuss Groovy Server Pages and its support for the creation of dynamic tag libraries without the need for configuration.</p><p>John Wilson, Groovy Committer, will also be presenting at this meeting. During his talk, entitled; The MetaClass: How Groovy works Under the Hood, John will shed light on the MetaClass so you can better understand its' function and see how to use it to get your Groovy programs smaller, clearer and faster.<img loading="lazy" src="http://skillsmatter.com/images/misc/groovy-logo.png" class="img_ev3q"></p><p>For more information on attending this meeting or signing up for the web conference, please go to: <a href="http://skillsmatter.com/groovy-grails-ug" target="_blank" rel="noopener noreferrer">http://skillsmatter.com/groovy-grails-ug</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Calling a Web Services Protected using HTTP Basic]]></title>
            <link>https://tgrall.github.io/blog/2006/12/04/calling-a-web-services-protected-using-http-basic</link>
            <guid>/2006/12/04/calling-a-web-services-protected-using-http-basic</guid>
            <pubDate>Mon, 04 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[WS-Security provides a way to protect Web Services at the message level (SOAP) and it is]]></description>
            <content:encoded><![CDATA[<p>WS-Security provides a way to protect Web Services at the message level (SOAP) and it is
independent of the protocol used (HTTP, JMS, ...). However, some services are still using HTTP based authentication for protection. JAX-RPC and its Oracle implementation provides a way to set the username
and password in the client (Stub) using some properties on the Stub.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">USERNAME_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"username"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Stub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PASSWORD_PROPERTY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"password"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That's it...</p><p>Theses properties are shortcuts to the standard JAX-RPC properties:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">javax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rpc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">security</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">javax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rpc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">security</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code is the same when you are using the Call interface.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OC4J: Sending system level message in the console window]]></title>
            <link>https://tgrall.github.io/blog/2006/11/28/oc4j-sending-system-level-message-in-the-console-window</link>
            <guid>/2006/11/28/oc4j-sending-system-level-message-in-the-console-window</guid>
            <pubDate>Tue, 28 Nov 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[OracleAS 10gR3, so OC4J standalone, is using the standard Java logging framework. Some of the]]></description>
            <content:encoded><![CDATA[<p>OracleAS 10gR3, so OC4J standalone, is using the standard <a href="http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/overview.html" target="_blank" rel="noopener noreferrer">Java logging framework</a>. Some of the
benefits are easy configuration, and extensibility. The configuration of the level of logging of the different loggers has been exposes in
the Oracle Application Server Console. To see the logger configuration, click on the Administration Tab and then Logger Configuration, you can then configure the different loggers.</p><p><img loading="lazy" src="http://static.flickr.com/106/304730770_8db9728d3a_o.png" class="img_ev3q"></p><p>By default the logger will write all the information in the default log.xml file, and for application lever logger it will go in the application.log. You may want to send the information in the console during development to debug/analyze your application. This is done using the configuration of the Handler. This information is currently not available in the Application Server Console, so I am documenting in the next steps how
to send the information in the console (terminal window).</p><p>The configuration of the OracleAS Logging is saved in the <code>$ORACLE_HOME/j2ee/home/config/j2ee-logging.xml</code> file. In this file you  can see that Oracle has defined
various handlers where information can be sent:</p><ul><li><code>console-handler</code> : Log the information in the console (the one we want to use in this sample)</li><li><code>oc4j-handler</code> : the default handler for most of the loggers, saving the information in the $ORACLE_HOME/j2ee/home/log/oc4j/log.xml using the Oracle Logger formatting</li><li><code>oracle-webservices-management-auditing-handler</code> : the handler used by the Web Services Auditing feature in the $ORACLE_HOME/j2ee/home/log/wsmgmt/auditing/log.xml</li><li><code>oracle-webservices-management-logging-handler</code> : the handler used by the Web Service Logging feature in the $ORACLE_HOME/j2ee/home/log/wsmgmt/logging/log.xml</li></ul><p>As you may know, OracleAS Web Service provides out of the box support for Auditing of the SOAP messages. You just need to go in the administration page of the Web Service and enable the auditing. By default the messages are logged in the auditing log pointed above. But during development it is really interesting to see the SOAP Messages in the console without having to configure a Proxy to capture the request/response. The easiest way to do that is to edit the <code>j2ee-logging.xml</code> file and associate the <code>console-handler</code> to the auditing logger using the following configuration:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">logger</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">oracle.webservices.management.auditing</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">level</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">NOTIFICATION:1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">useParentHandlers</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">false</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">handler</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">oracle-webservices-management-auditing-handler</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">handler</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">console-handler</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">logger</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>by doing this you will see the SOAP Message in the OC4J console that is running in your system.</p><p><img loading="lazy" src="http://static.flickr.com/103/308538842_ed574a1c08_o.png" class="img_ev3q"></p><p>You can also use this configuration with any loggers available in OC4J.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Download the The Oracle Technology Network (OTN) 'Greatest Hits']]></title>
            <link>https://tgrall.github.io/blog/2006/11/20/download-the-the-oracle-technology-network-otn-greatest-hits</link>
            <guid>/2006/11/20/download-the-the-oracle-technology-network-otn-greatest-hits</guid>
            <pubDate>Mon, 20 Nov 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[The Oracle Technology Network (OTN) "Greatest Hits" is a compilation of the most popular technical articles, software downloads, podcasts, sample code, and documentation, we've published in a given 12-month period. The compilation provides you with convenient access to the "best" of OTN as well as an insight into the interests of the Oracle developer and DBA communities.]]></description>
            <content:encoded><![CDATA[<p>The Oracle Technology Network (OTN) "Greatest Hits" is a compilation of the most popular technical articles, software downloads, podcasts, sample code, and documentation, we've published in a given 12-month period. The compilation provides you with convenient access to the "best" of OTN as well as an insight into the interests of the Oracle developer and DBA communities.</p><ul><li><a href="http://www.oracle.com/technology/community/greatest-hits.html" target="_blank" rel="noopener noreferrer">Oracle Technology Network (OTN) "Greatest Hits" page</a>.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IBM article:  JAX-RPC vs JAX-WS]]></title>
            <link>https://tgrall.github.io/blog/2006/11/13/ibm-article-jax-rpc-vs-jax-ws</link>
            <guid>/2006/11/13/ibm-article-jax-rpc-vs-jax-ws</guid>
            <pubDate>Mon, 13 Nov 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[I was discussing with a customer not familiar with the JAX-WS standard. I was writing him a mail explaining the difference when I found this nice article on the IBM DeveloperWorks library:]]></description>
            <content:encoded><![CDATA[<p>I was discussing with a customer not familiar with the JAX-WS standard. I was writing him a mail explaining the difference when I found this nice article on the IBM DeveloperWorks library:</p><ul><li>[Web services hints and tips: JAX-RPC vs JAX-WS]<!-- -->(<a href="http://www-128.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html" target="_blank" rel="noopener noreferrer">http://www-128.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html</a> target=)</li></ul><p>It is an opportunity for me to remind OracleAS users that the 10.1.3.1 stack in addition to the JAX-RPC support also provides support for:</p><ul><li>Attachments with MTOM, Soap with Attachment and DIME</li><li>Annotations based development (JSR-181) that is part of JAX-WS</li><li>WS-Security and WS-Reliability</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JDeveloper: What are my System Properties?]]></title>
            <link>https://tgrall.github.io/blog/2006/10/13/jdeveloper-what-are-my-system-properties</link>
            <guid>/2006/10/13/jdeveloper-what-are-my-system-properties</guid>
            <pubDate>Fri, 13 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[I have been using JDeveloper]]></description>
            <content:encoded><![CDATA[<p>I have been using JDeveloper
for many years, since the first release ;-). But I've never payed
attention to a simple and very useful feature. When you click the Help
<!-- -->&gt;<!-- --> About menu you can access all the System properties of the
Java VM used by Jdeveloper  by clicking on the Properties tab</p><p>![]( <a href="http://static.flickr.com/109/268402753_19bd74c01b_o.png" target="_blank" rel="noopener noreferrer">http://static.flickr.com/109/268402753_19bd74c01b_o.png</a>  JDeveloper System Property Viewer )</p><p>Thanks to Gerard for the tip....</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Using HTTPS with Web Services]]></title>
            <link>https://tgrall.github.io/blog/2006/10/13/using-https-with-web-services</link>
            <guid>/2006/10/13/using-https-with-web-services</guid>
            <pubDate>Fri, 13 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Prerequisites:]]></description>
            <content:encoded><![CDATA[<p><em>Prerequisites:</em></p><p>In this article you have</p><ul><li>already a Web Service deployed in OC4J that is running on the default HTTP port. The WSDL and Endpoint are available. In my sample
the non secure Web Service endpoint is: <code>http://127.0.0.1:8888/math-service/MathServiceSoapHttpPort</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-https-to-oc4j">Add HTTPS to OC4J<a class="hash-link" href="#add-https-to-oc4j" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="creating-of-the-keystore">Creating of the Keystore<a class="hash-link" href="#creating-of-the-keystore" title="Direct link to heading">â€‹</a></h5><p>The first thing to do to secure OC4J would be to create a new keystore
that will contain the different certificates. The easiest way to do
that for a Java developer is to use <a href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html" target="_blank" rel="noopener noreferrer">SUN's keytool</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -genkey -alias oracle-server -dname "CN=Tug Grall, OU=Blog O=Grall And Co L=Redwood Shores, S=CA, C=US" -keyalg RSA -keypass welcome -storepass welcome -keystore server.keystore</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can copy the <code>server.keystore</code> into the <code>$ORACLE_HOME/j2ee/home/config</code> to simplify the next steps.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-oc4j">Configuring OC4J<a class="hash-link" href="#configuring-oc4j" title="Direct link to heading">â€‹</a></h4><p>OC4J stand alone is using the notion of Web-Site to expose HTTP resources (Web Applications). The default-web-site is define is he
<code>$ORACLE_HOME/j2ee/home/config/default-web-site.xml</code>. To secure an OC4J you can follow the steps describe in the <a href="http://download.oracle.com/docs/cd/B25221_04/web.1013/b14429/configssl.htm" target="_blank" rel="noopener noreferrer">OC4J Security guide</a> that I have summarized in the following section.</p><p>What we want to achieve for the purpose of the demonstration is to have OC4J using HTTP and HTTPS, on port 8888 and 4443 for example.</p><ol><li>Copy <code>default-web-site.xml</code> to <code>secure-web-site.xml</code></li><li>Edit the secure-web-site.xml:<ul><li>Change the <code>web-site</code> tag by changing the port to <code>4443</code> and adding the element <code>secure="true"</code></li><li>Add the <code>ssl-config</code> element and point this to the new created keystore.</li></ul></li></ol><p>The file looks like:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-site</span><span class="token tag" style="color:#00009f">   </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">noNamespaceSchemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://xmlns.oracle.com/oracleas/schema/web-site-10_0.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">port</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">4443</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">secure</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">display-name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">OC4J 10g (10.1.3) Default Web Site</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">schema-major-version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">10</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">schema-minor-version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">0</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ssl-config</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">keystore</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">server.keystore</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">keystore-password</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">welcome</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">web-site</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Import the new Web site in your OC4J instance by editing the <code>$ORACLE_HOME/j2ee/home/server.xml</code>
file. You need to add or replace the web-site tag. In my case I want to
add the secure web site to my instance so the configuration looks like:</li></ol><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-site</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">default</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">path</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./default-web-site.xml</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-site</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">path</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./secure-web-site.xml</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since we have copied the file from the default-web-site, all applications are available using HTTP and HTTPS</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="start-oc4j-and-test-the-https-port">Start OC4J and test the HTTPS port<a class="hash-link" href="#start-oc4j-and-test-the-https-port" title="Direct link to heading">â€‹</a></h4><p>Start OC4J using the standard Java command or shell script, I am adding the Java Network debug flag that would help you to see what is
happening at the SSL level.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -Djavax.net.debug=ssl -jar oc4j.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should be able to access the service WSDL using the HTTPS port for example in my case:</p><ul><li><code>https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort?WSDL</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-the-service-using-https">Consuming the Service using HTTPS<a class="hash-link" href="#consuming-the-service-using-https" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-and-configure-a-client-keystore">Generate and configure a client Keystore<a class="hash-link" href="#generate-and-configure-a-client-keystore" title="Direct link to heading">â€‹</a></h4><p>Event if this is possible to use the same keystore for the server and the client, I will guide you in the steps to create a client
certificate and import the certificate from the existing -server- one.</p><p>Here the command <em>to create</em> a new keystore:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -genkey -alias oracle-client -dname "CN=John Doe, OU=Blog O=MyDummyClient, S=CA, C=US" -keyalg RSA -keypass welcomeClient -storepass welcomeClient -keystore client.keystore</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The next step is <em>to export</em> the certificate from the server keystore to be able to import it in the client:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -keystore server.keystore -export -alias oracle-server -file server.cer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now <em>import the cerificate</em> in the client keystore:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keytool -keystore client.keystore -import -file server.cer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-the-proxy">Generate the proxy<a class="hash-link" href="#generate-the-proxy" title="Direct link to heading">â€‹</a></h3><p>You have now the client certificate so you can use the Oracle Web
Service Assembler to generate the proxy. The only specific thing you
have to do is to specify which key store to use when running the tool.
The command to use when generating the proxy is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -Djavax.net.ssl.trustStore=/Users/tgrall/ssl/client.keystore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djavax.net.ssl.keyStore=/Users/tgrall/ssl/client.keystore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djavax.net.ssl.trustStorePassword=welcomeClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djavax.net.ssl.keyStorePassword=welcomeClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -jar $ORACLE_HOME/webservices/lib/wsa.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -genProxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -wsdl https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort?WSDL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calling-the-service-using-secure-endpoint">Calling the Service using secure endpoint<a class="hash-link" href="#calling-the-service-using-secure-endpoint" title="Direct link to heading">â€‹</a></h3><p>Configure the Java Environment to use the client store is made using the following System properties:</p><ul><li>javax.net.ssl.trustStore</li><li>javax.net.ssl.keyStore</li><li>javax.net.ssl.trustStorePassword</li><li>javax.net.ssl.keyStorePassword</li></ul><p>This could be done using different approach, property file, -D command
line parameter or programmatically. To simply the example I am using
the programmatic approach, the following code is part of the main
method of the Client class:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.trustStore"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/Users/tgrall/ssl/client.keystore"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.keyStore"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/Users/tgrall/ssl/client.keystore"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.trustStorePassword"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"welcomeClient"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.ssl.keyStorePassword"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"welcomeClient"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Adding Debug information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"javax.net.debug"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ssl"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is possible to change the Endpoint dynamically in the Proxy using the <code>setEndpoint</code> method.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name namespace" style="opacity:0.7">democlient</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">proxy</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">MathServiceSoapHttpPortClient</span><span class="token plain"> myPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">democlient</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">proxy</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">MathServiceSoapHttpPortClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> ep </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEndpoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ep</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Result of the operation is "</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> myPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should now be able to run the client and call the service using HTTPS. This would look like:</p><p><img loading="lazy" src="http://static.flickr.com/86/268580831_c24ec07d89_o.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Come to Oracle Open World and watch Mr Spring and Mr Apache speak]]></title>
            <link>https://tgrall.github.io/blog/2006/10/12/come-to-oracle-open-world-and-watch-mr-spring-and-mr-apache-speak</link>
            <guid>/2006/10/12/come-to-oracle-open-world-and-watch-mr-spring-and-mr-apache-speak</guid>
            <pubDate>Thu, 12 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle Open World is getting very close... And I am very excited to go to lot of sessions, two of them looks very interesting in the Oracle Develop track:]]></description>
            <content:encoded><![CDATA[<p>Oracle Open World is getting very close... And I am very excited to go to lot of sessions, two of them looks very interesting in the Oracle Develop track:</p><ul><li>Rod Johnson - Spring Update: What's New and Cool in Spring 2.0 (Monday 10/23/2006, 12:45 PM - 1:45 PM in the Hilton Hotel Grand Ballroom A)</li><li>Brian Behlendorf - Bringing Open Source Software Development Practices and Principles Into Your Company (Tuesday 10/24/2006, 1:15 PM - 2:15 PM in the Hilton Hotel Grand Ballroom A)</li></ul><p>This is quite exciting to have Open Source gurus coming to present to the Oracle conference, and explain how to use the new Spring in their projects or leverage Open Source practices to improve development in house... Take a look to the full program of Oracle Develop.</p><p>Start to use the Oracle OpenWorld Schedule Builder to organize your week in SF, if you have not registered yet for OOW click here.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Accessing User Principal in a Web Service]]></title>
            <link>https://tgrall.github.io/blog/2006/09/21/accessing-user-principal-in-a-web-service</link>
            <guid>/2006/09/21/accessing-user-principal-in-a-web-service</guid>
            <pubDate>Thu, 21 Sep 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[WS-Security provides a standard way to secure Web Services. Since based on SOAP it is agnostic of the stack you are using. When using JAX-RPC implementation, you are running in a J2EE container. In this post I am giving a tip to access the Principal object.]]></description>
            <content:encoded><![CDATA[<p>WS-Security provides a standard way to secure Web Services. Since based on SOAP it is agnostic of the stack you are using. When using JAX-RPC implementation, you are running in a J2EE container. In this post I am giving a tip to access the Principal object.</p><p>I have a service service, and I need to access some user information in its implementation class ( <code>org.tug.ws.sample.SimpleServiceImpl</code> ). This service is secure with WS-Security, with for example simple authentication, the following screenshot, is the configuration of inbound security in OracleAS 10gR3:</p><p>![](<a href="http://static.flickr.com/92/248919057_ce2ba6a5f7_o.png" target="_blank" rel="noopener noreferrer">http://static.flickr.com/92/248919057_ce2ba6a5f7_o.png</a> Web Services Management )</p><p>So the service is secured, here the<!-- -->&nbsp;<!-- -->code that you have to add in your service implementation (or handlers) to access the Principal object.</p><ol><li>Implement <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/xml/rpc/server/ServiceLifecycle.html" target="_blank" rel="noopener noreferrer"><code>javax.xml.rpc.server.ServiceLifecycle</code></a></li><li>Implement the init(Object context) method to access
the <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/xml/rpc/server/ServletEndpointContext.html" target="_blank" rel="noopener noreferrer"><code>ServletEndpointContext</code></a>,
that you can for example put as a local member of your implementation
class.</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Object</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _servleContext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServletEndpointContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Then you can access the principal object using the <code>getUserPrincipal()</code> method:</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_servleContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Principal</span><span class="token plain"> userPrincipal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _servleContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUserPrincipal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find more information about the Security in J2EE 1.4 Web Services in the <a href="http://java.sun.com/blueprints/guidelines/designing_webservices/html/security.html#1045527" target="_blank" rel="noopener noreferrer">Designing Web Services with the J2EE 1.4 Platform</a> tutorial.</p><hr><p><em>Update on Wednesday october 4th:</em> Frank Nimphius, has use this entry to create a more detail article about <a href="http://www.orablogs.com/fnimphius/archives/001815.html" target="_blank" rel="noopener noreferrer">End to End Security with Web Services Security</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Choose a scripting language? Groovy or JRuby?]]></title>
            <link>https://tgrall.github.io/blog/2006/09/16/choose-a-scripting-language-groovy-or-jruby</link>
            <guid>/2006/09/16/choose-a-scripting-language-groovy-or-jruby</guid>
            <pubDate>Sat, 16 Sep 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Last week I discussed dynamic languages with some consultants. This discussion was done in the context of integration of scripting technologies into Java EE environment. So the integration to the VM is important, I also think that the learning curve is a thing to consider.]]></description>
            <content:encoded><![CDATA[<p>Last week I discussed dynamic languages with some consultants. This discussion was done in the context of integration of scripting technologies into Java EE environment. So the integration to the VM is important, I also think that the learning curve is a thing to consider.</p><p>It is true that, like any developer Iike to learn things everyday, this is why I have done some development with PHP, with Ruby On Rails, and obviously with Groovy, Javascript and many other dynamic languages.</p><p>The discussion moved quickly to an argument about which language is the best... Hard to say, but I would expect that to be more productive in enterprise it is better to use a "Java Like" syntax that allows you to leverage the power of scripts. Based on this comment it is for me a no brainer to say that Groovy is more interesting to a core Java developer than JRuby (or other Jython, Jacl, ...). I do not even want to go in the details about VM integration, performances and so on...</p><p>So in this context, A. Sundararajan has posted <a href="http://blogs.sun.com/sundararajan/entry/java_groovy_and_j_ruby" target="_blank" rel="noopener noreferrer">a very interesting comparison of Java, Groovy and JRuby syntaxes</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[More Groovy at Javaone !]]></title>
            <link>https://tgrall.github.io/blog/2006/05/11/more-groovy-at-javaone</link>
            <guid>/2006/05/11/more-groovy-at-javaone</guid>
            <pubDate>Thu, 11 May 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[If like me you like scripting technologies and in particular Groovy and]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://groovy.codehaus.org/images/groovy-logo.png" class="img_ev3q">
If like me you like scripting technologies and in particular Groovy and
Grails, JavaOne 2006 will be a very good moment to learn more about it.</p><p>Beside the official sessions listed below, I would like to inform you
of various events interesting for the Groovy community:</p><ul><li>Informal <strong>"Groovy Community Meeting&amp;rdquo"</strong>, <strong>Thursday night 5pm</strong> around the Oracle Demobooth where Guillaume, Graeme and Dierk will give you an
opportunity to learn more about these projects</li><li>Groovy presentations at the Oracle Booth in the pavilion</li></ul><p>The official sessions about Groovy and Grails are</p><table align="center"><tbody><tr align="center"><td align="center" nowrap="nowrap" width="15%">BOF-0554 </td><td align="left" width="45%">Dynamic Scripting Languages BOF </td><td align="center" width="15%">&nbsp;Tuesday 05/16/2006 10:30 PM - 11:20 PM </td><td align="center" width="15%"> Moscone Center Hall E 133 </td></tr><tr align="center"><td align="center" nowrap="nowrap" width="15%">BOF-2521 </td><td align="left" width="45%">Rapid Web Application Development With Grails </td><td align="center" width="15%">&nbsp;Thursday 05/18/2006 08:30 PM - 09:20 PM </td><td align="center" width="15%"> Moscone Center Esplanade 307-310 </td></tr><tr align="center"><td align="center" nowrap="nowrap" width="15%">TS-1246 </td><td align="left" width="45%">Simplify Enterprise Development With Scripting </td><td align="center" width="15%">&nbsp;Thursday 05/18/2006 11:00 AM - 12:00 PM </td><td align="center" width="15%"> Moscone Center Hall E 134 </td></tr><tr align="center"><td align="center" nowrap="nowrap" width="15%">TS-3273 </td><td align="left" width="45%">Groovy = Javaâ„¢ Technology+ Ruby + Python for the JVMâ„¢</td><td align="center" width="15%">&nbsp;Wednesday 05/17/2006 02:45 PM - 03:45 PM </td><td align="center" width="15%"> Moscone Center Gateway 104 </td></tr><tr align="center"><td align="center" nowrap="nowrap" width="15%">TS-3714 </td><td align="left" width="45%">Flash-Gridding with Javaâ„¢ Technology: Using Project Glassfish<small><sup>SM</sup></small>, Jiniâ„¢/JavaSpacesâ„¢, and Groovy as an Environment for an Open Source, Self-Assembling Supercomputer </td><td align="center" width="15%">&nbsp;Thursday 05/18/2006 02:45 PM - 03:45 PM </td><td align="center" width="15%"> Moscone Center Gateway 104 </td></tr><tr align="center"><td align="center" nowrap="nowrap" width="15%">TS-5386 </td><td align="left" width="45%">Groovy Goes RFID with Smart Sensors for Real-World Control </td><td align="center" width="15%">&nbsp;Tuesday 05/16/2006 05:45 PM - 06:45 PM </td><td align="center" width="15%"> Moscone Center Gateway 104 </td></tr></tbody></table>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Grails on Oracle (OracleAS and OracleXE)]]></title>
            <link>https://tgrall.github.io/blog/2006/05/03/grails-on-oracle-oracleas-and-oraclexe</link>
            <guid>/2006/05/03/grails-on-oracle-oracleas-and-oraclexe</guid>
            <pubDate>Wed, 03 May 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[OTN (Oracle Technology Network)]]></description>
            <content:encoded><![CDATA[<p>OTN (Oracle Technology Network)
Readers have noticed, that Oracle has
published an article from <a href="http://www.monson-haefel.com/" target="_blank" rel="noopener noreferrer">Richard Monson-Haefel</a> about <a href="http://www.oracle.com/technology/pub/articles/haefel-oracle-ruby.html" target="_blank" rel="noopener noreferrer">Ruby On Rails on Oracle</a>. This
article introduces the Ruby On Rails framework and explains how to use
it to access an Oracle database. (<a href="http://www.oracle.com/technology/products/database/xe/index.html" target="_blank" rel="noopener noreferrer">Oracle 10g Express Edition</a> to be exact)</p><p>If you are not familiar at all with Ruby On Rails, it is important to
notice that it has nothing to do with Java, J2EE. It is a <a href="http://www.ruby-lang.org/" target="_blank" rel="noopener noreferrer">Ruby</a>
based framework. <!-- -->&nbsp;<!-- -->So yes Ruby On Rails is really interesting,
powerful and so on... but for me as a Java developer I would like to do
the same using Java (or equivalent) leveraging the investment that I
have done in J2EE; also important I want to be able to deploy and
manage applications that are developed this way using my tools such as
Oracle Enterprise Manager Application Server Control.</p><p>The paradigm "coding by convention" that is the driver of Ruby on Rails
has been leveraged to developed a new framework: GRAILS. Grails uses
Groovy as the underlying language, so it runs on a JVM and can leverage
any existing Java API.</p><p>If you are a Java developer you will find very interesting to use this
framework to accelerate the development of Web applications. If you are
not yet a Java developer but need to develop Web application faster,
and deploy the to your J2EE application server, Grails is also a very
good tools.</p><p>Since I have started with Richard's article I will use the same
application/database schema to develop my first GRAILS application, and
also use the same structure in my article...(<em>is it what we call lazy loading?</em>)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-groovy-what-is-grails">What is Groovy? What is Grails?<a class="hash-link" href="#what-is-groovy-what-is-grails" title="Direct link to heading">â€‹</a></h3><p>Groovy is a dynamic language that leverage features from other
languages such as Ruby, Jython, and Smalltalk. Groovy is running at the
top of a Java VM and makes available any existing Java objects (so all
the API) to Groovy. Groovy is currently under standardization with the <a href="http://www.jcp.org/en/jsr/detail?id=241" target="_blank" rel="noopener noreferrer">JSR-24</a><a href="http://www.jcp.org/en/jsr/detail?id=241" target="_blank" rel="noopener noreferrer">1</a>.
<!-- -->&nbsp;<!-- -->You can learn more about Groovy on the <a href="http://groovy.codehaus.org/" target="_blank" rel="noopener noreferrer">Groovy site</a> and is <a href="http://glaforge.free.fr/weblog/?catid=2" target="_blank" rel="noopener noreferrer">project leader's (Guillaume Laforge) blog</a>.</p><p>GRAILS is to Groovy what Ruby On Rails is to Ruby. Originally named "<em>Groovy On Rails</em>",
this name has been dropped in favor of Grails to avoid
confusion/competition. Like Ruby on Rails, Grails is designed to
create <a href="http://en.wikipedia.org/wiki/CRUD_%28acronym%29" target="_blank" rel="noopener noreferrer">CRUD</a>
(<em>Create Read Update Delete</em>) Web applications. <!-- -->&nbsp;<!-- -->You can learn more
about Grail on the <a href="http://grails.codehaus.org/" target="_blank" rel="noopener noreferrer">Grails site</a> and is <a href="http://graemerocher.blogspot.com/" target="_blank" rel="noopener noreferrer">project leader's (Graeme Rocher) blog</a>.</p><p>Let's now dive in the sample application, for this, as stated earlier I
am using the sample application described in the OTN articles.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-the-product-catalog">Example: The product Catalog<a class="hash-link" href="#example-the-product-catalog" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-the-oracle-database">Step 1: Set up the Oracle database<a class="hash-link" href="#step-1-set-up-the-oracle-database" title="Direct link to heading">â€‹</a></h4><p>If you have not set up the schema and table from the article you just
need to create the following objects:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE comics (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id NUMBER(10) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title VARCHAR2(60),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    issue NUMBER(4),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    publisher VARCHAR2(60),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY (id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE SEQUENCE comics_seq;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Based on the OTN article I have created this table in the <span class="code">ruby</span> schema.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-install-grails">Step 2: Install Grails<a class="hash-link" href="#step-2-install-grails" title="Direct link to heading">â€‹</a></h4><p>Grails installation is straight forward and explained in the <a href="http://grails.codehaus.org/Installation" target="_blank" rel="noopener noreferrer">Installation guide</a>, basically:</p><ol><li>Download the binaries (I used <a href="http://build.canoo.com/grails/artifacts//grails-bin-0.2-SNAPSHOT.zip" target="_blank" rel="noopener noreferrer">Grails 0.2</a>)</li><li>Setup the different environment variable (<span class="code">GRAILS_HOME, JAVA_HOME, PATH</span>), I used Java 5.</li></ol><p>You are done !</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-create-the-web-application">Step 3: create the Web Application<a class="hash-link" href="#step-3-create-the-web-application" title="Direct link to heading">â€‹</a></h4><p>Now we have installed the product, the next step is to create the application itself.</p><p><strong>Create the application</strong></p><p>The <span class="code">create-app</span> command is
creating the full project, with the template
with placeholder for the different components of your application such
as configuration, MVC, and library and much more. To do it enter the
following command, in your command line interface:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; grails create-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create-app:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[input] Enter application name:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comics_catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you will see, Grails uses Ant intensively, the <span class="code">create-app</span>
command will ask you for an application name, enter for example <span class="code">comics_catalog</span>.</p><p>The created application contains now a list of directory allowing
developer to start to build the application using Groovy, Grails and
any Web components.</p><p><strong><em>Add the Business Logic and Model:Domain Classes</em></strong></p><p>One of the biggest differences between Grails and RoR, is the fact that
the main components of your application development is not the Table
like you have in RubyOnRails but the "Domain Class". <!-- -->&nbsp;<!-- -->The
domain class are the core of the business application, they contains
the state and the behavior of your application.</p><p>So the next step is to create a Domain Class for the Comics, to do that
you just need to go in the home directory of your project, eg cd <span class="code">comics_catalog</span> and run the <span class="code">create-domain-class</span>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; cd comics_catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; grails create-domain-class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create-domain-class:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[input] Enter domain class name:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When the command ask you to enter the class name, enter <span class="code">comics</span>. Grails, will not use the
same naming convention that RoR has, so you need to use the same name
for the class and the table you want to map your object on. The
persistence layer is made using GROM (Grails Object Relational Mapping)
that leverage hibernate.</p><p>Note: In our case what we are doing is to leverage an existing database
object and create the domain class at the top of it. Usually, Grails
uses a different approach where everything is driven by the
application, so you create the domain class first and then Grails will
create the different database objects.</p><p>The Comics class does not have any information related to the mapping
itself, so you have to create the different attributes in the domain
class. This is where you you start to use Groovy, the domain class is
located in the following location:</p><ul><li><code>./comics_catalog/grails-app/domain/Comics.groovy</code></li></ul><p>Note hat by default Grails create the class with 2 attributes: id and
version, keep them in place, and add title, issue and
publisher.<!-- -->&nbsp;</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Comics</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// new properties for the Comics class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> issue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${this.class.name} :  $id"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are all set, we are ready to run the magic command that will create the different screens and flow.</p><p><strong>Create the different screens from the domain class</strong></p><p>You can now run the <code>generate-all</code> command to create all the different screens.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; grails generate-all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input-domain-class:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[input] Enter domain class name:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command creates the different Views and Controllers, you can take a look to the directories:</p><ul><li><code>./comics_catalog/grails-app/controllers</code></li><li><code>./comics_catalog/grails-app/views</code></li></ul><p><strong>Configure the database access</strong></p><p>What we have to do is now to configure the application to use the Oracle database and schema.</p><p>Grails uses a configuration file for data source:</p><ul><li><code>./comics_catalog/grails-app/conf/ApplicationDataSource.groovy</code></li></ul><p>Let's edit this file to connect to our Oracle database.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ApplicationDataSource</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> pooled </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> dbCreate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"update"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// one of 'create', 'create-drop','update'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"jdbc:oracle:thin:@localhost:1521:XE"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> driverClassName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"oracle.jdbc.OracleDriver"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ruby"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#393A34">@Property</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ruby"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Nothing special concerning the properties such as URL, DriverClassName,
username and password.</p><p>The one that is interesting is the <span class="code">dbCreate</span>,
that allows you to configure the behavior on the schema to create or
not objects.In our sample the table exists, so we want to reuse the
object, but we want to be sure that we have all the mandatory objects,
columns too, so I selected <span class="code">update</span>.</p><p>The next thing to do is to add the Oracle JDBC driver to the
application, to make it available. To make it available you just need
to copy the JDBC driver into the lib directory of your application. In
my case I am using Oracle XE so I copy the file from the following
location:</p><ul><li><code>ORACLE_XE_HOME/app/oracle/product/10.2.0/server/jdbc/lib/ojdbc14.jar</code>
to</li><li><code>./comics_catalog/lib/</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-run-the-application">Step 4: Run the application<a class="hash-link" href="#step-4-run-the-application" title="Direct link to heading">â€‹</a></h4><p>Grails provide a way to run the application in stand alone mode, the command is <span class="code">run-app</span>. This command starts an Web container (based on Jetty) with the application<!-- -->&nbsp;<!-- -->deployed.</p><p><code>grails run-app</code></p><p>Note: Jetty will start on port 8080, in order to start in on a different port like e.g. 9090 use:</p><p><code>grails -Dserver.port=9090 run-app</code></p><p>You can now access the application using the following URL:</p><p><code>http://localhost:8080/comics_catalog/comics/</code></p><p>Your browser should show the list of comics from the Comics table.</p><p><img loading="lazy" src="http://static.flickr.com/45/127519247_646a991d3a_o.png" class="img_ev3q"></p><p><em>List of Comics</em></p><p>You can create a new entry by clicking on the "New Comics" tab, and view/edit/delete existing record by clicking on the "Show" link.</p><p><img loading="lazy" src="http://static.flickr.com/56/127519249_0e580ede98_o.png" class="img_ev3q"></p><p><em>Edit/Create entry</em></p><p>As you see the creation of an application is really easy. The next step is to deploy the application in your application server.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-deploy-the-application">Step 5: Deploy the application<a class="hash-link" href="#step-5-deploy-the-application" title="Direct link to heading">â€‹</a></h4><p>Grails provides a command to package the application as a WAR ready to
be deployed, so in the root directory of your project you can run the
following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grails war</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When you run this command you end with a WAR with the name of your
application located in the root of your project, in our case: <code>comics_catalog.war</code></p><p>If you take a look to this WAR you'll see that it is quite big ~10Mb,
this is because all the libraries are included in the Lib directory of
the web application. You can see the exact structure of the WAR in the
./tmp (<code>./comics_catalog/tmp/war</code>) directory of the application.</p><p>You can deploy the application as it is to Oracle Application Server 10<em>g</em>,
but to avoid the issue with the class loader you should configure the
Web application to load the local classes first. It can be done during
deployment with the class loader configuration screen:</p><p><img loading="lazy" src="http://static.flickr.com/52/127519251_8a522dac17_o.png" class="img_ev3q"></p><p>You can also save this configuration in a deployment plan to facilitate later deployment.</p><p>When the deployment is done you can access the application using the OracleAS host and port, something like:</p><p><code>http://localhost:8888/comics_catalog/comics/list</code></p><p>You can now administer and monitor the application like any other J2EE application deployed in OracleAS 10g.</p><p><em>Better Deployment Options</em></p><ul><li>I personally do not like the idea of shipping all the Jar
files in the WAR file, so instead you can use the OracleAS Shared
Libraries to create a Grails library by uploading and configuring all
the Jars. And package the War without all these libraries.</li><li>Also you should be able to configure Hibernate/Spring to
use a standard define Data source and use the JNDI name to lookup the
connections.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h3><p>GRAILS like Ruby On Rails are really interesting frameworks allowing
developers to create quickly Web application that access relational
database and especially the Oracle Database.</p><p>Grails is quite new (release 0.2), but the documentation is really nice
and complete. I will encourage all developers that are interested by
such framework to use it and provide feedback to the development team.</p><p>I will try provide other post about deployment of Grails on OracleAS,
but also related to other interesting features of this framework, for
example Ajax support, Validations etc etc.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">â€‹</a></h3><ul><li><a href="http://grails.codehaus.org/" target="_blank" rel="noopener noreferrer">Grails</a></li><li><a href="http://groovy.codehaus.org/" target="_blank" rel="noopener noreferrer">Groovy</a></li><li><a href="http://rubyonrails.org/" target="_blank" rel="noopener noreferrer">Ruby on Rails</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle BPEL: Debugging 'internal' SOAP Messages]]></title>
            <link>https://tgrall.github.io/blog/2006/04/23/oracle-bpel-debugging-internal-soap-messages</link>
            <guid>/2006/04/23/oracle-bpel-debugging-internal-soap-messages</guid>
            <pubDate>Sun, 23 Apr 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[When you develop applications]]></description>
            <content:encoded><![CDATA[<p>When you develop applications
that use SOAP based Web Services you very often use an HTTP proxy to
capture the request and response that are exchanged between the clients
and servers. For this you can use the Oracle HTTP Analyzer that is part
of the toolset of Oracle JDeveloper, Axis TCP Monitor, or a packaged
version of it that you have with Oracle BPEL Process Manager.</p><p>BPELs are making extensive usage of SOAP messages, and it could be
interesting to debug the different call to the partnerlinks. Oracle
BPEL PM, to avoid HTTP calls and make optimized SOAP message when the
partnerlink that you are invoking is deployed as a BPEL. So in the
default configuration you do not see the different calls. In this
article I explain how you can configure the server to be able to do it.</p><p>For this I will be using:</p><ul><li>Oracle BPEL Process Manager developer install running in an OC4J 10g Stand Alone (10.1.2.0.2)</li><li>obtunnel, that is a package version of Axis TCP Monitor located in <code>&amp;lt;BPEL_HOME&amp;gt;\bin\obtunnel.bat</code></li><li>LoanFlow demo that you can install in 2 steps:</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="starting-the-oralce-bpel-tunneling-tool">Starting the Oralce BPEL Tunneling tool:<a class="hash-link" href="#starting-the-oralce-bpel-tunneling-tool" title="Direct link to heading">â€‹</a></h4><p>Just run the command <code>&amp;lt;BPEL_HOME&amp;gt;\bin\obtunnel.bat</code> You will see the following application:</p><p><img loading="lazy" src="http://static.flickr.com/46/133968437_aa0d5804f6_o.png" class="img_ev3q"></p><p>By default the TCPMonitor launched from BPEL listens on the port 1234
and proxies for the default Oracle BPEL port 9700. So in this context
you will capture all the requests is you access the server on the port
1234.</p><p>It is not sufficiant here since the different partnerlinks endpoint are
not dynamique and are set to the port 9700. So in this case you wont's
see the request coming from the BPEL to a local partner link (and I am
not talking about the SOAP Optimization yet).</p><p>One way that I use to work around this issue in development <em>--maybe we have more simple
solutions, but this is the one that I use--</em> is to change
the port of the OC4J and make the proxy listening on the port 9700. In
this case you will be able to capture the requests made from BPEL to
its partnerlinks.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changing-the-port-of-oc4j-and-the-tcp-monitor">Changing the Port of OC4J and the TCP Monitor<a class="hash-link" href="#changing-the-port-of-oc4j-and-the-tcp-monitor" title="Direct link to heading">â€‹</a></h4><p><em>I. Change the HTTP port of OC4J used by BPEL</em></p><ol><li>Open <code>&amp;lt;BPEL_HOME&amp;gt;\system\appserver\oc4j\j2ee\home\config\http-web-site.xml</code></li><li>Edit the <code>port</code> attribute of the root element <code>web-site</code> to enter a different value</li></ol><p>eg: <code>&amp;lt;web-site port="9701"...</code>.  Stop your BPEL Process Manager</p><p><em>II. Start a new TCPMonitor on port 9700</em></p><ol><li>In the TCPMonitor sceen click on the Admin Tab</li><li>Enter 9700 for the "Listen Port #" field (since we want to be sure the partnerlinks are called correctly)</li><li>Enter 9701 (or the value you entered for the HTTP port) for "Target Port #".</li><li>Click Add</li><li>Click on the new tab "Port 9700". If you have an error message like "<em>java.net.BindException: Address Already in use: JVM_Bind</em>" this is simply because your BPEL process manager is not stopped. In this case stop the BPEL server, and start the TCPMonitor by clicking the Start button.</li></ol><p><em>III. Restart you BPEL Server</em></p><p>Nothing special here you just need to start your server, and check that the BPEL PM is now listening on the HTTP port that you have entered, in my case 9701:</p><ul><li><code>http://localhost:9701/BPELConsole</code></li></ul><p>You can now go on the test page of the LoanFlow process (either on the port 9700 or 9701) and invoke the process. I am using 9701 since I want to capture the calls make by the Business Process to its partnerlinks.</p><p>You can see some HTTP activities in your TCPMonitor, but if you look in
details you only see request to the different WSDLs used by the
LoanFlow...</p><p>I was like you expecting to be able to see the different SOAP requests
and response, but BPEL does some optimization around local SOAP calls.
So to be able to capture these requests you just need to turn of this
optimization.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="turning-off-the-soap-shortcut">Turning Off the SOAP Shortcut<a class="hash-link" href="#turning-off-the-soap-shortcut" title="Direct link to heading">â€‹</a></h4><ol><li>In the BPEL console, click on the "<em>Manage BPEL Domain</em>" link (topright)</li><li>You arrive in the configuration tab, look for the <code>optSoapShortcut</code> property and set it to <code>false</code>.</li><li>Click <code>Apply</code> You can now go on the test page of the LoanFlow process (either on the port 9700 or 9701) and invoke the process. I am using 9701 since I want to capture the calls make by the Business Process to its partnerlinks.</li></ol><p>Now you can see all the SOAP requests and responses between the LoanFlow BPEL and its partnerlinks.</p><p><img loading="lazy" src="http://static.flickr.com/46/133968438_d0dc761af0.jpg?v=0" class="img_ev3q"></p><p><img loading="lazy" src="http://static.flickr.com/46/133968438_d0dc761af0_o.png" class="img_ev3q"></p><p><em>Update on 08/02/2007</em></p><p>For people that are currently using <strong>Oracle BPEL 10.1.3.1</strong> the <em>optSoapShortcut</em> is not visible anymore in the console, but it is still possible to configure this by adding it manually in the domain configuration file available at:</p><p><code>$BPEL_HOME/domains/&lt;domain&gt;/config/domain.xml</code></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Google Data APIs]]></title>
            <link>https://tgrall.github.io/blog/2006/03/23/google-data-apis</link>
            <guid>/2006/03/23/google-data-apis</guid>
            <pubDate>Thu, 23 Mar 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Google has published a new set of API (and format) to update and access data. It looks really interesting. These services are published using the REST paradigm and XML.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://www.google.com/logos/Logo*25wht.gif" class="img_ev3q"><a href="http://code.google.com/apis/gdata/overview.html" target="_blank" rel="noopener noreferrer">Google has published a new set of API</a> (and format) to update and access data. It looks really interesting. These services are published using the <a href="http://en.wikipedia.org/wiki/Representational*State*Transfer" target="_blank" rel="noopener noreferrer">REST</a> paradigm and XML.</p><p>Based on this protocol Google is now exposing its <a href="http://code.google.com/apis/gdata/calendar.html" target="_blank" rel="noopener noreferrer">Calendar</a>. I am currently playing around with it, really fun. A good opportunity for portlets and widgets developments...</p><p><em>Note for Oracle JDeveloper 10g (10.1.3) users:</em> I have define the GData and Calendar API as new library inside Oracle JDeveloper. But I had some issue compiling when I start to use any of the class coming from these library with the default configuration on Windows XP. I just switch from Oracle JVM to the standard JDK compiler in my project to avoid this "<em>Error: Internal compilation error, terminated with a fatal exception</em>".  To do this it is quite simple. Double click on your project, choose compiler in the left tree, and check the "Use Javac" option to force JDeveloper to use the standard javac command. <em>(I will have to find where this issue come from...)</em></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Industrial Telnet Server (ITS): The OracleAS Hidden Treasure..]]></title>
            <link>https://tgrall.github.io/blog/2006/03/13/oracle-industrial-telnet-server-its-the-oracleas-hidden-treasure-dot</link>
            <guid>/2006/03/13/oracle-industrial-telnet-server-its-the-oracleas-hidden-treasure-dot</guid>
            <pubDate>Mon, 13 Mar 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[When I was working in Oracle Consulting I was surprised to see how many customers are using character mode applications, base on Oracle Forms. Lot of applications in wharehouses, harbour, ... are using telnet terminal, usually remote/mobile using RF networks.]]></description>
            <content:encoded><![CDATA[<p>When I was working in Oracle Consulting I was surprised to see how many customers are using character mode applications, base on Oracle Forms. Lot of applications in wharehouses, harbour, ... are using telnet terminal, usually remote/mobile using RF networks.</p><p>Moving to Java on the server was very hard for them because of the lack of support for easy character mode development based solutions.</p><p>OracleAS 10<em>g</em>/ADFprovides such support with the <em>Industrial Telnet Server (ITS)</em>.  ITS is the telnet server running in a J2EE container as a J2CA adaptor, and uses JavaServer Faces to render the user interface. The advantage of using JSF for the UI, it allows developer to leverage automatically different renderers (HTML, Mobile and telnet) without changing the application.</p><p>Here an example of the different renderer provided by Oracle ADF Faces (Instant Messaging, PDA, HTML and Telnet)
<a href="http://farm1.static.flickr.com/172/388762316_44c01f4260_o.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://farm1.static.flickr.com/172/388762316_44c01f4260_o.png" alt="jsf-renderer.PNG" class="img_ev3q"></a></p><p>If you are looking for more information around Oracle ITS:</p><ul><li><a href="http://www.oracle.com/technology/products/iaswe/adfmb.html" target="_blank" rel="noopener noreferrer">Oralce ADF Mobile</a></li><li><a href="http://www.oracle.com/technology/products/jdev/101/howtos/telnet/index.html" target="_blank" rel="noopener noreferrer">How To Install, Configure, and Manage the Industrial Telnet Server</a></li><li><a href="http://www.oracle.com/technology/products/iaswe/adfmb/mbl_pits3pinstall.html" target="_blank" rel="noopener noreferrer">How To Install the Industrial Telnet Server on Third-Party Containers</a></li><li><a href="http://www.oracle.com/technology/products/iaswe/adfmb/tiki-download_file.php152_telnet.swf" target="_blank" rel="noopener noreferrer">Demonstration: Using JDeveloper to create Telnet Applications</a>(flash)</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Fusion Middleware and Microsoft Interoperability - Developer's Guide]]></title>
            <link>https://tgrall.github.io/blog/2006/03/02/oracle-fusion-middleware-and-microsoft-interoperability-developers-guide</link>
            <guid>/2006/03/02/oracle-fusion-middleware-and-microsoft-interoperability-developers-guide</guid>
            <pubDate>Thu, 02 Mar 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Download the Beta version of the Oracle Application Server Developer's Guide for Microsoft Office Interoperability along with sample code (and other technical resources) from this new OTN page.]]></description>
            <content:encoded><![CDATA[<p>Download the Beta version of the Oracle Application Server Developer's Guide for Microsoft Office Interoperability along with sample code (and other technical resources) from <a href="http://www.oracle.com/technology/products/middleware/fusion-middleware-microsoft-interoperability.html" target="_blank" rel="noopener noreferrer">this new OTN page</a>.</p><ul><li><strong>Windows Platform</strong>: Fusion Middleware is concurrently tested and delivered on Windows.</li><li><strong>.NET/Windows Server System Integratio</strong>n: Fusion Middleware offers broad integration with Microsoft .NET and Windows Server System at multiple levels.</li><li><strong>Office Interoperability</strong>: Fusion Middleware enables use of Office as the front-end for enterprise applications, as well as many ways to interact with enterprise information that can be read, parsed, and generated in  Office-formatted documents.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SourceLabs SASH certified on Oracle Fusion Middleware]]></title>
            <link>https://tgrall.github.io/blog/2006/02/10/sourcelabs-sash-certified-on-oracle-fusion-middleware</link>
            <guid>/2006/02/10/sourcelabs-sash-certified-on-oracle-fusion-middleware</guid>
            <pubDate>Fri, 10 Feb 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle Fusion Middleware is now a certified platform for the SourceLabs "SASH" stack: Apache Struts, Apache Axis, the Spring Framework, and Hibernate. Visit this page to download free SASH software!]]></description>
            <content:encoded><![CDATA[<p>Oracle Fusion Middleware is now a certified platform for the SourceLabs "SASH" stack: Apache Struts, Apache Axis, the Spring Framework, and Hibernate. <a href="http://www.oracle.com/technology/tech/java/sash.html" target="_blank" rel="noopener noreferrer">Visit this page to download free SASH software</a>!</p><p>SASH is a distribution from SourceLabs that:</p><ol><li>Reconciles library versions and dependencies across the entire stack.</li><li>Includes dependability fixes for the baseline open source projects</li><li>Is rigorously tested according to the CERT7 method.</li><li>Is commercially supported.</li></ol>]]></content:encoded>
            <category>javaee</category>
            <category>spring</category>
        </item>
        <item>
            <title><![CDATA[Is OracleAS Portal used on the Internet????]]></title>
            <link>https://tgrall.github.io/blog/2006/01/27/is-oracleas-portal-used-on-the-internet</link>
            <guid>/2006/01/27/is-oracleas-portal-used-on-the-internet</guid>
            <pubDate>Fri, 27 Jan 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Just use google with a string used byOracleAS Portal URLs...]]></description>
            <content:encoded><![CDATA[<p>Just use google with a string used byOracleAS Portal URLs...</p><ul><li><a href="http://www.google.com/search?hl=en&amp;q=servlet%2Fpage&amp;btnG=Google+Search&amp;meta=" target="_blank" rel="noopener noreferrer">servlet/page</a></li><li><a href="http://www.google.com/search?hl=en&amp;lr=&amp;q=pls%2Fportal&amp;btnG=Search" target="_blank" rel="noopener noreferrer">pls/portal</a></li></ul><p>A little tip, but you will see that people are very creative with Oracle Portal 10g!</p>]]></content:encoded>
            <category>portal</category>
        </item>
        <item>
            <title><![CDATA[Javaworld: Jason Hunter's 'New features added to Servlet 2.5']]></title>
            <link>https://tgrall.github.io/blog/2006/01/04/javaworld-jason-hunters-new-features-added-to-servlet-2-dot-5</link>
            <guid>/2006/01/04/javaworld-jason-hunters-new-features-added-to-servlet-2-dot-5</guid>
            <pubDate>Wed, 04 Jan 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Jason Hunter has published an interesting article about new features added to servlet 2.5. The focus of this article is like most of the JEE 5 goals all about simplification, easy of use, this is done by leveraging Java5 annotations (resources refences, life cycle support,...), some improvements around the web.xml, and cross context sessions support.]]></description>
            <content:encoded><![CDATA[<p>Jason Hunter has published an interesting article about <a href="http://www.javaworld.com/javaworld/jw-01-2006/jw-0102-servlet.html" target="_blank" rel="noopener noreferrer">new features added to servlet 2.5</a>. The focus of this article is like most of the JEE 5 goals all about simplification, easy of use, this is done by leveraging Java5 annotations (resources refences, life cycle support,...), some improvements around the web.xml, and cross context sessions support.</p>]]></content:encoded>
            <category>java</category>
            <category>javaee</category>
        </item>
        <item>
            <title><![CDATA[SearchWebServices: Oracle's Steve Harris on Java and standing out in SOA]]></title>
            <link>https://tgrall.github.io/blog/2005/12/22/searchwebservices-oracles-steve-harris-on-java-and-standing-out-in-soa</link>
            <guid>/2005/12/22/searchwebservices-oracles-steve-harris-on-java-and-standing-out-in-soa</guid>
            <pubDate>Thu, 22 Dec 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Interested to know more about the Oracle Application Server 10g and the SOA/Java strategy?]]></description>
            <content:encoded><![CDATA[<p>Interested to know more about the Oracle Application Server 10g and the SOA/Java strategy?
Take some time to read the SearchWebServices.com interview with Steve Harris, VP of the Java Platform Group at Oracle.</p><ul><li><a href="http://searchwebservices.techtarget.com/qna/0,289202,sid26_gci1154040,00.html?track=NL-110&amp;ad=537029" target="_blank" rel="noopener noreferrer">Oracle's Steve Harris on Java and standing out in SOA, part 1</a></li></ul><p>Addition on 30/12: follow <a href="http://www.theserverside.com/news/thread.tss?thread_id=38233" target="_blank" rel="noopener noreferrer">TheServerServide</a> discussion</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle 10g: Oracle Open World Top 10 presentations]]></title>
            <link>https://tgrall.github.io/blog/2005/11/22/oracle-10g-oracle-open-world-top-10-presentations</link>
            <guid>/2005/11/22/oracle-10g-oracle-open-world-top-10-presentations</guid>
            <pubDate>Tue, 22 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[You can find online the top 10 presentations of Oracle Open World 2005:]]></description>
            <content:encoded><![CDATA[<p>You can find online the <a href="http://www.oracle.com/technology/events/oow2005/ow2005_top10.html" target="_blank" rel="noopener noreferrer">top 10 presentations of Oracle Open World 2005</a>:</p><ol><li>Optimizing the Optimizer: Essential SQL Tuning Tips and Techniques</li><li>10 Things We Like About Oracle Database 10g Release 2</li><li>PeopleSoft Enterprise, JD Edwards, and Oracle E-Business Suite Integration with Oracle Fusion Middleware</li><li>The Future of Database and Information Technology</li><li>Understanding Shared Pool Memory Structures: Tips on How to Optimize Usage and Avoid Errors</li><li>Take the Guesswork Out of Database I/O Tuning</li><li>Tuning Oracle SQL in the Real World</li><li>What They Didn't Print in the Doc: High-Availability Best Practices from Oracle Maximum Availability</li><li>Performance Diagnostics Demystified: Best Practices for Oracle Database 10g</li><li>Best Practices for Oracle Database 10g Backup and Recovery</li></ol><p>Enjoy!</p>]]></content:encoded>
            <category>conference</category>
            <category>oow</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Using Eclipse WTP and OracleAS/OC4J]]></title>
            <link>https://tgrall.github.io/blog/2005/11/11/using-eclipse-wtp-and-oracleas-slash-oc4j</link>
            <guid>/2005/11/11/using-eclipse-wtp-and-oracleas-slash-oc4j</guid>
            <pubDate>Fri, 11 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[You have probably heard about Web Tools Platform (WTP), this project]]></description>
            <content:encoded><![CDATA[<p>You have probably heard about <a href="http://www.eclipse.org/webtools/" target="_blank" rel="noopener noreferrer">Web Tools Platform (WTP)</a>, this project
extends Eclipse with various tools for developping J2EE applications.
It contains editors for HTML, JSP, XML and so more... In addition to
various wizards to create Web Services, EJB, Connector and more... WTP
allows developers to package the application using J2EE standard
packagind: EAR,WAR,RAR,JAR and deploy and run the application from the
IDE.</p><p>The challenge here is not how
you build J2EE components using an IDE, but more how do you package,
deploy and run your application easily from the IDE. Eclipse WTP allows
you like Oracle JDeveloper does, to package the various J2EE components
in standard archives (JAR, WAR, EAR, RAR, ...) and deploy them to a
J2EE container. WTP project has a very nice list of containers you
can deploy to: Oracle, IBM, BEA, JBoss, Tomcat, ...</p><p><a href="http://www.grallandco.com/blog/archives/wtp/wtp-server.html" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://www.grallandco.com/blog/archives/wtp/wtp-server-thumb.PNG" class="img_ev3q"></a></p><p>With the latest build of Eclipse WTP (Release 1.0M8), Oracle
Application Server 10g is now part of the default server list. So if
your are an OracleAS user you can now use WTP and start to run and
debut your application running in OracleAS from Eclipse.</p><p>What do you need to start using WTP and OracleAS:</p><ol><li>Download and install Eclipse WTP 1.0M8 from <a href="http://www.eclipse.org/webtools/" target="_blank" rel="noopener noreferrer">Eclipse</a> site.</li><li>Download and install OracleAS 10g (OC4J 10.1.3 Developer Preview 4) from <a href="http://www.oracle.com/technology/tech/java/oc4j/1013/index.html" target="_blank" rel="noopener noreferrer">OTN</a></li><li>You must set a administrator password for OC4J using the start command</li><li>Done! You can now use OC4J
and Eclipse.<!-- -->&nbsp;<a href="http://www.grallandco.com/blog/archives/wtp/wtp-oc4j.swf" target="_blank" rel="noopener noreferrer">I have a viewlet that shows the basic steps to create and run your first Web application</a>.</li></ol><p><a href="http://www.grallandco.com/blog/archives/wtp/wtp-server-conf.html" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="http://www.grallandco.com/blog/archives/wtp/wtp-server-conf-thumb.png" class="img_ev3q"></a></p><p>OC4J configuration</p><p>Update <em>(Nov,18)</em> : I forgot to mention the <a href="http://www.eclipse.org/webtools/community/tutorials/OracleServerAdapter/OracleServerAdapter.html" target="_blank" rel="noopener noreferrer">Oracle Application  Server Adapter tutorial</a> from the Web Tools project.</p>]]></content:encoded>
            <category>oc4j</category>
            <category>oracle</category>
            <category>eclipse</category>
        </item>
        <item>
            <title><![CDATA[Installing Blojsom on OracleAS 10g (10.1.3)]]></title>
            <link>https://tgrall.github.io/blog/2005/10/27/installing-blojsom-on-oracleas-10g-10-dot-1-3</link>
            <guid>/2005/10/27/installing-blojsom-on-oracleas-10g-10-dot-1-3</guid>
            <pubDate>Thu, 27 Oct 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I am using internally Blojsom for blogging about the product I am]]></description>
            <content:encoded><![CDATA[<p>I am using internally Blojsom for blogging about the product I am
taking care of: OC4J and especially the Web Services stack. In this
post I am quickly documenting, as the title says, how to install
Blojsom on OracleAS 10g.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-download">1-Download<a class="hash-link" href="#1-download" title="Direct link to heading">â€‹</a></h5><p>The first thing to do is to download the product itself, just download the Blojsom quickstart from sourceforge.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-deploy">2-Deploy<a class="hash-link" href="#2-deploy" title="Direct link to heading">â€‹</a></h5><p>Since, Blojsom is distributed as a WAR file you have nothing special to do, just deploy it. Anyway I have created a <a href="http://www.grallandco.com/blog/archives/viewlet/blojsom-install.swf" target="_blank" rel="noopener noreferrer">viewlet <!-- -->&nbsp;<!-- -->that shows step by step deployment using Oracle Enterprise Manager</a>.</p><p>So the application link will be: <code>http://localhost:8888/blojsom/</code></p><p>Note: if you want to use the command line utility (admin.jar) or the
Ant deployment task, you should package the Web archive in an EAR file.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-update-the-home-page">3-Update the home page<a class="hash-link" href="#3-update-the-home-page" title="Direct link to heading">â€‹</a></h5><p>The easiest way will be to just change the index.html page to redirect
to the default blog. The index.html page to be modified is in:</p><ul><li><code>$ORACLE_HOME/j2ee/home/application/blojsom/blojsomXXXX/index.html</code>
where <code>blojsomXXXX</code> is the name of the Web application generated during deployment.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4--start-blogging">4- Start blogging...<a class="hash-link" href="#4--start-blogging" title="Direct link to heading">â€‹</a></h5><p>This is it...</p>]]></content:encoded>
            <category>java</category>
            <category>oc4j</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[PHP will beat Java? Not sure about it...]]></title>
            <link>https://tgrall.github.io/blog/2005/10/24/php-will-beat-java-not-sure-about-it-dot-dot-dot</link>
            <guid>/2005/10/24/php-will-beat-java-not-sure-about-it-dot-dot-dot</guid>
            <pubDate>Mon, 24 Oct 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I would like react to last week marc andreessen's words (netscape founder during]]></description>
            <content:encoded><![CDATA[<p>I would like react to last week marc andreessen's words (netscape founder during
the php/zend conference andreessen basically says that
<a href="http://management.silicon.com/itpro/0,39024675,39153501,00.htm" target="_blank" rel="noopener noreferrer">PHP will beat Java</a> and<a href="http://news.com.com/Andreessen+PHP+succeeding+where+Java+isnt/2100-1012_3-5903187.html" target="_blank" rel="noopener noreferrer"> succeeds where Java is not</a>. Most of the reasons that
Andreesen used to justify this saying are because of PHP simplicity. Do you
think he is talking about the language or the application server -yeah, let's
call it this way... (J2EE...)..</p><p>Let's talk about J2EE first, it is true that when you take a look to the
learning curve of J2EE and PHP it is a no brainer.. PHP is effectively more simple.
But we can start with the acronyms themselves: J2EE==Enterprise, where
PHP==Personal Home Page ( since then renamed Hypertext Processor). So from the
origins the 2 technologies were not here to achieve the same goals. But PHP has
proven that it could be used for complex application/Web sites, and still keep
it simplicity.</p><p>So PHP is simple this is true, but Java on the server could be also. I think
that the complexity comes from the fact that J2EE its expert always see an
application as a enterprise application, and what that means in term of life
cycle, development process, packaging and so on....<!-- -->&nbsp;<!-- -->&nbsp;<!-- -->&nbsp;<!-- --> Why am I
saying that it is coming from the expert? Just take a look to a PHP tutorial
and a J2EE one? This is clear that you must be a very good and experienced
developer to start with J2EE... But this is is not coming from the technologies,
but mainly the way we talk about it. I think we should talk a little more about
simple development with Java. For example focusing o JSP and JSTL for simple
stuff. I agree that putting too much logic in JSP and reduce the number of
layer is 'bad' for complex applications, but it could be used for some. Why do
we need to always package a WAR or EAR file? Yes you can technically deploy exploded
archive and modify the information after the fact. This is not necessary the
best practices but it could be useful for some applications (not necessary only
in development environment.</p><p>About the language itself, sure that Java is more complex, it is considerate as
a System Level Language, where PHP is a scripting language. Do we still compare
Shell and C? No we need both of them isn't?</p><p>In the same time, Java as a language must be simplified, or let be more precise...
I think Java developers need the simplicity of scripting languages such as PHP
but with the power of Java under the cover. And this is happening right now. JavaScript
is now integrated to Java 6, Groovy provided a well integrated JVM with a very powerful
and simple syntax. Grails -Groovy On Rails- provided a simple framework for
CRUD applications.</p><p>Still skeptical about the simplicity of PHP, try it...</p><p>Still skeptical about Java being simple, try a scripting language... for example Groovy</p><p>In conclusion the platform of my dream should:</p><ul><li>Keep the simple case simple</li><li>Made the impossible possible</li></ul><p>And I am sure that Java is the good language and platform for that; but
Groovy and other scripting languages will help. And I will also
continue to develop using PHP too. And both worlds will coexists and be
integrated using Web Services and or JSR-223.</p>]]></content:encoded>
            <category>php</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[Can I do SOA with Web Services today?]]></title>
            <link>https://tgrall.github.io/blog/2005/10/20/can-i-do-soa-with-web-services-today</link>
            <guid>/2005/10/20/can-i-do-soa-with-web-services-today</guid>
            <pubDate>Thu, 20 Oct 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I am just coming back for Toronto where I have been presenting Oracle]]></description>
            <content:encoded><![CDATA[<p>I am just coming back for Toronto where I have been presenting Oracle
Developer Day: SOA for J2EE Developers. As part of this exercise I have
introduced Web Services and related technologies/standards.</p><p>A person in the audience asked me:</p><blockquote><p>But can I do SOA Today?
Are Web Services are mature enough?</p></blockquote><p>I think that is a very interesting and valid question. The answer is
certainly:<!-- -->&nbsp;</p><ul><li><em>Yes you can, and I would add, yes you should!!</em></li></ul><p>Web Services are <!-- -->&nbsp;<!-- -->definitively big actors in Service Oriented
Architecture since by definition they are loosely coupled,
implementation agnostic and facilitate reusability. In the same time
the concern of this person are justified since some important pieces of
infrastructure are yet available in vendors solutions. Or if they exist
they are proprietary and won't allow interoperability of the service
with other stack... Losing interoperability is a big deal when you talk
about Web Services since most of the time, if the designers want to use
Web Services it is to be able to reuse it in various applications,
independently of the platform where this application is running.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-i-have-answered-yes">Why I have answered Yes?<a class="hash-link" href="#why-i-have-answered-yes" title="Direct link to heading">â€‹</a></h4><p>Why I am so positive when I answered this person? Just simply because
Web Services are today mature enough. But like any development of
applications/systems the development should start with a clear
definition of the requirements. When the development team will start to
write down the requirement it will be clear of not what are the
important pieces in term of services. Beside the business requirements,
lots of requirements are technical/IT related such as security,
performance, manageability, reliability, and transaction management,
performance... So when you design your system do not forgot to clarify
what are the different infrastructure services you need....</p><p>It is then easy to match your infrastructure requirement list to the
different quality of services supported by the platform you will
implementing on, and as important, the platform(s) you will have to
integrate with.<!-- -->&nbsp;<!-- --> For example today it is possible to easily
create SOA/Web Services application that are secured because
WS-Security is a standard supported by most of the vendors. At the
opposite it may be very challenging to create SOA/WS based application
that involve a very complex transaction model with various applications
and system since no standard have been implemented in a real
interoperable manner. But no worry the WS brains are here and work on
it, take some time to read more about WS-Transactions and other related
standardization effort.</p><p>Based on the previous example with security and transaction, it is also
important to keep in mind that the Web Services is a mature technology
but it is still evolving -based on real life requirements-. So in the
same time your application/system will evolve -it is one of your goal
when you do SOA, it is to build a more agile system that can react to
business, or technological changes quicker-, do not forget that your
vendor are continuously working to not only define the standard but
also implement them in their product. So you may put as a requirement
from the beginning a specific infrastructure services that are not
available in today's product but the important question to ask you
before dropping SOA/Web Service is when I really need this feature?
When this feature will be available in my platform?</p><p>This is why also it is important to understand the strategy of your
vendor in term of flexibility and adaptability of their solution to the
different standards, and how it can help you to take care of legacy
services that need to integrate with your new applications. One nice
example is the usage of Oracle Web Services Manager. Even if
WS-Security is one of the first standard around "Enterprise Web
Services" it has not been in the different stack for long so lot of
existing WS do not support WS-Sec. Oracle Web Services Manager allow
you using agents and/or gateway to add security in a standard way to
existing services, and enrich you SOA with a better quality of
services.<!-- -->&nbsp;<!-- --> So do not say no to SOA/SOA because a standard does
not exist or exist but not implemented, it will come -take a look to
all the WS-* effort-, and this standards will be able to extend the
system that you are building as you need.... SOA is all about agility,
to be sure that it will be agile enough to provide you more services as
you go!</p>]]></content:encoded>
            <category>soa</category>
        </item>
        <item>
            <title><![CDATA[Publishing SQL and DML as Web Service]]></title>
            <link>https://tgrall.github.io/blog/2005/09/27/publishing-sql-and-dml-as-web-service</link>
            <guid>/2005/09/27/publishing-sql-and-dml-as-web-service</guid>
            <pubDate>Tue, 27 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[This morning I have been talking about the Oracle Database and Web Services. If you are]]></description>
            <content:encoded><![CDATA[<p>This morning I have been talking about the Oracle Database and Web Services. If you are
Oracle 10g developer (Database or Application Server) you
probably already know that you can publish PL/SQL stored procedure as
Web Services... One of the new feature of our OracleAS 10.1.3 release
is the fact that now you can publish SQL and DML as well. In this post
I am quickly explaining the basic steps to publish a query as Web
Service.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oracle-web-service-assembler">Oracle Web Service Assembler<a class="hash-link" href="#oracle-web-service-assembler" title="Direct link to heading">â€‹</a></h4><p>If you are not familiar with the Oracle Web Services tools, or if you
are using Oracle JDeveloper to generate your services and client, I
would like to use the Oracle WS command line utility to do the work
here. The Oracle Web Services Assembler, aka WSA, allows you to
generate
client and server using Oracle JAX-RPC implementation and extensions.</p><p>WSA is a Java utility that can be used as command line or with Apache
Ant, basically it is a Jar file located in <span class="code">$ORACLE_HOME/webservices/lib/wsa.jar</span>.
Type the following command in a terminal to learn more about WSA.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar $ORACLE_HOME/webservices/lib/wsa.jar -help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  java -jar wsa.jar -&lt;command&gt; -debug -help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  where command can be one of:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    analyze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotationAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aqAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    corbaAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbJavaAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ejbAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fetchWsdl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genApplicationDescriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genConcreteWsdl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genDDs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genGatewayService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genInterface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genProxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genQosWsdl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genValueType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genWsdl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jmsAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plsqlAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sqlAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    topDownAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see with the different command options, Oracle WAS allowsyou to do "everything" Web Services related, for example creating a WS
from an EJB using <code>ejbAssemble</code>, from a stored procedure using <code>plsqlAssemble</code>... and I let you guess, we will be using <code>sqlAssemble</code> for this specific demo.</p><p>To have the detail of all the parameters of each command you can just
enter</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar $ORACLE_HOME/webservices/lib/wsa.jar -[command] -help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generating-the-web-service-from-a-sql">Generating the Web Service from a SQL<a class="hash-link" href="#generating-the-web-service-from-a-sql" title="Direct link to heading">â€‹</a></h4><p>So you can easily generate a Web Service using WSA from multiple SQL
statements, to do it, just use the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar wsa.jar -sqlAssemble</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -appName my-soaql-application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -dataSource jdbc/MyDBServices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -sqlStatement "getAllEmp=select ename, sal from emp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -sqlStatement "getEmpByDept=select ename, sal from emp where DEPTNO = :{dept NUMBER}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -dbConnection jdbc:oracle:thin:@localhost:1521:orcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -dbUser scott/tiger</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So WSA has created the different classes needed by the Web Service but
also packaged in a EAR file that you can now deploy to your
OracleAS instance. The appName parameter is used to generate the
different application name and files (EAR and WAR). The sqlStatement
used to specify the different queries you want to publish as operation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-application">Deploying the application<a class="hash-link" href="#deploying-the-application" title="Direct link to heading">â€‹</a></h4><p>You can either use Oracle EM Application Server Control to deploy the
application or using the command line utility, <code>admin.jar</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar $ORACLE_HOME/j2ee/home/admin.jar ormi://hostName[:ormiPort] oc4jadmin password -deploy -file my-soaql-application -deploymentName my-soaql-application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -jar $ORACLE_HOME/j2ee/home/admin.jar ormi://hostName[:ormiPort] oc4jadmin password  -bindWebApp my-soaql-application my-soaql-application-web default-web-site /soaql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also be sure that you have a datasource defined in your application server that match the parameters set when you ran the WSA command, in my case
it will be <code>jdbc/MyDBServices</code> that connection to my local database using the SCOTT schema.</p><p>You should now be able to access the service using the following URL:</p><ul><li><code>http://youserver:port/soaql/my-soaql-application</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-going-on">What is going on?<a class="hash-link" href="#what-is-going-on" title="Direct link to heading">â€‹</a></h4><p>When you are running the Web Service that is deployed inside OracleAS
the flow is quite simple:</p><ol><li>A client is sending a request to the server using SOAP. So it uses the different typed as defined in the payload</li><li>The JAX-RPC Servlet processes the request and deserializes the message</li><li>The generated classes use the OC4J DataSource to connect to the database and execute the statement using JDBC</li><li>The database sends the data to the classes, and servlet that creates a SOAP response</li></ol><p>When you access the test page (
http://youserver:port/soaql/my-soaql-application )  or when
you are viewing the generated WSDL you probably notice that each query
is published with 3 different operations. These operations return the
same data but using different formats:</p><ul><li>&lt;<!-- -->operationName<!-- -->&gt;<!-- -->Bean : returns the data as serialize Javabean</li><li>&lt;<!-- -->operationName<!-- -->&gt;<!-- -->XML : returns the data in the SOAP body as Rowset/Row structure</li><li>&lt;<!-- -->operationName<!-- -->&gt;<!-- -->XMLRowSet : returns the data in the SOAP body using the WebRowset format (<a href="http://jcp.org/en/jsr/detail?id=114" target="_blank" rel="noopener noreferrer">JSR-114</a>)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">â€‹</a></h4><p>In this small article you have learnt how to pulish a SQL statement as Web Service. It is interesting to take a look closely to the WSA tools that give you several way of building Web Services, starting from SQL, Stored Procedure, Java, EJB, or using a contract based approach starting from the WSDL.</p>]]></content:encoded>
            <category>ws</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Oracle Developer Day: September/October Sessions]]></title>
            <link>https://tgrall.github.io/blog/2005/09/20/oracle-developer-day-september-slash-october-sessions</link>
            <guid>/2005/09/20/oracle-developer-day-september-slash-october-sessions</guid>
            <pubDate>Tue, 20 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle Developer Day](http]]></description>
            <content:encoded><![CDATA[<p>Oracle Developer Day](<a href="http://www.oracle.com/webapps/events/EventsDetail.jsp?p_eventId=9691&amp;src=1587968&amp;src=1587968&amp;Act=43" target="_blank" rel="noopener noreferrer">http://www.oracle.com/webapps/events/EventsDetail.jsp?p_eventId=9691&amp;src=1587968&amp;src=1587968&amp;Act=43</a>) is a free, hands-on workshop that will give you insight into the latest technologies in SOA and Java. You can choose from one of two topics:</p><ul><li>Track 1: Emerging SOA and J2EE technologies: EJB 3.0, JavaServer Faces and BPEL</li><li>Track 2: Rapid J2EE Application Development for Forms and Designer Developers</li></ul><p>Here the list of dates and cities:</p><ul><li><a href="http://www.oracle.com/go/?&amp;Src=4008297&amp;Act=15" target="_blank" rel="noopener noreferrer">New York,    NY â€“ Thursday, September 29, 2005</a> â€“ New York Metro Area Oracle User Group Day</li><li><a href="http://www.oracle.com/go/?&amp;Src=2286074&amp;Act=826" target="_blank" rel="noopener noreferrer">Pasadena, CA â€“ Tuesday, October 11, 2005</a></li><li><a href="http://www.oracle.com/go/?&amp;Src=2286074&amp;Act=820" target="_blank" rel="noopener noreferrer">Toronto, Ontario â€“ Tuesday October 18, 2005</a></li><li><a href="http://www.oracle.com/go/?&amp;Src=2286074&amp;Act=821" target="_blank" rel="noopener noreferrer">Montreal, Quebec â€“ Thursday, October 20, 2005</a></li><li><a href="http://www.oracle.com/go/?&amp;Src=2286074&amp;Act=827" target="_blank" rel="noopener noreferrer">Columbus, OH â€“ Monday, October 24, 2005</a></li><li><a href="http://www.oracle.com/go/?&amp;Src=2286074&amp;Act=828" target="_blank" rel="noopener noreferrer">Minneapolis, MN â€“ Thursday, October 27, 2005</a></li><li>Calgary, Alberta â€“ Tuesday, November 1, 2005</li></ul>]]></content:encoded>
            <category>conference</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Oracle JDeveloper 10g (10.1.3) EA 1 available]]></title>
            <link>https://tgrall.github.io/blog/2005/09/20/oracle-jdeveloper-10g-10-dot-1-3-ea-1-available</link>
            <guid>/2005/09/20/oracle-jdeveloper-10g-10-dot-1-3-ea-1-available</guid>
            <pubDate>Tue, 20 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now downlaod the Early Access 1 version of Oracle JDeveloper 10g (10.1.3) from OTN.]]></description>
            <content:encoded><![CDATA[<p>You can now downlaod the Early Access 1 version of Oracle JDeveloper 10g (10.1.3) from <a href="http://www.oracle.com/technology/software/products/jdev/index.html" target="_blank" rel="noopener noreferrer">OTN</a>.</p>]]></content:encoded>
            <category>java</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Oracle Open World: Monday]]></title>
            <link>https://tgrall.github.io/blog/2005/09/19/oracle-open-world-monday</link>
            <guid>/2005/09/19/oracle-open-world-monday</guid>
            <pubDate>Mon, 19 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Another nice day in San Francisco; I have been in booth duty most of the day and I have finished the day with a first presentation, with George Trujillo about J2EE Deployment strategy. This presentation I hope was interested for the quite big audience, the long Q&A session -1h, it is nice to be the last in the room- was very good since I talk with various Oracle customer about J2EE management in perspective of the database management. The benefits of Oracle Grid Control for Database and AppServer administrators... I would invite you if you are not familiar with Oracle Grid Control to take a look to OTN.]]></description>
            <content:encoded><![CDATA[<p>Another nice day in San Francisco; I have been in booth duty most of the day and I have finished the day with a first presentation, with George Trujillo about J2EE Deployment strategy. This presentation I hope was interested for the quite big audience, the long Q&amp;A session -1h, it is nice to be the last in the room- was very good since I talk with various Oracle customer about J2EE management in perspective of the database management. The benefits of Oracle Grid Control for Database and AppServer administrators... I would invite you if you are not familiar with <a href="http://www.oracle.com/technology/products/oem/index.html" target="_blank" rel="noopener noreferrer">Oracle Grid Control to take a look to OTN</a>.</p><p>Some of the interesting point is the announcement of the new <a href="http://biz.yahoo.com/prnews/050919/sfm087.html?.v=24" target="_blank" rel="noopener noreferrer">OracleAS 10g R3</a>, that enhanced the Fusion Middleware to deliver SOA, beside the support of J2EE 1.5, Java 5, EJB 30, JSF, I was very pleased to spend my day demonstrating our new UDDI V3 registry that continue to expend our Web Services stack by giving new services in addition to BPEL and Web Services Manager.</p>]]></content:encoded>
            <category>conference</category>
            <category>oow</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Oracle Open World: Sunday]]></title>
            <link>https://tgrall.github.io/blog/2005/09/18/oracle-open-world-sunday</link>
            <guid>/2005/09/18/oracle-open-world-sunday</guid>
            <pubDate>Sun, 18 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[The first Oracle World Day for me has started with finishing the various demonstrations of the J2EE Core OC4J and Web Services demonstration Pods. Tomorrow Monday, we will be showing some very cool stuff around Web Services development and management, with some good news around Web Services Registry. Also on the J2EE Core, nice demonstrations of the different services but some of the new features of the OracleAS 10.1.3 such as the new clustering framework and the usage of scripting technologies, especially Groovy, to administer and monitor OracleAS, thanks to JMX!]]></description>
            <content:encoded><![CDATA[<p>The first Oracle World Day for me has started with finishing the various demonstrations of the J2EE Core OC4J and Web Services demonstration Pods. Tomorrow Monday, we will be showing some very cool stuff around Web Services development and management, with some good news around Web Services Registry. Also on the J2EE Core, nice demonstrations of the different services but some of the new features of the OracleAS 10.1.3 such as the new clustering framework and the usage of scripting technologies, especially Groovy, to administer and monitor OracleAS, thanks to JMX!</p><p>What about the rest of the day, I was invited to the Web Services Special Interest Group, WS-SIG, - no.. this is not a new acronym in the WS-* world-. This new SIG has been created in the beginning of the year and on the behalf of IOUG, please take a look to the <a href="http://wssig.oaug.org/" target="_blank" rel="noopener noreferrer">WSSIG web site</a>. <img loading="lazy" src="http://farm1.static.flickr.com/179/388749477_d89cc5e85d_o.jpg" alt="IMG_6718.jpg" class="img_ev3q">. One of the very interesting things of this SIG is, like the J2EE SIG (Organized by OTUG, IOUG, OAUG and Oracle), developers, architects, and administrators of Fusion Middleware, the Database and Oracle Fusion applications are talking together. This reunion of people is good since we all from development to operations have a different view of systems. So during this panel we have introduced quickly the concepts, and then the audience jumped in for the Q&amp;A session, as you can guess, we add the classical questions around Web Services for the enterprise such as what about security? Management? Life Cycle ?... and so on. We answered obviously, but I would say if you are lucky enough to be at San Francisco this week, please come to the Demo Ground especially Web Services, Web Services Manager and BPEL where you will see the Oracle products in action and you will be able to find experts to help you to answer your questions.</p><p>The main auditorium was packed to see the first keynote/show of Oracle Open World 2005, where Oracle presented some of the numerous charity efforts that it does, and offer some fun to the attendees with a nice show from <a href="http://www.danacarvey.net/" target="_blank" rel="noopener noreferrer">Dana Carvey</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-oracle-blog-dinner">What about Oracle Blog dinner?<a class="hash-link" href="#what-about-oracle-blog-dinner" title="Direct link to heading">â€‹</a></h4><p><a href="http://www.rittman.net/" target="_blank" rel="noopener noreferrer">Mark Rittman</a> is organizing a dinner for the different Oracle bloggers, it will be at the <a href="http://www.paragonrestaurant.com/sfhome.htm" target="_blank" rel="noopener noreferrer">Paragon Restaurant</a> at Second Street on Townsend at 8.00pm on Tuesday 20th. ( I will be there for sure...)</p>]]></content:encoded>
            <category>conference</category>
            <category>oow</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Administer and Monitor OC4J using JConsole]]></title>
            <link>https://tgrall.github.io/blog/2005/09/16/administer-and-monitor-oc4j-using-jconsole</link>
            <guid>/2005/09/16/administer-and-monitor-oc4j-using-jconsole</guid>
            <pubDate>Fri, 16 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[OC4J 10g]]></description>
            <content:encoded><![CDATA[<p>OC4J 10<em>g</em>
(10.1.3) is a J2EE 1.4 containers, so as part of the specifications, it
supports JMX for management and deployment. One of the benefits of JMX
is the fact that finally Java applications, and in our case the J2EE
containers, have a standard based interface to be administered. OC4J
exposes using its MBean Server system and application lever management
beans (MBeans) that you can monitor and control from the Oracle
Application Server Control (ASC) that is pre-deployed; but you can use
any JMX client application. Sun has included as part of Java 5 JMX but
also provides a standard JMX client called JConsole. This post is
simply explaining how you can use the Sun's JConsole with OC4J.</p><ol><li>Set the environment:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ORACLE_HOME to the OC4J home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$JAVA_HOME your JDK home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Start the OC4J with the following property set</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$JAVA_HOME/bin/java -Dcom.sun.management.jmxremote -jar oc4j.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The -Dcom.sun.management.jmxremote system property creates an RMI
connector to the MBeanServer, we will use this RMI connector from the
console iself.</p><ol start="3"><li>Start the JConsole, with the
following command, adding the OC4J administration class to the
classpath.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$JAVA_HOME/bin/jconsole -J-Djava.class.path=$JAVA_HOME/lib/jconsole.jar:$JAVA_HOME/lib/tools.jar;$ORACLE_HOME/lib/adminclient.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>The console will
automatically ask you to connect to the OC4J process and you can start
to monitor and administer your OC4J instance</li></ol><p><img loading="lazy" src="http://farm1.static.flickr.com/139/388744041_9cbbb6734f_o.png" class="img_ev3q"></p><p>Connection to the OC4J MBean Server</p><p><img loading="lazy" src="http://farm1.static.flickr.com/148/388744045_1bb6e9c149_o.png" class="img_ev3q"></p><p>Java 5 JConsole browsing the OC4J MBeans</p>]]></content:encoded>
            <category>oc4j</category>
            <category>jmx</category>
        </item>
        <item>
            <title><![CDATA[Beta Version of Zend Core for Oracle available]]></title>
            <link>https://tgrall.github.io/blog/2005/09/02/beta-version-of-zend-core-for-oracle-available</link>
            <guid>/2005/09/02/beta-version-of-zend-core-for-oracle-available</guid>
            <pubDate>Fri, 02 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Zend Core for Oracle, developed in partnership with Zend Technologies, supports businesses using PHP with Oracle Database for mission-critical Web applications. It provides a seamless out-of-the-box experience delivering a stable, high performance, easy-to-install and supported PHP development and production environment fully integrated with the Oracle Database.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://www.oracle.com/technology/tech/php/zendcore/core4oracle_logo_m.gif" class="img_ev3q">Zend Core for Oracle, developed in partnership with Zend Technologies, supports businesses using PHP with Oracle Database for mission-critical Web applications. It provides a seamless out-of-the-box experience delivering a stable, high performance, easy-to-install and supported PHP development and production environment fully integrated with the Oracle Database.</p><p>Zend Core for Oracle will be available as a free download from Zend in late 2005; it is currently available in Beta. Support and updates for Zend Core for Oracle will be made available directly from Zend.</p><p><a href="http://www.oracle.com/technology/tech/php/zendcore/index.html" target="_blank" rel="noopener noreferrer">Find more and download link from OTN</a>.</p>]]></content:encoded>
            <category>php</category>
        </item>
        <item>
            <title><![CDATA[Online Groovy Beginners Tutorial]]></title>
            <link>https://tgrall.github.io/blog/2005/08/29/online-groovy-beginners-tutorial</link>
            <guid>/2005/08/29/online-groovy-beginners-tutorial</guid>
            <pubDate>Mon, 29 Aug 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Interested by Groovy but never used it... You will be please to use this nice tutorial available on the Groovy site:]]></description>
            <content:encoded><![CDATA[<p>Interested by Groovy but never used it... You will be please to use this nice tutorial available on the Groovy site:</p><ul><li><a href="http://groovy.codehaus.org/Beginners+Tutorial" target="_blank" rel="noopener noreferrer">Groovy Beginners Tutorial</a></li></ul><p>Thanks to Graham Miller's contribution...</p>]]></content:encoded>
            <category>groovy</category>
            <category>scripting</category>
        </item>
        <item>
            <title><![CDATA[YAIM (Yet Another Instant Messenging): Google Talk]]></title>
            <link>https://tgrall.github.io/blog/2005/08/25/yaim-yet-another-instant-messenging-google-talk</link>
            <guid>/2005/08/25/yaim-yet-another-instant-messenging-google-talk</guid>
            <pubDate>Thu, 25 Aug 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I have been playing around with Google Talk It is quite nice, once again I like the look... But I do not see 'revolutionnary' features...]]></description>
            <content:encoded><![CDATA[<p>I have been playing around with <a href="http://www.google.com/talk/" target="_blank" rel="noopener noreferrer">Google Talk</a> It is quite nice, once again I like the look... But I do not see 'revolutionnary' features...
Like Skype I was able to use it at work IM and Voice chat...
I like the fact that they <a href="http://www.google.com/talk/otherclients.html" target="_blank" rel="noopener noreferrer">document</a> how to work around their lack of platform support... I would like to have a mac version... I am surprised that Mac users in Google did not yet implement it!</p><p>Fo developer perspective it is interesting to know that they use standard based protocol such as Jabber/XMPP, and they invite people to use the API (since open standard) and server... Take a look to the <a href="http://www.google.com/talk/developer.html" target="_blank" rel="noopener noreferrer">developer section of their documentation</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle at FTP Java Pro Live]]></title>
            <link>https://tgrall.github.io/blog/2005/08/23/oracle-at-ftp-java-pro-live</link>
            <guid>/2005/08/23/oracle-at-ftp-java-pro-live</guid>
            <pubDate>Tue, 23 Aug 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[FTP will organize the "Java Pro Live event September 12-14 in San Diego; Oracle will be presenting its vision and solution around Service Oriented Architecture and Java Development. Here some of the events:]]></description>
            <content:encoded><![CDATA[<p>FTP will organize the "<a href="http://www.ftponline.com/conferences/javaprolive/" target="_blank" rel="noopener noreferrer">Java Pro Live </a>event September 12-14 in San Diego; Oracle will be presenting its vision and solution around Service Oriented Architecture and Java Development. Here some of the events:</p><ul><li>Ted Farell's Keynote</li><li>EJB 3.0: The Next Generation by <a href="http://jroller.com/page/mkeith" target="_blank" rel="noopener noreferrer">Mike Keith</a></li><li><a href="http://www.ftponline.com/conferences/javaprolive/workshops.aspx#ws3" target="_blank" rel="noopener noreferrer">Exploring the Latest J2EE Technologies with Oracle JDeveloper 10.1.3</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaOne Hangover]]></title>
            <link>https://tgrall.github.io/blog/2005/07/02/javaone-hangover</link>
            <guid>/2005/07/02/javaone-hangover</guid>
            <pubDate>Sat, 02 Jul 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[This last 2 weeks have been kind of crazy for me, and for Oracle.. Last week we were present at the Oracle Developer Tools User Group, and immediately jump in for the 10th edition of JavaOne.]]></description>
            <content:encoded><![CDATA[<p>This last 2 weeks have been kind of crazy for me, and for Oracle.. Last week we were present at the Oracle Developer Tools User Group, and immediately jump in for the 10th edition of JavaOne.</p><p>I was not able to attend as much sessions as I wanted, but I had the pleasure to work a lot on the Oracle Booth in the JavaOne Pavillion. I  worked on the J2EE, JSF, BPEL and Web Services ones. It was really great, with lot of technical questions around our products; I have to say that this year we had lot of interest around JavaServer Faces and EJB.</p><p>And this has been even better after Thomas Kurian's keynote on Tuesday with the following annoucements:</p><ul><li><p>Oracle is participating to <a href="http://myfaces.apache.org/" target="_blank" rel="noopener noreferrer">MyFaces</a> project. You can find more information on <a href="http://www.oracle.com/technology/tech/java/jsf.html" target="_blank" rel="noopener noreferrer">JavaServer Faces on OTN</a>.</p></li><li><p>Oracle will lead the development of the JSF extension for Eclipse, as you may know Oracle JDeveloper, now free, has one of the most appealing JSF Designer tool. So we are currently porting this design tools inside Eclipse, to facilitate the adoption of Faces by the developers.</p></li><li><p>Mike Keith, Toplink Architect, will be now co-specification leader of the persistence specification. Also Oracle will develop the Reference Implementation of the persistence engine of the JEE 5 platform. As you  may know you can already start to develop EJB 3.0 within the early implementation available on <a href="http://otn.oracle.com/ejb3" target="_blank" rel="noopener noreferrer">OTN</a>. Note that the next release of Oracle Application Server 10g (10.1.3), EJB 3.0 will be supported.</p></li><li><p>As you may have seen some weeks ago, Oracle is also the lead in the Eclipse project to implement the EJB 3 tool.</p></li><li><p>Also still around Eclipse, Oracle, most successful player around BPEL, will continue the development of the BPEL deigner inside Eclipse and put that officially in the Eclipse Project. If you are not familiar with BPEL, I will invite you <a href="http://otn.oracle.com/bpel" target="_blank" rel="noopener noreferrer">to jump to the OTN Web Site</a>.</p></li><li><p>Last, but not least, <a href="http://otn.oracle.com/products/jdev" target="_blank" rel="noopener noreferrer">Oracle JDeveloper is now free</a>...</p></li></ul>]]></content:encoded>
            <category>javaone</category>
            <category>conference</category>
        </item>
        <item>
            <title><![CDATA[JavaOne Day 1: What do to today?]]></title>
            <link>https://tgrall.github.io/blog/2005/06/27/javaone-day-1-what-do-to-today</link>
            <guid>/2005/06/27/javaone-day-1-what-do-to-today</guid>
            <pubDate>Mon, 27 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Here we go, the first day of Java One is about to start; and here some of the cool stuff to do:]]></description>
            <content:encoded><![CDATA[<p>Here we go, the first day of Java One is about to start; and here some of the cool stuff to do:</p><ul><li>Next-Generation Web Services in the Javaâ„¢ Platform (TS-7230 / 2:15pm)</li><li>Groovy = Javaâ„¢ Technology+ Ruby + Python for the JVMâ„¢ (TS-3402 / 3:30pm)</li><li>Web Services in the Real World (TS-3999 / 4:45pm)</li><li>Java Web Services Development Using Annotations (TS-7964 / 6:00pm)</li><li>Writing Performant WSDLs to Build Enterprise Web Services Applications (BOF-9213 / 7:30)</li><li><em>OC4J: Meet the Developers</em> (BOF-9024 / 9:30pm)</li><li>Ensuring 100% Application Portability with J2EE (BOF-9030 / 10:30pm)</li></ul><p>Also I think the opening Sun's Keynote from 8:30 to 11:00 am will be I am sure a good starting point for this week !</p><p>Busy day isn't? (I am on duty the morning, will try to go to afternoon sessions...)</p>]]></content:encoded>
            <category>javaone</category>
            <category>conference</category>
        </item>
        <item>
            <title><![CDATA[JavaOne: Oracle activities]]></title>
            <link>https://tgrall.github.io/blog/2005/06/26/javaone-oracle-activities</link>
            <guid>/2005/06/26/javaone-oracle-activities</guid>
            <pubDate>Sun, 26 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[The 2005 edition of JavaOne will be a very good one, at least based of what Oracle is planning to do.]]></description>
            <content:encoded><![CDATA[<p>The 2005 edition of JavaOne will be a very good one, at least based of what Oracle is planning to do.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oracle-booth">Oracle Booth<a class="hash-link" href="#oracle-booth" title="Direct link to heading">â€‹</a></h3><p>I invite you to come on the Oracle booth (<em>booth 625</em>) where Oracle Developers and Product Managers will be pleased to talk, and demonstrate the latest technologies and their integration in our product (J2EE 1.4, EJB 3.0, JSF, BPEL, Web Services, RFID and more...). Like last year we provide you a chance to <em>win lot of cool stuff</em>. First of all enter a raffle for a chance to win a Sony PlayStation 2, Star Wars PC game packs, and Atari joysticks.</p><p>Also the first 500 people to submit an entry survey with a stamp from an Oracle demo pod will receive a ticket to see <a href="http://www.starwars.com/episode-iii/" target="_blank" rel="noopener noreferrer">Star Wars III: Revenge of the Sith</a> the evening of Tuesday, June 28.</p><p>I will be present on the J2EE Demo pod on Monday morning and I will be please to stamp you to offer you a ticket for the Stars Wars... but remember you can get a ticket for the space too -yes you can go to the space-, by participating to the <a href="http://oracle.promotionexpert.com/SpaceSweepstakes/en/index.jsp?&amp;Src=3559501&amp;Act=20" target="_blank" rel="noopener noreferrer">Oracle Space Sweepstakes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="meet-the-gurus">Meet the Gurus<a class="hash-link" href="#meet-the-gurus" title="Direct link to heading">â€‹</a></h3><p>The Oracle booth also is a place where you can meet several gurus for a presentation and discussion. Here some of the subjects that will be presented:</p><ul><li>J2EE and EJB 3.0</li><li>JSF, and advanced HTML/AJaX features</li><li>SOA, BPEL</li><li>Apache Maven</li></ul><p>You can find the <a href="http://www.oracle.com/technology/events/javaone05/gurus.html" target="_blank" rel="noopener noreferrer">schedule on OTN</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sessions-and-bof">Sessions and BOF<a class="hash-link" href="#sessions-and-bof" title="Direct link to heading">â€‹</a></h3><p>Oracle is also proud to have 16 technical sessions and BOF, you can find the list of them <a href="http://www.oracle.com/technology/events/javaone05/sessions.html" target="_blank" rel="noopener noreferrer">here</a>.  One of them is my favorite:</p><ul><li>"<em>Oracle Application Server Containers for J2EE (OC4J): Meet the Developers</em>". It will be Monday 27th at 9:30pm, this is the chance for you to meet, and interact with the J2EE and Web Services developers from Oracle.</li></ul><p>See you there and enjoy JavaOne 2005!</p>]]></content:encoded>
            <category>conference</category>
            <category>javaone</category>
        </item>
        <item>
            <title><![CDATA[Google Code: AJAXSLT]]></title>
            <link>https://tgrall.github.io/blog/2005/06/24/google-code-ajaxslt</link>
            <guid>/2005/06/24/google-code-ajaxslt</guid>
            <pubDate>Fri, 24 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Google has released via its Google Code project an implementation of XSLT in javascript... Quite interesting to improve the development of AJaX based applications, I think this is the only reason to put the term AJaX in the project... But it is true that everytime you put AJaX in a title of something you are getting people interested...]]></description>
            <content:encoded><![CDATA[<p>Google has released via its <a href="http://code.google.com/" target="_blank" rel="noopener noreferrer">Google Code</a> project an implementation of XSLT in javascript... Quite interesting to improve the development of AJaX based applications, I think this is the only reason to put the term AJaX in the project... But it is true that everytime you put AJaX in a title of something you are getting people interested...</p><p>The source code is available in <a href="http://sourceforge.net/projects/goog-ajaxslt/" target="_blank" rel="noopener noreferrer">sourceforge</a>.</p><p>Feel free to post comments into the <a href="http://groups-beta.google.com/group/google-ajax/" target="_blank" rel="noopener noreferrer">Google group</a> created for this</p>]]></content:encoded>
            <category>ajax</category>
        </item>
        <item>
            <title><![CDATA[Thanks to MozBackup...]]></title>
            <link>https://tgrall.github.io/blog/2005/06/14/thanks-to-mozbackup-dot-dot-dot</link>
            <guid>/2005/06/14/thanks-to-mozbackup-dot-dot-dot</guid>
            <pubDate>Tue, 14 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[My Windows laptop has been infected by some viruses and adware -why I am not only using my Mac and Linux computers?-, so I just reinstalled the full OS.....]]></description>
            <content:encoded><![CDATA[<p>My Windows laptop has been infected by some viruses and adware -why I am not only using my Mac and Linux computers?-, so I just reinstalled the full OS.....</p><p>I just want to use my blog to thanks the small utility <a href="http://mozbackup.jasnapaka.com/" target="_blank" rel="noopener noreferrer">MozBackup</a> that allowed to quickly backup and recover my Firefox and Thunderbird configuration and data!</p><p>Thanks again...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Pushlets are adopting AJaX]]></title>
            <link>https://tgrall.github.io/blog/2005/06/13/pushlets-are-adopting-ajax</link>
            <guid>/2005/06/13/pushlets-are-adopting-ajax</guid>
            <pubDate>Mon, 13 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Back in consulting I did some small projects using the Pushlets framework. A nice and simple solution to create easily Web eventing applications...]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="http://www.pushlets.com/assets/pushlet-logo.gif" class="img_ev3q">Back in consulting I did some small projects using the <a href="http://www.pushlets.com" target="_blank" rel="noopener noreferrer">Pushlets framework</a>. A nice and simple solution to create easily Web eventing applications...</p><p>The Pushlet team has created a small demonstration of integration of Pushlet and XMLHttpRequest together...</p><p>If you never used Pushlets, take a look to it it is really nice!</p>]]></content:encoded>
            <category>ajax</category>
        </item>
        <item>
            <title><![CDATA[JSR 198 Early Draft Open For Review]]></title>
            <link>https://tgrall.github.io/blog/2005/06/08/jsr-198-early-draft-open-for-review</link>
            <guid>/2005/06/08/jsr-198-early-draft-open-for-review</guid>
            <pubDate>Wed, 08 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[The JSR-198:A Standard Extension API for Integrated Development Environment expert group has made the early draft available for review.]]></description>
            <content:encoded><![CDATA[<p>The <a href="http://http://jcp.org/en/jsr/detail?id=198" target="_blank" rel="noopener noreferrer">JSR-198:A Standard Extension API for Integrated Development Environment</a> expert group has made the early draft available for <a href="http://jcp.org/aboutJava/communityprocess/edr/jsr198/index.html" target="_blank" rel="noopener noreferrer">review</a>.</p><p>I really love this JSR and I am very happy that is now making progress because I played around in the past with Oracle JDeveloper Plugin APIs and I was disappointed that my work could not be used in other IDE...</p><p><a href="http://www.oracle.com/technology/products/jdev/index.html" target="_blank" rel="noopener noreferrer">Oracle JDeveloper 10g (10.1.3)</a> API will be based on the JSR 198. Take a look the <a href="http://http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/index.html" target="_blank" rel="noopener noreferrer">Oracle JDeveloper Extension page</a>.</p><p>On my side I have to dig out the old extensions that I wrote for 9.0.3 and migrate them to 10.1.3, I will start with the small <a href="http://lejos.sourceforge.net/" target="_blank" rel="noopener noreferrer">Lejos</a> extension, if I can find it... It has been so long since I did not play with my legos...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Summary of Ajax frameworks]]></title>
            <link>https://tgrall.github.io/blog/2005/06/08/summary-of-ajax-frameworks</link>
            <guid>/2005/06/08/summary-of-ajax-frameworks</guid>
            <pubDate>Wed, 08 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Michael Maheomff has published on AjaxPatterns Web site an article that list existing Ajax frameworks. This AJAXFrameworks article talks about server side solutions (Java, PHP, .Net, Lisp, Ruby, ....) and client side solutions that provided helpers around XMLHttpRequests and HTML programming.]]></description>
            <content:encoded><![CDATA[<p>Michael Maheomff has published on <a href="http://www.ajaxpatterns.org" target="_blank" rel="noopener noreferrer">AjaxPatterns</a> Web site an article that list existing Ajax frameworks. This <a href="http://www.ajaxpatterns.org/AJAXFrameworks" target="_blank" rel="noopener noreferrer">AJAXFrameworks article</a> talks about server side solutions (Java, PHP, .Net, Lisp, Ruby, ....) and client side solutions that provided helpers around XMLHttpRequests and HTML programming.</p><p>Feel free to let some comments to Michael on its wiki if he has forgotten some... for example nothing about JavaServer Faces...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Steve Jobs'  Keynote...]]></title>
            <link>https://tgrall.github.io/blog/2005/06/06/steve-jobs-keynote-dot-dot-dot</link>
            <guid>/2005/06/06/steve-jobs-keynote-dot-dot-dot</guid>
            <pubDate>Mon, 06 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Today is an important day. Weâ€™ve got some great stuff for you today.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Today is an important day. Weâ€™ve got some great stuff for you today.</p></blockquote><p>Here we go, WWDC 2005 has started, and as usual it is hot!  You can have a summary of <a href="http://www.macworld.com/news/2005/06/06/liveupdate/index.php" target="_blank" rel="noopener noreferrer">Steve Jobs' keynote on Macworld Web site</a>.</p><p>I think the most breaking news, beside the good numbers is the confirmation of the fact that "<a href="http://www.macworld.com/news/2005/06/06/powerpcintel/index.php" target="_blank" rel="noopener noreferrer">Apple drops IBM PowerPC line for Intel chips</a>"... What do you think? I am personally happy; this will stop the 'useless' discussion about the speed of the chip of PC versus Mac... and, I am optimistic on the fact that Macs will be faster ;-) For me the chip is not important since the only code that I write on Mac is Java based, and little bit of AppleScript...</p><p>I am impatient to see the new stuff that Apple will put in Leopard...</p>]]></content:encoded>
            <category>apple</category>
        </item>
        <item>
            <title><![CDATA[Apple on Intel.. Xbox on PowerPC is the world getting crazy]]></title>
            <link>https://tgrall.github.io/blog/2005/06/05/apple-on-intel-dot-xbox-on-powerpc-is-the-world-getting-crazy</link>
            <guid>/2005/06/05/apple-on-intel-dot-xbox-on-powerpc-is-the-world-getting-crazy</guid>
            <pubDate>Sun, 05 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Once again a rumor of  Apple switching to Intel is making some noise on the net....]]></description>
            <content:encoded><![CDATA[<p>Once again a rumor of <a href="http://www.forbes.com/feeds/ap/2005/06/05/ap2077202.html" target="_blank" rel="noopener noreferrer"> Apple switching to Intel</a> is making some noise on the net....</p><p>We won't have to wait for long since the news talks about Steve Job announcing that during his keynote at WWDC. I am currently planning to buy a new powerbook 12" (in addition to the 15" and iMac)... who knows, it may be an "Intel Inside" one ;-)</p><p>The other fun part is the deal that IBM is trying to obtain with game platform.. such as Sony and... MSFT...</p><p>We'll see tomorrow... Talking about WWDC, Oracle has a booth and some presentations for this event... I will be personally working on the pod presenting Oracle 10g stack on Mac OS X... See you this week !</p>]]></content:encoded>
            <category>osx</category>
            <category>apple</category>
        </item>
        <item>
            <title><![CDATA['Scripting: Higher Level Programming for the 21st Century' paper from  John K. Ousterhout]]></title>
            <link>https://tgrall.github.io/blog/2005/06/03/scripting-higher-level-programming-for-the-21st-century-paper-from-john-k-ousterhout</link>
            <guid>/2005/06/03/scripting-higher-level-programming-for-the-21st-century-paper-from-john-k-ousterhout</guid>
            <pubDate>Fri, 03 Jun 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[With all the Java Scripting language around (Groovy, Rhino, Ruby, Jython... and so on) it is always interesting to understand where this come from... but also be able to talk with people about it, especially when they do not understand why scripting is interesting...]]></description>
            <content:encoded><![CDATA[<p>With all the Java Scripting language around (Groovy, Rhino, Ruby, Jython... and so on) it is always interesting to understand where this come from... but also be able to talk with people about it, especially when they do not understand why scripting is interesting...</p><p>Googling around looking for some information on scripting benefits for a presentation I found this very intersting article from John Ousterhout, (he wrote the article in 1998) but I am sure you will still appreciate it...</p><p><a href="http://home.pacbell.net/ouster/scripting.html" target="_blank" rel="noopener noreferrer">Scripting: Higher Level Programming for the 21st Century</a>.</p><p>One of the most interesting part in this context is the paragraph 4:</p><blockquote><p>A scripting language is not a replacement for a system programming language or vice versa. Each is suited to a different set of tasks. For gluing and system integration, applications can be developed 5-10x faster with a scripting language; system programming languages will require large amounts of boilerplate and conversion code to connect the pieces, whereas this can be done directly with a scripting language. For complex algorithms and data structures, the strong typing of a system programming language makes programs easier to manage. Where execution speed is key, a system programming language can often run 10-20x faster than a scripting language because it makes fewer run-time checks.</p></blockquote>]]></content:encoded>
            <category>groovy</category>
            <category>php</category>
            <category>javascript</category>
            <category>scripting</category>
        </item>
        <item>
            <title><![CDATA[Good Bye JAX-RPC, weclome to JAX-WS]]></title>
            <link>https://tgrall.github.io/blog/2005/05/29/good-bye-jax-rpc-weclome-to-jax-ws</link>
            <guid>/2005/05/29/good-bye-jax-rpc-weclome-to-jax-ws</guid>
            <pubDate>Sun, 29 May 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Finally the Java specification about Web Service will  have a name that makes sense... moving away from JAX-RPC to JAX-WS (JAX Web Services)...]]></description>
            <content:encoded><![CDATA[<p>Finally the Java specification about Web Service will  have a name that makes sense... moving away from JAX-RPC to JAX-WS (JAX Web Services)...</p><blockquote><p>The JAX-RPC name, which stands for Java API for XML-based RPC, is misleading because developers assume it is only about RPC, according to Doug Kohlert, a Sun staff engineer, in his blog this week. â€œBy renaming JAX-RPC to JAX-WS, we can eliminate this confusion,â€ Kohlert wrote. JAX-WS stands for Java API for XML Web Services.</p></blockquote><p><a href="http://www.infoworld.com/article/05/05/25/HNjaxrpc_1.html" target="_blank" rel="noopener noreferrer">This infoworld article will give you more details</a>.</p>]]></content:encoded>
            <category>webservices</category>
            <category>soap</category>
            <category>java</category>
            <category>javaee</category>
        </item>
        <item>
            <title><![CDATA[Leaving for India...]]></title>
            <link>https://tgrall.github.io/blog/2005/05/15/leaving-for-india-dot-dot-dot</link>
            <guid>/2005/05/15/leaving-for-india-dot-dot-dot</guid>
            <pubDate>Sun, 15 May 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Tomorrow, I am leaving for India where I will present Oracle Application Server 10g and SOA to some of our partners. (J2EE, Web Services, BPEL and all put together!)]]></description>
            <content:encoded><![CDATA[<p>Tomorrow, I am leaving for India where I will present Oracle Application Server 10<em>g</em> and SOA to some of our partners. (J2EE, Web Services, BPEL and all put together!)</p><p>I will be in Bangalore and Calcutta, for 2 weeks, so if you have good place to go in this cities let me know tugdual<!-- -->[at]<!-- -->grallandco<!-- -->[dot]<!-- -->com !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle SQL Developer Express]]></title>
            <link>https://tgrall.github.io/blog/2005/05/12/oracle-sql-developer-express</link>
            <guid>/2005/05/12/oracle-sql-developer-express</guid>
            <pubDate>Thu, 12 May 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[You are a database developer, and want to develop, test and debug PL/SQL routines. You are a Java, PHP or .Net developer and you want to browse your schemas... Oracle has the tool for you: Oracle SQL Developer Express is a free]]></description>
            <content:encoded><![CDATA[<p>You are a database developer, and want to develop, test and debug PL/SQL routines. You are a Java, PHP or .Net developer and you want to browse your schemas... Oracle has the tool for you: Oracle SQL Developer Express is a free</p>]]></content:encoded>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Web UI: What's behind AJAX? Simple use cases using XMLHttpRequest]]></title>
            <link>https://tgrall.github.io/blog/2005/05/09/web-ui-whats-behind-ajax-simple-use-cases-using-xmlhttprequest</link>
            <guid>/2005/05/09/web-ui-whats-behind-ajax-simple-use-cases-using-xmlhttprequest</guid>
            <pubDate>Mon, 09 May 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I am sure you already heard about AJAX, the "new" way of building Web]]></description>
            <content:encoded><![CDATA[<p>I am sure you already heard about AJAX, the "new" way of building Web
application where using HTML, Javascript, DOM, and XML you can
<!-- -->&nbsp;<!-- -->build very interactive Web applications, some examples of
this interactivity are Google (suggest, local, mail), MSN, Amazon, .....</p><p>If the term <!-- -->&nbsp;<!-- -->Ajax is
relatively new, the technologies used are quite old now. And you do not
need anything new to be able to leverage this approach in your current
development, and since it is mainly a client (browser) based technology
this can be used whether you develop your application in Java, PHP, or
or even PL/SQL for the Web. In the same time, you do not want to have
to develop too much of the client side to handle user interaction, this
is where new frameworks that provide support of this technologies,
let's say AJAX based, are very interesting. It is now possible to
create very interactive Web application without passing 80% of your
time in the client side development - that could be generated from your
server obviously.</p><p>In the same time, before adopting such framework, it is important to
understand what is happening. This is why I am creating this quick
introduction based on 2 simple use cases:</p><ul><li><a href="http://www.grallandco.com/blog/archives/ajax/demo-2.html" target="_blank" rel="noopener noreferrer">loading message</a>:
<!-- -->&nbsp;<!-- -->you often want to provide some
feedback to your user when your browser is processing some data</li><li><a href="http://www.grallandco.com/blog/archives/ajax/demo-3.html" target="_blank" rel="noopener noreferrer">dependent lists</a>:
how you can easily create dependent lists, in lot of application you
want to drive a selection list from another</li></ul><p>Update May 30:</p><p>If you have tested my sample on Safari, you can see that the first request works, but following subsequent requests do not, on work around is to modify the HTTP header adding the following value, has to be done before the send, just send a old date...</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'If-Modified-Since'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'Sun,3 Jun 1973 00:00:00 GMT'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-do-you-need-to-know">What do you need to know?<a class="hash-link" href="#what-do-you-need-to-know" title="Direct link to heading">â€‹</a></h3><p>The first interesting part is the object XMLHttpRequest. This object is
currently supported by most of the browsers. As usual with HTML and
Javascript the cross browser/platform testing is one of the most
important part of your project. XMLHttpRequest is not new since
Microsoft has implemented it in Internet Explorer 5 as an ActiveX
object. Also it has been later on integrate as a native component into
Mozzila and Netscape (7.0), and into Apple Safari. If originally this
object as been created to load data, as XML in the
background, you can using it to load any data.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-xmlhttprequest-object">Creating XMLHttpRequest Object<a class="hash-link" href="#creating-xmlhttprequest-object" title="Direct link to heading">â€‹</a></h4><p>As usual with Javascript, it begins with interoperability issue ;-),
since in the MSFT world the XMLHttpRequest is implemented as an ActiveX
and in the other world(s) it is an native object, you have different
ways to create the object. The idea is too test if the current browser
supports or not the object and depending of the result create the
object.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Microsoft Way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  httpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Microsoft.XMLHTTP"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Others...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  httpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: another way of choosing which code path to use depending of the
version of the browser is to use <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/script56/html/js56jsconconditionalcompilation.asp" target="_blank" rel="noopener noreferrer">conditional compilation</a>
for the Javascript engine.</p><p>Also I would add that it is probably good to provide a degraded version
of your application if you can not control which browser will be used
by your client, or if you want to provide that to mobile people. This
is for example what Google Mail is doing with its <a href="http://gmail.google.com/support/bin/answer.py?ctx=gmail&amp;hl=en&amp;answer=15049" target="_blank" rel="noopener noreferrer">Basic HTML</a>
view.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-the-data">Retrieving the data<a class="hash-link" href="#retrieving-the-data" title="Direct link to heading">â€‹</a></h4><p>asynchronously</p><p>One of the most interesting features of the XMLHttpRequestObject is the
fact that you get data from a URL in the background of the user
activity. This is how you can give lot of interactivity to your
applications.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"GET"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./getEmployeeList?deptno=10"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">onreadystatechange</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">processRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmmthopenixmlhttprequest.asp" target="_blank" rel="noopener noreferrer">open</a>
method sets the different values that will be used by your request,
such as the type of request, the URL, if it is synchronous or not.</p><p>The "magic" comes from the<!-- -->&nbsp;<a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmproonreadystatechangehttprequest.asp" target="_blank" rel="noopener noreferrer">onreadystatechange</a>&nbsp;<!-- -->property.
This propery set an handler that will be called when the property <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmproreadystaterequest.asp" target="_blank" rel="noopener noreferrer">readyState</a>
changes, when the request is sent, loading, or completed... Meaning,
this is in this event handler, the processRequest
method in the sample, that you test if the response has been completed
correctly, and process the data.</p><p>Note: even if it is possible, I do not think that you should use the
XMLHttpRequest in a synchronous mode since it will freeze the browser
of the user, for the duration of the request.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="processing-the-response">Processing the response<a class="hash-link" href="#processing-the-response" title="Direct link to heading">â€‹</a></h4><p>As I said above the magic happens in the event handler associated with
the state of the request. Let's see how you manipulate the request and
response:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">processRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// process data as XML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseXML</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// or Text</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Error loading page\n"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">":"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">statusText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmproreadystaterequest.asp" target="_blank" rel="noopener noreferrer">readyState</a>
propery is used to know if all the data of the response have been
received or not, the different value for the state are:</p><ul><li>0 : uninitialized</li><li>1 : loading</li><li>2 :loaded</li><li>3 : interactive</li><li>4 : completed
Most of the time, you will just test the status 4. In my example I wait
for status==4 and then I check the status of the response. The <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmprostatusixmlhttprequest.asp" target="_blank" rel="noopener noreferrer">status</a>
is the status returned by the server, for example 200 for OK, 404 for
not found.</li></ul><p>Then you can treat the response as XML using the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmproresponsexmlixmlhttprequest.asp" target="_blank" rel="noopener noreferrer">responseXML</a>,
in this case you can manipulate the XML using the client DOM API. But
you can also directly take the content as a string using the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/html/xmproresponsetextixmlhttprequest.asp" target="_blank" rel="noopener noreferrer">responseText</a>
property.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="manipulating-the-data">Manipulating the Data<a class="hash-link" href="#manipulating-the-data" title="Direct link to heading">â€‹</a></h4><p>You now have the data back from the request, as Text or XML, you just
need using Javascript manipulate them and copy then into some part of
your page. So all is based on the client side. Let's do a very simple
example before moving to the use cases:</p><ul><li><a href="http://www.grallandco.com/blog/archives/demo-1.html" target="_blank" rel="noopener noreferrer">Simple XMLHttpRequest sample</a> <em>What is happening?</em></li></ul><p>Since I have explained the call above, here is the simple code that is
used to copy the content from the XMLHttpRequest object to the page:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> contentViewer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"contentViewer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contentViewer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseText</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most of the time, if you do <!-- -->&nbsp;<!-- -->not use XML you just have to copy
the content of the result into a section of your page, so to do it you
use:</p><ul><li>create a DIV tag in yourpage with a specific id. (or other...)</li><li>get the object you want to copy into using the <code>document.getElementById()</code> method, that is the most simple way...<!-- -->&nbsp;</li><li>then from the object just use the <code>innerHTML</code>
property that represent the content of this DIV object. (You can also
use the DOM API, to do the same thing, I am sure puris will say that
this is the only way to do it correctly... )
In most of the frameworks the data are exchanged in XML and some
generic methods are calls on the client side to propulate data in the
different components of the page.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usecase-1-loading-message">Usecase 1: Loading Message<a class="hash-link" href="#usecase-1-loading-message" title="Direct link to heading">â€‹</a></h3><p>One common use case is to be able to have some feedback during
processing of a request. Using the same approach you can print a
message until the response is completely done.</p><ul><li><a href="http://www.grallandco.com/blog/archives/ajax/demo-2.html" target="_blank" rel="noopener noreferrer">Online Demonstration</a> <em>What is happening?</em></li></ul><p>The tip here is just to take a zone where you want to print the status
("Loading..." for example). When the XMLHttpRequest status is different
than 4 (completed) <!-- -->&nbsp;<!-- -->just print the status in this section
using for example the innerHTML property. When the request is
completed, just move the content of this zone to blank, or in our case
the result of the request is printed into it.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// print the content of the page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> contentViewer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"contentViewer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contentViewer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseText</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Print the loading message....</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> contentViewer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"contentViewer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contentViewer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"&lt;b style='color:red;'&gt;Loading....&lt;b&gt;"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usecase-2-dependent-lists">Usecase 2: Dependent Lists<a class="hash-link" href="#usecase-2-dependent-lists" title="Direct link to heading">â€‹</a></h3><p>In lot of applications, you have submission form when one drop down list is controlled by another one. You have several way to support that depending of the size of your data set. For example you can download
all the records (master and detail) and use some client side
programming to refresh the content of the detail list depending of the
value selected in the master one; or <!-- -->&nbsp;<!-- -->another solution is to
just reload the page.</p><p>Using XMLHttpRequest, you can now just call the server to populate the
values of the detail list when the user select another value in the
master list. (and you can implement a client side cache if you want to
avoid a second call with the same parameters, but this is another
story...)</p><ul><li><a href="http://www.grallandco.com/blog/archives/ajax/demo-3.html" target="_blank" rel="noopener noreferrer">Online Demonstration</a> <em>What is happening?</em></li></ul><p>Nothing more complex than in the previous examples, on the <code>onChange</code>
of the master list (dept in the example) , you call a Javascript method
that create the XMLHttRequest, with the correct parameter.</p><p>Then in the event handler of this request, you populate the data as XML
and add them to the detail list (emp in the example).</p><p>In this specific example I used XML, but if you want for simpler code
you can write all in HTML and use the innerHTML property, but this is
just a choice of implementation isn't?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">â€‹</a></h3><p>First of all, you have seen that what we have behind AJAX is not just
new technologies. The technologies exists now for a while, they have
been exposed to the masse by Google, MSN, and other Web sites. The term
itself is definitevely a recent one...</p><p>Also, I have showed you simple examples that can help you for your
current developments, but you need to write some code on the client.
The real future of AJAX, is when this is bundle into a framework, into
the Faces components your are using. So before starting to implement
such code in your application you should take a look around to see if
any solution exists that can answer your need...</p><p>  You can download the source of the demonstrations <a href="http://www.grallandco.com/blog/archives/ajax/xmlhttprequest-demos.zip" target="_blank" rel="noopener noreferrer">here</a>. I tried to keep the code as simple as possible by providing all the source in each single html file.</p>]]></content:encoded>
            <category>ajax</category>
        </item>
        <item>
            <title><![CDATA[Which kind of developer are you? A software terrorist?]]></title>
            <link>https://tgrall.github.io/blog/2005/05/03/which-kind-of-developer-are-you-a-software-terrorist</link>
            <guid>/2005/05/03/which-kind-of-developer-are-you-a-software-terrorist</guid>
            <pubDate>Tue, 03 May 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Allen Holub just published on SDTime an editorial named "The Terror of Code in the Wrong Hands". I like the description of the "software terrorist": the guy who stays up all night, unwittingly but systematically destroying the entire teamâ€™s last monthâ€™s work while â€œimprovingâ€ the code. He doesnâ€™t tell anybody what heâ€™s done, and he never tests. Heâ€™s created a ticking time bomb that wonâ€™t be discovered for six months.]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.holub.com/" target="_blank" rel="noopener noreferrer">Allen Holub</a> just published on SDTime an editorial named "<a href="http://68.236.189.240/fullcolumn/column-20050501-01.html" target="_blank" rel="noopener noreferrer">The Terror of Code in the Wrong Hands</a>". I like the description of the "<em>software terrorist</em>": the guy who stays up all night, unwittingly but systematically destroying the entire teamâ€™s last monthâ€™s work while â€œimprovingâ€ the code. He doesnâ€™t tell anybody what heâ€™s done, and he never tests. Heâ€™s created a ticking time bomb that wonâ€™t be discovered for six months.</p><p>I am sure we all have a small list of co-worker that we put in this category... Hoping that I am not in yours :-)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[J2EE application development for Forms and Designer developers]]></title>
            <link>https://tgrall.github.io/blog/2005/04/28/j2ee-application-development-for-forms-and-designer-developers</link>
            <guid>/2005/04/28/j2ee-application-development-for-forms-and-designer-developers</guid>
            <pubDate>Thu, 28 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Back in France, and in Oracle consulting, I was very often called to present, introduce J2EE to Oracle Forms developers, since we all know that J2EE is the way to go!]]></description>
            <content:encoded><![CDATA[<p>Back in France, and in Oracle consulting, I was very often called to present, introduce J2EE to Oracle Forms developers, since we all know that J2EE is the way to go!</p><p>Sue Harper and Grant Ronald have made this task easier by creating a specific OTN page for <a href="http://otn.oracle.com/formsdesignerj2ee" target="_blank" rel="noopener noreferrer">Oracle Forms and Designer Developers</a> that are moving to J2EE.</p><p>This is also a subject that will be often discussed in the <a href="http://www.odtug.com/2005_j2EE.htm" target="_blank" rel="noopener noreferrer">J2EE SIG</a> that the different Oracle user groups
<a href="http://www.odtug.com" target="_blank" rel="noopener noreferrer">ODTUG</a>, <a href="http://www.ioug.org" target="_blank" rel="noopener noreferrer">IOUG</a>,<a href="http://www.oaug.com" target="_blank" rel="noopener noreferrer">OAUG</a> and <a href="http://otn.oracle.com" target="_blank" rel="noopener noreferrer">Oracle</a> have created.</p><p>I am sure that will be a very succesful subject during the next <a href="http://www.odtug.com/2005_conference_home.asp" target="_blank" rel="noopener noreferrer">ODTUG (Oracle Developer Tools User Group) Conference</a> mid june in New Orleans. During this event I am presenting 3 papers:</p><ul><li>J2EE 1.4 Overview</li><li>Oracle Application Server 10g: Best Application Server for the Oracle Database</li><li>J2EE Persistence Using OracleAS TopLink ( will probably let our guru Doug Clarke doing it if he is coming...)</li></ul><p>It is still time to register for this event, <a href="http://www.odtug.com/2005_conference_agenda.htm" target="_blank" rel="noopener noreferrer">take a look to the agenda</a>, this year will be a very good one !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Web Services and SOA Web Site]]></title>
            <link>https://tgrall.github.io/blog/2005/04/28/web-services-and-soa-web-site</link>
            <guid>/2005/04/28/web-services-and-soa-web-site</guid>
            <pubDate>Thu, 28 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I was yesterday talking to a customer about Web Services and Services Oriented Architecture, and he was looking for more information. So I shared with him one of my bookmark.]]></description>
            <content:encoded><![CDATA[<p>I was yesterday talking to a customer about Web Services and Services Oriented Architecture, and he was looking for more information. So I shared with him one of my bookmark.</p><p><a href="http://www.service-architecture.com/" target="_blank" rel="noopener noreferrer">http://www.service-architecture.com/</a> is a Web site dedicated to WS and SOA with <a href="http://www.service-architecture.com/articles/index.html" target="_blank" rel="noopener noreferrer">lof of articles</a> that defines for example most of the WS-* acronyms.</p><ul><li><a href="http://www.service-architecture.com/web-services/articles/" target="_blank" rel="noopener noreferrer">Web Services Articles</a></li><li><a href="http://www.service-architecture.com/xml/articles/" target="_blank" rel="noopener noreferrer">XML Articles</a></li><li><a href="http://www.service-architecture.com/application-servers/articles/index.html" target="_blank" rel="noopener noreferrer">Application Server Article</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[A very good HTML Editor... and open source]]></title>
            <link>https://tgrall.github.io/blog/2005/04/26/a-very-good-html-editor-dot-dot-dot-and-open-source</link>
            <guid>/2005/04/26/a-very-good-html-editor-dot-dot-dot-and-open-source</guid>
            <pubDate>Tue, 26 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[I have started to use on my Mac and PC the free HTML editor NVU, it is really a great product!]]></description>
            <content:encoded><![CDATA[<p>I have started to use on my Mac and PC the free HTML editor <a href="http://nvu.com" target="_blank" rel="noopener noreferrer">NVU</a>, it is really a great product!</p><p>Key Features:</p><ul><li>Multi Plaform: MacOS X, Linux, Windows... the project has been started by <a href="http://www.linspire.com/" target="_blank" rel="noopener noreferrer">LinSpire</a>... so not a big surprise</li><li>FTP Site manager</li><li>Good CSS Editor and Integration to the HTML Editor</li><li>Form Editing</li><li>Based on Gecko</li></ul><p>Nothing revolutionnary compare with DreamWeaver or FrontPage.. except that it is still very powerfull and free...</p><p>I hope that some Open Source developers will take time to develop Dav Site management, Source Control integration, JSP Development (at least same as the PHP stuff it currently has...)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Mike Keith Blog: The EJB 3.0 Hibernate Fallacy]]></title>
            <link>https://tgrall.github.io/blog/2005/04/21/mike-keith-blog-the-ejb-3-dot-0-hibernate-fallacy</link>
            <guid>/2005/04/21/mike-keith-blog-the-ejb-3-dot-0-hibernate-fallacy</guid>
            <pubDate>Thu, 21 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Mike Keith, Oracle Toplink architect, persistence guru, and member of the EJB 3.0 Expert Group, gives an, in his last entry an overview of EJB 3.0, in the context of the comparison with Hibernate and especially explaining why the statement that we sometimes hear "EJB 3.0 is Hibernate" is  wrong.]]></description>
            <content:encoded><![CDATA[<p>Mike Keith, Oracle Toplink architect, persistence guru, and member of the EJB 3.0 Expert Group, gives an, <a href="http://www.jroller.com/comments/mkeith/Weblog/the_ejb_3_0_hibernate" target="_blank" rel="noopener noreferrer">in his last entry</a> an overview of EJB 3.0, in the context of the comparison with Hibernate and especially explaining why the statement that we sometimes hear "EJB 3.0 <em>is</em> Hibernate" is  wrong.</p><p>This blog entry as been selected as a news by The Server Side, titled "<a href="http://theserverside.com/news/thread.tss?thread_id=33450" target="_blank" rel="noopener noreferrer">EJB 3.0 <strong>is not</strong> Hibernate</a>" and is very active in term of comments/reaction, feel free to add yours there.</p><p>In the same time if you want to learn more about EJB 3.0 and start developing with it you can find infromation and EJB 3.0 container on <a href="http://otn.oracle.com/ejb3" target="_blank" rel="noopener noreferrer">OTN</a>.</p>]]></content:encoded>
            <category>java</category>
            <category>javaEE</category>
            <category>jpa</category>
            <category>ejb</category>
        </item>
        <item>
            <title><![CDATA[Free Subversion Online Book]]></title>
            <link>https://tgrall.github.io/blog/2005/04/19/free-subversion-online-book</link>
            <guid>/2005/04/19/free-subversion-online-book</guid>
            <pubDate>Tue, 19 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[You can find a online version of the book Version Control with Subversion. Thanks to the authors Ben Collins-Sussman, Brian W. Fitzpatrick,C. Michael Pilato, and their publisher O'Reilly.]]></description>
            <content:encoded><![CDATA[<p>You can find a online version of the book <a href="http://svnbook.red-bean.com/" target="_blank" rel="noopener noreferrer">Version Control with Subversion</a>. Thanks to the authors Ben Collins-Sussman, Brian W. Fitzpatrick,C. Michael Pilato, and their publisher <a href="http://www.oreilly.com/catalog/0596004486/" target="_blank" rel="noopener noreferrer">O'Reilly</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Infoworld about OracleAS 10gR2: Write once]]></title>
            <link>https://tgrall.github.io/blog/2005/04/12/infoworld-about-oracleas-10gr2-write-once</link>
            <guid>/2005/04/12/infoworld-about-oracleas-10gr2-write-once</guid>
            <pubDate>Tue, 12 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[As you can guess, when you work on a product it is always a pleasure to see good feedback, from end users, or from the media...]]></description>
            <content:encoded><![CDATA[<p>As you can guess, when you work on a product it is always a pleasure to see good feedback, from end users, or from the media...</p><p>Tom Yager, from InfoWorld has published an <a href="http://www.infoworld.com/article/05/04/11/15TCoracle_1.html" target="_blank" rel="noopener noreferrer">article about Oracle Application Server 10g R2</a>.</p><p>Here some of the comments:</p><blockquote><p>â€œIâ€™m extremely impressed with AS 10g Release 2 as a commercial product. Oracle has designed a valuable feature set built on top of J2EE 1.3, optimizing it for SOAs (service-oriented architectures), BPEL (Business Process Execution Language), BPM, pervasive support of XML, and real-time business intelligence, among many, many other things.â€</p></blockquote><blockquote><p>â€œBut Iâ€™m just as impressed with the clear emphasis Oracle has placed on complying not only with the letter of Java server standards, but with their â€œwrite once, run anywhereâ€ spirit. You get to choose whether you want to bind yourself to Oracleâ€™s extras. AS 10g Release 2 permits, and even automates, deployment to and management of non-Oracle Java app servers that adhere to the J2EE 1.3 standard. And if you do this, there are no subtle glitches meant to prod you toward paying for Oracleâ€™s server.â€</p></blockquote><blockquote><p>â€œAfter several weeks of living with AS 10g Release 2, I found that Oracleâ€™s added value is nothing short of spectacular for enterprise applications and well worth paying for.â€</p></blockquote><blockquote><p>â€œThe myth of â€œwrite once, run anywhereâ€ has been turned on its head. With AS 10g Release 2, Oracle has delivered on that age-old promise as well as a software giant can.â€</p></blockquote><p>Feel free to drop me comments about your experience with OracleAS 10g...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaPolis Survey: Which Persistence...]]></title>
            <link>https://tgrall.github.io/blog/2005/04/08/javapolis-survey-which-persistence-dot-dot-dot</link>
            <guid>/2005/04/08/javapolis-survey-which-persistence-dot-dot-dot</guid>
            <pubDate>Fri, 08 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[JavaPolis is offering a survey about Persistence Technology, if you have not voted yet go on JavaPolis Web site.]]></description>
            <content:encoded><![CDATA[<p>JavaPolis is offering a survey about Persistence Technology, if you have not voted yet go on <a href="http://www.javapolis.com" target="_blank" rel="noopener noreferrer">JavaPolis Web site</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[yagoohoogle : the best of both world.. in a simple way]]></title>
            <link>https://tgrall.github.io/blog/2005/04/06/yagoohoogle-the-best-of-both-world-dot-in-a-simple-way</link>
            <guid>/2005/04/06/yagoohoogle-the-best-of-both-world-dot-in-a-simple-way</guid>
            <pubDate>Wed, 06 Apr 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend of mine send me this funny and useful link http://www.yagoohoogle.com/...]]></description>
            <content:encoded><![CDATA[<p>A friend of mine send me this funny and useful link <a href="http://www.yagoohoogle.com/" target="_blank" rel="noopener noreferrer">http://www.yagoohoogle.com/</a>...</p><p>Just simple and neat.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Simplified Development using EJB 3.0: Raghu Kodali tested it for us]]></title>
            <link>https://tgrall.github.io/blog/2005/03/31/simplified-development-using-ejb-3-dot-0-raghu-kodali-tested-it-for-us</link>
            <guid>/2005/03/31/simplified-development-using-ejb-3-dot-0-raghu-kodali-tested-it-for-us</guid>
            <pubDate>Thu, 31 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Raghu just posted an interesting article asking the question "Does EJB 3.0 really make application development easy?".]]></description>
            <content:encoded><![CDATA[<p>Raghu just posted an interesting article asking the question "<a href="http://www.jroller.com/comments/raghukodali/Weblog/does_ejb_3_0_really" target="_blank" rel="noopener noreferrer">Does EJB 3.0 really make application development easy?</a>".</p><p>So as you will see EJB 3.0 does simplify the development by reducing the number of source and descriptor files that you have to manipulate. (I won't go in the detail of the number of lines of Java or XML). What I really like about EJB 3.0 is not only the fact that Entity bean are POJOs, but also that now you can read the code and understand how the application is build, thanks to the annotations! I am sure that if you got the EJB 2.x genes you do not find them complex, but I did not have this mutation...</p><p>I am inviting you to download the <a href="http://otn.oracle.com/ejb3" target="_blank" rel="noopener noreferrer">Oracle EJB 3.0 Developer Preview</a> to be more familiar with this technology.</p>]]></content:encoded>
            <category>java</category>
            <category>javaEE</category>
            <category>ejb</category>
            <category>jpa</category>
        </item>
        <item>
            <title><![CDATA[What to think about all the Ajax noise?]]></title>
            <link>https://tgrall.github.io/blog/2005/03/28/what-to-think-about-all-the-ajax-noise</link>
            <guid>/2005/03/28/what-to-think-about-all-the-ajax-noise</guid>
            <pubDate>Mon, 28 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[In the last 2 months the blogosphere has been very verbal about Ajax technology that describe a way of doing Rich UI using DHTML, Javascript and XML over HTTP.  If you are not already familiar with the concept the article "Ajax: A New Approach to Web Applications" by Jesse James Garrett is a very good introduction.]]></description>
            <content:encoded><![CDATA[<p>In the last 2 months the blogosphere has been very verbal about Ajax technology that describe a way of doing Rich UI using DHTML, Javascript and XML over HTTP.  If you are not already familiar with the concept the article "<a href="http://www.adaptivepath.com/publications/essays/archives/000385.php" target="_blank" rel="noopener noreferrer">Ajax: A New Approach to Web Applications</a>" by Jesse James Garrett is a very good introduction.</p><p>For me, it is the first time that finally we have something really new in term of UI that is compliant with most of the modern architectures that are server side Java based. You can argue that Flex, OpenLazlo, ..., are very good and powerful, but first of all they use a proprietary plugin and really integrated with the development approach that most of the Java developers are currently using (MVC based on Struts, JSF or others). What get me very excited about Ajax is the fact that finally we can see Web Development giving an easy and standard/open way of creating rich client.</p><p>If you search around Ajax your will see that more and more framework are providing integration of Ajax technologies into their solution. What I see as the biggest move is the adoption of Ajax by JavaServer Faces, and simply because it is the J2EE standard for Java Web Development. I am sure that lot of you will say that Tapestry,ROR and other existing frameworks are providing the integration now, so why bother with JSF... Hmmm, I will say that all the current solution as still geek oriented and really focus on the core developers... What I see with JSF/Ajax integration is finally enterprise developers, that are used to 4GL development tools, (where the most important part is to develop business logic not a nice framework or a new set of libraries) will be able to develop Web Applications based on components that are smart enough to give the usability of a desktop application.</p><p>To give an idea of what I mean, you can take a look to <a href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/jsf/index.html" target="_blank" rel="noopener noreferrer">Oracle ADF Faces components</a> some of them are really powerful and provide rich interactivity to the user.  One example is the <a href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/jsf/doc/tagdoc/core/table.html" target="_blank" rel="noopener noreferrer">Oracle Table Component</a> that support pagination (next/previous) without refreshing the whole page. As a developer you drop the component on your page, set the properties, and done! You do not have to care about any HTML or Javascript coding. And this using a standard based faces components that you can use in any Web Container and even IDE. I know that the ADF Faces components are not using the sames stack as Ajax (eg: XML over HTTP) but this is just an example of what will be the experience for a developer and a user.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Oracle Products on OTN]]></title>
            <link>https://tgrall.github.io/blog/2005/03/27/new-oracle-products-on-otn</link>
            <guid>/2005/03/27/new-oracle-products-on-otn</guid>
            <pubDate>Sun, 27 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle BPEL Process Manager 10.1.2 Beta-3 Preview]]></description>
            <content:encoded><![CDATA[<p><strong>Oracle BPEL Process Manager 10.1.2 Beta-3 Preview </strong></p><p>BPEL PM 10.1.2 Beta 3 is <a href="http://www.oracle.com/technology/software/products/ias/preview.html" target="_blank" rel="noopener noreferrer">now available on OTN</a>. One of the biggest new, is the fact that the BPEL Designer is now based on Oracle JDeveloper and provide much more functionnalities than previous release.</p><p><strong>Oracle Drive Preview Release</strong>
<a href="http://www.oracle.com/technology/products/ias/portal/content_management_10gr2.html" target="_blank" rel="noopener noreferrer">Oracle Drive Preview Release</a> is a powerful WebDAV client that allows Portal content management and publishing directly from your Windows Desktop; Key Highlights:</p><ul><li>Mount the Portal Repository as a Windows Drive</li><li>Get Portal specific menu options to set properties, ACL information, preview content and pages, etc</li><li>Access the Portal repository with a command line utility</li><li>Search from your Windows Explorer</li><li>Perform Virus check on the Portal Repository</li><li>Work with offline content and synchronize when online</li><li>Edit content with any available Editor</li></ul><p>You can see a <a href="http://www.oracle.com/technology/products/ias/portal/viewlets/ORACLEDRIVEVIEWLET.swf" target="_blank" rel="noopener noreferrer">demonstration of Oracle Drive</a> on OTN.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[PHP on OC4J??? Yes with JSR 223 RI]]></title>
            <link>https://tgrall.github.io/blog/2005/03/26/php-on-oc4j-yes-with-jsr-223-ri</link>
            <guid>/2005/03/26/php-on-oc4j-yes-with-jsr-223-ri</guid>
            <pubDate>Sat, 26 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[In this entry I am explaining how to use the JSR-223 Reference Implementation into Oracle Containers for J2EE (OC4J).]]></description>
            <content:encoded><![CDATA[<p>In this entry I am explaining how to use the JSR-223 Reference Implementation into Oracle Containers for J2EE (OC4J).</p><p>Note: I have done this only on Windows XP Platform, I did not test on Unix/Linux yet.</p><p>1-The first thing to do is to download the <a href="http://jcp.org/aboutJava/communityprocess/pr/jsr223/index.html" target="_blank" rel="noopener noreferrer">JSR-223 Reference Implementation from the JCP Web site</a>.</p><p>2- Unzip the <em>sjp-1_0-ea-windows-i586.zip</em> in a directory let say <em>d:\java\jsr223-ri</em>.</p><p>3- You can choose here to do a proper installation (requires perl) or not. The <em>proper</em> installation preconfigure Apache Tomcat and the JSR-223 command line demonstration. Since what we are trying to achieve is to install the RI inside OC4J you do not need to do the installation.</p><p>4- Download</p><p><a href="http://www.grallandco.com/blog/archives/ant-jsr223.zip" target="_blank" rel="noopener noreferrer">this zip file</a>
that contains a Ant task and various files to configure and deploy the JSR223 sample into OC4J.</p><p>&nbsp;<!-- -->&nbsp;<!-- -->&nbsp;<!-- -->4.1 To execute the Ant script you must start to set the following environman variables:</p><ul><li>JAVA_HOME that points to the JDK home</li><li>ORACLE_HOME that points to the OC4J home (eg: d:\oracle\oc4j)</li><li>JSR223_HOME that points to directory where you have unzipped the JSR223 RI (eg d:\java\jsr223)</li></ul><p>&nbsp;<!-- -->&nbsp;<!-- -->&nbsp;<!-- -->4.2 Create a startup script for OC4J using the command</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ant</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The default target create a script names <em>start-jsr223.bat</em> in the %ORACLE_HOME%\bin directory. This script set various environment variable and start OC4J with the correct system parameters to load correctly the PHP scrip engine from Java.</p><p>&nbsp;<!-- -->&nbsp;<!-- -->&nbsp;<!-- -->4.3 Start OC4J using the created script</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">%ORACLE_HOME%\bin\start-jsr223.bat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&nbsp;<!-- -->&nbsp;<!-- -->&nbsp;<!-- -->4.4 Package and Deploy the Sample Application</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ant deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This target packacge the Web samples from the reference implementation in a ear/war file, modifying the <em>web.xml</em> to define the different servlet mapping needed by JSR223.</p><p>5 Use the sample application</p><p><code>http://localhost:8888/jsr-223</code></p><p>You can start to use PHP in OC4J ;-)  Take some time to read the sample code and specifications. JSR-223 is not only for Web container but also for JS2E, it is so interesting that the JSR-223 will probably be part of Mustang...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Blog Beginner: check out w.bloggar and other desktop tools]]></title>
            <link>https://tgrall.github.io/blog/2005/03/16/blog-beginner-check-out-w-dot-bloggar-and-other-desktop-tools</link>
            <guid>/2005/03/16/blog-beginner-check-out-w-dot-bloggar-and-other-desktop-tools</guid>
            <pubDate>Wed, 16 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend a mine just ask me:]]></description>
            <content:encoded><![CDATA[<p>A friend a mine just ask me:</p><blockquote><p>What blog software do you recommend if somebody is starting newly, should have the ability to create categories, easy image uploading?</p></blockquote><p>I did not understand immediately his question, but he wanted to know if some Desktop application exists to easily publish on a blog...</p><p>I am sure that you can find a lot on the Web, I personnaly use <a href="http://www.wbloggar.com/" target="_blank" rel="noopener noreferrer">w.bloggar</a>. As you may know most of the Blog (server) provides XML-RPC, it is how this tools communicate with your server</p><p>I will have to test these tools on my Mac: <a href="http://www.objectivelabs.com/blogapp.php" target="_blank" rel="noopener noreferrer">BlogApp</a> and <a href="http://homepage.mac.com/soapdog/iblog/" target="_blank" rel="noopener noreferrer">iBlog</a>. If you are Linux user take a look at: <a href="http://blognix.sourceforge.net/" target="_blank" rel="noopener noreferrer">BlogniX</a></p><p>Here the list of the supported online services and blog supported by w.bloggar:</p><p><strong>Blog Services </strong></p><ul><li><a href="http://www.blogger.com" target="_blank" rel="noopener noreferrer">Blogger </a></li><li><a href="http://www.typepad.com" target="_blank" rel="noopener noreferrer">TypePad </a></li><li><a href="http://www.bigblogtool.com" target="_blank" rel="noopener noreferrer">BigBlogTool </a></li><li><a href="http://www.blogalia.com" target="_blank" rel="noopener noreferrer">Blogalia </a></li><li><a href="http://www.theblog.com.br" target="_blank" rel="noopener noreferrer">TheBlog </a></li><li><a href="http://www.blog-city.com/" target="_blank" rel="noopener noreferrer">Blog-City </a></li><li><a href="http://EraBlog.NET" target="_blank" rel="noopener noreferrer">EraBlog.NET </a></li><li><a href="http://www.upsaid.com" target="_blank" rel="noopener noreferrer">Upsaid </a></li><li><a href="http://www.u-blog.net" target="_blank" rel="noopener noreferrer">UBlog </a></li><li><a href="http://www.squarespace.com" target="_blank" rel="noopener noreferrer">SquareSpace </a></li><li><a href="http://www.blogware.com" target="_blank" rel="noopener noreferrer">BlogWare </a></li><li><a href="http://www.deardiary.net/" target="_blank" rel="noopener noreferrer">DearDiary.Net </a></li></ul><p><strong>Blog Tools </strong></p><ul><li><a href="http://www.movabletype.org" target="_blank" rel="noopener noreferrer">MovableType </a></li><li><a href="http://www.nucleuscms.org/" target="_blank" rel="noopener noreferrer">Nucleus </a></li><li><a href="http://www.cafelog.com" target="_blank" rel="noopener noreferrer">b2 </a></li><li><a href="http://www.wordpress.org" target="_blank" rel="noopener noreferrer">WordPress </a></li><li><a href="http://www.b2evolution.net" target="_blank" rel="noopener noreferrer">b2 evolution </a></li><li><a href="http://www.blogcms.com" target="_blank" rel="noopener noreferrer">Blog:CMS </a></li><li><a href="http://workspaces.gotdotnet.com/dottext" target="_blank" rel="noopener noreferrer">.Text </a></li><li><a href="http://hypothecate.co.uk/blogworksXML/" target="_blank" rel="noopener noreferrer">BlogWorks XML </a></li><li><a href="http://www.drupal.org" target="_blank" rel="noopener noreferrer">Drupal </a></li><li><a href="http://www.livejournal.com" target="_blank" rel="noopener noreferrer">LiveJournal </a></li><li><a href="http://www.pmachine.com/" target="_blank" rel="noopener noreferrer">pMachine </a></li><li><a href="http://www.xoops.org" target="_blank" rel="noopener noreferrer">Xoops </a></li><li><a href="http://www.e-xoops.com" target="_blank" rel="noopener noreferrer">E-Xoops </a></li><li><a href="http://www.postnuke.com" target="_blank" rel="noopener noreferrer">PostNuke </a></li><li><a href="http://blojsom.sf.net" target="_blank" rel="noopener noreferrer">blojsom </a></li><li><a href="http://www.rollerweblogger.org" target="_blank" rel="noopener noreferrer">Roller Weblogger </a></li><li><a href="http://www.codestore.net/dbapi" target="_blank" rel="noopener noreferrer">Domino </a></li><li><a href="http://www.yetanothercommunitysystem.com" target="_blank" rel="noopener noreferrer">YACS </a></li><li><a href="http://xaraya.com" target="_blank" rel="noopener noreferrer">Xaraya </a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaWorld Article:  Choosing a Java scripting language]]></title>
            <link>https://tgrall.github.io/blog/2005/03/15/javaworld-article-choosing-a-java-scripting-language</link>
            <guid>/2005/03/15/javaworld-article-choosing-a-java-scripting-language</guid>
            <pubDate>Tue, 15 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[This new Java World article compares the different Java scripting languages (Groovy, JudoScript, Pnuts, JRuby, Jacl, Jython, Rhino, and BeanShell), and list the issues that you have to select the good one...]]></description>
            <content:encoded><![CDATA[<p>This new <a href="http://www.javaworld.com/javaworld/jw-03-2005/jw-0314-scripting_p.html" target="_blank" rel="noopener noreferrer">Java World article</a> compares the different Java scripting languages (Groovy, JudoScript, Pnuts, JRuby, Jacl, Jython, Rhino, and BeanShell), and list the issues that you have to select the good one...</p><p>In this article that I like I would like to read a little about the JSR-223 that should help with the integration part.</p><p>I will be very interested to know how you use Java Scripting language in your projects, so feel free to drop me a comment or mail ( <a href="mailto:tugdual%5Bat%5Dgrallandco%5Bdot%5Dcom" target="_blank" rel="noopener noreferrer">tugdual[at]grallandco[dot]com</a> )</p>]]></content:encoded>
            <category>groovy</category>
            <category>scripting</category>
            <category>javascript</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[Great News ! OracleAS EJB 3.0 Preview is available]]></title>
            <link>https://tgrall.github.io/blog/2005/03/04/great-news-oracleas-ejb-3-dot-0-preview-is-available</link>
            <guid>/2005/03/04/great-news-oracleas-ejb-3-dot-0-preview-is-available</guid>
            <pubDate>Fri, 04 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Looking forward to play around with EJB 3.0?]]></description>
            <content:encoded><![CDATA[<p>Looking forward to play around with EJB 3.0?</p><p>You can now download the OracleAS 3.0 Preview from OTN:
"<a href="http://www.oracle.com/technology/tech/java/ejb30.html" target="_blank" rel="noopener noreferrer">Oracle Application Server EJB 3.0 Preview</a>".</p><p>In addition to the container you can find documentation, demonstration and technical papers.</p><p>I am sure you will enjoy it, discover the new way of deal with persistence based on Java annotations...</p>]]></content:encoded>
            <category>oc4j</category>
            <category>javaEE</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[Oracle and PHP]]></title>
            <link>https://tgrall.github.io/blog/2005/02/24/oracle-and-php</link>
            <guid>/2005/02/24/oracle-and-php</guid>
            <pubDate>Thu, 24 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend of mine was asking me:]]></description>
            <content:encoded><![CDATA[<p>A friend of mine was asking me:</p><p><em>can I use PHP with Oracle?</em></p><p>Sure you can!</p><p>And a very good source of information about PHP and Oracle is the <a href="http://otn.oracle.com" target="_blank" rel="noopener noreferrer">OTN</a> Web site itself, and especially the <a href="http://www.oracle.com/technology/tech/opensource/index.html" target="_blank" rel="noopener noreferrer">OpenSource page</a>. Here a list of my favorites:</p><ul><li><a href="http://www.oracle.com/technology/oramag/webcolumns/2003/techarticles/hull_php.html" target="_blank" rel="noopener noreferrer">Get Started with Oracle and PHP</a></li><li><a href="http://www.oracle.com/technology/tech/opensource/php/apache/inst_php_apache_linux.html" target="_blank" rel="noopener noreferrer">Installing Oracle, PHP, and Apache on Linux</a></li><li><a href="http://www.oracle.com/technology/tech/opensource/php/globalizing_oracle_php_applications.pdf" target="_blank" rel="noopener noreferrer">An overview on globalizing Oracle PHP Applications (PDF)</a></li><li><a href="http://www.oracle.com/technology/tech/opensource/php_faq.html" target="_blank" rel="noopener noreferrer">Generic Oracle and PHP FAQ</a></li><li><a href="http://www.oracle.com/technology/tech/opensource/php/php_troubleshooting_faq.html" target="_blank" rel="noopener noreferrer">Oracle PHP Troubleshooting FAQ</a></li><li><a href="http://otn.oracle.com/forums/php.html" target="_blank" rel="noopener noreferrer">PHP OTN Forum</a></li></ul><p><em>Can I run my PHP Applications inside Oracle Application Server?</em></p><p>Sure! Not only you can access the Oracle database from a PHP Application, but also if you are running Oracle Application 10<em>g</em> the usage of mod_php is supported with Oracle HTTP Server see:</p><ul><li><a href="http://www.oracle.com/technology/tech/opensource/php/php_ohs_sod.html" target="_blank" rel="noopener noreferrer">Statement of Direction: PHP Support on OHS</a></li><li><a href="http://www.oracle.com/technology/products/ias/ohs/htdocs/php_ohs.htm" target="_blank" rel="noopener noreferrer">PHP Instructions for OHS</a></li></ul><p><em>And what about development?</em></p><p>Development could be done inside Oracle JDeveloper 10g using the The <a href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/php/index.html" target="_blank" rel="noopener noreferrer">Oracle JDeveloper 10g PHP Extension</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[BPEL: Edwin answer to Dutch'Rant post]]></title>
            <link>https://tgrall.github.io/blog/2005/02/17/bpel-edwin-answer-to-dutchrant-post</link>
            <guid>/2005/02/17/bpel-edwin-answer-to-dutchrant-post</guid>
            <pubDate>Thu, 17 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[If you are interested by BPEL you can take a look to the blog entry 'BPEL: Yes or No?' and the answer/comments from Edwin (VP of Development of Oracle BPEL Process Manager).]]></description>
            <content:encoded><![CDATA[<p>If you are interested by BPEL you can take a look to <a href="http://blog.arendsen.net/index.php?p=13" target="_blank" rel="noopener noreferrer">the blog entry 'BPEL: Yes or No?'</a> and the answer/comments from Edwin (VP of Development of Oracle BPEL Process Manager).</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JSR 223: Public Review of the Specification]]></title>
            <link>https://tgrall.github.io/blog/2005/02/08/jsr-223-public-review-of-the-specification</link>
            <guid>/2005/02/08/jsr-223-public-review-of-the-specification</guid>
            <pubDate>Tue, 08 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[The JSR 223: Scripting for the Java Platform is now open for public review until March 28th.]]></description>
            <content:encoded><![CDATA[<p>The JSR 223: Scripting for the Java Platform is now open for public review until March 28th.</p><p>If you are not familiar with it, the JSR 223 main goal is to define how the Java platform should integrate with scripting languages. It defines a standard API similar to <a href="http://jakarta.apache.org/bsf/" target="_blank" rel="noopener noreferrer">Bean Scripting Framework</a>.</p><p>You can dowlnoad the spec from the <a href="http://jcp.org/en/jsr/detail?id=223" target="_blank" rel="noopener noreferrer">JCP Web Site</a>.</p>]]></content:encoded>
            <category>jsr</category>
            <category>groovy</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[JavaWorld Article: Event-driven services in SOA]]></title>
            <link>https://tgrall.github.io/blog/2005/02/01/javaworld-article-event-driven-services-in-soa</link>
            <guid>/2005/02/01/javaworld-article-event-driven-services-in-soa</guid>
            <pubDate>Tue, 01 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Interesting article about Event Driven Architecture (EDA) and Service Oriented Architecture based on Mule an open source ESB.]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.javaworld.com/javaworld/jw-01-2005/jw-0131-soa_p.html" target="_blank" rel="noopener noreferrer">Interesting article</a> about Event Driven Architecture (EDA) and Service Oriented Architecture based on Mule an open source ESB.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[uConnect my best Blue Tooth experience.. so far...]]></title>
            <link>https://tgrall.github.io/blog/2005/01/23/uconnect-my-best-blue-tooth-experience-dot-so-far-dot-dot-dot</link>
            <guid>/2005/01/23/uconnect-my-best-blue-tooth-experience-dot-so-far-dot-dot-dot</guid>
            <pubDate>Sun, 23 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[A friend a mine just bought the top of the line of the Dodge Grand Caravan... Really over-loaded...]]></description>
            <content:encoded><![CDATA[<p>A friend a mine just bought the top of the line of the Dodge Grand Caravan... Really over-loaded...</p><p>My favorite feature is <a href="http://www.dodge.com/crossbrand/uconnect/dodge/interface.html" target="_blank" rel="noopener noreferrer">uConnect</a>, that provide hand-free voice system based on Bluetooth...</p><p>I just turned on blue tooth on my phone, and five minutes later I was able to talk to my friends and family and share that with all people in the car. I have several bluetooth stuff (Macs, PDA, Phone) and this is the first time that using uConnect that I find a really cool usage of it...</p><p>The missing feature: I would like to see an integration between my address book on the PDA to the GPS system allowing the system to direclty set the destination from an address....</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[First 2005 resolution: make a donation for South Asia]]></title>
            <link>https://tgrall.github.io/blog/2005/01/03/first-2005-resolution-make-a-donation-for-south-asia</link>
            <guid>/2005/01/03/first-2005-resolution-make-a-donation-for-south-asia</guid>
            <pubDate>Mon, 03 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[My first 2005 action was to give money for south Asia. I made a donation to the Unicef Organization and my employer Oracle is matching my amount.]]></description>
            <content:encoded><![CDATA[<p>My first 2005 action was to give money for south Asia. I made a donation to the Unicef Organization and my employer Oracle is matching my amount.</p><p>So think about it and take five minutes of your time to make a donation to one of this organization:</p><ul><li><strong>American Red Cross</strong> <a href="https://www.redcross.org/donate/donation-form.asp" target="_blank" rel="noopener noreferrer">International Response Fund</a></li><li><strong>AmeriCares</strong> <a href="https://www.americaresfoundation.net/donate/default.aspx?id=South%20Asia%20Earthquake%20Relief%20Fund" target="_blank" rel="noopener noreferrer">South Asia Earthquake Relief Fund</a></li><li><strong>Direct Relief International</strong> <a href="https://www.directrelief.org/sections/support_us/d_donate_now.html" target="_blank" rel="noopener noreferrer">International Assistance Fund</a></li><li><strong>MÃ©decins Sans FrontiÃ¨res International</strong> <a href="http://www.msf.org/donations/index.cfm" target="_blank" rel="noopener noreferrer">Tsunami Emergency Appeal</a></li><li><strong>Oxfam</strong> <a href="https://secure.ga3.org/02/asia_earthquake04" target="_blank" rel="noopener noreferrer">Asian Earthquake <!-- -->&amp;<!-- --> Tsunami Fund</a></li><li><strong>Sarvodaya</strong> <a href="http://www.sarvodaya.org/" target="_blank" rel="noopener noreferrer">Relief Fund for Tsunami Tragedy</a></li><li><strong>Save the Children</strong> <a href="http://savethechildren.org/radio_asia_earthquake.asp" target="_blank" rel="noopener noreferrer">Asia Earthquake/Tsunami Relief Fund</a></li><li><strong>UNICEF</strong> <a href="http://www.unicefusa.org/tsunami" target="_blank" rel="noopener noreferrer">South Asia Tsunami Relief Efforts</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Eclipse and OC4J using the Lomboz Plugin]]></title>
            <link>https://tgrall.github.io/blog/2004/12/20/eclipse-and-oc4j-using-the-lomboz-plugin</link>
            <guid>/2004/12/20/eclipse-and-oc4j-using-the-lomboz-plugin</guid>
            <pubDate>Mon, 20 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[You can find a new How-To Document that explains how to use OC4J and Eclipse together using the Lomboz plugin.]]></description>
            <content:encoded><![CDATA[<p>You can find a new <a href="http://www.oracle.com/technology/tech/java/oc4j/1013/howtos/how-to-configure-lomboz/doc/lomboz-howto-part-1.html" target="_blank" rel="noopener noreferrer">How-To Document</a> that explains how to use OC4J and Eclipse together using the Lomboz plugin.</p><p>You can download the server definition files for the Production release of OC4J 10g (9.0.4) or for the J2EE 1.4 Developer Preview 10.1.3.</p>]]></content:encoded>
            <category>eclipse</category>
            <category>java</category>
            <category>javaEE</category>
            <category>oc4j</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[What's new in OC4J 10g (10.1.3) Developer Preview]]></title>
            <link>https://tgrall.github.io/blog/2004/12/15/whats-new-in-oc4j-10g-10-dot-1-3-developer-preview</link>
            <guid>/2004/12/15/whats-new-in-oc4j-10g-10-dot-1-3-developer-preview</guid>
            <pubDate>Wed, 15 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Application Server Control]]></description>
            <content:encoded><![CDATA[<p>###Application Server Control</p><p>Management and monitoring support is provided by a new version of Enterprise Manager Application Server Control which is included directly within the OC4J 10g (10.1.3) Developer Preview 3 release.</p><p>Application Server Control is is fully JMX based and provides management and monitoring capabilities for this J2EE 1.4 compliant version of OC4J. It features a JSR-88 based deployment client with a powerful deployment plan editor, as well as a generic
JMX MBean browser that is JSR-77 aware. Application (user-defined) MBeans are also supported to the same extent as system MBeans.</p><p>Other new areas of support include Web services management, TopLink session management, a JNDI browser, among many other new features.</p><ul><li>Provides a generic JMX MBean browser that gives users a full view into all system MBeans. The new MBean browser provides features such as:<ul><li>Hierarchical view of all system MBeans based on JSR-77
naming hierarchy</li><li>Comprehensive search capabilities across MBean, attribute
and operation names, as well as support for searches using
the JMX query syntax</li><li>Ability to view all MBean properties, such as attributes,
operations, statistics, notifications</li><li>Ability to invoke operations. Users will be able to invoke operations that require complex types as input parameters based on String based constructors for those complex types where applicable</li><li>Ability to change attribute values where applicable</li><li>Ability to subscribe to JMX notifications</li></ul></li><li>Application (user-defined) MBeans are supported to the same extent as system MBeans (see above) and are accessible via a link from the individual application home page</li><li>JMX Notifications that the user chooses to subscribe to will be received and listed on the Received Notifications page</li><li>Deployment follows JSR-88 and provides the following new features:<ul><li>A generic and powerful JSR-88 deployment plan editor.</li><li>Comprehensive deployment progress messages during application deployments.</li></ul></li><li>New Web service management capabilities providing features such as:<ul><li>Enable/Disable</li><li>Performance</li><li>Logging</li><li>Auditing</li><li>Security</li><li>Reliability</li></ul></li><li>TopLink session monitoring and management support</li><li>Improved log viewing and searching capabilities</li><li>A JNDI browser let users view the overall JNDI namespace, as well as application context namespaces</li><li>Many other new features in areas such as JMS, JTA, JDBC, etc.</li></ul><p>###Configuration, Administration and Deployment</p><ul><li>Provides full support for JMX 1.2 and JMX Remote Access API (JSR-160)</li><li>Implements Java2 Management Specification (JSR-77) to provide JMX MBean controls for configuration and monitoring of the server and deployed applications</li><li>Implements Java2 Deployment API (JSR-88) to support standard deployment operations,uses a separate deployment plan to capture OC4J specific deployment details in a non intrusive manner. Deployment plans can be presented to server at deployment time to provide server with OC4J configuration set</li><li>Fine grained security controls to facilitate administration at the system and application only levels</li><li>A set of Ant tasks which utilize JSR-88 are provided to support deployment related operations from Ant scripts</li><li>Flexible classloading implementation which allows for the deployment of shared-libraries which can be consumed by deployed applications. Using the shared-library mechanism, applications have complete control over which class libraries are loaded, enabling the use of different XML parsers and Oracle JDBC driver versions than what are provided by default by OC4J</li></ul><p>###EJB</p><ul><li>Toplink is now fully integrated as the default persistence manager for performing Container Managed Persistence (CMP) with Entity EJBs</li><li>Support for incremental EJB deployment, replacing individual class files instead of an
entire EJB module</li></ul><p>###JMS</p><ul><li>JMS 1.1 compatible with OJMS and OracleAS JMS* A generic JMS JCA 1.5 Resource Adapter</li><li>Complete integration of third party JMS providers into OC4J</li><li>JMX based dynamic configuration, management and monitoring of JMS infrastructure</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-services">Web Services<a class="hash-link" href="#web-services" title="Direct link to heading">â€‹</a></h3><ul><li>Ant tasks for developing Web services including:<ul><li>assemble - generate a Web service from a Java class</li><li>topdownAssemble - generate a Web service from a WSDL</li><li>annotationAssemble - generate a Web service from JSR 181 annotations</li><li>ejbAssemble - generate a Web service from an EJB 2.1</li><li>jmsAssemble - generate a Web service from a JMS queue or topic</li><li>plsqlAssemble - generate a Web service from a PLSQL package</li><li>sqlAssemble - generate a Web service from a sql statement</li><li>dbJavaAssemble - generate a Web service from a Java class located in the Oracle Database</li><li>genGatewayService - generate a gateway service for third party Web service WSDLs</li><li>genProxy - generate a client proxy from a WSDL to invoke a Web service</li></ul></li></ul><p>Information on these tasks and more is available in the OC4J 10.1.3
Developer Preview 3 <a href="http://download.oracle.com/otn/java/oc4j/1013/doc/" target="_blank" rel="noopener noreferrer">Documentation Library</a>.</p><ul><li>An extended command line WebServicesAssembler tool providing the same functionality as the Ant tasks</li><li>A Web services management framework enabling users to SOAP auditing, content based logging, security and reliability. The framework enables administrators to enable and disable services as well as enable and disable management
characteristics applied to those services. This framework is used by Application Server Control to provide Web services management configurability to system administrators and by JDeveloper to enable Web services management configuration during development</li><li>Support for the OASIS standard WS-Reliability</li><li>Support for SOAP 1.1 and SOAP 1.2</li><li>Support for a SOAP over JMS binding in addition to the existing SOAP over HTTP binding</li><li>Support for the OASIS standard WS-Security including authentication tokens, XML encryption and digital signatures. More information is available in the Security Release Notes.</li><li>This release of OC4J has been tested both as a consumer of OracleAS BPEL Process Manager business
process WSDLs as well as producer of Web services that can be used in OracleAS BPEL Process Manager BPEL processes.</li></ul><p>###JCA</p><ul><li>Compliant to JCA 1.5, also supports JCA 1.0 for backwards compatibility</li><li>Tested with Oracle and third-party Adapters</li><li>Management - JMX support (both standard and extensions) and Application Server Control for deployment, configuration, administration and metrics monitoring operations.</li><li>Persistence for JCA using Object-XML mapping in the Toplink component</li><li>Deployment enhancements:deployment for oc4j-ra.xml</li><li>2PC recovery support including JCA</li></ul><p>###Security -- JAAS/JAZN</p><ul><li>Implementation of Web Services security (OASIS WSS 1.0 specification)</li><li>Ability to integrate Oracle JAZN with 3rd party LDAP providers such as Sun One or Microsoft Active Directory. Please refer to Oracle Application Server Containers for J2EE documentation for detailed instructions.</li></ul><p>###Job Scheduler</p><p>The OracleAS Job Scheduler provides asynchronous scheduling services
for J2EE applications with the following features:</p><ul><li>API for submitting and controlling jobs</li><li>Temporal- and trigger-based job execution</li><li>Event listeners for monitoring job execution and status</li><li>iCalendar recurrence expression support</li><li>API-level JTA support for job submission and control</li><li>Automatic retry of failed jobs</li><li>Job blackout windows</li><li>Configurable persistence for job definitions and configuration</li><li>JMX monitoring and administration</li></ul><p>For the latest documentation and sample applications see the Scheduler How-To's on OTN.</p><p>###Application Clustering</p><ul><li>Application clustering can be enabled on a specific application basis, enabling an OC4J instance to concurrently host both clustered and non clustered applications.</li><li>Support has been added for additional replication protocols. The protocols provided are multicast and peer-to-peer for in memory based state replication. The peer replication protocol supports direct TCP based connections between the members of a cluster group. A database replication protocol is also provided which stores and retrieved
session state to and from a specified database instance.</li><li>The policies which determine when replication takes place have been extended in this release. Support is now provided
for onCall, onChange, and onShutdown events. Web applications now default to using the onCall policy which queues up changes made to the HttpSession object within a method call and then send the change set when the method completes.</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Toplink and Spring framework integration]]></title>
            <link>https://tgrall.github.io/blog/2004/12/10/oracle-toplink-and-spring-framework-integration</link>
            <guid>/2004/12/10/oracle-toplink-and-spring-framework-integration</guid>
            <pubDate>Fri, 10 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now find a preview of the Oracle Toplink &amp; framework integration. This allows you to easily use Toplink features in your Spring application.]]></description>
            <content:encoded><![CDATA[<p>You can now find a preview of the Oracle Toplink <!-- -->&amp;<!-- --> framework integration. This allows you to easily use Toplink features in your Spring application.</p><p>You can download it from <a href="http://www.oracle.com/technology/products/ias/toplink/preview/spring/index.html" target="_blank" rel="noopener noreferrer">OTN Web site</a>.</p>]]></content:encoded>
            <category>oracle</category>
            <category>toplink</category>
            <category>java</category>
            <category>spring</category>
        </item>
        <item>
            <title><![CDATA[At Oracle Open World all the week]]></title>
            <link>https://tgrall.github.io/blog/2004/12/07/at-oracle-open-world-all-the-week</link>
            <guid>/2004/12/07/at-oracle-open-world-all-the-week</guid>
            <pubDate>Tue, 07 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[As you may know this is Oracle Open World this week in San Francisco... I am working there all week mainly on the OC4J and JDeveloper demo pods. Come to see the new version that help you to develop J2EE and Web Services. Also I am presenting Thursday at 4pm a paper about Service Oriented Architecture (SOA) and Event Driven Architecture (EDA)]]></description>
            <content:encoded><![CDATA[<p>As you may know this is Oracle Open World this week in San Francisco... I am working there all week mainly on the OC4J and JDeveloper demo pods. Come to see the new version that help you to develop J2EE and Web Services. Also I am presenting Thursday at 4pm a paper about Service Oriented Architecture (SOA) and Event Driven Architecture (EDA)</p><p>I invite you to join this feast... if you can not take a look to the <a href="http://www.orablogs.com/otn_at_openworld/" target="_blank" rel="noopener noreferrer">OTN at Oracle World blog</a>, that highlights important keynotes, session and demoground activities...</p><p>You can also take a look to the official <a href="http://www.oracle.com/openworld/online/index.html" target="_blank" rel="noopener noreferrer">Oracle Open World Web site</a></p>]]></content:encoded>
            <category>oow</category>
            <category>conference</category>
            <category>oracle</category>
        </item>
        <item>
            <title><![CDATA[New OC4J and JDeveloper Release Available]]></title>
            <link>https://tgrall.github.io/blog/2004/12/04/new-oc4j-and-jdeveloper-release-available</link>
            <guid>/2004/12/04/new-oc4j-and-jdeveloper-release-available</guid>
            <pubDate>Sat, 04 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle Containers for J2EE 10g (10.1.3) Developer Preview]]></description>
            <content:encoded><![CDATA[<p><strong>Oracle Containers for J2EE 10g (10.1.3) Developer Preview </strong></p><p>This fully J2EE 1.4 compatible release of OC4J offers improvements in classloading, data-source consolidation and configuration, TopLink integration and many other areas. This release also delivers a host of new capabilities in the area of Web Services, including management capabilities to enable and disable services and to configure message reliability, logging and security options. The brand new browser-based Enterprise Manager Application Server Control management console provides deployment, management and monitoring of all types of J2EE applications using the new standard JMX (JSR-77) and Deployment (JSR-88) APIs.</p><p>Download it now and experience OC4J for yourself: <a href="http://www.oracle.com/technology/tech/java/oc4j/1013" target="_blank" rel="noopener noreferrer">http://www.oracle.com/technology/tech/java/oc4j/1013</a></p><p><strong>Oracle JDeveloper 10g (10.1.3) Developer Preview</strong></p><p>The focus of this release has been to increase developer productivity, improve the user interface, and reduce the footprint. This Developer Preview release is intended to give you a sneak peek at the developer goodness to come and solicit your feedback. This release is the most substantial and ground-breaking we've had in years, adding many new features -- including a new look and feel, greatly improved coding environment, extensive refactoring options, J2EE 1.4/J2SE 5.0 support, and visual JSF development. We encourage you to take it for a spin.</p><p>Download the product and check out the related resources at <a href="http://www.oracle.com/technology/products/jdev/101/" target="_blank" rel="noopener noreferrer">http://www.oracle.com/technology/products/jdev/101/</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Article: Transaction Processing in Distributed Service-Oriented Applications]]></title>
            <link>https://tgrall.github.io/blog/2004/11/29/article-transaction-processing-in-distributed-service-oriented-applications</link>
            <guid>/2004/11/29/article-transaction-processing-in-distributed-service-oriented-applications</guid>
            <pubDate>Mon, 29 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Jon Maron from Oracle has just published an article about transaction processing in distributed SOA.]]></description>
            <content:encoded><![CDATA[<p>Jon Maron from Oracle has just published an article about <a href="http://www.informit.com/articles/article.asp?p=351607" target="_blank" rel="noopener noreferrer">transaction processing in distributed SOA</a>.</p><p>You will learn in this article the challenges that you have when you want to manage transactions in a distributed Services Oriented Architecture running using Web Services.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Some cool stuff about JSP 2.0]]></title>
            <link>https://tgrall.github.io/blog/2004/11/26/some-cool-stuff-about-jsp-2-dot-0</link>
            <guid>/2004/11/26/some-cool-stuff-about-jsp-2-dot-0</guid>
            <pubDate>Fri, 26 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[J2EE 1.4 introduces a major release of JSP: 2.0.]]></description>
            <content:encoded><![CDATA[<p>J2EE 1.4 introduces a major release of JSP: 2.0.</p><p>Here some of the cool new features:</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="direct-usage-of-expression-language-el-in-your-jsp">Direct usage of Expression Language (EL) in your JSP<a class="hash-link" href="#direct-usage-of-expression-language-el-in-your-jsp" title="Direct link to heading">â€‹</a></h5><p>You do not need to put the EL in any tag now, just use it as needed:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">JSP 2.0 new features</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello ${param.name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Find more about JSP 2.0 Expression Language in <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/JSPIntro7.html" target="_blank" rel="noopener noreferrer">the J2EE 1.4 tutorial</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="easy-tags-creation-with-tag-files">Easy tags creation with .tag files<a class="hash-link" href="#easy-tags-creation-with-tag-files" title="Direct link to heading">â€‹</a></h5><p>It is now easier to create your own tags.
You just need to create a new .tag file (or .tagx if you want to use XML syntax) in the WEB-INF/tags directory of your Web application; or META-INF/tags if you want to package the Tags in Jar file. So creating a .tag file is easy, using the attribute directive. The following example is a new tag named mytag.tag that prints a title set using the attribute title, in the color specified in the attribute textColor.</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%@ attribute name="title" required="true" description="Title of the document"%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%@ attribute name="textColor" required="true" description="Color of the Title"%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag" style="color:#00009f"> </span><span class="token tag special-attr attr-name" style="color:#00a4db">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">"</span><span class="token tag special-attr attr-value value css language-css selector" style="color:#00009f">color:$</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#393A34">{</span><span class="token tag special-attr attr-value value css language-css" style="color:#e3116c">textColor</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#393A34">}</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${title}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is the JSP that uses this new Tag:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%@ taglib tagdir="/WEB-INF/tags/" prefix="tags"%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tags:</span><span class="token tag" style="color:#00009f">mytag</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">title</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">My new JSP</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">textColor</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">blue</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello World${param.name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="easy-header-and-footer-template-using-the-prelude-and-coda-includes">Easy header and footer template using the prelude and coda includes<a class="hash-link" href="#easy-header-and-footer-template-using-the-prelude-and-coda-includes" title="Direct link to heading">â€‹</a></h5><p>In most of the Web application that I have built, I started by creating template for my HTML pages; most of them to handle header and footer. Oracle JSP implementation provides this for a while using the <a href="http://download-west.oracle.com/docs/cd/B10464_01/web.904/b10320/trandepl.htm#1005780" target="_blank" rel="noopener noreferrer">Global Include feature</a>. JSP 2.0 introduces a standard way of doing that using prelude and coda includes. I <em>hate</em> the choice made by the spec to call that prelude and coda. May be good Java developer are necessary musicians, since this is commonly used there? Why not simply header/footer or using a prefix like pre.../post.... Anyway, that is not the point.</p><p>The way you can set a prelude and/or coda include to your JSPs is done with the new Web Descriptor tag: <code>&lt;jsp-property-group&gt;</code>. This new tag allows you to configure a set of JSP that matches a specific URL. Part of the subtags of <code>&lt;jsp-property-group&gt;</code> are:</p><ul><li><code>&lt;include-coda&gt;</code> : the path to JSP fragment (.jspf) to include in the beginning all the JSP that matched the URL.</li><li><code>&lt;include-prelude&gt;</code>:the path to the JSP fragment to include in the end all the JSP that matched the URL.</li></ul><p>An example configuration:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">jsp-config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">jsp-property-group</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">*.jsp</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include-prelude</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/WEB-INF/includes/prelude.jsp</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include-prelude</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include-coda</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/WEB-INF/includes/coda.jsp</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include-coda</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">jsp-property-group</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">jsp-config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This 3 new features of JSP 2.0 are just a very small list of the features introduced in JSP and Servlet in J2EE 1.4, but are my favorites. They are very easy to test and to adopt.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Oracle White Paper: Accelerate Development and Deployment of Service-Oriented Applications]]></title>
            <link>https://tgrall.github.io/blog/2004/11/19/new-oracle-white-paper-accelerate-development-and-deployment-of-service-oriented-applications</link>
            <guid>/2004/11/19/new-oracle-white-paper-accelerate-development-and-deployment-of-service-oriented-applications</guid>
            <pubDate>Fri, 19 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle has published a new white paper about Service Oriented Architecture, and how Oracle Application Server 10g accelerates SOA development and deployment.]]></description>
            <content:encoded><![CDATA[<p>Oracle has published a new white paper about Service Oriented Architecture, and how Oracle Application Server 10g accelerates SOA development and deployment.</p><p><a href="http://www.oracle.com/solutions/integration/oracleas10g_javaws_bwp.pdf" target="_blank" rel="noopener noreferrer">Read the paper on the Oracle Web Site</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle TopLink: Happy 10th Anniversary]]></title>
            <link>https://tgrall.github.io/blog/2004/11/17/oracle-toplink-happy-10th-anniversary</link>
            <guid>/2004/11/17/oracle-toplink-happy-10th-anniversary</guid>
            <pubDate>Wed, 17 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[In the context of the 10th anniversary of Oracle TopLink, The Server Side published an interview of Mike Keith and Doug Clark, architect and product manager of TopLink. They talk about persistence in J2EE using EJB 3.0, but also the differences between TopLink and other persistence solutions...]]></description>
            <content:encoded><![CDATA[<p>In the context of the 10th anniversary of Oracle TopLink, <a href="http://theserverside.com/news/thread.tss?thread_id=30017" target="_tugSite" rel="noopener noreferrer">The Server Side published an interview of Mike Keith and Doug Clark</a>, architect and product manager of TopLink. They talk about persistence in J2EE using EJB 3.0, but also the differences between TopLink and other persistence solutions...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Windows User finally you will be able to use Konfabulator]]></title>
            <link>https://tgrall.github.io/blog/2004/11/15/windows-user-finally-you-will-be-able-to-use-konfabulator</link>
            <guid>/2004/11/15/windows-user-finally-you-will-be-able-to-use-konfabulator</guid>
            <pubDate>Mon, 15 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[One of my favorites tools on my Mac is Konfabulator that allows you to create -or use prebuilt- application called Widgets. This Widgets are for example battery level, weather, see the Widget Gallery.]]></description>
            <content:encoded><![CDATA[<p>One of my favorites tools on my Mac is <a href="http://www.konfabulator.com/" target="_blank" rel="noopener noreferrer">Konfabulator</a> that allows you to create -or use prebuilt- application called Widgets. This Widgets are for example battery level, weather, see the <a href="http://www.widgetgallery.com/" target="_blank" rel="noopener noreferrer">Widget Gallery</a>.</p><p>The reason why I love it is not necessary the list of existing one, but more because you can very easily develop yours using Javascript. Dowload it and start to develop your widgets, developer guide, javascript reference are available in the <a href="http://www.konfabulator.com/workshop/" target="_blank" rel="noopener noreferrer">Konfabulator Workshop</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HTML/Javascript tip: Refreshing an image not the full page]]></title>
            <link>https://tgrall.github.io/blog/2004/11/08/html-javascript-tip-refreshing-an-image-not-the-full-page</link>
            <guid>/2004/11/08/html-javascript-tip-refreshing-an-image-not-the-full-page</guid>
            <pubDate>Mon, 08 Nov 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[I was discussing with a friend about the creation of a monitoring dashboard in HTML. As any monitoring tool you want to be able to see the information in real-time, so you need to refresh the content....]]></description>
            <content:encoded><![CDATA[<p>I was discussing with a friend about the creation of a monitoring dashboard in HTML. As any monitoring tool you want to be able to see the information in <em>real-time</em>, so you need to refresh the content....</p><p>One way of doing it is to refresh the whole page and this is easy, just use the meta tag:
<code>&lt;META HTTP-EQUIV="Refresh" CONTENT="5; URL=http://www.grallandco.com/" &gt;</code>
where 5 is the number of seconds between each refresh.</p><p>Javascript allows you to easily refresh a specific image of your page (a chart for example):</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">myChartServlet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">chart1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">language</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">JavaScript</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">  </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:#d73a49">loadImage</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> now </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword control-flow" style="color:#00009f">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">images</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">images</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">chart1</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">src</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">'myChartServlet?time='</span><span class="token script language-javascript operator" style="color:#393A34">+</span><span class="token script language-javascript">now</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">getTime</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// add the time to avoid caching</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript function" style="color:#d73a49">setTimeout</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'loadImage()'</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript number" style="color:#36acaa">1000</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">  </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">  </span><span class="token script language-javascript function" style="color:#d73a49">setTimeout</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'loadImage()'</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript number" style="color:#36acaa">1000</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can obviously make the whole think dynamic and configurable...</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[First contact with Oracle Database XE]]></title>
            <link>https://tgrall.github.io/blog/2004/10/31/first-contact-with-oracle-database-xe</link>
            <guid>/2004/10/31/first-contact-with-oracle-database-xe</guid>
            <pubDate>Sun, 31 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle Database 10g Express Edition Beta Release is now available for download, from OTN:]]></description>
            <content:encoded><![CDATA[<p>Oracle Database 10g Express Edition Beta Release is now available for download, from OTN:</p><ul><li><a href="http://www.oracle.com/technology/software/products/database/xe/index.html" target="_blank" rel="noopener noreferrer">Oracle 10g Express Edition (Oracle Database XE)</a>.</li></ul><p>What is this new release, you can find more information on the Oracle XE page, that I quote:</p><blockquote><p>Oracle Database XE is a great starter database for:</p><ul><li><p><strong>Developers</strong> working on PHP, Java, .NET, and Open Source applications</p></li><li><p><strong>DBAs</strong> who need a free, starter database for training and deployment</p></li><li><p><strong>Independent Software Vendors (ISVs) and hardware vendors</strong> who want a starter database to distribute free of charge</p></li><li><p><strong>Educational institutions and students</strong> who need a free database for their curriculum</p></li></ul></blockquote><p>This first contact with the latest release of the Oracle database is really great, the 150Mb download is really quick...</p><p>The installation is really easy... I have created a <a href="http://www.grallandco.com/blog/archives/oracle-xe/oracle-xe-install.swf" target="_blank" rel="noopener noreferrer">viewlet driving you through the installation</a>.</p><p>As you can see in the viewlet, at the end of the installation you have
a running database that you can fully administer from your browser, you
can also create CRUD application using HTMLDB... And obviously you can
connect your J2EE application server to it and start creating
applications...</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources:<a class="hash-link" href="#resources" title="Direct link to heading">â€‹</a></h4><ul><li><a href="http://www.oracle.com/technology/products/database/xe/index.html" target="_blank" rel="noopener noreferrer">Oracle XE site</a></li><li><a href="http://www.oracle.com/technology/products/database/xe/forum.html" target="_blank" rel="noopener noreferrer">Oracle XE forum</a> (monitored by Tom Kyte!)</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Application Server and OC4J Certification]]></title>
            <link>https://tgrall.github.io/blog/2004/10/28/oracle-application-server-oc4j-certification</link>
            <guid>/2004/10/28/oracle-application-server-oc4j-certification</guid>
            <pubDate>Thu, 28 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[If you ask yourself on which Operating Systems, JDK, Browser, etc... you can use Oracle Application Server 10g just consult OTN or Oracle Metalink:]]></description>
            <content:encoded><![CDATA[<p>If you ask yourself on which Operating Systems, JDK, Browser, etc... you can use Oracle Application Server 10g just consult OTN or <a href="http://metalink.oracle.com/" target="_blank" rel="noopener noreferrer">Oracle Metalink</a>:</p><ul><li><a href="http://www.oracle.com/technology/software/products/ias/files/as-certification-904.html" target="_blank" rel="noopener noreferrer">OTN Oracle Application Server 10g (9.0.4) Certification Matrix</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Mike Keith about Java2 5.0 Annotations]]></title>
            <link>https://tgrall.github.io/blog/2004/10/26/mike-keith-about-java2-5-dot-0-annotations</link>
            <guid>/2004/10/26/mike-keith-about-java2-5-dot-0-annotations</guid>
            <pubDate>Tue, 26 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Mike Keith,architect for Oracle Containers for J2EE (OC4J) and TopLink products and currently represents Oracle in the EJB 3.0 expert group, has published an interesting article about Annotations in Java 5.0:.]]></description>
            <content:encoded><![CDATA[<p>Mike Keith,architect for Oracle Containers for J2EE (OC4J) and TopLink products and currently represents Oracle in the EJB 3.0 expert group, has published an interesting article about Annotations in Java 5.0:.</p><p><a href="http://www.oracle.com/technology/pub/articles/annotations_xml.html" target="_blank" rel="noopener noreferrer">To Annotate or Not?</a> focused on the usage of Annotation or XML as metadata language. Mike provides sample code and explain the pros and cons of the annotation using use cases.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New Dynamic Menu for OracleAS Portal 10g]]></title>
            <link>https://tgrall.github.io/blog/2004/10/07/new-dynamic-menu-for-oracleas-portal-10g</link>
            <guid>/2004/10/07/new-dynamic-menu-for-oracleas-portal-10g</guid>
            <pubDate>Thu, 07 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Ronaldo Viscuso has just released a new version of his DHTML Menu Portlet. This portlet generates a DHTML menu for site navigation, with links to pages and subpages from a selected page group.]]></description>
            <content:encoded><![CDATA[<p>Ronaldo Viscuso has just released a new version of his DHTML Menu Portlet. This portlet generates a DHTML menu for site navigation, with links to pages and subpages from a selected page group.</p><p>Stylesheet, height, width, mouse-over behavior, etc. are all configurable via the "Edit Defaults" page, which allows for complete customization for pretty much any desired look &amp; feel....</p><p>The portlet, screen shots and installation document are available on the <a href="http://portalstudio.oracle.com/pls/ops/opstudio.wwv_main.main?p_siteid=233&amp;p_cornerid=497710" target="_blank" rel="noopener noreferrer">Portal Knowledge Exchange</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Jive portlets for OracleAS Portal]]></title>
            <link>https://tgrall.github.io/blog/2004/10/06/jive-portlets-for-oracleas-portal</link>
            <guid>/2004/10/06/jive-portlets-for-oracleas-portal</guid>
            <pubDate>Wed, 06 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[An Oracle Application Server (OracleAS) Provider for Jive Forums is now available to download from the Portal Integration Solutions page on OTN.]]></description>
            <content:encoded><![CDATA[<p>An Oracle Application Server (OracleAS) Provider for <a href="http://www.jivesoftware.com/products/forums/" target="_blank" rel="noopener noreferrer">Jive Forums</a> is now available to download from the <a href="http://www.oracle.com/technology/products/ias/portal/point_downloads.html#op4j" target="_blank" rel="noopener noreferrer">Portal Integration Solutions</a> page on OTN.</p><p>The Oracle Application Server (OracleAS) Provider for Jive Forums contains portlets that allow users and administrators to:</p><ul><li>View topics posted on their favorite forums</li><li>Create a new topic or post a reply to one</li><li>Search the forums</li><li>View the hot topics across all forums</li><li>View all topics, forums, categories and users being watched by the user</li><li>View top reward points earners</li><li>Administer the Jive Forums Application</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Looking for articles: use JavaPro magazine collection]]></title>
            <link>https://tgrall.github.io/blog/2004/10/06/looking-for-articles-use-javapro-magazine-collection</link>
            <guid>/2004/10/06/looking-for-articles-use-javapro-magazine-collection</guid>
            <pubDate>Wed, 06 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[You are looking for a articles about J2EE, JavaPro magazine put online a nice tool to search and view all the published articles:]]></description>
            <content:encoded><![CDATA[<p>You are looking for a articles about J2EE, <a href="http://www.ftponline.com/javapro/" target="_blank" rel="noopener noreferrer">JavaPro magazine</a> put online a nice tool to search and view all the published articles:</p><ul><li><a href="http://www.ftponline.com/resources/spcollections/j2ee/" target="_blank" rel="noopener noreferrer">J2EE</a></li><li><a href="http://www.ftponline.com/resources/spcollections/webservices/" target="_blank" rel="noopener noreferrer">Web Services</a></li><li>...</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Groovy, Java's New Scripting Language]]></title>
            <link>https://tgrall.github.io/blog/2004/10/04/groovy</link>
            <guid>/2004/10/04/groovy</guid>
            <pubDate>Mon, 04 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Groovy, Java's New Scripting Language by Ian F. Darwin -- When some Java developers hear about Groovy, their first reaction is often, "Oh, no, not another scripting language for Java." Ian Darwin had the same reaction, until he took a good look at Groovy.]]></description>
            <content:encoded><![CDATA[<p><a href="http://www.onjava.com/pub/a/onjava/2004/09/29/groovy.html" target="_blank" rel="noopener noreferrer">Groovy, Java's New Scripting Language</a> by Ian F. Darwin -- When some Java developers hear about Groovy, their first reaction is often, "Oh, no, not another scripting language for Java." Ian Darwin had the same reaction, until he took a good look at Groovy.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Good taste tool: del.icio.us]]></title>
            <link>https://tgrall.github.io/blog/2004/10/03/good-taste-tool-del-dot-icio-dot-us</link>
            <guid>/2004/10/03/good-taste-tool-del-dot-icio-dot-us</guid>
            <pubDate>Sun, 03 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[I am starting to use del.icio.us. A great way to manage your own bookmarks but also to share them with others...]]></description>
            <content:encoded><![CDATA[<p>I am starting to use <a href="http://del.icio.us/" target="_blank" rel="noopener noreferrer">del.icio.us</a>. A great way to manage your own bookmarks but also to share them with others...</p><p>It is fun to see how many people are sharing the same bookmarks as you, and help you to find information related to the different categories...</p><p>Also the integration with Firefox using the <a href="http://delicious.mozdev.org/" target="_blank" rel="noopener noreferrer">delicious plugin</a> make the usage of the bookmark manager very easy. You can also use the <a href="http://www.scifihifi.com/cocoalicious/" target="_blank" rel="noopener noreferrer">Apple Mac OS X client for del.icio.us</a>.</p><p><a href="http://del.icio.us/tgrall" target="_blank" rel="noopener noreferrer">Here my bookmarks... still working on it</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Sample Code: BLOB insertion in Oracle10g]]></title>
            <link>https://tgrall.github.io/blog/2004/10/01/sample-code-blob-insertion-in-oracle10g</link>
            <guid>/2004/10/01/sample-code-blob-insertion-in-oracle10g</guid>
            <pubDate>Fri, 01 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Responding to a customer question about Blob insertion in Oracle 10g DB using the JDBC 3.0 driver. Very Simple application. Download Java Source See insertBlob method.]]></description>
            <content:encoded><![CDATA[<p>Responding to a customer question about Blob insertion in Oracle 10g DB using the JDBC 3.0 driver. Very Simple application. <a href="http://www.grallandco.com/blog/archives/BlobOracle.java" target="_blank" rel="noopener noreferrer">Download Java Source</a> See insertBlob method.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">demo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sql</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sql</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PreparedStatement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">oracle</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">jdbc</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">driver</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">oracle</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sql</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">BLOB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">* Insert record in the MEDIA table</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*   MEDIA (file_name varchar2(256), file_content BLOB);</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BlobOracle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> hostname </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1521"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> sid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ORCL"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"scott"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"tiger"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> fileLocation</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Connection</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">BlobOracle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  * @param args</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\n\n  Usage demo.BlobOracle "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fileLocation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">insertBLOB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">SQLException</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">DriverManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerDriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">oracle</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">jdbc</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name namespace" style="opacity:0.7">driver</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">OracleDriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DriverManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"jdbc:oracle:thin:@"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">hostname</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">":"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">":"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> sid </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> username </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAutoCommit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// we must control the commit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertBLOB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">SQLException</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">BLOB</span><span class="token plain"> blob</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">File</span><span class="token plain"> file </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">FileInputStream</span><span class="token plain"> is</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">OutputStream</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> ts1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Create a statement.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">PreparedStatement</span><span class="token plain"> pstmt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"insert into media (file_name, file_content) values (?,empty_blob())"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileLocation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">String</span><span class="token plain"> fileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Set the file name and execute the query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Take back the record for update (we will insert the blob)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//supposely the file name is the PK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pstmt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"select file_content from media where file_name = ? for update"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Execute the query, and we must have one record so take it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">ResultSet</span><span class="token plain"> rset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Use the OracleDriver resultset, we take the blob locator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      blob </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">OracleResultSet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">rset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBLOB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"file_content"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      is </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FileInputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Create a stream from the file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// JDBC 2.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//os = blob.getBinaryOutputStream(); //get the output stream from the Blob to insert it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// JDBC 3.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      os </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> blob</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setBinaryStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//get the output stream from the Blob to insert it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Read the file by chuncks and insert them in the Blob. The chunk size come from the blob</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> chunk </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">blob</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getChunkSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Inserting the Blob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> is</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">!=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Write the chunk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">'.'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// print progression</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// When done close the streams</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      is</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//Close the statement and commit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> ts2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\n"</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ts2 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ts1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">" ms"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Struts or JSF by Craig McClanahan]]></title>
            <link>https://tgrall.github.io/blog/2004/09/29/struts-or-jsf-by-craig-mcclanahan</link>
            <guid>/2004/09/29/struts-or-jsf-by-craig-mcclanahan</guid>
            <pubDate>Wed, 29 Sep 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Craig McClanahan has started a blog... and his second post -after a quick introduction- is about the 'hot' subject of the usage of Struts or JSF.]]></description>
            <content:encoded><![CDATA[<p>Craig McClanahan has started a blog... and his second post -after a quick introduction- is about the 'hot' subject of the usage of <a href="http://blogs.sun.com/roller/page/craigmcc/20040927#struts_or_jsf_struts_and" target="_blank" rel="noopener noreferrer">Struts or JSF</a>.</p><p>Quote:</p><blockquote><p>For new development, here's the best strategy for determining what to do:</p></blockquote><blockquote><ul><li>Evaluate the two technologies individually, to see if they satisfy your requirements.</li><li>If one or the other technology is sufficient, go ahead and use it (it's easier to learn and use one technology rather than two where possible); keeping in mind, however, the caveats about Struts HTML tags mentioned above.</li><li>If your requirements include unique features supported only by Struts (such as Tiles or client side validation support), feel free to use the two frameworks together.</li></ul></blockquote>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Persistence reconciliation for POJO....]]></title>
            <link>https://tgrall.github.io/blog/2004/09/27/persistence-reconciliation-for-pojo-dot-dot-dot</link>
            <guid>/2004/09/27/persistence-reconciliation-for-pojo-dot-dot-dot</guid>
            <pubDate>Mon, 27 Sep 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Sun has sent a letter to the Java Community to start a single POJO persistence model, this will be done under the EJB 3.0 specification (JSR-220).]]></description>
            <content:encoded><![CDATA[<p>Sun has sent a <a href="http://java.sun.com/j2ee/letter/persistence.html" target="_blank" rel="noopener noreferrer">letter to the Java Community</a> to start a single POJO persistence model, this will be done under the EJB 3.0 specification (<a href="http://jcp.org/en/jsr/detail?id=220" target="_blank" rel="noopener noreferrer">JSR-220</a>).</p><p>You can see comments from the community on <a href="http://www.theserverside.com/news/thread.tss?thread_id=28995" target="_blank" rel="noopener noreferrer">TheServerSide Web site</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle Application Server 10g Sets World Record SPECjAppServer 2002 Performance Result on Fujitsu PRIMEPOWER Servers]]></title>
            <link>https://tgrall.github.io/blog/2004/09/14/oracle-application-server-10g-sets-world-record-specjappserver-2002-performance-result-on-fujitsu-primepower-servers</link>
            <guid>/2004/09/14/oracle-application-server-10g-sets-world-record-specjappserver-2002-performance-result-on-fujitsu-primepower-servers</guid>
            <pubDate>Tue, 14 Sep 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle and Fujistu just announced new SpecJ2002 results, establishing a new record of 5,991.73 TOPS@MultipleNode (total operations per second) with a price-performance of 654.20 Euros/TOPS@MultipleNode. This was realized using Oracle Application Server 10g running on Fujitsu servers.]]></description>
            <content:encoded><![CDATA[<p>Oracle and Fujistu just announced new SpecJ2002 results, establishing a new record of 5,991.73 TOPS@MultipleNode (total operations per second) with a price-performance of 654.20 Euros/TOPS@MultipleNode. This was realized using <a href="http://www.oracle.com/technology/products/ias/index.html" target="_blank" rel="noopener noreferrer">Oracle Application Server 10<em>g</em></a> running on <a href="http://fujitsu.com" target="_blank" rel="noopener noreferrer">Fujitsu servers</a>.</p><p>The results are available on the <a href="http://www.specbench.org/jAppServer2002/results/jAppServer2002.html#MultipleNode" target="_blank" rel="noopener noreferrer">Spec Web site</a>, the Press Release <a href="http://www.prnewswire.com/news/index_mail.shtml?ACCT=104&amp;STORY=/www/story/09-14-2004/0002249793&amp;EDATE=" target="_blank" rel="noopener noreferrer">here</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[O/R Mapping Benchmark: new Oracle Toplink results]]></title>
            <link>https://tgrall.github.io/blog/2004/09/07/o-slash-r-mapping-benchmark-new-oracle-toplink-results</link>
            <guid>/2004/09/07/o-slash-r-mapping-benchmark-new-oracle-toplink-results</guid>
            <pubDate>Tue, 07 Sep 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[The Middleware company has created an initiative to test the different Object-Relational mapping tools, this test is named Torpedo. You can find the announcement of this O-R benchmark initiative on TSS Web site.]]></description>
            <content:encoded><![CDATA[<p>The Middleware company has created an initiative to test the different Object-Relational mapping tools, this test is named <a href="http://www.middlewareresearch.com/torpedo/" target="_blank" rel="noopener noreferrer">Torpedo</a>. You can find the announcement of this O-R benchmark initiative on <a href="http://www.theserverside.com/news/thread.tss?thread_id=27761" target="_blank" rel="noopener noreferrer">TSS Web site</a>.</p><p>Oracle Toplink just posted news results that you can read and comment <a href="http://theserverside.com/news/thread.tss?thread_id=28518" target="_blank" rel="noopener noreferrer">here</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Portlet Development Book and Web Site]]></title>
            <link>https://tgrall.github.io/blog/2004/08/27/portlet-development-book-and-web-site</link>
            <guid>/2004/08/27/portlet-development-book-and-web-site</guid>
            <pubDate>Fri, 27 Aug 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Portalbook.com is the site of Jeff Linwood and Dave Minter, authors of the book Building Portals with the Java Portlet API.]]></description>
            <content:encoded><![CDATA[<p><a href="http://portalbook.com/" target="_blank" rel="noopener noreferrer">Portalbook.com</a> is the site of Jeff Linwood and Dave Minter, authors of the book <em><a href="http://apress.com/book/bookDisplay.html?bID=362" target="_blank" rel="noopener noreferrer">Building Portals with the Java Portlet API</a></em>.</p><p>If you are interested in Portlet development, bookmark this site and buy the <a href="http://apress.com/book/bookDisplay.html?bID=362" target="_blank" rel="noopener noreferrer">aPress book</a> !</p><p>I did not have a chance to read the book yet, so feel free to give your feedback as comment.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Have we lost the Groove ?]]></title>
            <link>https://tgrall.github.io/blog/2004/08/22/have-we-lost-the-groove</link>
            <guid>/2004/08/22/have-we-lost-the-groove</guid>
            <pubDate>Sun, 22 Aug 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Like lot of Java developers I was very excited about the announcement of the creation of the JSR-241... But where are we now ?]]></description>
            <content:encoded><![CDATA[<p>Like lot of Java developers I was very excited about the announcement of the creation of the JSR-241... But where are we now ?</p><p>The JSR mailing list (<a href="http://news.gmane.org/gmane.comp.lang.groovy.jsr" target="_blank" rel="noopener noreferrer">http://news.gmane.org/gmane.comp.lang.groovy.jsr</a> ) is very quiet... No meeting, not a lot of question/response. And like Patrick M. I have friends that have asked to be part of the Expert Group and never had any response.</p><p>I think that the Groovy Language is really a nice way of putting Java to the next level, easier to learn, to use and still powerful... I will not go in an enumeration of the benefits of Groovy here... but just asking what the Expert Group is doing ? What is the next step for the Groovy Language and the JCP ?</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Oracle releases early version of JavaServer Faces Components]]></title>
            <link>https://tgrall.github.io/blog/2004/08/17/oracle-releases-early-version-of-javaserver-faces-components</link>
            <guid>/2004/08/17/oracle-releases-early-version-of-javaserver-faces-components</guid>
            <pubDate>Tue, 17 Aug 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Oracle has been involved in the JavaServer Faces (JSR 127) since its creation, and released yesterday a set of components. The list of the available component is available here.]]></description>
            <content:encoded><![CDATA[<p>Oracle has been involved in the JavaServer Faces (JSR 127) since its creation, and released yesterday a set of components. The list of the available component is available <a href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/jsf/doc/tagdoc/core/index.html" target="_blank" rel="noopener noreferrer">here</a>.</p><p><a href="http://www.oracle.com/technology/products/jdev/htdocs/partners/addins/exchange/jsf/index.html" target="_blank" rel="noopener noreferrer">The software is available for download on OTN</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Weather syndication]]></title>
            <link>https://tgrall.github.io/blog/2004/07/29/weather-syndication</link>
            <guid>/2004/07/29/weather-syndication</guid>
            <pubDate>Thu, 29 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Lot of us want to create portlets (or publish content) based on weather information. The best solution that I found is the Weather Channel XML.]]></description>
            <content:encoded><![CDATA[<p>Lot of us want to create portlets (or publish content) based on weather information. The best solution that I found is the <a href="http://www.weather.com/services/xmloap.html" target="_blank" rel="noopener noreferrer">Weather Channel XML</a>.</p><p>And I was really impressed by <a href="http://www.xoapweather.com" target="_blank" rel="noopener noreferrer">xaopWeather</a> (PHP based)!
Let me know if you find an equivalent but Java based !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[AspectJ Tool for JDeveloper 10g]]></title>
            <link>https://tgrall.github.io/blog/2004/07/14/aspectj-tool-for-jdeveloper-10g</link>
            <guid>/2004/07/14/aspectj-tool-for-jdeveloper-10g</guid>
            <pubDate>Wed, 14 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Gerard Davidson has created a java.net project to integrate AOP Framework to JDeveloper 10g, starting with an extension for AspectJ!]]></description>
            <content:encoded><![CDATA[<p>Gerard Davidson has created a java.net project to integrate AOP Framework to <a href="http://jdeveloperaop.dev.java.net/" target="_blank" rel="noopener noreferrer">JDeveloper 10<em>g</em></a>, starting with an extension for <a href="http://eclipse.org/aspectj/" target="_blank" rel="noopener noreferrer">AspectJ</a>!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Struts 1.2.1 Beta available /  JDeveloper 10g How-To]]></title>
            <link>https://tgrall.github.io/blog/2004/07/12/struts-1-dot-2-1-beta-available-slash-jdeveloper-10g-how-to</link>
            <guid>/2004/07/12/struts-1-dot-2-1-beta-available-slash-jdeveloper-10g-how-to</guid>
            <pubDate>Mon, 12 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Struts 1.2.1 Beta is now available for download.]]></description>
            <content:encoded><![CDATA[<p><a href="http://struts.apache.org/announce.html" target="_blank" rel="noopener noreferrer">Struts 1.2.1 Beta</a> is now available for download.</p><p>Duncan Mills published on OTN an article that explains how-to use Struts 1.2.1 with <a href="http://otn.oracle.com/products/jdev/tips/mills/struts1_2_1.html" target="_blank" rel="noopener noreferrer">Oracle JDeveloper 10<em>g</em></a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Which Version I am running ?]]></title>
            <link>https://tgrall.github.io/blog/2004/07/12/which-version-i-am-running</link>
            <guid>/2004/07/12/which-version-i-am-running</guid>
            <pubDate>Mon, 12 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Today I was helping a customer on a deployment issue...]]></description>
            <content:encoded><![CDATA[<p>Today I was helping a customer on a deployment issue...</p><p>The first question that I have asked is:</p><p>"<em>Which version of OC4J are you using ?</em>".</p><p>And he has no idea !</p><p>So let me give you some tips to know the version of Oracle components that you are using...</p><p>====
OC4J</p><p>In the j2ee/home directory:</p><blockquote><p><code>java -jar oc4j.jar -version</code></p></blockquote><p>====
JPDK</p><p>Go in the provider test page</p><blockquote><p><code>http://server:port/context/providers/your-provider</code></p></blockquote><p>You can see the version of the in the bottom of the page. In the JPDK you can also use the <code>HttpCommonConstants.COMPONENT_VERSIONS</code> to access it programmatically.</p><p>Also if you  are looking for a version of a specific component, Oracle development often use a 'version file' into the jar file of this component.This is the case for example for:</p><ul><li>Portals: ptlshare.jar, wsrp-container.jar, wsrp-container.jar, pdkjava.jar, portaltools.jar</li><li>Oracle XML: xmlparserv2.jar,oraclexsql.jar, xsqlserializers.jar</li><li>UIX: uix2.jar, jewt4.jar</li><li>BI Bean: bigraphbean.jar</li></ul><p><em>Update following Markus comments:</em></p><p>Markus made me realized that I forgot to mention the standard way of checking the version of a product. It is also possible, and done by most of the Oracle components, to put the version number into the Manifest file of any archive. So take a look to the manifest, and if it is not available you can look for a version file into the archive.</p><p>So next time somebody ask you which version of the product you are using you will be all set !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Opening the Black Box of Integration]]></title>
            <link>https://tgrall.github.io/blog/2004/07/09/opening-the-black-box-of-integration</link>
            <guid>/2004/07/09/opening-the-black-box-of-integration</guid>
            <pubDate>Fri, 09 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Web Service Journal just publish an article 'Opening the Black Box of Integration' written by Mike Lehmann OracleAS 10g Product Manager.]]></description>
            <content:encoded><![CDATA[<p>Web Service Journal just publish <a href="http://sys-con.com/story/?storyid=45525&amp;DE=1_" target="_blank" rel="noopener noreferrer">an article 'Opening the Black Box of Integration'</a> written by <a href="http://radio.weblogs.com/0132036/" target="_blank" rel="noopener noreferrer">Mike Lehmann</a> OracleAS 10<em>g</em> Product Manager.</p><p>Summary:</p><blockquote><p>If you've been working with integration technologies for any length of time, you're well aware of the freight train of standards that has been careening through the industry during the last five years. These standards, particularly in the Web services space, are on the verge of doing to proprietary integration servers what SQL and J2EE standards did to database and middle-tier servers of days gone by.</p></blockquote>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Shirky.com: In Praise of Evolvable Systems]]></title>
            <link>https://tgrall.github.io/blog/2004/04/08/shirky-dot-com-in-praise-of-evolvable-systems</link>
            <guid>/2004/04/08/shirky-dot-com-in-praise-of-evolvable-systems</guid>
            <pubDate>Thu, 08 Apr 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[Rob,colleague of mine, pointed me to an article about "Evolvable Systems":]]></description>
            <content:encoded><![CDATA[<p>Rob,colleague of mine, pointed me to an article about "<a href="http://www.shirky.com/writings/evolve.html" target="_blank" rel="noopener noreferrer">Evolvable Systems</a>":</p><p><em>Why something as poorly designed as the Web became The Next Big Thing, and what that means for the future</em>.</p><p>First of all this article is very interesting, but the whole site -that I did not know- is full of truth, and fun ! ( I love the one about blogs)</p><p>I invite you to bookmark <a href="http://www.shirky.com" target="_blank" rel="noopener noreferrer">http://www.shirky.com</a> !</p><p>Thanks again Rob!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaOne and Apple WWDC 2004]]></title>
            <link>https://tgrall.github.io/blog/2004/04/07/javaone-and-apple-wwdc-2004</link>
            <guid>/2004/04/07/javaone-and-apple-wwdc-2004</guid>
            <pubDate>Wed, 07 Apr 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[I have been working on the JavaOne Oracle Demo Ground where I was demonstrating OracleAS Portal 10g. I also attend several sessions (EJB 3.0 & CMP Persistence, J2EE 1.4 Web Services, AOP) and Thomas Kurian and James Gosling keynotes.]]></description>
            <content:encoded><![CDATA[<p>I have been working on the JavaOne Oracle Demo Ground where I was demonstrating OracleAS Portal 10<em>g</em>. I also attend several sessions (EJB 3.0 &amp; CMP Persistence, J2EE 1.4 Web Services, AOP) and Thomas Kurian and James Gosling keynotes.</p><p>Also Tuesday afternoon I have been on duty on the Oracle Pod in the Apple developer conference, where I was demonstrating Oracle RDMS and JDeveloper 10g.  </p><p><em>JavaOne</em></p><p>Oracle had a very nice and big demo ground, with the best location: in the front of the main entrance. The main theme was Racing Cars. Oracle organized racing contest using Sony Play Station with Gran Turismo 3.</p><p>The 10 stations demonstrated the same application that recall the main theme since user can create easily a new racing team. To summarize, we have developed   a J2EE 1.3/1.4 application using ADF and POJO (Toplink) but also we integrated  JSF for the view, Web Service call and integration with business process using the new <a href="http://otn.oracle.com/bpel" target="_blank" rel="noopener noreferrer">Oracle BPEL Process Manager</a>. (Oracle announced the acquisition of Collaxa).</p><p>On the Portal station, the demo showed how easy it is to integrate existing MVC application(Struts, ADF, ...) using the Oracle JPDK. Portal teal also built a nice demonstration that shows the same portlet -business logic and view- developed using proprietary APIs (JPDK) and standard based implementation (WSRP &amp; JSR-168). Lot of people stop by the portal pod, and I was pleased with the quality of the questions:</p><ul><li><p>Portlet Standards: Oracle provides a JSR-168/WSRP container but also a <a href="http://otn.oracle.com/software/products/ias/preview.html" target="_blank" rel="noopener noreferrer">Developer Preview of the OracleAS 10g Portal</a> that allows you to register and executes WSRP based portlet.</p></li><li><p>Struts, ADF, ad JSF integration: The <a href="http://portalstudio.oracle.com/pls/ops/docs/FOLDER/COMMUNITY/PDK/ARTICLES/pdkstruts/portal-struts-wp.html" target="_blank" rel="noopener noreferrer">Oracle PDK provides a Struts integration</a> based on extension of the Struts Tags and has a specific Portlet Renderer.</p></li><li><p>Web Services &amp; Portal: OmniPortlet and Coded Portlets allow developer to easily integrate Web Services into Portal.. and for example it is easy to create a portlet that will kick-off a Business Process that is running inside the Oracle BPEL Process Manager.</p></li></ul><p>Linda DiMichel's session about EJB 3.0 was a big one, the room was packed. EJB is taking the good path. Simplification of the objects no need to multiply the artifacts and deployment descriptors: EJB 3.0 will use Java annotations. 3.0 will use POJO -Plain Old Java Objects- and allow native SQL. This is just a very short summary of the new spec that looks very very good ! (and similar to what Toplink is doing for years)</p><p>AOP was also on of the think I wanted to see during this event. I was really pleased by the AOP Panel of Wednesday afternoon. James Gosling, Graham Hamilton, Cedric Beust and Gregor Kiczales presented and discussed AOP in general and AOP in J2EE/Java in particular. My interpretation of the whole discussion is:</p><p>Everybody thinks that AOP is interesting, and will make code cleaner; but we have a lot to do to simplify the development. Like Cedric and James said, I am "conflicted" about AOP, and I think the reason is because we see the benefits of AOP in simple case such as logging... But harder to implement cleanly when the aspects are complex such as authentication/authorization or persistence. The Java community still need to work on this to be sure that developers will develop better code; AOP will give it, just have to find the good way ! I have also watched Alex Vasseur and Jonas Boner's session about AOP and J2EE, mainly focus on <a href="http://aspectwerkz.codehaus.org/" target="_blank" rel="noopener noreferrer">AspectWerkz</a>. I really liked the paper with lot of demonstration that show simple and concrete example of AOP within J2EE container.</p><p>Like lot of us I will continue to invest into AOP and experiment it within the J2EE world. James Strachan - JSR 241 Lead- session was also a very popular one. This session introduced the Groovy Programming Language that leverage the Java Language but using a concise and object oriented scripting language. I will not detail the content of groovy here, it will be better for you to take a quick look to the <a href="http://groovy.codehaus.org/" target="_blank" rel="noopener noreferrer">Groovy Web Site</a> knowing that you can download the language and start to develop script with it.</p><p><em>Apple WWDC 2004</em></p><p>I was not able to attend any session... not event Steve Job's keynote. But I worked on the Oracle demo pod Tuesday afternoon.</p><p>We had 2 dual G5 with 'old' cinema displays -hope that next year we will have the <a href="http://www.apple.com/displays/" target="_blank" rel="noopener noreferrer">30 inches display!</a>-, these machines were used to run Oracle 10<em>g</em> database and JDeveloper, currently available to developer, you can download them from <a href="http://otn.oracle.com/macos" target="_blank" rel="noopener noreferrer">OTN</a>.</p><p>But the big news is the fact that these products will be production on Mac OS X soon:</p><ul><li><p>Oracle 10<em>g</em> server production in fall</p></li><li><p>Oracle 10<em>g</em> JDeveloper production in September</p></li></ul>]]></content:encoded>
            <category>java</category>
            <category>javaEE</category>
        </item>
        <item>
            <title><![CDATA[Do not remember the default password... here a list...]]></title>
            <link>https://tgrall.github.io/blog/2004/01/26/do-not-remember-the-default-password-dot-dot-dot-here-a-list-dot-dot-dot</link>
            <guid>/2004/01/26/do-not-remember-the-default-password-dot-dot-dot-here-a-list-dot-dot-dot</guid>
            <pubDate>Mon, 26 Jan 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[I am sure that like me sometimes when you are testing product you do not know, or remember the default password.]]></description>
            <content:encoded><![CDATA[<p>I am sure that like me sometimes when you are testing product you do not know, or remember the default password.</p><p>Take a look the the <a href="http://www.cirt.net/cgi-bin/passwd.pl" target="_blank" rel="noopener noreferrer">CIRT Web Site</a>, not necessary up-to-date, but better than nothing!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OmniPortlet tip: use stored procedure with the SQL data source]]></title>
            <link>https://tgrall.github.io/blog/2003/11/19/omniportlet-tip-use-stored-procedure-with-the-sql-data-source</link>
            <guid>/2003/11/19/omniportlet-tip-use-stored-procedure-with-the-sql-data-source</guid>
            <pubDate>Wed, 19 Nov 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[OmniPortlet provides to page designer an easy and powerful way to publish]]></description>
            <content:encoded><![CDATA[<p>OmniPortlet provides to page designer an easy and powerful way to publish
content from different data sources. One of the data source is a SQL data source
that allow you to connect to a relational database using JDBC. Obviously you can
enter any SQL statement, but you can also consume a REF CURSOT returned by a
procedure.</p><p>That is really interesting if you want to add business logic to your data,or
have to set some specific code before the execution of the query.</p><p>To to it you have to create a <b>procedure</b> that has the first parameter the
return a ref cursor:
<code>procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number);</code></p><p>Here a complete package based on the SCOTT sample schema:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> create or replace package EMPLOYEE_API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -- create a ref cursor type that will be return to the consumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> type ref_cursor is ref cursor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -- return in the p_ref_cursor the list of employees for the department p_dept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> end;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create or replace package body EMPLOYEE_API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -- return in the p_ref_cursor the list of employees for the department p_dept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> begin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- open the cusor based on the emp table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OPEN p_ref_cursor FOR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SELECT * from emp WHERE deptno = p_dept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> end;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the Statement field of the OmniPortlet SQL data source you can now enter:</p><span class="code">call EMPLOYEE_API.get_employee_for_dept('10')</span><p>Enjoy OmniPortlet !</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to configure Web Cache to cache remote portlet content]]></title>
            <link>https://tgrall.github.io/blog/2003/11/16/how-to-configure-web-cache-to-cache-remote-portlet-content</link>
            <guid>/2003/11/16/how-to-configure-web-cache-to-cache-remote-portlet-content</guid>
            <pubDate>Sun, 16 Nov 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[Some portlet developers have hard time to set up a correct environment to use]]></description>
            <content:encoded><![CDATA[<p>Some portlet developers have hard time to set up a correct environment to use
invalidation based cache with portlets. The summary is often:<br>
<em>"it is working with the PDK Example provided in Oracle 9iAS but every
time that I want to do it myself from Oracle JDeveloper or a stand alone OC4J
the portlet is not cached !"</em></p><p>This is most of the case due to a bad understanding of the different components
that are involved.</p><p>When we talk about invalidation based caching for Remote Portlet, we talk about
a portlet that caches its content in a Web Cache that <strong>is between the
Portal Midtier and the Web Provider Midtier</strong>. This is a first important
point. That also means that you have to register your remote Web provider using
a URL that points to this Web Cache.</p><p>![](<a href="http://www.grallandco.com/images/blog/webcache.png" target="_blank" rel="noopener noreferrer">http://www.grallandco.com/images/blog/webcache.png</a> 461 287 PPE, Web Cache and Web Provider)</p><p>So when you are developing a portlet within Oracle JDeveloper or deploying
a portlet to an OC4J or an AS and you want to use invalidation based caching
you have to put a Web Cache between the PPE and the Application Server that
you are using. Let's take an example based on a execution of the Web Provider
inside JDeveloper -embedded OC4J-, a URL like: <code>http://dev-machine:port/application/providers</code>.</p><p>So to cache the content of the portlets that are running in
this OC4J you have to configure Web Cache using Web Cache Manager and:</p><ol><li>create an Application Web Server that is the embedded OC4J</li><li>create a new Site Definition, this will create a new HTTP port, that you'll
use to register your provider.</li><li>finally you have to create a "Site to server mapping", where you
associate the OC4J to the new HTTP port.</li></ol><p>After the bounce of Web Cache you can use the HTTP port on the Web Cache server
to access your provider, and if the portlet is correctly configured -<a href="http://portalstudio.oracle.com/pls/ops/docs/FOLDER/COMMUNITY/PDK/JPDK/V2/DOC/WEBCACHE/INSTALLINGINVALIDATIONCACHESAMPLE.HTML" target="_blank" rel="noopener noreferrer">see this Oracle article</a> -to support invalidation based caching; its content
will be automatically cached.</p><p>Note: <em>this tip is not limited to Portlet but to any application that you want to develop and enhance using invalidation based caching.</em></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Add columns to OmniPortlet]]></title>
            <link>https://tgrall.github.io/blog/2003/11/03/add-columns-to-omniportlet</link>
            <guid>/2003/11/03/add-columns-to-omniportlet</guid>
            <pubDate>Mon, 03 Nov 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[I had some questions about the limitation to 5 columns of the]]></description>
            <content:encoded><![CDATA[<p>I had some questions about the limitation to 5 columns of the
OmniPortlet tabular layout. Here is a tip to add more columns to this
layout:</p><ol><li><p>backup the current OmniPortlet provider.xml
<code>/OC4J_HOME/applications/portalTools/omniPortlet/WEB-INF/providers/omniPortlet</code></p></li><li><p>You can now open the file, and look for the tag <code>&lt;dataField</code></p></li></ol><ol start="3"><li>You can add new fields, by copying the existing <code>&lt;dataField&gt;</code> tag and
change the value of the <code>&lt;name&gt;</code> and <code>&lt;displayName&gt;</code></li></ol><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dataField</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">oracle.webdb.reformlet.definition.DataFieldDefinition</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Field6</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">displayName</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Column6</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">displayName</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Field6</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">text</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">##column##</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">text</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">alignment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">left</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">alignment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">displayAs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">hidden</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">displayAs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">linebreak</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">font</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Arial.3.Plain.None</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">font</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">color</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">#000000</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">color</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">none</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">styleType</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">custom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">styleType</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dataField</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The same logic could be used to add parameters or events to the OmniPortlet.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Looking for Portlets ?]]></title>
            <link>https://tgrall.github.io/blog/2003/10/27/looking-for-portlets</link>
            <guid>/2003/10/27/looking-for-portlets</guid>
            <pubDate>Mon, 27 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[You are implementing a Portal based on Oracle 9iAS Portal, do not reinvent the wheel !]]></description>
            <content:encoded><![CDATA[<p>You are implementing a Portal based on Oracle 9<em>i</em>AS Portal, do not reinvent the wheel !</p><p>The <a href="http://portalstudio.oracle.com/servlet/page?_pageid=3050&amp;_dad=ops&amp;_schema=OPSTUDIO&amp;_mode=3" target="_blank" rel="noopener noreferrer">Portal Center Knowledge Exchange</a> is a great place to find portlets, articles, tips and technics from the Portlet Developer Community ! You just have to suscribe for free to the
<a href="http://portalstudio.oracle.com/servlet/page?_pageid=2241&amp;_dad=ops&amp;_schema=OPSTUDIO&amp;_mode=3" target="_blank" rel="noopener noreferrer">Developer Services</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Portlet with a vertical scroll bar]]></title>
            <link>https://tgrall.github.io/blog/2003/10/27/portlet-with-a-vertical-scroll-bar</link>
            <guid>/2003/10/27/portlet-with-a-vertical-scroll-bar</guid>
            <pubDate>Mon, 27 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[To have a better control of the layout of your Portal Pages, you can use a]]></description>
            <content:encoded><![CDATA[<p>To have a better control of the layout of your Portal Pages, you can use a
vertical scroll bar in portlet wihout having to use iFrame technology.
CSS provide us lof of power to do it.</p><ol><li>Create a style in your portlet (or in the portlet container code):</li></ol><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css"></span><span class="token style language-css selector class" style="color:#00009f">.scroll</span><span class="token style language-css selector" style="color:#00009f">&lt;i</span><span class="token style language-css selector combinator" style="color:#00009f">&gt;</span><span class="token style language-css selector" style="color:#00009f">portletId&lt;/i</span><span class="token style language-css selector combinator" style="color:#00009f">&gt;</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:#393A34">{</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">  </span><span class="token style language-css property" style="color:#36acaa">height</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css number" style="color:#36acaa">200</span><span class="token style language-css unit">px</span><span class="token style language-css punctuation" style="color:#393A34">;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">  </span><span class="token style language-css property" style="color:#36acaa">overflow</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css"> auto</span><span class="token style language-css punctuation" style="color:#393A34">;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css"></span><span class="token style language-css punctuation" style="color:#393A34">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Use this style in a <code>DIV</code> section:</li></ol><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">scrollportletId</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The content of this section will be vertically scrollable.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
    </channel>
</rss>