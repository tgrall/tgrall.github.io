<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tug&#39;s Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tug&#39;s Site Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-1520374-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Blog | Tug&#x27;s Site</title><meta data-react-helmet="true" property="og:title" content="Blog | Tug&#x27;s Site"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://tgrall.github.io/blog/page/2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tgrall.github.io/blog/page/2"><link data-react-helmet="true" rel="alternate" href="https://tgrall.github.io/blog/page/2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tgrall.github.io/blog/page/2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.acbe81c6.css">
<link rel="preload" href="/assets/js/runtime~main.bfa5f292.js" as="script">
<link rel="preload" href="/assets/js/main.f5c6966c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Tug&#x27;s Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://windr.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Windsurfing App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/tgrall/tgrall.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2020/05/16/simple-caching-service-with-redis">Simple caching service with Redis</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2020/01/02/how-to-use-ssl-slash-tls-with-redis-enterprise">How to use SSL/TLS with Redis Enterprise</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/09/19/redis-rolling-upgrade-on-pivotal-cloud-foundry-pcf">Redis Rolling Upgrade on Pivotal Cloud Foundry (PCF)</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/09/04/multi-nodes-redis-cluster-with-docker">Multi-Nodes Redis Cluster with Docker</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/09/02/getting-with-redis-streams-and-java">Getting Started with Redis Streams and Java</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/10/12/getting-started-with-apache-flink-and-kafka">Getting started with Apache Flink and Kafka</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-10-12T00:00:00.000Z" itemprop="datePublished">October 12, 2016</time> Â· 5 min read</div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p><a href="https://flink.apache.org/" target="_blank" rel="noopener noreferrer">Apache Flink</a> is an open source platform for distributed stream and batch data processing. Flink is a streaming data flow engine with several APIs to create data streams oriented application.</p><p>It is very common for Flink applications to use <a href="http://kafka.apache.org/" target="_blank" rel="noopener noreferrer">Apache Kafka</a> for data input and output. This article will guide you into  the steps to use Apache Flink with Kafka.</p><p>![]( center /images/posts/flink-kafka/flink-kafka.png Flink-Kafka )</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Getting started with Apache Flink and Kafka" href="/blog/2016/10/12/getting-started-with-apache-flink-and-kafka"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/09/26/streaming-analytics-in-a-digitally-industrialized-world">Streaming Analytics in a Digitally Industrialized World</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-09-26T00:00:00.000Z" itemprop="datePublished">September 26, 2016</time> Â· 4 min read</div></header><div class="markdown" itemprop="articleBody"><p>Get an introduction to streaming analytics, which allows you real-time insight from captured events and big data. There are applications across industries, from finance to wine making, though there are two primary challenges to be addressed.</p><p>Did you know that a plane flying from Texas to London can generate 30 million data points per flight? As Jim Daily of GE Aviation notes, that equals <a href="https://www.ge.com/digital/blog/industrial-iot-improving-airline-economics" target="_blank" rel="noopener noreferrer">10 billion data points</a> in one year. And weâ€™re talking about one plane alone. So you can understand why <a href="http://cloudblog.ericsson.com/cloud-scalability-combined-with-speed-inside-ges-cloud-transformation" target="_blank" rel="noopener noreferrer">another top GE executive recently told Ericsson Business Review</a> that &quot;Cloud is the future of IT,&quot; with a focus on supporting challenging applications in industries such as aviation and energy.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Streaming Analytics in a Digitally Industrialized World" href="/blog/2016/09/26/streaming-analytics-in-a-digitally-industrialized-world"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/09/01/setting-up-spark-dynamic-allocation-on-mapr">Setting up Spark Dynamic Allocation on MapR</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-09-01T00:00:00.000Z" itemprop="datePublished">September 1, 2016</time> Â· 3 min read</div></header><div class="markdown" itemprop="articleBody"><p>Apache Spark can use various cluster manager to execute application (Stand Alone, YARN, Apache Mesos). When you install Apache Spark on MapR you can submit application in a Stand Alone mode or using YARN.</p><p>This article focuses on YARN and Dynamic Allocation, a feature that lets Spark add or remove executors dynamically based on the workload. You can find more information about this feature in this presentation from Databricks:</p><ul><li><a href="http://www.slideshare.net/databricks/dynamic-allocation-in-spark" target="_blank" rel="noopener noreferrer">Dynamic Allocation in Spark</a></li></ul><p>Letâ€™s see how to configure Spark and YARN to use dynamic allocation (that is disabled by default).</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Setting up Spark Dynamic Allocation on MapR" href="/blog/2016/09/01/setting-up-spark-dynamic-allocation-on-mapr"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/03/30/save-mapr-streams-messages-into-mapr-db-json">Save MapR Streams messages into MapR DB JSON</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-03-30T00:00:00.000Z" itemprop="datePublished">March 30, 2016</time> Â· 4 min read</div></header><div class="markdown" itemprop="articleBody"><p>In this article you will learn how to create a MapR Streams Consumer that saves all the messages into a <a href="http://maprdocs.mapr.com/51/#MapR-DB/JSON_DB/mapr_db_json_top.html" target="_blank" rel="noopener noreferrer">MapR-DB JSON Table</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Save MapR Streams messages into MapR DB JSON" href="/blog/2016/03/30/save-mapr-streams-messages-into-mapr-db-json"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/03/10/getting-started-with-mapr-streams">Getting Started with MapR Streams</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-03-10T00:00:00.000Z" itemprop="datePublished">March 10, 2016</time> Â· One min read</div></header><div class="markdown" itemprop="articleBody"><p>You can find a new tutorial that explains how to deploy an Apache Kafka application to MapR Streams, the tutorial is available here:</p><ul><li><a href="https://www.mapr.com/blog/getting-started-sample-programs-mapr-streams" target="_blank" rel="noopener noreferrer">Getting Started with MapR Streams</a></li></ul><p>MapR Streams is a new distributed messaging system for streaming event data at scale, and itâ€™s integrated into the MapR converged platform.
MapR Streams uses the Apache Kafka API, so if youâ€™re already familiar with Kafka, youâ€™ll find it particularly easy to get started with MapR Streams.</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2016/02/10/getting-started-with-sample-programs-for-apache-kafka-0-dot-9">Getting Started with Sample Programs for Apache Kafka 0.9</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2016-02-10T00:00:00.000Z" itemprop="datePublished">February 10, 2016</time> Â· One min read</div></header><div class="markdown" itemprop="articleBody"><p>Ted Dunning and I have worked on a tutorial that explains how to write your first Kafka application. In this tutorial you will learn how to:</p><ul><li>Install and start Kafka</li><li>Create and Run a producer and a consumer</li></ul><p>You can find the tutorial on the MapR blog:</p><ul><li><a href="https://goo.gl/cWmbmY" target="_blank" rel="noopener noreferrer">Getting Started with Sample Programs for Apache Kafka 0.9</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2015/12/10/using-apache-drill-rest-api-to-build-ascii-dashboard-with-node">Using Apache Drill REST API to build ASCII Dashboard with node</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2015-12-10T00:00:00.000Z" itemprop="datePublished">December 10, 2015</time> Â· 5 min read</div></header><div class="markdown" itemprop="articleBody"><p><a href="http://drill.apache.org" target="_blank" rel="noopener noreferrer">Apache Drill</a> has a hidden gem: an easy to use REST interface. This API can be used to Query, Profile and Configure Drill engine.</p><p>In this blog post I will explain how to use Drill REST API to create ascii dashboards using <a href="https://www.npmjs.com/package/blessed-contrib" target="_blank" rel="noopener noreferrer">Blessed Contrib</a>.</p><p>The ASCII Dashboard looks like</p><p><img alt="Dashboard" src="/assets/images/dashboard_demo-b5ddedf89587391e12ef9f1c7b473a1b.gif"></p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Using Apache Drill REST API to build ASCII Dashboard with node" href="/blog/2015/12/10/using-apache-drill-rest-api-to-build-ascii-dashboard-with-node"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2015/08/17/convert-csv-file-to-apache-parquet-dot-dot-dot-with-drill">Convert a CSV File to Apache Parquet with Drill</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2015-08-17T00:00:00.000Z" itemprop="datePublished">August 17, 2015</time> Â· 3 min read</div></header><div class="markdown" itemprop="articleBody"><p>A very common use case when working with Hadoop is to store and query simple files (CSV, TSV, ...); then to get better performance and efficient storage convert these files into more efficient format, for example <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Apache Parquet</a>.</p><p><a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Apache Parquet</a> is a <a href="https://en.wikipedia.org/wiki/Column-oriented_DBMS" target="_blank" rel="noopener noreferrer">columnar storage format</a> available to any project in the Hadoop ecosystem. Apache Parquet has the following characteristics:</p><ul><li>Self-describing</li><li>Columnar format</li><li>Language-independent</li></ul><p>Let&#x27;s take a concrete example, you can find many interesting Open Data sources that distribute data as CSV files- or equivalent format-. So you can store them into your distributed file system and use them in your applications/jobs/analytics queries. This is not the most efficient way especially when we know that these data won&#x27;t move that often. So instead of simply storing the CSV let&#x27;s copy this information into Parquet.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="how-to-convert-csv-files-into-parquet-files"></a>How to convert CSV files into Parquet files?<a class="hash-link" href="#how-to-convert-csv-files-into-parquet-files" title="Direct link to heading">#</a></h3><p>You can use code to achieve this, as you can see in the <a href="https://github.com/Parquet/parquet-compatibility/blob/master/parquet-compat/src/test/java/parquet/compat/test/ConvertUtils.java" target="_blank" rel="noopener noreferrer">ConvertUtils</a> sample/test class. You can use a simpler way with Apache Drill. Drill allows you save the result of a query as Parquet files.</p><p>The following steps will show you how to do convert a simple CSV into a Parquet file using Drill.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about Convert a CSV File to Apache Parquet with Drill" href="/blog/2015/08/17/convert-csv-file-to-apache-parquet-dot-dot-dot-with-drill"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2015/07/21/apache-drill-how-to-create-a-new-function">Apache Drill : How to create a new function?</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2015-07-21T00:00:00.000Z" itemprop="datePublished">July 21, 2015</time> Â· 8 min read</div></header><div class="markdown" itemprop="articleBody"><p><a href="https://drill.apache.org/" target="_blank" rel="noopener noreferrer">Apache Drill</a> allows users to explore <em>any type of</em> data using ANSI SQL. This is great, but Drill goes even further than that and allows you to create custom functions to extend the query engine. These custom functions have all the performance of any of the Drill primitive operations, but allowing that performance makes writing these functions a little trickier than you might expect.</p><p>In this article, I&#x27;ll explain step by step how to create and deploy a new function using a very basic example. Note that you can find lot of information about <a href="https://drill.apache.org/docs/develop-custom-functions-introduction/" target="_blank" rel="noopener noreferrer">Drill Custom Functions in the documentation</a>.</p><p>Let&#x27;s create a new function that allows you to mask some characters in a string, and let&#x27;s make it very simple. The new function will allow user to hide <em>x</em> number of characters from the start and replace then by any characters of their choice. This will look like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">MASK( &#x27;PASSWORD&#x27; , &#x27;#&#x27; , 4 ) =&gt; ####WORD</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can find the full project in the following <a href="https://github.com/tgrall/drill-simple-mask-function" target="_blank" rel="noopener noreferrer">Github Repository</a>.</p><p>As mentioned before, we could imagine many advanced features to this, but my goal is to focus on the steps to write a custom function, not
so much on what the function does.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>For this you will need:</p><ul><li>Java Developer Kit 7 or later</li><li>Apache Drill 1.1 or later</li><li>Maven 3.0 or later</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dependencies"></a>Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">#</a></h2><p>The following Drill dependency should be added to your maven project</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.drill.exec</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">drill-java-exec</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="source"></a>Source<a class="hash-link" href="#source" title="Direct link to heading">#</a></h2><p>The <code>Mask</code> function is an implementation of the <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/DrillSimpleFunc.java" target="_blank" rel="noopener noreferrer"><code>DrillSimpleFunc</code></a>.</p><p>Developers can create 2 types of custom functions:</p><ul><li>Simple Functions: these functions have a single row as input and produce a single value as output</li><li>Aggregation Functions: that will accept multiple rows as input and produce one value as output</li></ul><p>Simple functions are often referred to as UDF&#x27;s which stands for user defined function.  Aggregation functions are referred to as UDAF which
stands for user defined aggregation function.</p><p>In this example, we just need to transform the value of a column on each row, so a simple function is enough.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="create-the-function"></a>Create the function<a class="hash-link" href="#create-the-function" title="Direct link to heading">#</a></h4><p>The first step is to implement the <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/DrillSimpleFunc.java" target="_blank" rel="noopener noreferrer"><code>DrillSimpleFunc</code></a> interface.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">package org.apache.drill.contrib.function;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.DrillSimpleFunc;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.annotations.FunctionTemplate;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@FunctionTemplate(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&quot;mask&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        scope= FunctionTemplate.FunctionScope.SIMPLE,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        nulls = FunctionTemplate.NullHandling.NULL_IF_NULL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SimpleMaskFunc implements DrillSimpleFunc{</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eval() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The behavior of the function is driven by annotations (line 6-10)</p><ul><li><em>Name</em> of the function</li><li><em>Scope</em> of the function, in our case Simple</li><li>What to do when the value is NULL, in this case Reverse will just returns NULL</li></ul><p>Now we need to implement the logic of the function using <code>setup()</code> and <code>eval()</code> methods.</p><ul><li><code>setup</code> is self-explanatory, and in our case we do not need to setup anything.</li><li><code>eval</code> that is the core of the function. As you can see this method does not have any parameter, and return void. So how does it work?</li></ul><p>In fact the function will be generated dynamically (see <a href="https://github.com/apache/drill/blob/master/exec/java-exec/src/main/java/org/apache/drill/exec/expr/fn/DrillSimpleFuncHolder.java#L42" target="_blank" rel="noopener noreferrer">DrillSimpleFuncHolder</a>), and the input parameters and output holders are defined using holders by annotations. Let&#x27;s look into this.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import io.netty.buffer.DrillBuf;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.DrillSimpleFunc;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.annotations.FunctionTemplate;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.annotations.Output;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.annotations.Param;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.holders.IntHolder;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.holders.NullableVarCharHolder;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.apache.drill.exec.expr.holders.VarCharHolder;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import javax.inject.Inject;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@FunctionTemplate(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        name = &quot;mask&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        scope = FunctionTemplate.FunctionScope.SIMPLE,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        nulls = FunctionTemplate.NullHandling.NULL_IF_NULL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SimpleMaskFunc implements DrillSimpleFunc {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Param</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    NullableVarCharHolder input;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Param(constant = true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    VarCharHolder mask;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Param(constant = true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    IntHolder toReplace;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Output</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    VarCharHolder out;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Inject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    DrillBuf buffer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void eval() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We need to define the parameters of the function. In this case we have 3 parameters, each defined using the <code>@Param</code> annotation.  In addition, we also have to define the returned value using the <code>@Output</code> annotation.</p><p>The parameters of our mask function are:</p><ul><li>A nullable string</li><li>The mask char or string</li><li>The number of characters to replace starting from the first</li></ul><p>The function returns :</p><ul><li>A string</li></ul><p>For each of these parameters you have to use an holder class. For the <code>String</code>, this is managed by a <code>VarCharHolder</code> or <code>NullableVarCharHolder</code> -lines 21, 24,30- that provides a buffer to manage larger objects in a efficient way. Since we are manipulating a <code>VarChar</code> you also have to inject another buffer that will be used for the output -line 33-. Note that Drill doesn&#x27;t actually use the Java heap for data being processed in a query but instead keeps this data off the heap and manages the life-cycle for us without using the Java
garbage collector.</p><p>We are almost done since we have the proper class, the input/output object, we just need to implement the <code>eval()</code> method itself, and use these objects.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">public void eval() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // get the value and replace with</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    String maskValue = org.apache.drill.exec.expr.fn.impl.StringFunctionHelpers.getStringFromVarCharHolder(mask);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    String stringValue = org.apache.drill.exec.expr.fn.impl.StringFunctionHelpers.toStringFromUTF8(input.start, input.end, input.buffer);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    int numberOfCharToReplace = Math.min(toReplace.value, stringValue.length());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // build the mask substring</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    String maskSubString = com.google.common.base.Strings.repeat(maskValue, numberOfCharToReplace);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    String outputValue = (new StringBuilder(maskSubString)).append(stringValue.substring(numberOfCharToReplace)).toString();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // put the output value in the out buffer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    out.buffer = buffer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    out.start = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    out.end = outputValue.getBytes().length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    buffer.setBytes(0, outputValue.getBytes());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The code is quite simple:</p><ul><li>Get the mask itself - line 4</li><li>Get the value - line 5</li><li>Get the number of character to replace - line 7</li><li>Generate a new string with masked values - lines 10/11</li><li>Create and populate the output buffer - lines 14 to 17</li></ul><p>This code does, however, look a bit strange to somebody used to reading Java code. This strangeness arises because the final code that is executed in a query will actually be generated on the fly. This allows Drill to leverage Java&#x27;s just-in-time (JIT) compiler for maximum speed. To make this work, you have to respect some basic rules:</p><ul><li><strong>Do not use imports, but instead use the fully qualified class name</strong>, this is what is done on line 10 with the <code>Strings</code> class. (coming from the Google Guava API packaged in Apache Drill)</li><li>The <code>ValueHolders</code> classes, in our case <code>VarCharHolder</code> and <code>IntHolder</code> should be manipulated like structs, so you must call helper methods, for example <code>getStringFromVarCharHolder</code> and <code>toStringFromUTF8</code>. Calling methods like <code>toString</code> will result in very bad problems.</li></ul><p>Starting in Apache Drill 1.3.x, it is mandatory to specify the package name of your function in the <code>./resources/drill-module.conf</code> file as follow:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">drill {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  classpath.scanning {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    packages : ${?drill.classpath.scanning.packages} [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      org.apache.drill.contrib.function</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We are now ready to deploy and test this new function.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="package"></a>Package<a class="hash-link" href="#package" title="Direct link to heading">#</a></h3><p>Once again since, Drill will generate source, <em><strong>you must prepare your package in a way that classes and sources of the function are present in the classpath</strong></em>. This is different from the way that Java code is normally packaged but is necessary for Drill to be able to do the necessary code generation. Drill uses the compiled code to access the annotations and uses the source code to do code generation.</p><p>An easy way to do that is to use maven to build your project, and, in particular, use the <a href="https://maven.apache.org/plugins/maven-source-plugin/" target="_blank" rel="noopener noreferrer">maven-source-plugin</a> like this in your <code>pom.xml</code> file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-source-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.4</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">attach-sources</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">package</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">jar-no-fork</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now, when you build using <code>mvn package</code>, Maven will generate 2 jars:</p><ul><li>The default jar with the classes and resources (<em>drill-simple-mask-1.0.jar</em>)</li><li>A second jar with the sources (<em>drill-simple-mask-1.0-sources.jar</em>)</li></ul><p>Finally you must add a <code>drill-module.conf</code> file in the resources folder of your project, to tell Drill that your jar contains a custom function. If you have no specific configuration to set for your function you can keep this file empty.</p><p>We are all set, you can now package and deploy the new function, just package and copy the Jars into the Drill 3rd party folder; $DRILL_HOME/jars/3rdparty , where $DRILL_HOME being your Drill installation folder.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cp target/*.jar  $DRILL_HOME/jars/3rdparty</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Restart drill.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="run-"></a>Run !<a class="hash-link" href="#run-" title="Direct link to heading">#</a></h3><p>You should now be able to use your function in your queries:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT MASK(first_name, &#x27;*&#x27; , 3) FIRST , MASK(last_name, &#x27;#&#x27;, 7) LAST  FROM cp.`employee.json` LIMIT 5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|  FIRST   |    LAST    |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***ri    | ######     |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***rick  | #######    |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***hael  | ######     |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***a     | #######ez  |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">| ***erta  | #######    |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+------------+</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>In this simple project you have learned how to write, deploy and use a custom Apache Drill Function. You can now extend this to create your own function.</p><p>One important thing to remember when extending Apache Drill (using a custom function, storage plugin or format), is that Drill runtime is generating dynamically lot of code. This means you may have to use a very specific pattern when writing and deploying your extensions. With our basic function this meant we had to:</p><ul><li>deploy <strong>classes AND sources</strong></li><li>use <strong>fully Qualified Class Names</strong></li><li>use value holder classes and helper methods to manipulate parameters</li><li></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2015/04/21/mongodb-playing-with-arrays">MongoDB : Playing with Arrays</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2015-04-21T00:00:00.000Z" itemprop="datePublished">April 21, 2015</time> Â· 7 min read</div></header><div class="markdown" itemprop="articleBody"><p>As you know,  you have many differences between relational and document databases. The biggest, for the developer, is probably the data model: Row versus Document. This is particularly true when we talk about &quot;relations&quot; versus &quot;embedded documents <em>(or values)</em>&quot;. Let&#x27;s look at some examples, then see what are the various operations provided by MongoDB to help you to deal with this.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--3 text--right"><a aria-label="Read more about MongoDB : Playing with Arrays" href="/blog/2015/04/21/mongodb-playing-with-arrays"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog"><div class="pagination-nav__label">Â« Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/page/3"><div class="pagination-nav__label">Older Entries Â»</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/tgrall" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/tugdualgrall/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/tgrall/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tgrall" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2003 - 2021 Tugdual Grall built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bfa5f292.js"></script>
<script src="/assets/js/main.f5c6966c.js"></script>
</body>
</html>