<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tug&#39;s Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tug&#39;s Site Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-1520374-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Oracle BPEL: Debugging &#x27;internal&#x27; SOAP Messages | Tug&#x27;s Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tgrall.github.io/blog/2006/04/23/oracle-bpel-debugging-internal-soap-messages"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Oracle BPEL: Debugging &#x27;internal&#x27; SOAP Messages | Tug&#x27;s Site"><meta data-react-helmet="true" name="description" content="When you develop applications"><meta data-react-helmet="true" property="og:description" content="When you develop applications"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2006-04-23T00:00:00.000Z"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tgrall.github.io/blog/2006/04/23/oracle-bpel-debugging-internal-soap-messages"><link data-react-helmet="true" rel="alternate" href="https://tgrall.github.io/blog/2006/04/23/oracle-bpel-debugging-internal-soap-messages" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tgrall.github.io/blog/2006/04/23/oracle-bpel-debugging-internal-soap-messages" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.acbe81c6.css">
<link rel="preload" href="/assets/js/runtime~main.564067c1.js" as="script">
<link rel="preload" href="/assets/js/main.7caf5907.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Tug&#x27;s Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://windr.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Windsurfing App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/tgrall/tgrall.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/10/30/how-to-write-a-github-action">How to Write Custom GitHub Action (Part 1/2)</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2020/05/16/simple-caching-service-with-redis">Simple caching service with Redis</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2020/01/02/how-to-use-ssl-slash-tls-with-redis-enterprise">How to use SSL/TLS with Redis Enterprise</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/09/19/redis-rolling-upgrade-on-pivotal-cloud-foundry-pcf">Redis Rolling Upgrade on Pivotal Cloud Foundry (PCF)</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/09/04/multi-nodes-redis-cluster-with-docker">Multi-Nodes Redis Cluster with Docker</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Oracle BPEL: Debugging &#x27;internal&#x27; SOAP Messages</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2006-04-23T00:00:00.000Z" itemprop="datePublished">April 23, 2006</time> Â· 4 min read</div></header><div class="markdown" itemprop="articleBody"><p>When you develop applications
that use SOAP based Web Services you very often use an HTTP proxy to
capture the request and response that are exchanged between the clients
and servers. For this you can use the Oracle HTTP Analyzer that is part
of the toolset of Oracle JDeveloper, Axis TCP Monitor, or a packaged
version of it that you have with Oracle BPEL Process Manager.</p><p>BPELs are making extensive usage of SOAP messages, and it could be
interesting to debug the different call to the partnerlinks. Oracle
BPEL PM, to avoid HTTP calls and make optimized SOAP message when the
partnerlink that you are invoking is deployed as a BPEL. So in the
default configuration you do not see the different calls. In this
article I explain how you can configure the server to be able to do it.</p><p>For this I will be using:</p><ul><li>Oracle BPEL Process Manager developer install running in an OC4J 10g Stand Alone (10.1.2.0.2)</li><li>obtunnel, that is a package version of Axis TCP Monitor located in <code>&amp;lt;BPEL_HOME&amp;gt;\bin\obtunnel.bat</code></li><li>LoanFlow demo that you can install in 2 steps:</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="starting-the-oralce-bpel-tunneling-tool"></a>Starting the Oralce BPEL Tunneling tool:<a class="hash-link" href="#starting-the-oralce-bpel-tunneling-tool" title="Direct link to heading">#</a></h4><p>Just run the command <code>&amp;lt;BPEL_HOME&amp;gt;\bin\obtunnel.bat</code> You will see the following application:</p><p><img src="http://static.flickr.com/46/133968437_aa0d5804f6_o.png"></p><p>By default the TCPMonitor launched from BPEL listens on the port 1234
and proxies for the default Oracle BPEL port 9700. So in this context
you will capture all the requests is you access the server on the port
1234.</p><p>It is not sufficiant here since the different partnerlinks endpoint are
not dynamique and are set to the port 9700. So in this case you wont&#x27;s
see the request coming from the BPEL to a local partner link (and I am
not talking about the SOAP Optimization yet).</p><p>One way that I use to work around this issue in development <em>--maybe we have more simple
solutions, but this is the one that I use--</em> is to change
the port of the OC4J and make the proxy listening on the port 9700. In
this case you will be able to capture the requests made from BPEL to
its partnerlinks.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="changing-the-port-of-oc4j-and-the-tcp-monitor"></a>Changing the Port of OC4J and the TCP Monitor<a class="hash-link" href="#changing-the-port-of-oc4j-and-the-tcp-monitor" title="Direct link to heading">#</a></h4><p><em>I. Change the HTTP port of OC4J used by BPEL</em></p><ol><li>Open <code>&amp;lt;BPEL_HOME&amp;gt;\system\appserver\oc4j\j2ee\home\config\http-web-site.xml</code></li><li>Edit the <code>port</code> attribute of the root element <code>web-site</code> to enter a different value</li></ol><p>eg: <code>&amp;lt;web-site port=&quot;9701&quot;...</code>.  Stop your BPEL Process Manager</p><p><em>II. Start a new TCPMonitor on port 9700</em></p><ol><li>In the TCPMonitor sceen click on the Admin Tab</li><li>Enter 9700 for the &quot;Listen Port #&quot; field (since we want to be sure the partnerlinks are called correctly)</li><li>Enter 9701 (or the value you entered for the HTTP port) for &quot;Target Port #&quot;.</li><li>Click Add</li><li>Click on the new tab &quot;Port 9700&quot;. If you have an error message like &quot;<em>java.net.BindException: Address Already in use: JVM_Bind</em>&quot; this is simply because your BPEL process manager is not stopped. In this case stop the BPEL server, and start the TCPMonitor by clicking the Start button.</li></ol><p><em>III. Restart you BPEL Server</em></p><p>Nothing special here you just need to start your server, and check that the BPEL PM is now listening on the HTTP port that you have entered, in my case 9701:</p><ul><li><code>http://localhost:9701/BPELConsole</code></li></ul><p>You can now go on the test page of the LoanFlow process (either on the port 9700 or 9701) and invoke the process. I am using 9701 since I want to capture the calls make by the Business Process to its partnerlinks.</p><p>You can see some HTTP activities in your TCPMonitor, but if you look in
details you only see request to the different WSDLs used by the
LoanFlow...</p><p>I was like you expecting to be able to see the different SOAP requests
and response, but BPEL does some optimization around local SOAP calls.
So to be able to capture these requests you just need to turn of this
optimization.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="turning-off-the-soap-shortcut"></a>Turning Off the SOAP Shortcut<a class="hash-link" href="#turning-off-the-soap-shortcut" title="Direct link to heading">#</a></h4><ol><li>In the BPEL console, click on the &quot;<em>Manage BPEL Domain</em>&quot; link (topright)</li><li>You arrive in the configuration tab, look for the <code>optSoapShortcut</code> property and set it to <code>false</code>.</li><li>Click <code>Apply</code> You can now go on the test page of the LoanFlow process (either on the port 9700 or 9701) and invoke the process. I am using 9701 since I want to capture the calls make by the Business Process to its partnerlinks.</li></ol><p>Now you can see all the SOAP requests and responses between the LoanFlow BPEL and its partnerlinks.</p><p><img src="http://static.flickr.com/46/133968438_d0dc761af0.jpg?v=0"></p><p><img src="http://static.flickr.com/46/133968438_d0dc761af0_o.png"></p><p><em>Update on 08/02/2007</em></p><p>For people that are currently using <strong>Oracle BPEL 10.1.3.1</strong> the <em>optSoapShortcut</em> is not visible anymore in the console, but it is still possible to configure this by adding it manually in the domain configuration file available at:</p><p><code>$BPEL_HOME/domains/&lt;domain&gt;/config/domain.xml</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2006/05/03/grails-on-oracle-oracleas-and-oraclexe"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Grails on Oracle (OracleAS and OracleXE)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2006/03/23/google-data-apis"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Google Data APIs Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/tgrall" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/tugdualgrall/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/tgrall/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tgrall" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2003 - 2021 Tugdual Grall built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.564067c1.js"></script>
<script src="/assets/js/main.7caf5907.js"></script>
</body>
</html>