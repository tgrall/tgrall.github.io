(self.webpackChunktgrall_blog=self.webpackChunktgrall_blog||[]).push([[62990],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=a,f=m["".concat(s,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},24969:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},assets:function(){return u},toc:function(){return p},default:function(){return d}});var r=n(22122),a=n(19756),o=(n(67294),n(3905)),i=["components"],l={title:"Groovy 101: Importing XML in your database",categories:"groovy"},s=void 0,c={permalink:"/blog/2007/02/18/groovy-101-importing-xml-in-your-database",editUrl:"https://github.dev/tgrall/tgrall.github.io/blob/main/blog/2007-02-18-groovy-101-importing-xml-in-your-database.md",source:"@site/blog/2007-02-18-groovy-101-importing-xml-in-your-database.md",title:"Groovy 101: Importing XML in your database",description:"A friend of mine was looking for an easy way to import some XML content in his database. You have many ways to do it. But the easiest for a Java/Groovy developer is to use Groovy, and I have create this small example for him.",date:"2007-02-18T00:00:00.000Z",formattedDate:"February 18, 2007",tags:[],readingTime:1.325,truncated:!1,authors:[],prevItem:{title:"Groovy 101: Extracting XML from your database",permalink:"/blog/2007/02/20/groovy-101-extracting-xml-from-your-database"},nextItem:{title:"Oracle Application Server 10gR3: iHat",permalink:"/blog/2007/02/15/oracle-application-server-10gr3-ihat"}},u={authorsImageUrls:[]},p=[],m={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"A friend of mine was looking for an easy way to import some XML content in his database. You have many ways to do it. But the easiest for a Java/Groovy developer is to use Groovy, and I have create this small example for him."),(0,o.kt)("p",null,"Groovy provides really simple solution to parse XML and manipulate your database. The following sample reads an RSS new feed and import the title and link in a table named NEWS that contains two columns TITLE and LINK."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-groovy"},'import groovy.sql.Sql;\n\ndef rssFeed = "http://www.javablogs.com/ViewDaysBlogs.action?view=rss";\ndef xmlFeed      = new XmlParser().parse(rssFeed);\n\ndef sql = Sql.newInstance("jdbc:oracle:thin:@//tgrall-linux:1521/XE",\n"GROOVY",\n"GROOVY",\n"oracle.jdbc.driver.OracleDriver")\ndef set = sql.dataSet("NEWS");\n\n(0..&lt; xmlFeed.channel.item.size()).each {\n  def item = xmlFeed.channel.item.get(it);\n  def title = item.title.value[0];\n  def link = item.link.value[0];\n  println("Importing $title ...");\n  set.add(TITLE: title, LINK: link);\n}\n\n')),(0,o.kt)("p",null,"First I create a Groovy SQL object and a DataSet to manipulate my data ",(0,o.kt)("inlineCode",{parentName:"p"},'sql.dataSet("NEWS")'),". Do not forget, if like me you are using Oracle database, to add the Oracle JDBC driver to your classpath ;-)"),(0,o.kt)("p",null,"Then I create a loop on each items of the RSS feed I am using: ",(0,o.kt)("inlineCode",{parentName:"p"},"(0..&gt; xmlFeed.channel.item.size()).each {...}"),". As you see, Groovy XML help me to parse, and navigate the XML document."),(0,o.kt)("p",null,'Like any Groovy iterator you have access to an implicit object available in the loop "',(0,o.kt)("inlineCode",{parentName:"p"},"it"),'", so I can get the item using the Groovy XML : ',(0,o.kt)("inlineCode",{parentName:"p"},"xmlFeed.channel.item.get(it)")),(0,o.kt)("p",null,"Then you can get the different values you want of the  item element.Using the dataset.add method, you can insert them in the table.This is done using the  value pairs notation ",(0,o.kt)("em",{parentName:"p"},"column:value"),", this looks like: ",(0,o.kt)("inlineCode",{parentName:"p"},"set.add(TITLE: title, LINK: link)")))}d.isMDXComponent=!0}}]);