"use strict";(self.webpackChunktgrall_blog=self.webpackChunktgrall_blog||[]).push([[60497],{3905:(e,t,r)=>{r.d(t,{Zo:()=>i,kt:()=>f});var o=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=o.createContext({}),u=function(e){var t=o.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},i=function(e){var t=u(e.components);return o.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),d=u(r),f=n,m=d["".concat(c,".").concat(f)]||d[f]||s[f]||a;return r?o.createElement(m,p(p({ref:t},i),{},{components:r})):o.createElement(m,p({ref:t},i))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,p=new Array(a);p[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,p[1]=l;for(var u=2;u<a;u++)p[u]=r[u];return o.createElement.apply(null,p)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},57894:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>s,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var o=r(87462),n=(r(67294),r(3905));const a={title:"OmniPortlet tip: use stored procedure with the SQL data source"},p=void 0,l={permalink:"/blog/2003/11/19/omniportlet-tip-use-stored-procedure-with-the-sql-data-source",editUrl:"https://github.dev/tgrall/tgrall.github.io/blob/main/blog/2003-11-19-omniportlet-tip-use-stored-procedure-with-the-sql-data-source.md",source:"@site/blog/2003-11-19-omniportlet-tip-use-stored-procedure-with-the-sql-data-source.md",title:"OmniPortlet tip: use stored procedure with the SQL data source",description:"OmniPortlet provides to page designer an easy and powerful way to publish",date:"2003-11-19T00:00:00.000Z",formattedDate:"November 19, 2003",tags:[],readingTime:1.195,hasTruncateMarker:!1,authors:[],frontMatter:{title:"OmniPortlet tip: use stored procedure with the SQL data source"},prevItem:{title:"Do not remember the default password... here a list...",permalink:"/blog/2004/01/26/do-not-remember-the-default-password-dot-dot-dot-here-a-list-dot-dot-dot"},nextItem:{title:"How to configure Web Cache to cache remote portlet content",permalink:"/blog/2003/11/16/how-to-configure-web-cache-to-cache-remote-portlet-content"}},c={authorsImageUrls:[]},u=[],i={toc:u};function s(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},i,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"OmniPortlet provides to page designer an easy and powerful way to publish\ncontent from different data sources. One of the data source is a SQL data source\nthat allow you to connect to a relational database using JDBC. Obviously you can\nenter any SQL statement, but you can also consume a REF CURSOT returned by a\nprocedure."),(0,n.kt)("p",null,"That is really interesting if you want to add business logic to your data,or\nhave to set some specific code before the execution of the query."),(0,n.kt)("p",null,"To to it you have to create a ",(0,n.kt)("b",null,"procedure")," that has the first parameter the\nreturn a ref cursor:\n",(0,n.kt)("inlineCode",{parentName:"p"},"procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number);")),(0,n.kt)("p",null,"Here a complete package based on the SCOTT sample schema:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"}," create or replace package EMPLOYEE_API\n as\n -- create a ref cursor type that will be return to the consumer\n type ref_cursor is ref cursor;\n\n -- return in the p_ref_cursor the list of employees for the department p_dept\n\n procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number);\n end;\n create or replace package body EMPLOYEE_API\n as\n -- return in the p_ref_cursor the list of employees for the department p_dept\n procedure get_employee_for_dept(p_ref_cursor out ref_cursor, p_dept in number)\n as\n begin\n  -- open the cusor based on the emp table\n\n  OPEN p_ref_cursor FOR\n  SELECT * from emp WHERE deptno = p_dept;\n end;\n\n end;\n")),(0,n.kt)("p",null,"In the Statement field of the OmniPortlet SQL data source you can now enter:"),(0,n.kt)("span",{class:"code"},"call EMPLOYEE_API.get_employee_for_dept('10')"),(0,n.kt)("p",null,"Enjoy OmniPortlet !"))}s.isMDXComponent=!0}}]);